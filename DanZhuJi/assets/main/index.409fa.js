System.register("chunks:///_virtual/AnimatedWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs"],(function(n){var t,e,i,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n.tween},function(n){o=n.Window}],execute:function(){e._RF.push({},"1a050RGPYZIa54BWep5bcEC","AnimatedWindow",void 0);n("AnimatedWindow",function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.onInit=function(){this.center()},o.doShowAnimation=function(){var n=this,t=1,e=1;this.contentPane.setScale(.5,.5),this.contentPane.alpha=1,i(this.contentPane).to(.3,{scaleX:t,scaleY:e},{easing:"backOut"}).call((function(){n.onShown()})).start()},o.doHideAnimation=function(){var n=this;i(this.contentPane).to(.2,{scaleX:.5,scaleY:.5,alpha:0},{easing:"backIn"}).call((function(){n.hideImmediately()})).start()},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/BallPhysicsConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigBase.ts"],(function(t){var n,r,i;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy},function(t){i=t.default}],execute:function(){r._RF.push({},"72f16Hyvz5DiYYOO0dKupgn","BallPhysicsConfig",void 0);var e=t("BallPhysicsConfig",function(t){function r(){for(var n,r=arguments.length,i=new Array(r),e=0;e<r;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).friction=1,n.linearDamping=5,n.angularDamping=0,n.restitution=5,n.gravityY=13e3,n.rewardSlowdownFactor=5,n.rewardRestitution=1,n.rewardFriction=50,n.rewardLinearDamping=150,n.rewardAngularDamping=150,n.stopVelocityThreshold=50,n.ballMass=50,n.minChargePower=150,n.maxChargePower=600,n.customLaunchForce=-1,n}n(r,t);var i=r.prototype;return i.getFriction=function(){return this.friction/10},i.getLinearDamping=function(){return this.linearDamping/10},i.getAngularDamping=function(){return this.angularDamping/10},i.getRestitution=function(){return this.restitution/10},i.getGravityY=function(){return-this.gravityY/10},i.getRewardSlowdownFactor=function(){return this.rewardSlowdownFactor/10},i.getRewardRestitution=function(){return this.rewardRestitution/10},i.getRewardFriction=function(){return this.rewardFriction/10},i.getRewardLinearDamping=function(){return this.rewardLinearDamping/10},i.getRewardAngularDamping=function(){return this.rewardAngularDamping/10},i.getStopVelocityThreshold=function(){return this.stopVelocityThreshold/10},i.getBallMass=function(){return this.ballMass/10},i.getMinChargePower=function(){return this.minChargePower},i.getMaxChargePower=function(){return this.maxChargePower},i.getCustomLaunchForce=function(){return this.customLaunchForce},i.setCustomLaunchForce=function(t){this.customLaunchForce=t},i.clearCustomLaunchForce=function(){this.customLaunchForce=-1},r}(i));t("ballPhysicsConfig",new e);r._RF.pop()}}}));

System.register("chunks:///_virtual/CenteredWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs"],(function(n){var e,t,i;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){i=n.Window}],execute:function(){t._RF.push({},"8cf1b8kvQhAS7wDO0DIAKbm","CenteredWindow",void 0);n("CenteredWindow",function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.onInit=function(){this.center()},t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonExport.ts",["cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(o){var n;return{setters:[function(c){n=c.cclegacy,o("cc",c)},function(n){o("drongoCC",n)},function(n){o("fgui",n)},function(n){o("drongoGui",n)}],execute:function(){n._RF.push({},"2a54bPglDFEaKMITwv2aDNG","CommonExport",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigBase.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6aa16Nf6rJP87ezxWaLdhoO","ConfigBase",void 0);t("default",function(){function t(){}return t.prototype.init=function(t){var e=this;t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.hasOwnProperty(n)&&(e[n]=t[n])}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(n){var e,t,r,s,i,o,a,u,c;return{setters:[function(n){e=n.inheritsLoose,t=n.createForOfIteratorHelperLoose,r=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){i=n.cclegacy,o=n.JsonAsset},function(n){a=n.autoBindToWindow,u=n.instance_base,c=n.asset}],execute:function(){var f;i._RF.push({},"ab49fwHf11ArqXDrPGKAbkd","ConfigMgr",void 0);var g=a(f=function(n){function i(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))||this).configs=new Map,e.configAssets=new Map,e}e(i,n);var a=i.prototype;return a.loadConfig=function(){var n=r(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.name,!this.configs.has(t)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,c.get("Config/"+t,o,null);case 5:r=n.sent,this.initConfig(e,r);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.initConfig=function(n,e){var t=n.name,r=new Map;for(var s in e.json){var i=e.json[s],o=new n;o.init(i),r.set(parseInt(s),o)}e.decRef(),this.configs.set(t,r)},a.initConfigs=function(){var n=r(s().mark((function n(e){var r,i,a,u,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.get_dir(e,o,null);case 2:for(r=n.sent,i=t(r);!(a=i()).done;)u=a.value,f=u.name.replace(".json",""),this.configAssets.set(f,u);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.getConfig=function(n,e){var t=n.name,r=this.configAssets.get(t);r&&(this.initConfig(n,r),this.configAssets.delete(t));var s=this.configs.get(t);return s?s.get(e):null},a.getAllConfigs=function(n){var e=n.name,t=this.configAssets.get(e);t&&(this.initConfig(n,t),this.configAssets.delete(e));var r=this.configs.get(e);return r||null},a.queryOne=function(n,e){for(var r,s=this.getAllConfigs(n),i=t(s.values());!(r=i()).done;){var o=r.value;if(e(o))return o}return null},a.queryAll=function(n,e){for(var r,s=this.getAllConfigs(n),i=[],o=t(s.values());!(r=o()).done;){var a=r.value;e(a)&&i.push(a)}return i},i}(u))||f;n("configMgr",g.instance());i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Button1_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Button1.ts"],(function(t){var n,o,e,u,i;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy},function(t){e=t.addLogic,u=t.GUILogicBase},function(t){i=t.default}],execute:function(){var c;o._RF.push({},"4aad1cgWUdM1ZavtU36SpjC","Game_Button1_Logic",void 0);t("default",e(i)(c=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.onLoad=function(){},o}(u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Button1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var n,e,o,r,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.UIPackage,r=t.GButton},function(t){u=t.vm}],execute:function(){var i,c;e._RF.push({},"b75d4LUaD9HhqzbhxMAg1rq","Game_Button1",void 0);t("default",u(((c=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this).m_bg=void 0,n}return n(e,t),e.createInstance=function(){return o.createObject("Game","Button1")},e.prototype.onConstruct=function(){this.m_bg=this.getChild("bg")},e}(r)).URL="ui://6gpz43l1rrit4",c.Dependencies=["Game"],i=c))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Component1_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Component1.ts"],(function(n){var i,t,a,e,o,r;return{setters:[function(n){i=n.inheritsLoose},function(n){t=n.cclegacy,a=n.tween},function(n){e=n.addLogic,o=n.GUILogicBase},function(n){r=n.default}],execute:function(){var s;t._RF.push({},"a34e2J/d21FCbTqj1cjlz8b","Game_Component1_Logic",void 0);n("default",e(r)(s=function(n){function t(){for(var i,t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];return(i=n.call.apply(n,[this].concat(a))||this)._lastEnergy=null,i._animLabelOriginY=-1,i}i(t,n);var e=t.prototype;return e.playEnergyAnimation=function(n){if(-1==this._animLabelOriginY)return this.UI.m_animaNum&&(this._animLabelOriginY=this.UI.m_animaNum.y,this.UI.m_animaNum.alpha=0),void(this._lastEnergy=n);if(null!==this._lastEnergy&&this._lastEnergy!==n){var i=n-this._lastEnergy;this._playAnimation(i)}this._lastEnergy=n},e._playAnimation=function(n){var i=this.UI.m_animaNum;i&&(i.text=n>0?"+"+n:""+n,i.alpha=1,i.y=this._animLabelOriginY,i.node&&(a(i.node).stop(),a(i).to(1,{y:this._animLabelOriginY+30,alpha:0},{easing:"quadOut"}).start()))},t}(o))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Component1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(n){var e,t,o,i,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){o=n.UIPackage,i=n.GLabel},function(n){c=n.vm}],execute:function(){var r,a;t._RF.push({},"51db9iBev9O7pQAX9MyH1/v","Game_Component1",void 0);n("default",c(((a=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))||this).m_c1=void 0,e.m_animaNum=void 0,e}return e(t,n),t.createInstance=function(){return o.createObject("Game","Component1")},t.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_animaNum=this.getChild("animaNum")},t}(i)).URL="ui://6gpz43l1s4l6w",a.Dependencies=["Game"],r=a))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GamePage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_GamePage.ts","./GameDataMgr.ts","./drongo-cc.mjs","./Game_RulePage.ts","./CenteredWindow.ts","./Game_Component1_Logic.ts"],(function(n){var e,t,a,i,o,r,c,u,g,s,m,f;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){a=n.addLogic,i=n.GBind,o=n.GUIManager,r=n.GUILogicBase},function(n){c=n.default},function(n){u=n.gameDataMgr},function(n){g=n.log},function(n){s=n.default},function(n){m=n.CenteredWindow},function(n){f=n.default}],execute:function(){var l,d;t._RF.push({},"a3b4fr3dmVDJrKzBu9AkVDv","Game_GamePage_Logic",void 0);n("default",a(c)(((d=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.onLoad=function(){var n=this;g("[Game_GamePage_Logic] åˆå§‹åŒ–æ¸¸æˆé¡µé¢UI"),i(this.UI.m_tili,u.dLocalData,(function(n){return n.energy})).setFormatFunc((function(e){return n.UI.m_tili.Get(f).playEnergyAnimation(e),u.dLocalData.energy+"/"+u.dLocalData.energyDaily})).bindTarget(this),i(this.UI.m_jifen,u.dLocalData,(function(n){return n.currentPoints})).setFormatFunc((function(e){return n.UI.m_jifen.Get(f).playEnergyAnimation(e),""+e})).bindTarget(this),this.UI.m_rule.onClick((function(){g("[Game_GamePage_Logic] æ‰“å¼€è§„åˆ™é¡µé¢"),o.open(s)})),g("[Game_GamePage_Logic] UIç»‘å®šå®Œæˆ")},t}(r)).uiOptions={windowCls:m},l=d))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GamePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,i,n,o,r;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){n=e.UIPackage,o=e.GComponent},function(e){r=e.vm}],execute:function(){var c,u;i._RF.push({},"3c5e6BDAL9NpIh6Ie90IOcm","Game_GamePage",void 0);e("default",r(((u=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).m_tili=void 0,t.m_jifen=void 0,t.m_rule=void 0,t}return t(i,e),i.createInstance=function(){return n.createObject("Game","GamePage")},i.prototype.onConstruct=function(){this.m_tili=this.getChild("tili"),this.m_jifen=this.getChild("jifen"),this.m_rule=this.getChild("rule")},i}(o)).URL="ui://6gpz43l1s4l6v",u.Dependencies=["Game"],c=u))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_RewardPage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_RewardPage.ts","./drongo-cc.mjs","./AnimatedWindow.ts"],(function(e){var a,n,t,o,i,c,s,r,u,g,l;return{setters:[function(e){a=e.inheritsLoose},function(e){n=e.cclegacy,t=e.tween,o=e.director},function(e){i=e.addLogic,c=e.AudioUtil,s=e.GUIManager,r=e.GUILogicBase},function(e){u=e.default},function(e){g=e.log},function(e){l=e.AnimatedWindow}],execute:function(){var d,m;n._RF.push({},"a03e4giReBLgqcGNXbypdos","Game_RewardPage_Logic",void 0);var _=e("REWARD_PAGE_CLOSED_EVENT","reward-page-closed");e("default",i(u)(((m=function(e){function n(){for(var a,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return(a=e.call.apply(e,[this].concat(t))||this).rewardPoints=0,a}a(n,e);var i=n.prototype;return i.onLoad=function(){var e=this;this.UI.m_btn.onClick((function(){return e.onClose()}))},i.show=function(e,a){this.rewardPoints=e,a?(this.UI.m_num.text="+"+e,c.playSound("Game","get"),g("[Game_RewardPage_Logic] æ˜¾ç¤ºèƒœåˆ©å¥–åŠ±:",e)):(this.UI.m_num.text="0",g("[Game_RewardPage_Logic] æ˜¾ç¤ºå¤±è´¥ç»“æœ")),this.playNumberAnimation()},i.playNumberAnimation=function(){var e=this.UI.m_num,a={x:e.scaleX,y:e.scaleY};e.setScale(0,0),t(e).to(.2,{scaleX:1.3*a.x,scaleY:1.3*a.y},{easing:"backOut"}).to(.15,{scaleX:.9*a.x,scaleY:.9*a.y},{easing:"sineIn"}).to(.1,{scaleX:a.x,scaleY:a.y},{easing:"sineOut"}).start(),g("[Game_RewardPage_Logic] æ’­æ”¾æ•°å­—è·³åŠ¨åŠ¨ç”»")},i.onClose=function(){g("[Game_RewardPage_Logic] å…³é—­å¥–åŠ±å¼¹æ¡†"),s.close(u);var e=o.getScene();e&&(e.emit(_),g("[Game_RewardPage_Logic] å·²å‘é€æ¸¸æˆé‡ç½®äº‹ä»¶"))},n}(r)).uiOptions={modal:!0,windowCls:l},d=m))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_RewardPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var n,t,i,r,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){i=e.UIPackage,r=e.GComponent},function(e){o=e.vm}],execute:function(){var u,a;t._RF.push({},"263f6b79s5ES4STyOIqrS8q","Game_RewardPage",void 0);e("default",o(((a=function(e){function t(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(n=e.call.apply(e,[this].concat(i))||this).m_btn=void 0,n.m_num=void 0,n}return n(t,e),t.createInstance=function(){return i.createObject("Game","RewardPage")},t.prototype.onConstruct=function(){this.m_btn=this.getChild("btn"),this.m_num=this.getChild("num")},t}(r)).URL="ui://6gpz43l1s4l61k",a.Dependencies=["Game"],u=a))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_RulePage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_RulePage.ts","./drongo-cc.mjs","./CenteredWindow.ts","./Game_GamePage.ts","./GameView.ts"],(function(e){var i,a,n,o,t,c,g,u,l,r,s;return{setters:[function(e){i=e.inheritsLoose},function(e){a=e.cclegacy,n=e.director},function(e){o=e.addLogic,t=e.GUIManager,c=e.GUILogicBase},function(e){g=e.default},function(e){u=e.log},function(e){l=e.CenteredWindow},function(e){r=e.default},function(e){s=e.GameView}],execute:function(){var m,d;a._RF.push({},"c775do6Pj1Lv4/yrM4iku4y","Game_RulePage_Logic",void 0);e("default",o(g)(((d=function(e){function a(){for(var i,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(i=e.call.apply(e,[this].concat(n))||this).gameViewNode=null,i.gamePageUI=null,i}i(a,e);var o=a.prototype;return o.start=function(){var e=n.getScene();if(e){var i,a=null==(i=e.getChildByName("Canvas"))||null==(i=i.getComponentInChildren(s))?void 0:i.node;a&&(this.gameViewNode=a,a.active=!1,u("[Game_RulePage_Logic] å·²éšè— GameView èŠ‚ç‚¹"))}var o=t.getUI(r);o&&(this.gamePageUI=o,o.visible=!1,u("[Game_RulePage_Logic] å·²éšè— Game_GamePage ç•Œé¢"))},o.onLoad=function(){var e=this;this.UI.m_back.onClick((function(){u("[Game_RulePage_Logic] å…³é—­è§„åˆ™é¡µé¢"),e.restoreHiddenUI(),t.close(g)})),this.UI.m_goplay.onClick((function(){u("[Game_RulePage_Logic] å…³é—­è§„åˆ™é¡µé¢å¹¶å¼€å§‹æ¸¸æˆ"),e.restoreHiddenUI(),t.close(g)}))},o.restoreHiddenUI=function(){this.gameViewNode&&(this.gameViewNode.active=!0,u("[Game_RulePage_Logic] å·²æ¢å¤ GameView èŠ‚ç‚¹")),this.gamePageUI&&(this.gamePageUI.visible=!0,u("[Game_RulePage_Logic] å·²æ¢å¤ Game_GamePage ç•Œé¢"))},a}(c)).uiOptions={windowCls:l},m=d))||m);a._RF.pop()}}}));

System.register("chunks:///_virtual/Game_RulePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,o,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.UIPackage,i=e.GComponent},function(e){c=e.vm}],execute:function(){var r,a;n._RF.push({},"2945euFmzNKjIoWf1eI2uDE","Game_RulePage",void 0);e("default",c(((a=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).m_c1=void 0,t.m_c2=void 0,t.m_back=void 0,t.m_goplay=void 0,t}return t(n,e),n.createInstance=function(){return o.createObject("Game","RulePage")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_back=this.getChild("back"),this.m_goplay=this.getChild("goplay")},n}(i)).URL="ui://6gpz43l1s4l6y",a.Dependencies=["Game"],r=a))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_TestBtnView_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_TestBtnView.ts","./CenteredWindow.ts"],(function(t){var n,e,o,i,u,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.addLogic,i=t.GUILogicBase},function(t){u=t.default},function(t){c=t.CenteredWindow}],execute:function(){var r,s;e._RF.push({},"71b78roO39Bzr0r+aqRcJly","Game_TestBtnView_Logic",void 0);t("default",o(u)(((s=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){},e}(i)).uiOptions={modal:!0,windowCls:c},r=s))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_TestBtnView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,u;n._RF.push({},"fe5649sVwtN85QV/IP54OPH","Game_TestBtnView",void 0);t("default",c(((u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_title=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","TestBtnView")},n.prototype.onConstruct=function(){this.m_title=this.getChild("title")},n}(o)).URL="ui://6gpz43l1kqie5",u.Dependencies=["Game"],r=u))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_TestView_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_TestView.ts","./CenteredWindow.ts","./BallPhysicsConfig.ts","./drongo-cc.mjs"],(function(t){var i,n,e,s,o,r,u,a,c,h,l,f;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.PhysicsSystem2D,s=t.v2},function(t){o=t.addLogic,r=t.GBind,u=t.GUIManager,a=t.GUILogicBase},function(t){c=t.default},function(t){h=t.CenteredWindow},function(t){l=t.ballPhysicsConfig},function(t){f=t.log}],execute:function(){var d,g;n._RF.push({},"ab2da1RIshCX4+om21UWjgm","Game_TestView_Logic",void 0);t("default",o(c)(((g=function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var o=n.prototype;return o.onLoad=function(){var t=this;r(this.UI.m_zhonglishiliang,l,(function(t){return t.gravityY})).setReformatFunc((function(t){var i=-t/10;return e.instance.gravity=s(0,i),f("[TestView] é‡åŠ›å·²æ›´æ–°: "+i),t})).bindTarget(this),r(this.UI.m_xiaoqiuzhiliang,l,(function(t){return t.ballMass})).setReformatFunc((function(t){return f("[TestView] å°çƒè´¨é‡å·²æ›´æ–°: "+t/10+"ï¼ˆé‡ç½®æ¸¸æˆåç”Ÿæ•ˆï¼‰"),t})).bindTarget(this),r(this.UI.m_xishu,l,(function(t){return t.friction})).bindTarget(this),r(this.UI.m_tantiaoxishu,l,(function(t){return t.restitution})).bindTarget(this),r(this.UI.m_tingzhisuduyuzhi,l,(function(t){return t.stopVelocityThreshold})).bindTarget(this),r(this.UI.m_xianxingzhuni,l,(function(t){return t.linearDamping})).bindTarget(this),r(this.UI.m_jiangliJiansuxishu,l,(function(t){return t.rewardSlowdownFactor})).bindTarget(this),r(this.UI.m_jiangliMochali,l,(function(t){return t.rewardFriction})).bindTarget(this),r(this.UI.m_stop_tantiaoxishu,l,(function(t){return t.rewardRestitution})).bindTarget(this),r(this.UI.m_xulizuixiaozhi,l,(function(t){return t.minChargePower})).bindTarget(this),r(this.UI.m_xulizhuidazhi,l,(function(t){return t.maxChargePower})).bindTarget(this),this.updateForceInputDisplay(),this.UI.m_apply.onClick((function(){t.applyCustomForce()}),this),this.UI.m_close.onClick((function(){u.close(c)}),this)},o.updateForceInputDisplay=function(){var t=l.getCustomLaunchForce();this.UI.m_fashelidu.text=t>=0?t.toString():""},o.applyCustomForce=function(){var t=this.UI.m_fashelidu.text.trim();if(""===t||"0"===t)return l.clearCustomLaunchForce(),f("[TestView] å·²æ¸…é™¤è‡ªå®šä¹‰åŠ›åº¦ï¼Œæ¢å¤ä½¿ç”¨è“„åŠ›è®¡ç®—"),void(this.UI.m_fashelidu.text="");var i=parseFloat(t);if(isNaN(i))f("[TestView] é”™è¯¯ï¼šè¾“å…¥çš„åŠ›åº¦ä¸æ˜¯æœ‰æ•ˆæ•°å­—");else if(i<0)f("[TestView] é”™è¯¯ï¼šåŠ›åº¦ä¸èƒ½ä¸ºè´Ÿæ•°");else if(i>1e3)f("[TestView] è­¦å‘Šï¼šåŠ›åº¦è¿‡å¤§ï¼Œå·²é™åˆ¶ä¸º1000"),l.setCustomLaunchForce(1e3),this.UI.m_fashelidu.text="1000";else{var n=Math.round(100*i)/100;l.setCustomLaunchForce(n),this.UI.m_fashelidu.text=n.toString(),f("[TestView] å·²è®¾ç½®è‡ªå®šä¹‰å‘å°„åŠ›åº¦:",n)}},n}(a)).uiOptions={modal:!0,windowCls:h},d=g))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_TestView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(i){var t,h,s,n,u;return{setters:[function(i){t=i.inheritsLoose},function(i){h=i.cclegacy},function(i){s=i.UIPackage,n=i.GComponent},function(i){u=i.vm}],execute:function(){var a,e;h._RF.push({},"0a3ca8FJulAe5ZMu7vKbAAu","Game_TestView",void 0);i("default",u(((e=function(i){function h(){for(var t,h=arguments.length,s=new Array(h),n=0;n<h;n++)s[n]=arguments[n];return(t=i.call.apply(i,[this].concat(s))||this).m_zhonglishiliang=void 0,t.m_xishu=void 0,t.m_tantiaoxishu=void 0,t.m_close=void 0,t.m_stop_tantiaoxishu=void 0,t.m_xianxingzhuni=void 0,t.m_jiangliJiansuxishu=void 0,t.m_jiangliMochali=void 0,t.m_tingzhisuduyuzhi=void 0,t.m_xulizuixiaozhi=void 0,t.m_xulizhuidazhi=void 0,t.m_xiaoqiuzhiliang=void 0,t.m_fashelidu=void 0,t.m_apply=void 0,t}return t(h,i),h.createInstance=function(){return s.createObject("Game","TestView")},h.prototype.onConstruct=function(){this.m_zhonglishiliang=this.getChild("zhonglishiliang"),this.m_xishu=this.getChild("xishu"),this.m_tantiaoxishu=this.getChild("tantiaoxishu"),this.m_close=this.getChild("close"),this.m_stop_tantiaoxishu=this.getChild("stop_tantiaoxishu"),this.m_xianxingzhuni=this.getChild("xianxingzhuni"),this.m_jiangliJiansuxishu=this.getChild("jiangliJiansuxishu"),this.m_jiangliMochali=this.getChild("jiangliMochali"),this.m_tingzhisuduyuzhi=this.getChild("tingzhisuduyuzhi"),this.m_xulizuixiaozhi=this.getChild("xulizuixiaozhi"),this.m_xulizhuidazhi=this.getChild("xulizhuidazhi"),this.m_xiaoqiuzhiliang=this.getChild("xiaoqiuzhiliang"),this.m_fashelidu=this.getChild("fashelidu"),this.m_apply=this.getChild("apply")},h}(n)).URL="ui://6gpz43l1rrit0",e.Dependencies=["Game"],a=e))||a);h._RF.pop()}}}));

System.register("chunks:///_virtual/GameBinder.ts",["cc","./drongo-gui.mjs","./fairygui.mjs","./Game_TestBtnView.ts","./Game_TestView.ts","./Game_Button1.ts","./Game_RewardPage.ts","./Game_GamePage.ts","./Game_Component1.ts","./Game_RulePage.ts"],(function(t){var e,n,i,s,u,o,a,f,c,r;return{setters:[function(t){e=t.cclegacy},function(t){n=t.registerBinder},function(t){i=t.UIObjectFactory},function(t){s=t.default},function(t){u=t.default},function(t){o=t.default},function(t){a=t.default},function(t){f=t.default},function(t){c=t.default},function(t){r=t.default}],execute:function(){var d;e._RF.push({},"712ef7P9UFHk6bljEa7Hf4F","GameBinder",void 0);t("default",n(d=function(){function t(){}return t.prototype.bindAll=function(){i.setExtension(s.URL,s),i.setExtension(u.URL,u),i.setExtension(o.URL,o),i.setExtension(a.URL,a),i.setExtension(f.URL,f),i.setExtension(c.URL,c),i.setExtension(r.URL,r)},t}())||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){e({getCurrentGameMode:r,setGameMode:function(n){o=e("CURRENT_GAME_MODE",n),console.log("[GameConfig] æ¸¸æˆæ¨¡å¼å·²è®¾ç½®ä¸º:",t[n])},shouldUseMock:function(){return r()===t.RECORDING}}),n._RF.push({},"23423tnshFK3pPzTWEKrLra","GameConfig",void 0);var t=e("GameMode",function(e){return e[e.PLAYBACK=0]="PLAYBACK",e[e.RECORDING=1]="RECORDING",e}({})),o=e("CURRENT_GAME_MODE",t.PLAYBACK);function r(){return o}n._RF.pop()}}}));

System.register("chunks:///_virtual/GameDataMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./NetMgr.ts","./GameConfig.ts"],(function(t){var e,r,n,i,a,c,o,s,u;return{setters:[function(t){e=t.inheritsLoose,r=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){i=t.cclegacy},function(t){a=t.autoBindToWindow,c=t.log,o=t.instance_base},function(t){s=t.netMgr},function(t){u=t.shouldUseMock}],execute:function(){var l;i._RF.push({},"535f7nBgplA3oy5yp0L8+rO","GameDataMgr",void 0);var g=t("GameState",function(t){return t.IDLE="IDLE",t.READY="READY",t.PLAYING="PLAYING",t.REWARD="REWARD",t}({})),h=function(){this.currentPoints=0,this.energy=0,this.energyDaily=0},f=a(l=function(t){function i(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).config=null,e.currentMultiplierIndex=0,e.gameState=g.IDLE,e.dLocalData=new h,e}e(i,t);var a=i.prototype;return a.loadConfig=function(){var t=r(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c("[GameDataMgr] å¼€å§‹åŠ è½½æ¸¸æˆé…ç½®..."),!u()){t.next=13;break}return c("[GameDataMgr] [Mockæ¨¡å¼] ä½¿ç”¨æœ¬åœ°Mocké…ç½®"),this.config={current_points:9999,base_points_per_round:5,total_energy:999,current_energy:1,multiplier_list:[1,3,5,10],trac_list:[{id:1,rate:0},{id:2,rate:4},{id:3,rate:3},{id:4,rate:4},{id:5,rate:5},{id:6,rate:6},{id:7,rate:7}]},this.dLocalData.currentPoints=this.config.current_points,this.dLocalData.energy=this.config.current_energy,this.dLocalData.energyDaily=this.config.total_energy,this.currentMultiplierIndex=0,c("[GameDataMgr] âœ… [Mockæ¨¡å¼] é…ç½®åŠ è½½æˆåŠŸ"),c("[GameDataMgr] Mockç§¯åˆ†:",this.config.current_points),c("[GameDataMgr] Mockèƒ½é‡:",this.config.current_energy,"/",this.config.total_energy),c("[GameDataMgr] Mockå€ç‡:",this.config.multiplier_list),t.abrupt("return",!0);case 13:return t.next=15,s.getGameConfig();case 15:if(0!==(e=t.sent).code){t.next=29;break}return this.config=e.data,this.dLocalData.currentPoints=this.config.current_points,this.dLocalData.energy=this.config.current_energy,this.dLocalData.energyDaily=this.config.total_energy,this.currentMultiplierIndex=0,c("[GameDataMgr] âœ… é…ç½®åŠ è½½æˆåŠŸ"),c("[GameDataMgr] å½“å‰ç§¯åˆ†:",this.config.current_points),c("[GameDataMgr] å½“å‰èƒ½é‡:",this.config.current_energy),c("[GameDataMgr] æ”¯æŒå€ç‡:",this.config.multiplier_list),t.abrupt("return",!0);case 29:return c("[GameDataMgr] âŒ é…ç½®åŠ è½½å¤±è´¥:",e.msg),c("[GameDataMgr] âš ï¸ ä½¿ç”¨Mocké…ç½®ä½œä¸ºé™çº§æ–¹æ¡ˆ"),t.abrupt("return",!1);case 32:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.getConfig=function(){return this.config},a.getCurrentPointsNumber=function(){return this.dLocalData.currentPoints},a.getCurrentMultiplier=function(){return this.config&&0!==this.config.multiplier_list.length?this.config.multiplier_list[this.currentMultiplierIndex]:1},a.canIncreaseMultiplier=function(){return!!this.config&&this.currentMultiplierIndex<this.config.multiplier_list.length-1},a.canDecreaseMultiplier=function(){return this.currentMultiplierIndex>0},a.increaseMultiplier=function(){this.canIncreaseMultiplier()&&(this.currentMultiplierIndex++,c("[GameDataMgr] å€ç‡å¢åŠ è‡³:",this.getCurrentMultiplier()))},a.decreaseMultiplier=function(){this.canDecreaseMultiplier()&&(this.currentMultiplierIndex--,c("[GameDataMgr] å€ç‡å‡å°‘è‡³:",this.getCurrentMultiplier()))},a.getCurrentMultiplierIndex=function(){return this.currentMultiplierIndex},a.getCostPoints=function(){return this.config?this.config.base_points_per_round*this.getCurrentMultiplier():0},a.canStartGame=function(){if(!this.config)return!1;if(this.gameState!==g.IDLE)return!1;if(this.dLocalData.energy<=0)return c("[GameDataMgr] èƒ½é‡ä¸è¶³ï¼Œæ— æ³•å¼€å§‹æ¸¸æˆ"),!1;var t=this.getCostPoints();return!(this.dLocalData.currentPoints<t)||(c("[GameDataMgr] ç§¯åˆ†ä¸è¶³ï¼Œæ— æ³•å¼€å§‹æ¸¸æˆ"),!1)},a.updateAfterGameResult=function(t){t&&(this.dLocalData.currentPoints=t.current_points||0,this.dLocalData.energy=t.current_energy,this.dLocalData.energyDaily=t.total_energy,c("[GameDataMgr] æ¸¸æˆç»“æœæ›´æ–°:"),c("  - æ¸¸æˆå‰ç§¯åˆ†:",t.before_points),c("  - æ¸¸æˆåç§¯åˆ†:",t.current_points),c("  - æ¶ˆè€—ç§¯åˆ†:",t.deducted_points),c("  - å‰©ä½™èƒ½é‡:",this.dLocalData.energy,"/",this.dLocalData.energyDaily),c("  - è¿›å…¥èµ›é“:",t.win_trac_id),c("  - èµ¢å¾—ç§¯åˆ†:",t.win_points,"(",0===t.win_points?"å¤±è´¥":"èƒœåˆ©",")"))},a.resetToIdle=function(){this.gameState=g.IDLE,c("[GameDataMgr] çŠ¶æ€é‡ç½®ä¸º IDLE")},i}(o))||l;t("gameDataMgr",f.instance());i._RF.pop()}}}));

System.register("chunks:///_virtual/GameView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./ToastUtil.ts","./BallPhysicsConfig.ts","./drongo-gui.mjs","./Game_TestView.ts","./TrajectoryRecorder.ts","./TrajectoryPlayer.ts","./TrajectoryData.ts","./GameDataMgr.ts","./NetMgr.ts","./MultiplierControl.ts","./Game_RewardPage.ts","./Game_RewardPage_Logic.ts","./Game_GamePage.ts","./GameConfig.ts","./UIUtil.ts","./RewardScoreAnimator.ts","./ToyControlInterface.ts"],(function(e){var t,i,a,n,r,o,l,s,c,h,u,d,m,p,w,f,y,g,B,C,G,V,v,R,b,A,T,L,S,D,I,E,P,N,_,F,j,O,x,k,M,W,U,Y,z,K,H,X,Z,J;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,s=e._decorator,c=e.RigidBody2D,h=e.Button,u=e.UITransform,d=e.Collider2D,m=e.Node,p=e.Label,w=e.Vec3,f=e.director,y=e.Input,g=e.Contact2DType,B=e.input,C=e.v2,G=e.PhysicsSystem2D,V=e.tween,v=e.Sprite,R=e.UIOpacity,b=e.KeyCode,A=e.Tween,T=e.Component},function(e){L=e.log},function(e){S=e.showToast},function(e){D=e.ballPhysicsConfig},function(e){I=e.BackgroundAdapter,E=e.AudioUtil,P=e.GUIManager},function(e){N=e.default},function(e){_=e.TrajectoryRecorder},function(e){F=e.TrajectoryPlayer},function(e){j=e.TrajectoryConfig},function(e){O=e.gameDataMgr,x=e.GameState},function(e){k=e.netMgr},function(e){M=e.MultiplierControl},function(e){W=e.default},function(e){U=e.REWARD_PAGE_CLOSED_EVENT,Y=e.default},function(e){z=e.default},function(e){K=e.CURRENT_GAME_MODE,H=e.GameMode},function(e){X=e.setButtonInteractable},function(e){Z=e.RewardScoreAnimator},function(e){J=e.ToyControlInterface}],execute:function(){var q,Q,$,ee,te,ie,ae,ne,re,oe,le,se,ce,he,ue,de,me,pe,we,fe,ye,ge,Be,Ce,Ge,Ve,ve,Re,be,Ae,Te,Le,Se,De,Ie,Ee,Pe,Ne,_e;l._RF.push({},"d57e3ArPSBD/Irqo5u90c1c","GameView",void 0);var Fe=s.ccclass,je=s.property,Oe=function(e){return e[e.IDLE=0]="IDLE",e[e.CHARGING=1]="CHARGING",e[e.FLYING=2]="FLYING",e}(Oe||{});e("GameView",(q=Fe("GameView"),Q=je(c),$=je(h),ee=je(u),te=je([d]),ie=je([d]),ae=je([d]),ne=je(m),re=je(m),oe=je(h),le=je(p),se=je(h),ce=je(h),he=je(p),ue=je(p),de=je(p),me=je([p]),pe=je(h),we=je(h),q((ge=t((ye=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"Ball",ge,n(t)),a(t,"PressBtn",Be,n(t)),a(t,"XuLiNode",Ce,n(t)),a(t,"JiangLiColliders",Ge,n(t)),a(t,"AnimaColliders",Ve,n(t)),a(t,"DropWayColliders",ve,n(t)),a(t,"ArrawNode",Re,n(t)),a(t,"bg",be,n(t)),a(t,"TouBiBtn",Ae,n(t)),a(t,"PayScoreLabel",Te,n(t)),a(t,"AddScoreBtn",Le,n(t)),a(t,"ReduceScoreBtn",Se,n(t)),a(t,"ScoreLabel",De,n(t)),a(t,"BallNumLabel",Ie,n(t)),a(t,"RewardNumLabel",Ee,n(t)),a(t,"SaiDaoLabels",Pe,n(t)),a(t,"ResetGameBtn",Ne,n(t)),a(t,"CanshuBtn",_e,n(t)),t.ballState=Oe.IDLE,t.chargeValue=0,t.maxChargeValue=1,t.chargeSpeed=.8,t.hasEnteredRewardZone=!1,t.initialBallRestitution=0,t.initialBallFriction=0,t.initialBallLinearDamping=0,t.initialBallAngularDamping=0,t.initialBallPosition=new w,t.initialBallRotation=new w,t.debugTargetTrack=-1,t.lowSpeedFrameCount=0,t.STOP_CONFIRM_FRAMES=30,t.trajectoryRecorder=null,t.trajectoryPlayer=null,t.isReadyToRecord=!1,t.lastRecordedTrajectory=null,t.multiplierControl=null,t.serverResult=null,t.rewardScoreAnimator=null,t.arrowFlowTweens=[],t}i(t,e);var l=t.prototype;return l.onLoad=function(){var e=this;L("[GameView] åˆå§‹åŒ–å¼¹ç æœºæ¸¸æˆ");var t=f.getScene();t&&(t.on(U,this.resetToInitial,this),L("[GameView] å·²æ³¨å†Œå¥–åŠ±å¼¹æ¡†å…³é—­äº‹ä»¶ç›‘å¬")),this.scheduleOnce((function(){I.adaptBackground(e.bg)}),.1),this.XuLiNode&&(this.XuLiNode.height=0),this.setupPhysicsDeterminism(),this.applyPhysicsConfig(),this.saveInitialBallPhysics(),this.initVisualEffects(),this.AddScoreBtn&&this.ReduceScoreBtn&&this.PayScoreLabel&&this.ScoreLabel&&(this.multiplierControl=new M,this.multiplierControl.init(this.AddScoreBtn,this.ReduceScoreBtn,this.PayScoreLabel,this.ScoreLabel)),this.TouBiBtn&&this.TouBiBtn.node.on(h.EventType.CLICK,this.onCoinInsert,this),this.PressBtn.node.on(y.EventType.TOUCH_START,this.onBtnDown,this),this.PressBtn.node.on(y.EventType.TOUCH_END,this.onBtnUp,this),this.PressBtn.node.on(y.EventType.TOUCH_CANCEL,this.onBtnUp,this),this.PressBtn.transition=h.Transition.NONE,L("[GameView] å·²æ¥ç®¡ PressBtn çŠ¶æ€ï¼Œä½¿ç”¨æ‰‹åŠ¨Spriteåˆ‡æ¢"),this.ResetGameBtn&&this.ResetGameBtn.node.on(h.EventType.CLICK,this.onResetBtnClick,this),this.CanshuBtn&&this.CanshuBtn.node.on(h.EventType.CLICK,this.onCanshuBtnClick,this),this.registerRewardCollisionListeners(),this.registerAnimaCollisionListeners(),this.registerDropWayCollisionListeners(),this.trajectoryRecorder=new _(this.Ball),this.trajectoryPlayer=new F(this.Ball),K===H.PLAYBACK?L("[GameView] æ¸¸æˆæ¨¡å¼å¯åŠ¨ï¼šæ’­æ”¾é¢„åˆ¶è½¨è¿¹"):(L("[GameView] å½•åˆ¶æ¨¡å¼å¯åŠ¨ï¼šå¯ç”¨ç‰©ç†å¼•æ“å½•åˆ¶"),this.scheduleOnce((function(){var t=e.Ball.getComponent(d);t?(t.on(g.BEGIN_CONTACT,e.onBallCollision,e),L("[GameView] å·²æ³¨å†Œç¢°æ’ç›‘å¬ç”¨äºæ ‡è®°å…³é”®å¸§")):L("[GameView] è­¦å‘Šï¼šæœªæ‰¾åˆ° Collider2D ç»„ä»¶")}),0)),B.on(y.EventType.KEY_DOWN,this.onKeyDown,this),L("[GameView] åˆå§‹åŒ–å®Œæˆ")},l.onDestroy=function(){var e=f.getScene();e&&e.off(U,this.resetToInitial,this),this.PressBtn.node.off(y.EventType.TOUCH_START,this.onBtnDown,this),this.PressBtn.node.off(y.EventType.TOUCH_END,this.onBtnUp,this),this.PressBtn.node.off(y.EventType.TOUCH_CANCEL,this.onBtnUp,this),this.TouBiBtn&&this.TouBiBtn.node.off(h.EventType.CLICK,this.onCoinInsert,this),this.ResetGameBtn&&this.ResetGameBtn.node.off(h.EventType.CLICK,this.onResetBtnClick,this),this.CanshuBtn&&this.CanshuBtn.node.off(h.EventType.CLICK,this.onCanshuBtnClick,this),this.multiplierControl&&this.multiplierControl.destroy(),this.stopArrowFlowAnimation(),this.rewardScoreAnimator&&this.rewardScoreAnimator.destroy(),B.off(y.EventType.KEY_DOWN,this.onKeyDown,this)},l.start=function(){var e=r(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L("[GameView] å¼€å§‹åŠ è½½è½¨è¿¹æ•°æ®..."),e.prev=1,e.next=4,j.loadTrajectories();case 4:L("[GameView] âœ… è½¨è¿¹æ•°æ®åŠ è½½å®Œæˆ"),L("[GameView] ğŸ’¡ æŒ‰ 1-7 é”®å¯æµ‹è¯•æ’­æ”¾å¯¹åº”èµ›é“çš„éšæœºè½¨è¿¹"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),L("[GameView] âš ï¸ è½¨è¿¹æ•°æ®åŠ è½½å¤±è´¥:",e.t0),L("[GameView] ğŸ’¡ æç¤ºï¼šè¯·å…ˆå½•åˆ¶è½¨è¿¹æ•°æ®");case 12:this.updateTrackLabels(),P.open(z),L("[GameView] âœ… æ¸¸æˆUIå·²æ‰“å¼€"),this.resetToInitial();case 16:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),l.update=function(e){if(this.ballState===Oe.CHARGING&&(this.chargeValue=Math.min(this.chargeValue+this.chargeSpeed*e,this.maxChargeValue),this.updateXuLiUI()),this.trajectoryRecorder&&this.trajectoryRecorder.isActive()&&this.trajectoryRecorder.update(),this.trajectoryPlayer&&this.trajectoryPlayer.isActive())this.trajectoryPlayer.update();else if(this.ballState===Oe.FLYING&&this.hasEnteredRewardZone){var t=this.Ball.linearVelocity,i=Math.sqrt(t.x*t.x+t.y*t.y);if(i<D.getStopVelocityThreshold()){if(this.lowSpeedFrameCount++,this.lowSpeedFrameCount>=this.STOP_CONFIRM_FRAMES){if(L("[GameView] å°çƒå·²åœ¨å¥–åŠ±åŒºåœæ­¢ï¼Œé€Ÿåº¦:",i.toFixed(2),"ä½é€Ÿå¸§æ•°:",this.lowSpeedFrameCount),K===H.RECORDING&&this.trajectoryRecorder&&this.trajectoryRecorder.isActive()){this.trajectoryRecorder.markCurrentFrameAsKeyframe("final_stop");var a=this.trajectoryRecorder.stopRecording();a&&(this.lastRecordedTrajectory=a,j.addTrajectory(a),L("[GameView] âœ… å½•åˆ¶å®Œæˆï¼èµ›é“:",a.trackId),L("[GameView] ğŸ’¡ æŒ‰ T é”®å¯ç«‹å³æµ‹è¯•æ’­æ”¾åˆšå½•åˆ¶çš„è½¨è¿¹"))}this.ballState=Oe.IDLE,this.lowSpeedFrameCount=0,L("[GameView] çŠ¶æ€åˆ‡æ¢: FLYING -> IDLEï¼Œå°çƒå·²åœæ­¢"),this.serverResult&&O.gameState===x.PLAYING&&this.showRewardPopup(this.serverResult)}}else this.lowSpeedFrameCount=0}},l.onCoinInsert=function(){var e=r(o().mark((function e(){var t,i,a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L("[GameView] ç‚¹å‡»æŠ•å¸æŒ‰é’®"),E.playSound("Game","click"),O.canStartGame()){e.next=5;break}return L("[GameView] æ— æ³•å¼€å§‹æ¸¸æˆï¼ˆèƒ½é‡ä¸è¶³æˆ–ç§¯åˆ†ä¸è¶³ï¼‰"),e.abrupt("return");case 5:if(t=O.getCurrentMultiplier().toString(),K!==H.RECORDING){e.next=24;break}return L("[GameView] [å½•åˆ¶æ¨¡å¼] è·³è¿‡æœåŠ¡å™¨è¯·æ±‚ï¼Œç›´æ¥å¯ç”¨å‘å°„"),this.serverResult=null,O.gameState=x.READY,this.BallNumLabel&&(this.BallNumLabel.string="1"),X(this.PressBtn,!0),X(this.TouBiBtn,!1),X(this.AddScoreBtn,!1),X(this.ReduceScoreBtn,!1),this.playAnimaIconsFlash(),this.playArrowFlowAnimation(),this.playBallFlashIn(),this.rewardScoreAnimator&&this.rewardScoreAnimator.activate(),L("[GameView] âœ… [å½•åˆ¶æ¨¡å¼] æŠ•å¸æˆåŠŸï¼Œå¯ä»¥å‘å°„ï¼ˆç­‰å¾…å°çƒè¿›å…¥èµ›é“åè‡ªåŠ¨å½•åˆ¶ï¼‰"),i=O.getCostPoints(),O.dLocalData.currentPoints-=i,O.dLocalData.energy-=1,e.abrupt("return");case 24:return L("[GameView] [æ¸¸æˆæ¨¡å¼] è¯·æ±‚å¼€å§‹æ¸¸æˆï¼Œå€ç‡:",t),X(this.TouBiBtn,!1),X(this.AddScoreBtn,!1),X(this.ReduceScoreBtn,!1),a=O.getCostPoints(),O.dLocalData.currentPoints-=a,O.dLocalData.energy-=1,e.next=33,k.startGame(t);case 33:0===(n=e.sent).code?(this.serverResult=n.data,O.gameState=x.READY,this.BallNumLabel&&(this.BallNumLabel.string="1"),X(this.PressBtn,!0),this.playAnimaIconsFlash(),this.playArrowFlowAnimation(),this.playBallFlashIn(),this.rewardScoreAnimator&&this.rewardScoreAnimator.activate(),L("[GameView] âœ… [æ¸¸æˆæ¨¡å¼] æŠ•å¸æˆåŠŸï¼Œå¯ä»¥å‘å°„"),L("[GameView] ç›®æ ‡èµ›é“:",n.data.win_trac_id)):(L("[GameView] âŒ [æ¸¸æˆæ¨¡å¼] æŠ•å¸å¤±è´¥:",n.msg),O.dLocalData.currentPoints+=a,O.dLocalData.energy+=1,X(this.TouBiBtn,!0),X(this.AddScoreBtn,O.canIncreaseMultiplier()),X(this.ReduceScoreBtn,O.canDecreaseMultiplier()));case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.onBtnDown=function(){O.gameState===x.READY&&this.ballState===Oe.IDLE?(L("[GameView] å¼€å§‹è“„åŠ›"),E.playSound("Game","click"),this.ballState=Oe.CHARGING,this.chargeValue=0,this.updatePressBtnSprite(!0)):L("[GameView] å½“å‰çŠ¶æ€ä¸å…è®¸è“„åŠ›ï¼Œæ¸¸æˆçŠ¶æ€:",O.gameState,"å°çƒçŠ¶æ€:",Oe[this.ballState])},l.onBtnUp=function(){this.ballState===Oe.CHARGING&&(L("[GameView] æ¾å¼€æŒ‰é’®ï¼Œè“„åŠ›å€¼:",this.chargeValue.toFixed(2)),this.updatePressBtnSprite(!1),this.launchBall())},l.onResetBtnClick=function(){L("[GameView] [æµ‹è¯•] ç‚¹å‡»é‡ç½®æŒ‰é’®"),this.resetGame()},l.onCanshuBtnClick=function(){L("[GameView] æ‰“å¼€å‚æ•°è®¾ç½®é¢æ¿"),P.open(N)},l.onLowStaminaOp=function(){S("Daily limit reached. Try again tomorrow.")},l.updateXuLiUI=function(){this.XuLiNode.height=228*this.chargeValue},l.resetXuLiUI=function(){this.XuLiNode.node.setScale(1,1,1),this.XuLiNode.height=0},l.launchBall=function(){var e=r(o().mark((function e(){var t,i,a,n,r,l,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L("[GameView] å‡†å¤‡å‘å°„å°çƒ"),O.gameState=x.PLAYING,this.BallNumLabel&&(this.BallNumLabel.string="0"),X(this.PressBtn,!1),this.hasEnteredRewardZone=!1,e.next=7,this.requestServerResult();case 7:t=e.sent,L("[GameView] æœåŠ¡å™¨æŒ‡å®šç›®æ ‡èµ›é“:",t),(a=D.getCustomLaunchForce())>=0?L("[GameView] [è‡ªå®šä¹‰åŠ›åº¦]",i=a):(n=D.getMinChargePower(),r=D.getMaxChargePower(),i=n+(r-n)*this.chargeValue,L("[GameView] [è‡ªç„¶è“„åŠ›] è“„åŠ›:",(100*this.chargeValue).toFixed(1)+"%","åŠ›åº¦:",i.toFixed(2))),K===H.PLAYBACK?(l=j.getRandomTrajectory(t))?(L("[GameView] [æ¸¸æˆæ¨¡å¼] æ’­æ”¾èµ›é“",t,"çš„é¢„å½•è½¨è¿¹"),this.ballState=Oe.FLYING,this.trajectoryPlayer.play(l,(function(){L("[GameView] [æ¸¸æˆæ¨¡å¼] æ’­æ”¾å®Œæˆ"),s.ballState=Oe.IDLE,s.serverResult&&O.gameState===x.PLAYING&&s.showRewardPopup(s.serverResult)}),(function(e){s.handleTrajectoryEvent(e)}))):(L("[GameView] [è­¦å‘Š] èµ›é“",t,"æ²¡æœ‰é¢„å½•è½¨è¿¹ï¼Œæ— æ³•æ’­æ”¾"),this.ballState=Oe.IDLE,this.chargeValue=0,this.resetXuLiUI(),this.resetToInitial()):(L("[GameView] [å½•åˆ¶æ¨¡å¼] ç‰©ç†å‘å°„"),this.trajectoryRecorder&&(this.trajectoryRecorder.startRecording(i,0,-1),L("[GameView] [å½•åˆ¶] å·²å¯åŠ¨å½•åˆ¶ï¼ˆèµ›é“IDå¾…å®šï¼Œè¿›å…¥å¥–åŠ±åŒºåç¡®å®šï¼‰")),this.launchBallWithPhysics(i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.launchBallWithPhysics=function(e){this.Ball.node.setPosition(this.initialBallPosition),this.Ball.node.setRotationFromEuler(this.initialBallRotation),this.Ball.linearVelocity=C(0,0),this.Ball.angularVelocity=0;var t=G.instance.physicsWorld;t&&t.syncSceneToPhysics&&t.syncSceneToPhysics();var i=this.Ball.getComponent(d);if(i){var a=D.getRestitution();i.restitution=a,i.apply()}var n=C(0,e);this.Ball.applyLinearImpulseToCenter(n,!0),this.ballState=Oe.FLYING,this.chargeValue=0,this.resetXuLiUI(),L("[GameView] ç‰©ç†å‘å°„å®Œæˆï¼ŒåŠ›åº¦:",e)},l.requestServerResult=function(){var e=r(o().mark((function e(){var t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.serverResult){e.next=4;break}return t=this.serverResult.win_trac_id,L("[GameView] ä½¿ç”¨æœåŠ¡å™¨æŒ‡å®šèµ›é“:",t,"(round_result:",this.serverResult.win_trac_id+")"),e.abrupt("return",t);case 4:if(!(this.debugTargetTrack>=0&&this.debugTargetTrack<this.JiangLiColliders.length)){e.next=7;break}return L("[GameView] [è°ƒè¯•æ¨¡å¼] ä½¿ç”¨å¼ºåˆ¶èµ›é“:",this.debugTargetTrack),e.abrupt("return",this.debugTargetTrack);case 7:return L("[GameView] âš ï¸ è­¦å‘Šï¼šæ²¡æœ‰æœåŠ¡å™¨ç»“æœï¼Œä½¿ç”¨éšæœºèµ›é“"),i=Math.floor(Math.random()*this.JiangLiColliders.length),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.registerRewardCollisionListeners=function(){var e=this;this.JiangLiColliders.forEach((function(t,i){t&&t.isValid&&t.on(g.BEGIN_CONTACT,(function(t,a){e.onHitRewardZone(i)}),e)})),L("[GameView] å¥–åŠ±åŒºåŸŸç¢°æ’ç›‘å¬æ³¨å†Œå®Œæˆï¼Œå…±",this.JiangLiColliders.length,"ä¸ª")},l.registerDropWayCollisionListeners=function(){var e=this;this.DropWayColliders.forEach((function(t,i){t&&t.isValid&&t.on(g.BEGIN_CONTACT,(function(a,n){n.node===e.Ball.node&&e.onHitDropWay(t,i)}),e)})),L("[GameView] DropWayç¢°æ’ç›‘å¬æ³¨å†Œå®Œæˆï¼Œå…±",this.DropWayColliders.length,"ä¸ª")},l.registerAnimaCollisionListeners=function(){var e=this;this.AnimaColliders.forEach((function(t,i){t&&t.isValid&&t.on(g.BEGIN_CONTACT,(function(a,n){n.node===e.Ball.node&&(e.onHitAnimaZone(t),K===H.RECORDING&&e.trajectoryRecorder&&e.trajectoryRecorder.isActive()&&(e.trajectoryRecorder.markCurrentFrameAsKeyframe("anima_"+i),e.trajectoryRecorder.recordEvent("collision",{idx:i}),L("[GameView] [AnimaColliderå½•åˆ¶] ç¢°æ’ç´¢å¼•:",i,"åå­—:",t.node.name)))}),e)})),L("[GameView] åŠ¨ç”»åŒºåŸŸç¢°æ’ç›‘å¬æ³¨å†Œå®Œæˆï¼Œå…±",this.AnimaColliders.length,"ä¸ª")},l.onBallCollision=function(e,t,i){if(K===H.RECORDING&&this.trajectoryRecorder&&this.trajectoryRecorder.isActive()){var a=t.node.name;if(this.AnimaColliders.some((function(e){return e.node.name===a})))return;this.trajectoryRecorder.markCurrentFrameAsKeyframe(a),L("[GameView] [æ™®é€šç¢°æ’å½•åˆ¶]:",a)}},l.reRegisterBallCollisionListener=function(){if(K===H.RECORDING){var e=this.Ball.getComponent(d);e&&(e.off(g.BEGIN_CONTACT,this.onBallCollision,this),e.on(g.BEGIN_CONTACT,this.onBallCollision,this),L("[GameView] âœ… é‡æ–°æ³¨å†Œçƒç¢°æ’ç›‘å¬å™¨"))}},l.handleTrajectoryEvent=function(e){if(L("[GameView] [æ’­æ”¾] æ”¶åˆ°äº‹ä»¶:",e.type,"frame:",e.frame,"data:",e.data),"collision"===e.type){if(!e.data)return void L("[GameView] [æ’­æ”¾] âš ï¸ ç¢°æ’äº‹ä»¶ç¼ºå°‘data");var t=e.data.idx;if(void 0!==t)if(t>=0&&t<this.AnimaColliders.length){var i=this.AnimaColliders[t];i&&i.isValid?(this.onHitAnimaZone(i),L("[GameView] [æ’­æ”¾] âœ… è§¦å‘åŠ¨ç”»ç¢°æ’ - ç´¢å¼•:",t)):L("[GameView] [æ’­æ”¾] âš ï¸ AnimaCollideræ— æ•ˆ - ç´¢å¼•:",t)}else L("[GameView] [æ’­æ”¾] âš ï¸ AnimaColliderç´¢å¼•è¶…å‡ºèŒƒå›´:",t,"/",this.AnimaColliders.length)}else if("reward"===e.type){var a;L("[GameView] [æ’­æ”¾] è¿›å…¥å¥–åŠ±åŒºäº‹ä»¶ - èµ›é“:",null==(a=e.data)?void 0:a.t)}else if("dropway"===e.type){var n,r=null==(n=e.data)?void 0:n.idx;if(void 0!==r&&r>=0&&r<this.DropWayColliders.length){var o=this.DropWayColliders[r];o&&o.isValid&&(this.onHitDropWay(o,r),L("[GameView] [æ’­æ”¾] âœ… è§¦å‘DropWayç¢°æ’ - ç´¢å¼•:",r))}}},l.onHitRewardZone=function(e){if(this.ballState===Oe.FLYING&&!this.hasEnteredRewardZone){if(this.hasEnteredRewardZone=!0,L("[GameView] è¿›å…¥å¥–åŠ±åŒºåŸŸï¼Œèµ›é“ç´¢å¼•:",e),this.showRewardLight(e),K===H.RECORDING&&this.trajectoryRecorder&&this.trajectoryRecorder.isActive()&&(this.trajectoryRecorder.setTargetTrackId(e),this.trajectoryRecorder.markCurrentFrameAsKeyframe("reward_zone"),this.trajectoryRecorder.recordEvent("reward",{t:e}),L("[GameView] [å½•åˆ¶] è¿›å…¥å¥–åŠ±åŒºï¼šè®¾ç½®èµ›é“ID + æ ‡è®°å…³é”®å¸§ + è®°å½•äº‹ä»¶"),!this.serverResult)){var t=O.getCostPoints(),i=O.getCurrentPointsNumber(),a=O.getConfig(),n=0;if(a&&a.trac_list&&a.trac_list[e])n=t*a.trac_list[e].rate;this.serverResult={before_points:i,current_points:i+n,deducted_points:t,win_trac_id:e+1,win_points:n,total_energy:O.dLocalData.energyDaily,current_energy:O.dLocalData.energy},L("[GameView] [å½•åˆ¶] æ„å»ºMockæœåŠ¡å™¨ç»“æœ:",this.serverResult)}var r=D.getRewardSlowdownFactor(),o=this.Ball.linearVelocity;this.Ball.linearVelocity=C(o.x*r,o.y*r);var l=this.Ball.getComponent(d);l&&(l.restitution=D.getRewardRestitution(),l.friction=D.getRewardFriction(),this.scheduleOnce((function(){l.apply()}),.1)),this.Ball.linearDamping=D.getRewardLinearDamping(),this.Ball.angularDamping=D.getRewardAngularDamping(),L("[GameView] å°çƒå‡é€Ÿå¹¶åœæ­¢å¼¹è·³ï¼Œæ–°é€Ÿåº¦:",this.Ball.linearVelocity.length().toFixed(2))}},l.onHitAnimaZone=function(e){if(this.ballState===Oe.FLYING&&e&&e.isValid&&e.node&&e.node.parent){var t=e.node.parent;if(0!==t.children.length){var i=t.children[0];i&&i.isValid&&(L("[GameView] ç¢°æ’åŠ¨ç”»åŒºåŸŸ:",t.name,"-> æ’­æ”¾å­èŠ‚ç‚¹åŠ¨ç”»:",i.name),this.playBounceAnim(i),E.playSound("Game","collide"),J.vibrate())}}},l.playBounceAnim=function(e){V(e).stop();var t=new w(1,1,1);V(e).to(.1,{scale:new w(1.2*t.x,1.2*t.y,t.z)}).to(.1,{scale:t}).start()},l.onHitDropWay=function(e,t){if(e&&e.isValid&&e.node){var i=e.node.getComponent(v);if(i){i.enabled=!0;var a=e.node.getComponent(R);a||(a=e.node.addComponent(R)),a.opacity=127,V(a).to(.15,{opacity:255}).to(.15,{opacity:127}).to(.15,{opacity:255}).start(),K===H.RECORDING&&this.trajectoryRecorder&&this.trajectoryRecorder.isActive()&&(this.trajectoryRecorder.recordEvent("dropway",{idx:t}),L("[GameView] [DropWayå½•åˆ¶] ç´¢å¼•:",t)),L("[GameView] DropWayç¢°æ’:",t,"æ’­æ”¾é—ªçƒåŠ¨ç”»")}else L("[GameView] âš ï¸ DropWayèŠ‚ç‚¹",t,"æ²¡æœ‰Spriteç»„ä»¶")}},l.onKeyDown=function(e){var t=this,i=e.keyCode;if(i>=b.DIGIT_1&&i<=b.DIGIT_7){var a=i-b.DIGIT_1;if(this.ballState===Oe.IDLE){var n=j.getRandomTrajectory(a);n?(L("[GameView] [è°ƒè¯•æ’­æ”¾] èµ›é“",a,"éšæœºè½¨è¿¹"),this.ballState=Oe.FLYING,this.trajectoryPlayer.play(n,(function(){L("[GameView] [è°ƒè¯•æ’­æ”¾] æ’­æ”¾å®Œæˆ"),t.ballState=Oe.IDLE}),(function(e){t.handleTrajectoryEvent(e)}))):(L("[GameView] âš ï¸ [è°ƒè¯•æ’­æ”¾] èµ›é“",a,"æ²¡æœ‰å½•åˆ¶æ•°æ®"),L("[GameView] ğŸ’¡ æç¤ºï¼šè¯·å…ˆå½•åˆ¶è¯¥èµ›é“çš„è½¨è¿¹ï¼ˆå½•åˆ¶æ¨¡å¼ + å‘å°„çƒï¼‰"))}else L("[GameView] [è°ƒè¯•æ’­æ”¾] âš ï¸ å°çƒæ­£åœ¨è¿åŠ¨ä¸­ï¼Œæ— æ³•æ’­æ”¾")}else i===b.DIGIT_0?(this.debugTargetTrack=-1,L("[GameView] [è°ƒè¯•] å–æ¶ˆå¼ºåˆ¶èµ›é“ï¼Œæ¢å¤éšæœº")):i===b.KEY_T&&(this.ballState===Oe.IDLE?this.lastRecordedTrajectory?(L("[GameView] [æµ‹è¯•æ’­æ”¾] å¼€å§‹æ’­æ”¾æœ€è¿‘å½•åˆ¶çš„è½¨è¿¹ï¼Œèµ›é“:",this.lastRecordedTrajectory.trackId),this.ballState=Oe.FLYING,this.trajectoryPlayer.play(this.lastRecordedTrajectory,(function(){L("[GameView] [æµ‹è¯•æ’­æ”¾] æ’­æ”¾å®Œæˆ"),t.ballState=Oe.IDLE}),(function(e){t.handleTrajectoryEvent(e)}))):(L("[GameView] âš ï¸ [æµ‹è¯•æ’­æ”¾] è­¦å‘Šï¼šæ²¡æœ‰å¯æ’­æ”¾çš„å½•åˆ¶æ•°æ®"),L("[GameView] ğŸ’¡ æç¤ºï¼šè¯·å…ˆå½•åˆ¶ä¸€æ¬¡è½¨è¿¹ï¼ˆå¼¹çƒ â†’ è¿›å…¥å¥–åŠ±åŒº â†’ åœæ­¢ï¼‰")):L("[GameView] [æµ‹è¯•æ’­æ”¾] âš ï¸ å°çƒæ­£åœ¨è¿åŠ¨ä¸­ï¼Œæ— æ³•æ’­æ”¾"))},l.setupPhysicsDeterminism=function(){var e=G.instance;e.fixedTimeStep=1/60,e.maxSubSteps=1;var t=e.physicsWorld;t&&t.setAllowSleep&&(t.setAllowSleep(!1),L("[GameView] å·²ç¦ç”¨ç‰©ç†ä¼‘çœ ")),e.enable=!0,L("[GameView] ç‰©ç†ç¡®å®šæ€§é…ç½®å®Œæˆ"),L("  - å›ºå®šæ—¶é—´æ­¥é•¿:",e.fixedTimeStep),L("  - æœ€å¤§å­æ­¥æ•°:",e.maxSubSteps),L("  - ç‰©ç†å¼•æ“çŠ¶æ€:",e.enable?"å·²å¯ç”¨":"å·²ç¦ç”¨")},l.applyPhysicsConfig=function(){var e=G.instance.gravity;e.y=D.getGravityY(),G.instance.gravity=e,L("[GameView] åº”ç”¨ç‰©ç†é…ç½® - é‡åŠ›Y:",e.y)},l.showRewardPopup=function(){var e=r(o().mark((function e(t){var i,a,n,r,l,s,c,h,u=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.gameState=x.REWARD,!this.rewardScoreAnimator){e.next=12;break}return a=t.deducted_points||0,n=t.win_points||0,r=t.win_trac_id-1,l=O.getConfig(),s=(null==l||null==(i=l.trac_list)||null==(i=i[r])?void 0:i.rate)||1,e.next=9,new Promise((function(e){u.rewardScoreAnimator.playMultiplyAnimation(a,s,n,(function(){L("[GameView] è®¡åˆ†æ¿åŠ¨ç”»å·²å®Œæˆï¼Œå‡†å¤‡æ˜¾ç¤ºå¼¹æ¡†"),e()}))}));case 9:return L("[GameView] å¼€å§‹æ’­æ”¾è®¡åˆ†æ¿åŠ¨ç”»:",a,"x",s,"=",n),e.next=12,new Promise((function(e){return setTimeout(e,500)}));case 12:if(!(t.win_points>0)){e.next=21;break}return e.next=15,P.open(W);case 15:c=e.sent,(h=c.contentPane.Get(Y))&&(h.show(t.win_points,!0),L("[GameView] æ˜¾ç¤ºå¥–åŠ±å¼¹æ¡†ï¼Œè¿›å…¥èµ›é“:",t.win_trac_id,"æ˜¯å¦èƒœåˆ©: true","å¥–åŠ±:",t.win_points)),O.updateAfterGameResult(t),e.next=24;break;case 21:L("[GameView] å¥–åŠ±ä¸º0ï¼Œè·³è¿‡å¼¹æ¡†ç›´æ¥é‡ç½®"),O.updateAfterGameResult(t),this.resetToInitial();case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),l.resetToInitial=function(){L("[GameView] é‡ç½®åˆ°åˆå§‹çŠ¶æ€"),O.resetToIdle(),this.serverResult=null,this.BallNumLabel&&(this.BallNumLabel.string="0"),O.dLocalData.energy<=0?(L("[GameView] ä½“åŠ›ä¸è¶³ï¼Œç»‘å®šæç¤ºäº‹ä»¶"),this.PressBtn.node.targetOff(this),this.TouBiBtn.node.targetOff(this),this.PressBtn.node.on(h.EventType.CLICK,this.onLowStaminaOp,this),X(this.PressBtn,!1),this.PressBtn.interactable=!0,this.TouBiBtn.node.on(h.EventType.CLICK,this.onLowStaminaOp,this),X(this.TouBiBtn,!1),this.TouBiBtn.interactable=!0,this.TouBiBtn.transition=h.Transition.NONE):(X(this.PressBtn,!1),X(this.TouBiBtn,O.canStartGame())),X(this.AddScoreBtn,O.canIncreaseMultiplier()),X(this.ReduceScoreBtn,O.canDecreaseMultiplier()),this.multiplierControl&&this.multiplierControl.updateUI(),this.initRewardLights(),this.initAnimaIcons(),this.stopArrowFlowAnimation(),this.initArrows(),this.resetBallOpacity(),this.initDropWayColliders(),this.updatePressBtnSprite(!1),this.rewardScoreAnimator&&this.rewardScoreAnimator.reset(),this.resetGame()},l.saveInitialBallPhysics=function(){if(this.Ball){var e=this.Ball.getComponent(d);if(e){this.initialBallRestitution=0,this.initialBallFriction=D.getFriction(),e.restitution=0,e.friction=this.initialBallFriction;var t=D.getBallMass();e.density=t,this.scheduleOnce((function(){e.apply()}),.1),L("[GameView] è®¾ç½®å°çƒå¯†åº¦:",t,"å®é™…è´¨é‡:",this.Ball.getMass())}this.initialBallLinearDamping=D.getLinearDamping(),this.initialBallAngularDamping=D.getAngularDamping(),this.Ball.linearDamping=this.initialBallLinearDamping,this.Ball.angularDamping=this.initialBallAngularDamping,this.initialBallPosition=this.Ball.node.position.clone(),this.initialBallRotation=this.Ball.node.eulerAngles.clone(),L("[GameView] ä¿å­˜åˆå§‹å±æ€§ - åˆå§‹å¼¹æ€§:",this.initialBallRestitution,"ä½ç½®:",this.initialBallPosition)}},l.restoreBallPhysics=function(){var e=this;this.Ball&&this.scheduleOnce((function(){if(e.Ball&&e.Ball.isValid){e.Ball.enabled=!1;var t=e.Ball.getComponent(d);if(t){t.restitution=0,t.friction=e.initialBallFriction;var i=D.getBallMass();t.density=i,t.apply()}e.Ball.linearDamping=e.initialBallLinearDamping,e.Ball.angularDamping=e.initialBallAngularDamping,e.Ball.linearVelocity=C(0,0),e.Ball.angularVelocity=0,e.Ball.enabled=!0,e.reRegisterBallCollisionListener(),L("[GameView] æ¢å¤åˆå§‹ç‰©ç†å±æ€§ï¼ˆå®Œå…¨é‡ç½®ï¼‰")}}),0)},l.resetGame=function(){var e=this;L("[GameView] é‡ç½®æ¸¸æˆ"),this.ballState=Oe.IDLE,this.chargeValue=0,this.resetXuLiUI(),this.debugTargetTrack=-1,this.hasEnteredRewardZone=!1,this.Ball&&(this.Ball.linearVelocity=C(0,0),this.Ball.angularVelocity=0,this.scheduleOnce((function(){e.Ball&&e.Ball.isValid&&(e.Ball.node.setPosition(e.initialBallPosition),e.Ball.node.setRotationFromEuler(e.initialBallRotation),e.Ball.linearVelocity=C(0,0),e.Ball.angularVelocity=0,e.restoreBallPhysics(),e.scheduleOnce((function(){e.Ball&&e.Ball.isValid&&(e.Ball.linearVelocity=C(0,0),e.Ball.angularVelocity=0,L("[GameView] æ¸¸æˆå·²é‡ç½®ï¼Œç‰©ç†çŠ¶æ€å·²ç¨³å®š"))}),.05))}),.05))},l.updateTrackLabels=function(){var e=O.getConfig();if(e&&e.trac_list){for(var t=0;t<this.SaiDaoLabels.length;t++){var i=this.SaiDaoLabels[t];if(i&&i.isValid)if(t<e.trac_list.length){var a=e.trac_list[t].rate;i.string="x"+a,L("[GameView] èµ›é“æ ‡ç­¾",t+1,"è®¾ç½®ä¸º:",i.string,"(rate:",a+")")}else L("[GameView] âš ï¸ èµ›é“æ ‡ç­¾",t+1,"è¶…å‡ºé…ç½®èŒƒå›´ï¼Œé…ç½®ä¸­åªæœ‰",e.trac_list.length,"ä¸ªèµ›é“")}L("[GameView] âœ… èµ›é“å€ç‡æ ‡ç­¾æ›´æ–°å®Œæˆï¼Œå…±",this.SaiDaoLabels.length,"ä¸ªæ ‡ç­¾")}else L("[GameView] âš ï¸ æ¸¸æˆé…ç½®æœªåŠ è½½ï¼Œæ— æ³•æ›´æ–°èµ›é“æ ‡ç­¾")},l.initVisualEffects=function(){this.initRewardLights(),this.initAnimaIcons(),this.initArrows(),this.initBallOpacity(),this.initDropWayColliders(),this.RewardNumLabel&&(this.rewardScoreAnimator=new Z,this.rewardScoreAnimator.init(this.RewardNumLabel)),L("[GameView] âœ… æ‰€æœ‰è§†è§‰æ•ˆæœå·²åˆå§‹åŒ–")},l.initRewardLights=function(){this.JiangLiColliders.forEach((function(e,t){if(e&&e.isValid&&e.node){var i=e.node;i.children.length>=2&&(i.children[0].active=!1,i.children[1].active=!1,L("[GameView] åˆå§‹åŒ–èµ›é“",t+1,"å…‰æŸ±ï¼ˆå·²éšè—ï¼‰"))}})),L("[GameView] âœ… å¥–åŠ±å…‰æŸ±åˆå§‹åŒ–å®Œæˆ")},l.showRewardLight=function(e){if(e<0||e>=this.JiangLiColliders.length)L("[GameView] âš ï¸ èµ›é“ç´¢å¼•è¶…å‡ºèŒƒå›´:",e);else{var t=this.JiangLiColliders[e];if(t&&t.isValid&&t.node){var i=t.node;if(i.children.length<2)return L("[GameView] âš ï¸ èµ›é“",e+1,"å…‰æŸ±èŠ‚ç‚¹ä¸è¶³ï¼ˆéœ€è¦2ä¸ªå­èŠ‚ç‚¹ï¼‰"),void L("[GameView] å½“å‰å­èŠ‚ç‚¹æ•°é‡:",i.children.length);var a=O.getConfig();if(a&&a.trac_list&&a.trac_list[e]){var n=a.trac_list[e].rate;n>=5?(i.children[0].active=!0,i.children[1].active=!1,L("[GameView] ğŸ‰ æ˜¾ç¤ºå¤§å¥–å…‰æŸ±ï¼èµ›é“:",e+1,"å€ç‡:",n)):(i.children[0].active=!1,i.children[1].active=!0,L("[GameView] âœ¨ æ˜¾ç¤ºæ™®é€šå…‰æŸ±ï¼Œèµ›é“:",e+1,"å€ç‡:",n))}else L("[GameView] âš ï¸ æ— æ³•è·å–èµ›é“",e+1,"çš„é…ç½®")}else L("[GameView] âš ï¸ èµ›é“",e+1,"ç¢°æ’ä½“æ— æ•ˆ")}},l.initAnimaIcons=function(){this.AnimaColliders.forEach((function(e,t){if(e&&e.isValid){var i=e.node.parent;if(i&&0!==i.children.length){var a=i.children[0];if(a&&a.isValid){var n=a.getComponent(R);n||(n=a.addComponent(R)),n.opacity=127,L("[GameView] åˆå§‹åŒ–å›¾æ ‡",t+1,"é€æ˜åº¦: 50%")}}}})),L("[GameView] âœ… AnimaColliderså›¾æ ‡åˆå§‹åŒ–å®Œæˆ")},l.playAnimaIconsFlash=function(){this.AnimaColliders.forEach((function(e,t){if(e&&e.isValid){var i=e.node.parent;if(i&&0!==i.children.length){var a=i.children[0];if(a&&a.isValid){var n=a.getComponent(R);n||(n=a.addComponent(R)),V(n).to(.5,{opacity:255}).to(.5,{opacity:127}).to(.5,{opacity:255}).to(.5,{opacity:255}).start()}}}})),L("[GameView] âœ… AnimaColliderså›¾æ ‡é—ªçƒåŠ¨ç”»å·²å¯åŠ¨ï¼ˆæ”¾æ…¢ç‰ˆï¼‰")},l.initArrows=function(){this.ArrawNode&&this.ArrawNode.isValid&&(this.ArrawNode.children.forEach((function(e,t){if(e&&e.isValid){var i=e.getComponent(R);i||(i=e.addComponent(R)),i.opacity=0}})),L("[GameView] âœ… ç®­å¤´åˆå§‹åŒ–å®Œæˆï¼Œå…±",this.ArrawNode.children.length,"ä¸ªç®­å¤´"))},l.playArrowFlowAnimation=function(){var e=this;if(this.ArrawNode&&this.ArrawNode.isValid){this.stopArrowFlowAnimation();var t=[].concat(this.ArrawNode.children);if(0!==t.length){t.sort((function(e,t){return e.position.y-t.position.y}));var i=.15*t.length,a=i-.1;t.forEach((function(t,i){if(t&&t.isValid){var n=t.getComponent(R);n||(n=t.addComponent(R)),n.opacity=0,A.stopAllByTarget(n);var r=V(n).to(.1,{opacity:255},{easing:"smooth"}).to(a,{opacity:0},{easing:"quadOut"}),o=V(n).delay(.15*i).sequence(r).repeatForever().start();e.arrowFlowTweens.push(o)}})),console.log("[GameView] ğŸŒŠ è¿è´¯æµå…‰å¯åŠ¨: å‘¨æœŸ"+i.toFixed(2)+"s")}}},l.stopArrowFlowAnimation=function(){this.arrowFlowTweens.length>0&&(this.arrowFlowTweens.forEach((function(e){e&&e.stop()})),L("[GameView] å·²åœæ­¢",this.arrowFlowTweens.length,"ä¸ªç®­å¤´åŠ¨ç”»"),this.arrowFlowTweens=[]),this.ArrawNode&&this.ArrawNode.isValid&&(this.ArrawNode.children.forEach((function(e){if(e&&e.isValid){var t=e.getComponent(R);t&&(t.opacity=0)}})),L("[GameView] ç®­å¤´æµåŠ¨åŠ¨ç”»å·²å®Œå…¨åœæ­¢å¹¶é‡ç½®"))},l.initBallOpacity=function(){if(this.Ball&&this.Ball.isValid){var e=this.Ball.node.getComponent(R);e||(e=this.Ball.node.addComponent(R)),e.opacity=0,L("[GameView] âœ… å°çƒåˆå§‹åŒ–ï¼ˆéšè—ï¼‰")}},l.initDropWayColliders=function(){this.DropWayColliders.forEach((function(e,t){if(e&&e.isValid&&e.node){var i=e.node.getComponent(v);i&&(i.enabled=!1);var a=e.node.getComponent(R);a||(a=e.node.addComponent(R)),a.opacity=127}})),L("[GameView] âœ… DropWayCollidersåˆå§‹åŒ–å®Œæˆ")},l.playBallFlashIn=function(){if(this.Ball&&this.Ball.isValid){var e=this.Ball.node.getComponent(R);e||(e=this.Ball.node.addComponent(R)),V(e).to(.3,{opacity:255}).to(.15,{opacity:127}).to(.3,{opacity:255}).start(),L("[GameView] âœ… å°çƒé—ªçƒæ¸æ˜¾åŠ¨ç”»å·²å¯åŠ¨ï¼ˆæ”¾æ…¢ç‰ˆï¼‰")}},l.updatePressBtnSprite=function(e){if(this.PressBtn&&this.PressBtn.isValid){var t=this.PressBtn.node.getComponent(v);if(t){var i=e?this.PressBtn.pressedSprite:this.PressBtn.normalSprite;i&&(t.spriteFrame=i)}}},l.resetBallOpacity=function(){if(this.Ball&&this.Ball.isValid){var e=this.Ball.node.getComponent(R);e&&(e.opacity=0)}},t}(T)).prototype,"Ball",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=t(ye.prototype,"PressBtn",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(ye.prototype,"XuLiNode",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=t(ye.prototype,"JiangLiColliders",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ve=t(ye.prototype,"AnimaColliders",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=t(ye.prototype,"DropWayColliders",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Re=t(ye.prototype,"ArrawNode",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(ye.prototype,"bg",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=t(ye.prototype,"TouBiBtn",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=t(ye.prototype,"PayScoreLabel",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=t(ye.prototype,"AddScoreBtn",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=t(ye.prototype,"ReduceScoreBtn",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=t(ye.prototype,"ScoreLabel",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(ye.prototype,"BallNumLabel",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=t(ye.prototype,"RewardNumLabel",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=t(ye.prototype,"SaiDaoLabels",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ne=t(ye.prototype,"ResetGameBtn",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=t(ye.prototype,"CanshuBtn",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=ye))||fe));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonExport.ts","./ConfigBase.ts","./BallPhysicsConfig.ts","./GameConfig.ts","./GameView.ts","./ConfigMgr.ts","./GameDataMgr.ts","./NetMgr.ts","./PoolMgr.ts","./ToastUtil.ts","./MultiplierControl.ts","./NetTypes.ts","./RewardScoreAnimator.ts","./ToyControlInterface.ts","./TrajectoryCompressor.ts","./TrajectoryData.ts","./TrajectoryPlayer.ts","./TrajectoryRecorder.ts","./UIUtil.ts","./StartView.ts","./GameBinder.ts","./Game_Component1.ts","./Game_Component1_Logic.ts","./Game_GamePage.ts","./Game_GamePage_Logic.ts","./Game_RewardPage.ts","./Game_RewardPage_Logic.ts","./Game_RulePage.ts","./Game_RulePage_Logic.ts","./AnimatedWindow.ts","./CenteredWindow.ts","./Game_Button1.ts","./Game_Button1_Logic.ts","./Game_TestBtnView.ts","./Game_TestBtnView_Logic.ts","./Game_TestView.ts","./Game_TestView_Logic.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MultiplierControl.ts",["cc","./drongo-cc.mjs","./GameDataMgr.ts","./UIUtil.ts","./drongo-gui.mjs"],(function(t){var e,i,n,o,r,s;return{setters:[function(t){e=t.cclegacy,i=t.Button},function(t){n=t.log},function(t){o=t.gameDataMgr},function(t){r=t.setButtonInteractable},function(t){s=t.AudioUtil}],execute:function(){e._RF.push({},"ffed1n8b6pBR4VA5+hpM8p5","MultiplierControl",void 0);t("MultiplierControl",function(){function t(){this.addBtn=void 0,this.reduceBtn=void 0,this.payScoreLabel=void 0,this.scoreLabel=void 0}var e=t.prototype;return e.init=function(t,e,o,r){t&&e&&o&&r?(this.addBtn=t,this.reduceBtn=e,this.payScoreLabel=o,this.scoreLabel=r,this.addBtn.node.on(i.EventType.CLICK,this.onIncrease,this),this.reduceBtn.node.on(i.EventType.CLICK,this.onDecrease,this),this.updateUI(),n("[MultiplierControl] å€ç‡æ§åˆ¶å™¨å·²åˆå§‹åŒ–")):n("[MultiplierControl] âŒ åˆå§‹åŒ–å¤±è´¥ï¼šç¼ºå°‘å¿…è¦çš„UIç»„ä»¶")},e.onIncrease=function(){s.playSound("Game","click"),o.increaseMultiplier(),this.updateUI()},e.onDecrease=function(){s.playSound("Game","click"),o.decreaseMultiplier(),this.updateUI()},e.updateUI=function(){var t=o.getCostPoints();this.payScoreLabel&&(this.payScoreLabel.string="-"+t),this.scoreLabel&&(this.scoreLabel.string=""+t),r(this.addBtn,o.canIncreaseMultiplier()),r(this.reduceBtn,o.canDecreaseMultiplier()),n("[MultiplierControl] UIæ›´æ–° - å€ç‡:",o.getCurrentMultiplier(),"æ¶ˆè€—:",t)},e.destroy=function(){this.addBtn&&this.addBtn.node.off(i.EventType.CLICK,this.onIncrease,this),this.reduceBtn&&this.reduceBtn.node.off(i.EventType.CLICK,this.onDecrease,this)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/NetMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./NetTypes.ts","./ToastUtil.ts"],(function(t){var n,e,r,o,s,u,i,a,c,p;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){s=t.autoBindToWindow,u=t.log,i=t.instance_base},function(t){a=t.Environment},function(t){c=t.ToastType,p=t.showToast}],execute:function(){var h;o._RF.push({},"cb14akqzPhM6byk3/V6Tap6","NetMgr",void 0);var f=s(h=function(t){function o(){for(var n,e,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).API_CONFIG=((n={})[a.Test]="https://communitytest.best-envision.com/",n[a.PreRelease]="https://community-api2.joyhub.net/",n[a.Production]="https://community-api.joyhub.net/",n),e.currentEnv=a.Test,e.token="uPo+dxh6eeTOyN+4wMSZUBRUZngS3s9tKWY8qKLc+fKBY5K3co9GPpAMJJO/QVMmEh9XFxx2AEYSEE6NxF1UuMy41gQzC8p/DEANfPQ6Gw8ISCFBhtTBLQwsGMr5faddvIh+Zq6Z1EKCuw==",e}n(o,t);var s=o.prototype;return s.setToken=function(t){this.token=t,u("NetMgr: Tokenå·²æ›´æ–°")},s.getToken=function(){return this.token},s.setEnvironment=function(t){this.currentEnv=t,u("NetMgr: ç¯å¢ƒå·²åˆ‡æ¢è‡³ "+t+" ("+this.API_CONFIG[t]+")")},s.getEnvironment=function(){return this.currentEnv},s.getBaseURL=function(){return this.API_CONFIG[this.currentEnv]},s.request=function(){var t=e(r().mark((function t(n,e){var o,s,i,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.getBaseURL()+n,t.prev=1,u("NetMgr: è¯·æ±‚ "+o,e),t.next=5,fetch(o,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/json","External-Authorization":this.token},body:e?JSON.stringify(e):void 0});case 5:return s=t.sent,t.next=8,s.json();case 8:return i=t.sent,u("NetMgr: å“åº” "+o,i),0!==i.code&&this.showToastInternal(i.msg||"è¯·æ±‚å¤±è´¥"),t.abrupt("return",i);case 14:return t.prev=14,t.t0=t.catch(1),u("NetMgr: è¯·æ±‚å¼‚å¸¸ "+o,t.t0),a=t.t0 instanceof Error?t.t0.message:"ç½‘ç»œè¯·æ±‚å¤±è´¥",this.showToastInternal(a),t.abrupt("return",{code:-1,msg:a,data:null});case 20:case"end":return t.stop()}}),t,this,[[1,14]])})));return function(n,e){return t.apply(this,arguments)}}(),s.showToastInternal=function(){var t=e(r().mark((function t(n,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=c.Error),t.next=3,p(n,e);case 3:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),s.getGameConfig=function(){var t=e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("api/marble/config"));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.startGame=function(){var t=e(r().mark((function t(n){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={multiplier:n},t.abrupt("return",this.request("api/marble/run",e));case 2:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),o}(i))||h;t("netMgr",f.instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/NetTypes.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"00000AAAAAAAAAAAAAAAAAA","NetTypes",void 0);e("Environment",function(e){return e.Test="test",e.PreRelease="prerelease",e.Production="production",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,r,n,o,a,i,s,c,u,l,f,p,h,b;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.instantiate,i=e.Prefab},function(e){s=e.PoolBuilder,c=e.instance_base,u=e.asset,l=e.error},function(e){f=e.GTextField,p=e.AutoSizeType,h=e.UIPackage},function(e){b=e.GUIManager}],execute:function(){o._RF.push({},"04672eWqVFIKJiVK6TVkrA3","PoolMgr",void 0);e("objPoolMgr",function(e){function o(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._prefabpools=new Map,t._gobjpools=new Map,t._txtPool=null,t}t(o,e);var c=o.prototype;return c.getPrefabPool=function(){var e=r(n().mark((function e(t,o){var c,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=""+o+t,this._prefabpools.has(c)){e.next=7;break}return l=null,e.next=5,s().create(r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.next=3,u.get(t,i,null,{bundle_s:o});case 3:l=e.sent;case 4:return e.abrupt("return",a(l));case 5:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent=null,e.active=!0,e})).clear((function(e){e.forEach((function(e){e.destroy()}))})).initialSize(5).maxSize(50).buildAsync();case 5:f=e.sent,this._prefabpools.set(c,f);case 7:return e.abrupt("return",this._prefabpools.get(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),c.getGobjPool=function(){var e=r(n().mark((function e(t,o){var a,i,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=""+t+o,this._gobjpools.has(a)){e.next=7;break}return i=null,e.next=5,s().create(r(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=6;break}if(i=h.getByName(t)){e.next=6;break}return e.next=5,b.loadPackage(t);case 5:i=e.sent;case 6:return(r=i.createObject(o))||l("create gobj "+t+"/"+o+" failed,è¯·æ£€æŸ¥èµ„æºæ˜¯å¦å­˜åœ¨"),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()}))})).initialSize(1).maxSize(2).buildAsync();case 5:c=e.sent,this._gobjpools.set(a,c);case 7:return e.abrupt("return",this._gobjpools.get(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),c.getTxtPool=function(){return this._txtPool||(this._txtPool=s().create((function(){return new f})).reset((function(e){return e.parent?e.removeFromParent():e.node.parent=null,e.fontSize=20,e.text="",e.bold=!1,e.sortingOrder=0,e.alpha=1,e.setPivot(.5,1,!0),e.autoSize=p.Both,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()}))})).initialSize(5).maxSize(100).buildSync()),this._txtPool},c.clear=function(){this._prefabpools.forEach((function(e){e.clear(),e.destroy()})),this._prefabpools.clear(),this._gobjpools.forEach((function(e){e.clear(),e.destroy()})),this._gobjpools.clear(),this._txtPool&&(this._txtPool.clear(),this._txtPool.destroy(),this._txtPool=null)},o}(c).instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/RewardScoreAnimator.ts",["cc","./drongo-cc.mjs"],(function(t){var i,e,l,a;return{setters:[function(t){i=t.cclegacy,e=t.tween,l=t.Vec3},function(t){a=t.log}],execute:function(){i._RF.push({},"8e83aF0zHFDGZsmMiYVyBmO","RewardScoreAnimator",void 0);t("RewardScoreAnimator",function(){function t(){this.label=null,this.lightSprite=null}var i=t.prototype;return i.init=function(t){t&&t.isValid?(this.label=t,t.node.parent&&t.node.parent.children.length>0&&(this.lightSprite=t.node.parent.children[0]),this.reset(),a("[RewardScoreAnimator] âœ… åˆå§‹åŒ–å®Œæˆ")):a("[RewardScoreAnimator] âŒ Labelæ— æ•ˆ")},i.reset=function(){if(this.label&&this.label.isValid){this.lightSprite&&this.lightSprite.isValid&&(this.lightSprite.active=!1);var t=this.label.color.clone();t.a=38,this.label.color=t,this.label.string="â€”â€”",a("[RewardScoreAnimator] é‡ç½®ä¸ºåˆå§‹çŠ¶æ€")}},i.activate=function(){if(this.label&&this.label.isValid){this.lightSprite&&this.lightSprite.isValid&&(this.lightSprite.active=!0);var t=this.label.color.clone();t.a=255,this.label.color=t,a("[RewardScoreAnimator] è®¡åˆ†æ¿å·²æ¿€æ´»")}},i.playMultiplyAnimation=function(t,i,l,n){if(!this.label||!this.label.isValid)return a("[RewardScoreAnimator] âš ï¸ Labelæ— æ•ˆï¼Œæ— æ³•æ’­æ”¾åŠ¨ç”»"),void(n&&n());e(this.label.node).stop(),a("[RewardScoreAnimator] å¼€å§‹ç§¯åˆ†åŠ¨ç”»ï¼Œç›®æ ‡:",l),this.label.string="0",this.animateCountUp(0,l,1,n)},i.animateCountUp=function(t,i,n,r){var o=this;if(this.label&&this.label.isValid){var s=n/20,c=(i-t)/20,h=t,d=this.label.node,u=0;e(d).repeat(20,e().delay(s).call((function(){o.label&&o.label.isValid&&(h+=c,u++,o.label.string=u>=20?i.toString():Math.floor(h).toString())}))).call((function(){a("[RewardScoreAnimator] é€’å¢å®Œæˆï¼Œå¼€å§‹é—ªçƒ")})).to(.15,{scale:new l(1.2,1.2,1)}).to(.15,{scale:new l(1,1,1)}).to(.15,{scale:new l(1.2,1.2,1)}).to(.15,{scale:new l(1,1,1)}).call((function(){a("[RewardScoreAnimator] âœ… åŠ¨ç”»å…¨éƒ¨å®Œæˆ"),r&&r()})).start()}else r&&r()},i.stop=function(){this.label&&this.label.isValid&&e(this.label.node).stop()},i.destroy=function(){this.stop(),this.label=null,this.lightSprite=null},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/StartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./CommonExport.ts","./fairygui.mjs","./drongo-cc.mjs","./TrajectoryData.ts","./GameDataMgr.ts","./GameConfig.ts","./NetMgr.ts","./NetTypes.ts","./ToyControlInterface.ts"],(function(e){var t,r,n,a,o,i,s,c,u,l,p,d,g,f,w,m,h,b,v,S,G,y,C,V,P,B,L,A,R,M,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Label,l=e.ProgressBar,p=e.Node,d=e.color,g=e.director,f=e.tween,w=e.Component},function(e){m=e.AudioUtil,h=e.AllBinder,b=e.BackgroundAdapter,v=e.GUIManager},null,function(e){S=e.GRoot,G=e.UIConfig,y=e.registerFont},function(e){C=e.log},function(e){V=e.TrajectoryConfig},function(e){P=e.gameDataMgr},function(e){B=e.setGameMode,L=e.GameMode,A=e.getCurrentGameMode},function(e){R=e.netMgr},function(e){M=e.Environment},function(e){I=e.ToyControlInterface}],execute:function(){var T,k,x,O,U,j,D,K;s._RF.push({},"b717ey19TVBBpBqTI0xPCo1","StartView",void 0);var N=c.ccclass,Y=c.property;e("default",(T=Y(u),k=Y(l),x=Y(p),N((j=t((U=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"label",j,a(t)),n(t,"progressBar",D,a(t)),n(t,"bg",K,a(t)),t.progressObj={value:0},t}r(t,e);var s=t.prototype;return s.onLoad=function(){this.parseAndSetGameMode(),S.create(),G.buttonSoundVolumeScale=1,G.bringWindowToFrontOnClick=!1,y("GILROY-BLACK"),G.defaultFont="GILROY-BLACK",G.modalLayerColor=d(0,0,0,204),this.progressBar.progress=0,this.label.string="0%",this.progressObj.value=0,I.init(),g.addPersistRootNode(this.node)},s.parseAndSetGameMode=function(){if("undefined"!=typeof window)try{var e=new URLSearchParams(window.location.search),t=e.get("token");if(t){C("[StartView] âœ… æ£€æµ‹åˆ°Tokenå‚æ•°ï¼Œå¼ºåˆ¶è®¾ç½®ä¸º PLAYBACK æ¨¡å¼"),R.setToken(t);var r=e.get("env");if(r){var n=M.Test,a=r.toLowerCase();n="production"===a||"prod"===a?M.Production:"prerelease"===a||"pre"===a?M.PreRelease:M.Test,R.setEnvironment(n),C("[StartView] âœ… ä»URLè®¾ç½®ç¯å¢ƒä¸º:",n)}return void B(L.PLAYBACK)}var o=e.get("GameMode");if(o){var i=o.toUpperCase();"PLAYBACK"===i?(B(L.PLAYBACK),C("[StartView] âœ… ä»URLè®¾ç½®æ¸¸æˆæ¨¡å¼ä¸º: PLAYBACK")):"RECORDING"===i?(B(L.RECORDING),C("[StartView] âœ… ä»URLè®¾ç½®æ¸¸æˆæ¨¡å¼ä¸º: RECORDING")):C("[StartView] âš ï¸ æ— æ•ˆçš„GameModeå‚æ•°:",o,"ä½¿ç”¨é»˜è®¤æ¨¡å¼")}else C("[StartView] æœªæŒ‡å®šGameModeå‚æ•°ï¼Œä½¿ç”¨é»˜è®¤æ¨¡å¼:",A())}catch(e){C("[StartView] âš ï¸ è§£æURLå‚æ•°å¤±è´¥:",e)}else C("[StartView] éæµè§ˆå™¨ç¯å¢ƒï¼Œä½¿ç”¨é»˜è®¤æ¸¸æˆæ¨¡å¼")},s.start=function(){var e=o(i().mark((function e(){var t,r,n,a,s=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.bindAll(),e.prev=1,b.adaptBackground(this.bg),C("[StartView] å¼€å§‹åŠ è½½UIåŒ…..."),e.next=6,v.loadPackage("Game",(function(e,t){var r=.4*(e/t);s.updateProgress(r,"åŠ è½½UIèµ„æº")}));case 6:return C("[StartView] âœ… UIåŒ…åŠ è½½å®Œæˆ"),C("[StartView] å¼€å§‹å¹¶è¡ŒåŠ è½½æ¸¸æˆé…ç½®å’Œåœºæ™¯..."),t=0,r=0,n=function(){var e=.4+.2*t+.2*r;s.updateProgress(e,"åŠ è½½ä¸­")},e.next=13,Promise.all([o(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C("[StartView] â†’ åŠ è½½æ¸¸æˆé…ç½®..."),t=0,n(),e.next=5,P.loadConfig();case 5:return(r=e.sent)?(C("[StartView] âœ… æ¸¸æˆé…ç½®åŠ è½½æˆåŠŸ"),t=1,n()):C("[StartView] âŒ æ¸¸æˆé…ç½®åŠ è½½å¤±è´¥"),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))(),o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C("[StartView] â†’ é¢„åŠ è½½Gameåœºæ™¯..."),r=0,n(),e.next=5,new Promise((function(e,t){g.preloadScene("game",(function(e,t){r=e/t,n()}),(function(a){a?(console.error("åœºæ™¯é¢„åŠ è½½å¤±è´¥:",a),t(a)):(C("[StartView] âœ… åœºæ™¯é¢„åŠ è½½å®Œæˆ"),r=1,n(),e())}))}));case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})))()]);case 13:if(a=e.sent,a[0]){e.next=18;break}return C("[StartView] âŒ æ¸¸æˆé…ç½®åŠ è½½å¤±è´¥ï¼Œæ— æ³•å¯åŠ¨æ¸¸æˆ"),e.abrupt("return");case 18:return C("[StartView] âœ… æ¸¸æˆé…ç½®å’Œåœºæ™¯é¢„åŠ è½½å®Œæˆ"),C("[StartView] ğŸ’¡ æ¸¸æˆUIå°†åœ¨GameView.start()ä¸­æ‰“å¼€"),C("å¼€å§‹åŠ è½½è½¨è¿¹æ•°æ®..."),this.updateProgress(.8,"åŠ è½½è½¨è¿¹æ•°æ®"),e.prev=22,e.next=25,V.loadTrajectories();case 25:C("è½¨è¿¹æ•°æ®åŠ è½½å®Œæˆï¼"),this.updateProgress(1,"åŠ è½½å®Œæˆ"),e.next=34;break;case 29:e.prev=29,e.t0=e.catch(22),console.warn("è½¨è¿¹æ•°æ®åŠ è½½å¤±è´¥:",e.t0),C("âš ï¸ è½¨è¿¹æ•°æ®åŠ è½½å¤±è´¥ï¼Œæ¸¸æˆå°†ä»¥å½•åˆ¶æ¨¡å¼å¯åŠ¨"),this.updateProgress(1,"åŠ è½½å®Œæˆ");case 34:try{m.playBGM(this.node,"Game","bgm"),C("BGMæ’­æ”¾æˆåŠŸ")}catch(e){console.warn("BGMæ’­æ”¾å¤±è´¥:",e)}C("æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆï¼Œå‡†å¤‡åˆ‡æ¢åˆ°Gameåœºæ™¯..."),this.updateProgress(1,"åŠ è½½å®Œæˆ"),this.scheduleOnce((function(){g.loadScene("game",(function(e){e?console.error("åœºæ™¯åˆ‡æ¢å¤±è´¥:",e):C("æˆåŠŸåˆ‡æ¢åˆ°Gameåœºæ™¯")}))}),.5),e.next=45;break;case 40:e.prev=40,e.t1=e.catch(1),console.error("èµ„æºåŠ è½½å¤±è´¥:",e.t1),C("é¢„åŠ è½½å¤±è´¥ï¼Œå°è¯•ç›´æ¥åˆ‡æ¢åœºæ™¯..."),this.scheduleOnce((function(){g.loadScene("game")}),1);case 45:case"end":return e.stop()}}),e,this,[[1,40],[22,29]])})));return function(){return e.apply(this,arguments)}}(),s.updateProgress=function(e,t){var r=this;f(this.progressObj).stop(),f(this.progressObj).to(.3,{value:e},{onUpdate:function(){r.progressBar.progress=r.progressObj.value;var e=Math.floor(100*r.progressObj.value);r.label.string=e+"%"}}).start()},t}(w)).prototype,"label",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(U.prototype,"progressBar",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(U.prototype,"bg",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=U))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/ToastUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./PoolMgr.ts"],(function(t){var e,r,n,o,s,i,a;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){n=t.cclegacy,o=t.Color,s=t.tween},function(t){i=t.GRoot},function(t){a=t.objPoolMgr}],execute:function(){var c;t("showToast",(function(t,e){return p.apply(this,arguments)})),n._RF.push({},"92e47j6p8hCmbxdBhzqe1Yk","ToastUtil",void 0);var u=t("ToastType",function(t){return t.Info="info",t.Success="success",t.Warning="warning",t.Error="error",t}({})),l=((c={})[u.Info]=new o(255,255,255,255),c[u.Success]=new o(76,217,100,255),c[u.Warning]=new o(255,204,0,255),c[u.Error]=new o(255,59,48,255),c);function p(){return(p=e(r().mark((function t(e,n){var o,c,p,f,g,h,d,v;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=u.Info),t.prev=1,t.next=4,a.getGobjPool("Game","Tooltips");case 4:if(o=t.sent){t.next=8;break}return console.error("ToastUtil: è·å–å¯¹è±¡æ± å¤±è´¥"),t.abrupt("return");case 8:return t.next=10,o.get();case 10:if(c=t.sent){t.next=14;break}return console.error("ToastUtil: åˆ›å»ºå®ä¾‹å¤±è´¥"),t.abrupt("return");case 14:c.title=e,p=l[n]||l[u.Info],c.titleColor=p,c.sortingOrder=1e9,f=i.inst.width,g=i.inst.height,h=f/2,d=.5*g,c.x=h,c.y=d,c.alpha=1,(v=c.getChildAt(0)).visible=!1,i.inst.addChild(c),v.visible=!0,s(c).delay(1.5).to(1.5,{y:d-80,alpha:0},{easing:"sineOut"}).call((function(){o.put(c)})).start(),t.next=35;break;case 32:t.prev=32,t.t0=t.catch(1),console.error("ToastUtil: æ˜¾ç¤ºToastå¤±è´¥",t.t0);case 35:case"end":return t.stop()}}),t,null,[[1,32]])})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/ToyControlInterface.ts",["cc","./drongo-cc.mjs"],(function(t){var n,o;return{setters:[function(t){n=t.cclegacy},function(t){o=t.log}],execute:function(){n._RF.push({},"f2b3cTV5vdIqZq83vEjRWeJ","ToyControlInterface",void 0);var e=function(t){return t.GAME_END="1",t.GAME_PLAYING="2",t.GAME_PAUSE="3",t.PHONE_VIBRATE="4",t}(e||{}),i=function(t){return t.PERFECT="Perfect",t.GREAT="Great",t.GOOD="Good",t.COOL="Cool",t.MISS="Miss",t}(i||{}),r=t("ToyControlInterface",function(){function t(){}return t.init=function(){"undefined"!=typeof window&&window.unityCallJsFunc?(this.isEnabled=!0,console.log("[ToyControlInterface] ç©å…·æ§åˆ¶æ¥å£å·²å°±ç»ª")):console.log("[ToyControlInterface] ç©å…·æ§åˆ¶æ¥å£ä¸å¯ç”¨ï¼ˆéUnityç¯å¢ƒæˆ–æ¥å£æœªæ³¨å…¥ï¼‰")},t.vibrate=function(){var t=this;this.isEnabled&&(null!==this.stopTimer&&(clearTimeout(this.stopTimer),this.stopTimer=null),this.callUnityInterface(e.GAME_PLAYING,i.GOOD),this.callUnityInterface(e.PHONE_VIBRATE,i.MISS),o("[ToyControlInterface] è§¦å‘éœ‡åŠ¨ (Toy: Good, Phone: Vibrate)"),this.stopTimer=setTimeout((function(){t.stop()}),this.VIBRATE_DURATION))},t.stop=function(){this.isEnabled&&(null!==this.stopTimer&&(clearTimeout(this.stopTimer),this.stopTimer=null),this.callUnityInterface(e.GAME_PLAYING,i.MISS),o("[ToyControlInterface] åœæ­¢éœ‡åŠ¨"))},t.setEnabled=function(t){this.isEnabled=t&&"undefined"!=typeof window&&!!window.unityCallJsFunc},t.callUnityInterface=function(t,n){if(this.isEnabled&&window.unityCallJsFunc){var o={type:t,point_score:n},e=JSON.stringify(o);try{window.unityCallJsFunc(e)}catch(t){console.error("[ToyControlInterface] è°ƒç”¨Unityæ¥å£å¤±è´¥:",t)}}},t}());r.isEnabled=!1,r.stopTimer=null,r.VIBRATE_DURATION=500,n._RF.pop()}}}));

System.register("chunks:///_virtual/TrajectoryCompressor.ts",["cc"],(function(r){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"36f6eKRqGFDIrpJw2MarGcE","TrajectoryCompressor",void 0);r("TrajectoryCompressor",function(){function r(){}return r.compress=function(r){try{var e=JSON.stringify(r);return btoa(encodeURIComponent(e))}catch(r){return console.error("[TrajectoryCompressor] å‹ç¼©å¤±è´¥:",r),""}},r.decompress=function(r){try{var e=decodeURIComponent(atob(r));return JSON.parse(e)}catch(r){return console.error("[TrajectoryCompressor] è§£å‹å¤±è´¥:",r),null}},r.getCompressionRatio=function(r,e){var o=JSON.stringify(r).length;return 100*(1-e.length/o)},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TrajectoryData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(t){var e,r,n,a,o,i;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,o=t.JsonAsset},function(t){i=t.asset}],execute:function(){a._RF.push({},"3c3225SUyVAaawsMfBzWyB+","TrajectoryData",void 0);t("TrajectoryCodec",function(){function t(){}return t.toFixed=function(t){return Math.round(100*t)},t.fromFixed=function(t){return t/100},t}());var s=t("TrajectoryConfig",function(){function t(){}return t.getTrajectoryByResult=function(t,e){var r=this.TRAJECTORIES.get(t);return!r||e<0||e>=r.length?null:r[e]},t.getRandomTrajectory=function(t){if((t-=1)<0||t>=this.TRAJECTORIES.size)return null;var e=this.TRAJECTORIES.get(t);return e&&0!==e.length?e[Math.floor(Math.random()*e.length)]:null},t.getTrajectories=function(t){return this.TRAJECTORIES.get(t)||[]},t.addTrajectory=function(t){this.TRAJECTORIES.has(t.trackId)||this.TRAJECTORIES.set(t.trackId,[]),this.TRAJECTORIES.get(t.trackId).push(t)},t.getAllTrajectories=function(){return this.TRAJECTORIES},t.importTrajectories=function(t){var e=this;this.TRAJECTORIES.clear(),t.forEach((function(t){e.TRAJECTORIES.set(t.trackId,t.trajectories)}))},t.clearAll=function(){this.TRAJECTORIES.clear(),this.isLoaded=!1},t.loadTrajectories=function(){var t=e(r().mark((function t(e){var a,s,c,u,T,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLoaded){t.next=2;break}return t.abrupt("return");case 2:if(!this.isLoading){t.next=9;break}case 3:if(!this.isLoading){t.next=8;break}return t.next=6,new Promise((function(t){return setTimeout(t,100)}));case 6:t.next=3;break;case 8:return t.abrupt("return");case 9:this.isLoading=!0,t.prev=10,a=n(e||[0,1,2,3,4,5,6]);case 13:if((s=a()).done){t.next=28;break}return c=s.value,u="trajectories/track_"+c+"-min",t.prev=16,t.next=19,i.get(u,o,null);case 19:(T=t.sent)&&T.json&&(f=T.json,Array.isArray(f)&&f.length>0&&(this.TRAJECTORIES.set(c,f),console.log("[TrajectoryConfig] åŠ è½½èµ›é“ "+c+" æˆåŠŸï¼Œè½¨è¿¹æ•°: "+f.length))),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(16),console.warn("[TrajectoryConfig] èµ›é“ "+c+" è½¨è¿¹æ–‡ä»¶ä¸å­˜åœ¨æˆ–åŠ è½½å¤±è´¥:",t.t0);case 26:t.next=13;break;case 28:this.isLoaded=!0,console.log("[TrajectoryConfig] è½¨è¿¹æ•°æ®åŠ è½½å®Œæˆï¼Œæ€»èµ›é“æ•°:",this.TRAJECTORIES.size),t.next=35;break;case 32:t.prev=32,t.t1=t.catch(10),console.error("[TrajectoryConfig] åŠ è½½è½¨è¿¹æ•°æ®å¤±è´¥:",t.t1);case 35:return t.prev=35,this.isLoading=!1,t.finish(35);case 38:case"end":return t.stop()}}),t,this,[[10,32,35,38],[16,23]])})));return function(e){return t.apply(this,arguments)}}(),t.isTrajectoryLoaded=function(){return this.isLoaded},t}());s.TRAJECTORIES=new Map,s.isLoading=!1,s.isLoaded=!1,a._RF.pop()}}}));

System.register("chunks:///_virtual/TrajectoryPlayer.ts",["cc","./drongo-cc.mjs","./TrajectoryData.ts"],(function(t){var e,r,i;return{setters:[function(t){e=t.cclegacy},function(t){r=t.log},function(t){i=t.TrajectoryCodec}],execute:function(){e._RF.push({},"3fdcaNpwDpKboowcbmI9Xxj","TrajectoryPlayer",void 0);t("TrajectoryPlayer",function(){function t(t){this.isPlaying=!1,this.currentFrame=0,this.trajectoryData=null,this.ball=void 0,this.onComplete=null,this.onEvent=null,this.eventIndex=0,this.needDisablePhysics=!1,this.runtimeKeyframes=[],this.ball=t}var e=t.prototype;return e.play=function(t,e,i){this.isPlaying?r("[TrajectoryPlayer] è­¦å‘Šï¼šå·²åœ¨æ’­æ”¾ä¸­"):(this.isPlaying=!0,this.currentFrame=0,this.trajectoryData=t,this.onComplete=e||null,this.onEvent=i||null,this.eventIndex=0,this.needDisablePhysics=!0,this.decompressKeyframes(t),r("[TrajectoryPlayer] ========== å¼€å§‹æ’­æ”¾è½¨è¿¹ =========="),r("[TrajectoryPlayer] èµ›é“ID:",t.trackId),r("[TrajectoryPlayer] æ€»å¸§æ•°:",t.totalFrames),r("[TrajectoryPlayer] å…³é”®å¸§æ•°:",this.runtimeKeyframes.length))},e.stop=function(){this.isPlaying&&(this.isPlaying=!1,this.currentFrame=0,this.trajectoryData=null,this.eventIndex=0,r("[TrajectoryPlayer] æ’­æ”¾å·²åœæ­¢"))},e.update=function(){if(this.isPlaying&&this.trajectoryData&&this.ball){this.needDisablePhysics&&(this.needDisablePhysics=!1,this.ball&&this.ball.isValid&&(this.ball.enabled=!1,this.ball.enabledContactListener=!1,r("[TrajectoryPlayer] å·²ç¦ç”¨ç‰©ç†å¼•æ“"))),this.checkEvents();var t=this.interpolateFrame(this.currentFrame);if(t){if(this.ball.node.setPosition(t.x,t.y,0),this.ball.node.setRotationFromEuler(0,0,t.rot),this.currentFrame++,this.currentFrame%30==0){var e=(this.currentFrame/this.trajectoryData.totalFrames*100).toFixed(1);r("[TrajectoryPlayer] æ’­æ”¾è¿›åº¦:",e+"%")}}else this.completePlayback()}},e.isActive=function(){return this.isPlaying},e.decompressKeyframes=function(t){this.runtimeKeyframes=[];for(var e=t.keys,i=e.f.length,a=0,n=0,s=0,o=0,l=0;l<i;l++)a+=e.f[l],n+=e.x[l],s+=e.y[l],o+=e.r[l],this.runtimeKeyframes.push({f:a,x:n,y:s,r:o});r("[TrajectoryPlayer] è§£å‹å®Œæˆï¼Œå…³é”®å¸§æ•°:",i)},e.interpolateFrame=function(t){if(!this.trajectoryData||0===this.runtimeKeyframes.length)return null;var e=this.runtimeKeyframes;if(t>=this.trajectoryData.totalFrames)return null;for(var r=null,a=null,n=0;n<e.length;n++)if(e[n].f<=t&&(r=e[n]),e[n].f>=t&&!a){a=e[n];break}if(r&&r.f===t)return{x:i.fromFixed(r.x),y:i.fromFixed(r.y),rot:i.fromFixed(r.r)};if(r&&a&&r.f!==a.f){var s=(t-r.f)/(a.f-r.f);return{x:i.fromFixed(this.lerpInt(r.x,a.x,s)),y:i.fromFixed(this.lerpInt(r.y,a.y,s)),rot:i.fromFixed(this.lerpInt(r.r,a.r,s))}}return r?{x:i.fromFixed(r.x),y:i.fromFixed(r.y),rot:i.fromFixed(r.r)}:null},e.lerpInt=function(t,e,r){return Math.round(t+(e-t)*r)},e.checkEvents=function(){if(this.trajectoryData&&this.trajectoryData.events&&this.onEvent)for(var t=this.trajectoryData.events;this.eventIndex<t.length&&t[this.eventIndex].frame<=this.currentFrame;){var e=t[this.eventIndex];this.onEvent(e),r("[TrajectoryPlayer] è§¦å‘äº‹ä»¶:",e.type,"å¸§:",e.frame),this.eventIndex++}},e.completePlayback=function(){r("[TrajectoryPlayer] ========== æ’­æ”¾å®Œæˆ =========="),this.isPlaying=!1,this.currentFrame=0,this.trajectoryData=null,this.eventIndex=0,this.onComplete&&(this.onComplete(),this.onComplete=null)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TrajectoryRecorder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./TrajectoryData.ts"],(function(r){var e,t,s,o;return{setters:[function(r){e=r.createForOfIteratorHelperLoose},function(r){t=r.cclegacy},function(r){s=r.log},function(r){o=r.TrajectoryCodec}],execute:function(){t._RF.push({},"ad199E+JfpEar3qyzhDD2ST","TrajectoryRecorder",void 0);r("TrajectoryRecorder",function(){function r(r){this.isRecording=!1,this.rawFrames=[],this.keyframeIndices=new Set,this.events=[],this.frameCount=0,this.startTime=0,this.lastCollisionFrame=-1,this.lastCollisionName="",this.targetTrackId=-1,this.recordForce=0,this.recordAngleOffset=0,this.ball=void 0,this.fps=60,this.ball=r}var t=r.prototype;return t.startRecording=function(r,e,t){void 0===e&&(e=0),void 0===t&&(t=-1),this.isRecording?s("[TrajectoryRecorder] è­¦å‘Šï¼šå·²åœ¨å½•åˆ¶ä¸­ï¼Œè¯·å…ˆåœæ­¢"):(this.isRecording=!0,this.rawFrames=[],this.keyframeIndices.clear(),this.events=[],this.frameCount=0,this.startTime=Date.now(),this.lastCollisionFrame=-1,this.lastCollisionName="",this.targetTrackId=t,this.recordForce=r,this.recordAngleOffset=e,s("[TrajectoryRecorder] ========== å¼€å§‹å½•åˆ¶ =========="),s("[TrajectoryRecorder] ç›®æ ‡èµ›é“:",-1===t?"å¾…å®šï¼ˆè¿›å…¥å¥–åŠ±åŒºåç¡®å®šï¼‰":t),s("[TrajectoryRecorder] å‘å°„åŠ›åº¦:",r),s("[TrajectoryRecorder] è§’åº¦åç§»:",e))},t.setTargetTrackId=function(r){this.isRecording?(this.targetTrackId=r,s("[TrajectoryRecorder] âœ… ç¡®å®šç›®æ ‡èµ›é“:",r)):s("[TrajectoryRecorder] è­¦å‘Šï¼šæœªåœ¨å½•åˆ¶ä¸­ï¼Œæ— æ³•è®¾ç½®èµ›é“ID")},t.stopRecording=function(){if(!this.isRecording)return null;this.isRecording=!1;for(var r,t=Date.now()-this.startTime,i=this.selectKeyframes(),a=[],c=[],n=[],h=[],d=0,l=0,y=0,f=0,u=e(i);!(r=u()).done;){var m=r.value,R=this.rawFrames[m],g=o.toFixed(R.x),v=o.toFixed(R.y),T=o.toFixed(R.rot);a.push(m-d),c.push(g-l),n.push(v-y),h.push(T-f),d=m,l=g,y=v,f=T}var F={trackId:this.targetTrackId,totalFrames:this.rawFrames.length,fps:this.fps,keys:{f:a,x:c,y:n,r:h},events:this.events.length>0?this.events:void 0,force:this.recordForce,angleOffset:this.recordAngleOffset,recordTime:(new Date).toISOString()};return this.logCompressionStats(F,t),this.exportAsTypeScript(F),s("[TrajectoryRecorder] âœ… è½¨è¿¹æ•°æ®å·²ç¼“å­˜åˆ°å†…å­˜ï¼Œå¯ç«‹å³æµ‹è¯•æ’­æ”¾"),F},t.cancelRecording=function(){this.isRecording&&(this.isRecording=!1,this.rawFrames=[],this.keyframeIndices.clear(),this.events=[],s("[TrajectoryRecorder] å½•åˆ¶å·²å–æ¶ˆ"))},t.update=function(){if(this.isRecording&&this.ball){var r=this.ball.node.position,e=this.ball.node.eulerAngles.z,t=this.ball.linearVelocity;this.rawFrames.push({x:r.x,y:r.y,rot:e,vx:t.x,vy:t.y}),this.frameCount++,this.frameCount%30==0&&s("[TrajectoryRecorder] å½•åˆ¶ä¸­...å¸§æ•°:",this.frameCount)}},t.markCurrentFrameAsKeyframe=function(r){if(this.isRecording&&0!==this.frameCount){var e=this.frameCount-1;if(r){if(e-this.lastCollisionFrame<5&&this.lastCollisionName===r)return;this.lastCollisionFrame=e,this.lastCollisionName=r}this.keyframeIndices.add(e),s("[TrajectoryRecorder] æ ‡è®°å…³é”®å¸§:",e,r?"("+r+")":"")}},t.recordEvent=function(r,e){this.isRecording&&(this.events.push({frame:this.frameCount-1,type:r,data:e}),s("[TrajectoryRecorder] è®°å½•äº‹ä»¶:",r,"å¸§:",this.frameCount-1))},t.isActive=function(){return this.isRecording},t.selectKeyframes=function(){var r=this;if(0===this.rawFrames.length)return[];for(var e=[0],t=Array.from(this.keyframeIndices),s=function(s){var o=e[e.length-1];return r.keyframeIndices.has(s)||r.hasRotationChange(o,s)||r.hasVelocityChange(o,s)||t.some((function(r){return s>r&&s<=r+5}))||s-o>=60?(e.push(s),0):void(r.hasInterpolationError(o,s)&&e.push(s))},o=1;o<this.rawFrames.length-1;o++)s(o);return e.push(this.rawFrames.length-1),e},t.hasInterpolationError=function(r,e){if(e>=this.rawFrames.length-1)return!1;var t=this.rawFrames[r],s=this.rawFrames[e],o=this.rawFrames[e+1],i=(e-r)/(o.x-r),a=t.x+i*(o.x-t.x),c=t.y+i*(o.y-t.y);return Math.sqrt(Math.pow(s.x-a,2)+Math.pow(s.y-c,2))>20},t.hasRotationChange=function(r,e){var t=this.rawFrames[r],s=this.rawFrames[e],o=Math.abs(s.rot-t.rot);return o>180&&(o=360-o),o>30},t.hasVelocityChange=function(r,e){var t=this.rawFrames[r],s=this.rawFrames[e],o=Math.sqrt(t.vx*t.vx+t.vy*t.vy),i=Math.sqrt(s.vx*s.vx+s.vy*s.vy),a=Math.abs(i-o)/(o+.1),c=(t.vx*s.vx+t.vy*s.vy)/((o+.1)*(i+.1));return a>.3||c<.9},t.logCompressionStats=function(r,e){var t=r.totalFrames,o=r.keys.f.length,i=(100*(1-o/t)).toFixed(1),a=100*t,c=16*o,n=(100*(1-c/a)).toFixed(1);s("[TrajectoryRecorder] ========== å½•åˆ¶å®Œæˆ =========="),s("[TrajectoryRecorder] å½•åˆ¶æ—¶é•¿:",(e/1e3).toFixed(2),"ç§’"),s("[TrajectoryRecorder] åŸå§‹å¸§æ•°:",t),s("[TrajectoryRecorder] å…³é”®å¸§æ•°:",o),s("[TrajectoryRecorder] å¸§å‹ç¼©ç‡:",i+"%"),s("[TrajectoryRecorder] ä¼°ç®—åŸå§‹å¤§å°:",(a/1024).toFixed(2),"KB"),s("[TrajectoryRecorder] ä¼°ç®—å‹ç¼©å¤§å°:",(c/1024).toFixed(2),"KB"),s("[TrajectoryRecorder] å¤§å°å‹ç¼©ç‡:",n+"%"),s("[TrajectoryRecorder] ç¢°æ’æ ‡è®°æ•°:",this.keyframeIndices.size),s("[TrajectoryRecorder] äº‹ä»¶è®°å½•æ•°:",this.events.length)},t.exportAsTypeScript=function(r){s("[TrajectoryRecorder] ========== åˆ—å¼+å·®åˆ†å‹ç¼©æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰==========");var e=[r],t=JSON.stringify(e,null,2);console.log(t),s("[TrajectoryRecorder] ========================================"),s("[TrajectoryRecorder] ğŸ’¡ å¤åˆ¶ä¸Šé¢çš„ JSON æ•°æ®åˆ°ï¼š"),s("[TrajectoryRecorder]    resources/trajectories/track_"+r.trackId+".json"),s("[TrajectoryRecorder] ğŸ“¦ æ–°æ ¼å¼ï¼šåˆ—å¼å­˜å‚¨ + å·®åˆ†ç¼–ç "),s("[TrajectoryRecorder] ğŸš€ é¢„æœŸä½“ç§¯ï¼š8-10KBï¼ˆæ¯”æ—§æ ¼å¼å‡å°‘ 60-70%ï¼‰")},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/UIUtil.ts",["cc","./drongo-cc.mjs"],(function(e){var n,o,t,l,i;return{setters:[function(e){n=e.cclegacy,o=e.Sprite,t=e.Label,l=e.Color},function(e){i=e.log}],execute:function(){e({setButtonInteractable:a,setButtonsInteractable:function(e,n,o){void 0===o&&(o=!1);e.forEach((function(e){a(e,n,o)}))}}),n._RF.push({},"95c1d4t1uFPI5ydANrONcX7","UIUtil",void 0);var c=new WeakMap;function a(e,n,a){if(void 0===a&&(a=!1),e&&e.isValid){e.interactable=n;var r=!1,u=e.node.getComponent(o);u&&(u.grayscale=!n,r=!0);var s=e.node.getComponentInChildren(t);if(s){if(n){var d=c.get(s);d&&(s.color=d.label.clone(),s.enableOutline&&d.outline&&(s.outlineColor=d.outline.clone()))}else c.has(s)||c.set(s,{label:s.color.clone(),outline:s.enableOutline?s.outlineColor.clone():null}),s.color=new l(150,150,150,255),s.enableOutline&&(s.outlineColor=new l(80,80,80,255));r=!0}a&&(r?i("[UIUtil] æŒ‰é’®",e.node.name,"äº¤äº’:",n,"å·²åº”ç”¨ç°åŒ–æ•ˆæœ"):i("[UIUtil] âš ï¸ æŒ‰é’®",e.node.name,"æ²¡æœ‰Spriteæˆ–Labelç»„ä»¶ï¼Œæ— æ³•è®¾ç½®ç°åŒ–"))}}n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});