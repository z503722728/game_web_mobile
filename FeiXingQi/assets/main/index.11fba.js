System.register("chunks:///_virtual/BaseTypeSet.ts",["cc","./CharInfo.ts","./TMRenderData.ts","./ETMQuadType.ts"],(function(n){var t,e,i,s;return{setters:[function(n){t=n.cclegacy},function(n){e=n.getCharInfoFromPool},function(n){i=n.TMQuadRenderDataPool},function(n){s=n.ETMQuadType}],execute:function(){t._RF.push({},"7069cMcdC5Fo4Z5uX/JtgrA","BaseTypeSet",void 0);var a=function(){function n(){this.startIndex=-1,this.lineLength=0,this.lineHeight=0,this.boundHeight=0,this.startY=0,this.existInLine=!1}return n.prototype.reset=function(){this.startIndex=-1,this.lineLength=0,this.lineHeight=0,this.boundHeight=0,this.existInLine=!1,this.startY=0},n}();n("BaseTypeSet",function(){function n(){this.hitTestResult={},this.breakLineInfo={lineIndex:-1,index:-1,lineHeight:0,maxDescent:0,maxAscent:0,maxHeight:0},this.underLineInfo=new a,this.strikeInfo=new a,this.backgroundInfo=new a,this.maskInfo=new a,this.beginUpdateHandlers=[],this.endUpdateHandlers=[],this.registUpdates()}var t=n.prototype;return t.registUpdates=function(){this.beginUpdateHandlers=[this.updateUnderLineInBegin,this.updateStrickInBegin,this.updateBackgroundInBegin,this.updateMaskInBegin],this.endUpdateHandlers=[this.updateUnderLineInEnd,this.updateStrickInEnd,this.updateBackgroundInEnd,this.updateMaskInEnd]},t.hitTest=function(n,t){return null},t.layout=function(n){return null},t.reset=function(){this.underLineInfo.reset(),this.strikeInfo.reset(),this.backgroundInfo.reset(),this.maskInfo.reset()},t.getWidth=function(n,t,e){var i=n.charInfos[t],s=n.charInfos[e];e>t&&" "==s.char.code&&(s=n.charInfos[e-1]);var a=s.x-i.x;return a+=s.realWidth+s.sw},t.calcLineInfo=function(n,t,e){t.startIndex>=0&&(t.lineLength+=e.w,e.visibleChar&&(n.fixedLineHeight?t.lineHeight=n.lineHeight:t.lineHeight=Math.max(t.lineHeight,e.h)))},t.appendUnderLineData=function(n,t,a){if(t>=0&&a>=t){var r=this.getWidth(n,t,a);if(r<=0)return;var o=i.alloc();o.charInfo||(o.charInfo=e()),o.charInfo.char=n.font.fontData.getRoundLine(),o.charInfo.style=n.charInfos[t].style,o.startIndex=t,o.endIndex=a,o.type=s.UnderLine,o.length=r,o.height=this.underLineInfo.lineHeight,o.maxHeight=this.breakLineInfo.maxHeight,n.underLineInfos.push(o)}},t.updateUnderLineInBegin=function(n,t,e){var i=n.charInfos,s=i[t];e||this.underLineInfo.startIndex>=0&&i[t-1].style.underline!=s.style.underline&&(this.appendUnderLineData(n,this.underLineInfo.startIndex,t-1),this.underLineInfo.lineLength=0,this.underLineInfo.startIndex=-1);this.underLineInfo.startIndex<0&&s.style.underline&&(this.underLineInfo.startIndex=t,this.underLineInfo.existInLine=!0),this.calcLineInfo(n,this.underLineInfo,s)},t.updateUnderLineInEnd=function(n,t){var e=n.charInfos[t];this.underLineInfo.startIndex>=0&&(this.underLineInfo.lineLength+=e.sw,this.appendUnderLineData(n,this.underLineInfo.startIndex,t)),this.underLineInfo.reset()},t.appendStrickData=function(n,t,a){if(t>=0&&a>=t){var r=this.getWidth(n,t,a);if(r<=0)return;var o=i.alloc();o.charInfo||(o.charInfo=e()),o.charInfo.char=n.font.fontData.getRoundLine(),o.charInfo.style=n.charInfos[t].style,o.startIndex=t,o.endIndex=a,o.type=s.DeleteLine,o.length=r,o.height=this.strikeInfo.lineHeight,o.maxHeight=this.breakLineInfo.maxHeight,n.strikeInfos.push(o)}},t.updateStrickInBegin=function(n,t,e){var i=n.charInfos,s=i[t];if(!e&&this.strikeInfo.startIndex>=0){var a=i[t-1];(a.style.strike!=s.style.strike||a.style.strike==s.style.strike&&a.style.fontSize!=s.style.fontSize)&&(this.appendStrickData(n,this.strikeInfo.startIndex,t-1),this.strikeInfo.lineLength=0,this.strikeInfo.startIndex=-1)}this.strikeInfo.startIndex<0&&s.style.strike&&(this.strikeInfo.startIndex=t,this.strikeInfo.existInLine=!0),this.calcLineInfo(n,this.strikeInfo,s)},t.updateStrickInEnd=function(n,t){var e=n.charInfos[t];this.strikeInfo.startIndex>=0&&(this.strikeInfo.lineLength+=e.sw,this.appendStrickData(n,this.strikeInfo.startIndex,t)),this.strikeInfo.reset()},t.appendBackgroundData=function(n,t,a){if(t>=0&&a>=t){var r=this.getWidth(n,t,a);if(r<=0)return;var o=i.alloc();o.charInfo||(o.charInfo=e()),o.charInfo.char=n.font.fontData.getRectLine(),o.charInfo.style=n.charInfos[t].style.clone(),o.charInfo.style.font=n.font,o.charInfo.style.setFillColor(n.backgroundColor),o.charInfo.style.setDilate(1,!0),o.startIndex=t,o.endIndex=a,o.type=s.Background,o.length=r,o.height=this.backgroundInfo.lineHeight,o.maxHeight=this.breakLineInfo.maxHeight,n.backgroundInfos.push(o)}},t.updateBackgroundInBegin=function(n,t,e){var i=n.charInfos,s=i[t];if(!e&&this.backgroundInfo.startIndex>=0){var a=i[t-1];(a.style.background!=s.style.background||a.style.background==s.style.background&&a.style.fontSize!=s.style.fontSize)&&(this.appendBackgroundData(n,this.backgroundInfo.startIndex,t-1),this.backgroundInfo.lineLength=0,this.backgroundInfo.startIndex=-1)}this.backgroundInfo.startIndex<0&&s.style.background&&(this.backgroundInfo.startIndex=t,this.backgroundInfo.existInLine=!0),this.calcLineInfo(n,this.backgroundInfo,s)},t.updateBackgroundInEnd=function(n,t){var e=n.charInfos[t];this.backgroundInfo.startIndex>=0&&(this.backgroundInfo.lineLength+=e.sw,this.appendBackgroundData(n,this.backgroundInfo.startIndex,t)),this.backgroundInfo.reset()},t.appendMaskData=function(n,t,a){if(t>=0&&a>=t){var r=this.getWidth(n,t,a);if(r<=0)return;var o=i.alloc();o.charInfo||(o.charInfo=e()),o.charInfo.char=n.font.fontData.getRectLine(),o.charInfo.style=n.charInfos[t].style.clone(),o.charInfo.style.font=n.font,o.charInfo.style.setFillColor(n.maskColor),o.charInfo.style.setDilate(1,!0),o.startIndex=t,o.endIndex=a,o.type=s.Mask,o.length=r,o.height=this.maskInfo.lineHeight,o.maxHeight=this.breakLineInfo.maxHeight,n.maskInfos.push(o)}},t.updateMaskInBegin=function(n,t,e){var i=n.charInfos,s=i[t];if(!e&&this.maskInfo.startIndex>=0){var a=i[t-1];(a.style.mask!=s.style.mask||a.style.mask==s.style.mask&&a.style.fontSize!=s.style.fontSize)&&(this.appendMaskData(n,this.maskInfo.startIndex,t-1),this.maskInfo.lineLength=0,this.maskInfo.startIndex=-1)}this.maskInfo.startIndex<0&&s.style.mask&&(this.maskInfo.startIndex=t,this.maskInfo.existInLine=!0),this.calcLineInfo(n,this.maskInfo,s)},t.updateMaskInEnd=function(n,t){var e=n.charInfos[t];this.maskInfo.startIndex>=0&&(this.maskInfo.lineLength+=e.sw,this.appendMaskData(n,this.maskInfo.startIndex,t)),this.maskInfo.reset()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CanvasPool.ts",["cc"],(function(t){var n,o;return{setters:[function(t){n=t.cclegacy,o=t.macro}],execute:function(){var e;n._RF.push({},"f6a44nrOwdCwISUOML2gxSS","CanvasPool",void 0);t("CanvasPool",function(){function t(){this.pool=[]}t.getInstance=function(){return e||(e=new t),e};var a=t.prototype;return a.get=function(){var t=this.pool.pop();if(!t){var o=n._global.window.document.createElement("canvas"),e=o.getContext("2d");t={canvas:o,context:e}}return t},a.put=function(t){this.pool.length>=o.MAX_LABEL_CANVAS_POOL_SIZE||this.pool.push(t)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Char.ts",["cc"],(function(t){var h;return{setters:[function(t){h=t.cclegacy}],execute:function(){h._RF.push({},"c7f97di1p5PAoeUHagjlvMD","Char",void 0);t("Char",function(){function t(){this.static=!1,this.code="",this.ref=0,this.index=0,this.uvs=new Float32Array,this.glyphWidth=0,this.glyphHeight=0,this.glyphAdvance=0,this.glyphRight=0,this.glyphLeft=0,this.width=0,this.height=0,this.size=0,this.ascent=0,this.descent=0,this.scale=0,this.cid=0}return t.fromTMFCharInfo=function(h,i,e){var s=new t;s.code=h;var a=e.x/i.atlasWidth,c=e.y/i.atlasHeight,n=(e.x+e.width)/i.atlasWidth,g=(e.y+e.height)/i.atlasHeight;return s.uvs=new Float32Array([a,c,n,c,a,g,n,g]),s.glyphWidth=e.glyphWidth,s.glyphHeight=e.glyphHeight,s.glyphAdvance=e.glyphAdvance,s.glyphRight=e.glyphRight,s.glyphLeft=e.glyphLeft,s.width=e.width,s.height=e.height,s.size=e.size,s.ascent=e.ascent,s.descent=e.descent,s.scale=e.scale,s.cid=e.channelID,s},t}());h._RF.pop()}}}));

System.register("chunks:///_virtual/CharInfo.ts",["cc","./ETMQuadType.ts"],(function(t){var i,s,h;return{setters:[function(t){i=t.cclegacy,s=t.Pool},function(t){h=t.ETMQuadType}],execute:function(){t({getCharInfoFromPool:function(){var t=n.alloc();return o(t),t},putCharInfoToPool:r,resetCharInfo:o}),i._RF.push({},"6f983k3BQRJFImMvnCN3dmk","CharInfo",void 0);var e=t("CharVertex",(function(){this.x=0,this.y=0,this.z=0,this.rx=0,this.ry=0,this.worldX=0,this.worldY=0,this.worldZ=0,this.scale=1,this.rot=0,this.u=0,this.v=0,this.u1=0,this.v1=0,this.uw=0,this.vh=0,this.type=h.Char})),a=new s((function(){return new e}),128),l=t("CharInfo",function(){function t(){this.index=0,this.font=void 0,this.blendMode=void 0,this.char=void 0,this.visible=!0,this.dirty=!0,this.style=void 0,this.vertexData=[],this.alpha=void 0,this.x=void 0,this.y=void 0,this.baseY=void 0,this.startY=void 0,this.rotate=void 0,this.ascent=0,this.descent=0,this.realWidth=0,this.realHeight=0,this.fontSize=0,this.offsetX=0,this.offsetY=0,this.fixedOffsetY=0,this.w=0,this.h=0,this.glyphLeft=0,this.glyphRight=0,this.sw=0,this.sw1=0,this.cjk=null,this.scale=1,this.slot=null,this.click=null,this.line=0,this.inline=0,this.visibleChar=!0,this.shadowChar=null}var i=t.prototype;return i.addVertex=function(){var t=a.alloc();return this.vertexData.push(t),t},i.copyFrom=function(t){this.index=t.index,this.dirty=!0,this.font=t.font,this.blendMode=t.blendMode,this.char=t.char,this.visible=t.visible,this.style=t.style,this.alpha=t.alpha,this.x=t.x,this.y=t.y,this.startY=t.startY,this.baseY=t.baseY,this.rotate=t.rotate,this.ascent=t.ascent,this.descent=t.descent,this.realWidth=t.realWidth,this.realHeight=t.realHeight,this.fontSize=t.fontSize,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.w=t.w,this.h=t.h,this.glyphLeft=t.glyphLeft,this.glyphRight=t.glyphRight,this.sw=t.sw,this.sw1=t.sw1,this.cjk=t.cjk,this.scale=t.scale,this.slot=t.slot,this.click=t.click,this.line=t.line,this.inline=t.inline,this.visibleChar=t.visibleChar,this.fixedOffsetY=t.fixedOffsetY},i.clear=function(){this.style.shadow>0&&!this.shadowChar?(this.shadowChar=n.alloc(),this.shadowChar.copyFrom(this)):this.shadowChar&&(r(this.shadowChar),this.shadowChar=null)},i.reset=function(){o(this,!1)},t}()),n=new s((function(){return new l}),128);function r(t){var i;null==(i=t.font)||i.freeChar(t.char);for(var s=0;s<t.vertexData.length;s++)a.free(t.vertexData[s]);t.vertexData.length=0,n.free(t),t.shadowChar&&(r(t.shadowChar),t.shadowChar=null)}function o(t,i){if(void 0===i&&(i=!0),!i){for(var s=0;s<t.vertexData.length;s++)a.free(t.vertexData[s]);return t.vertexData.length=0,void(t.cjk=null)}t.char=null,t.style=null,t.slot=null,t.click=null,t.index=0,t.font=null,t.blendMode=0,t.alpha=1,t.x=0,t.y=0,t.baseY=0,t.rotate=!1,t.realWidth=0,t.realHeight=0,t.fontSize=0,t.offsetX=0,t.offsetY=0,t.w=0,t.h=0,t.glyphLeft=0,t.glyphRight=0,t.sw=0,t.sw1=0,t.scale=1,t.line=0,t.inline=0,t.vertexData.length=0,t.visibleChar=!0,t.shadowChar=null,t.fixedOffsetY=0,t.visible=!0,t.startY=0,t.ascent=0,t.descent=0,t.cjk=null}i._RF.pop()}}}));

System.register("chunks:///_virtual/ChessboardConfigUtils.ts",["cc","./ChessboardGenerator.ts"],(function(r){var o,e;return{setters:[function(r){o=r.cclegacy},function(r){e=r.ChessboardGenerator}],execute:function(){o._RF.push({},"ab9a7LVw3xFaLb3k0xGZyiH","ChessboardConfigUtils",void 0);r("ChessboardConfigUtils",function(){function r(){}return r.validatePathContinuity=function(r){var o=[],n=e.generateChessboard(r);n.sort((function(r,o){return r.number-o.number})),console.log("=== 路径连续性检查 ===");for(var s=0;s<n.length-1;s++){var t=n[s],i=n[s+1],a=Math.abs(i.gridPos.row-t.gridPos.row)+Math.abs(i.gridPos.col-t.gridPos.col);console.log(t.number+"("+t.gridPos.row+","+t.gridPos.col+") -> "+i.number+"("+i.gridPos.row+","+i.gridPos.col+") 距离:"+a),1!==a&&o.push("格子"+t.number+"到"+i.number+"不相邻，距离为"+a)}return console.log("====================="),{valid:0===o.length,errors:o}},r.getCellPositions=function(r){var o=e.generateChessboard(r),n=new Map;return o.forEach((function(r){n.set(r.number,r.gridPos)})),n},r}());o._RF.pop()}}}));

System.register("chunks:///_virtual/ChessboardExamples.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ChessboardTypes.ts"],(function(e){var t,s,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy},function(e){n=e.Direction}],execute:function(){s._RF.push({},"f2cb1btQp1L1q+cRMLKy2/B","ChessboardExamples",void 0);e("DefaultChessboardConfig",{size:{rows:9,cols:6},cellSpacing:{cellWidth:104,cellHeight:104,spacing:10},startPosition:{row:0,col:5,style:2},pathSegments:[{direction:n.左,count:5,style:[1,0]},{direction:n.下,count:8,style:[3,4]},{direction:n.右,count:5,style:[5,6]},{direction:n.上,count:6,style:[3,7]},{direction:n.左,count:3,style:[3,8]},{direction:n.下,count:4,style:[3,3]},{direction:n.右,count:1,style:[3,9]}]}),e("ChessboardConfigUtils",function(){function e(){}return e.validateConfig=function(e){var s=[];if((e.size.rows<=0||e.size.cols<=0)&&s.push("棋盘尺寸必须大于0"),e.pathSegments){if(0===e.pathSegments.length&&s.push("至少需要一个路径段"),e.startPosition){var n=e.startPosition,r=n.row,o=n.col;(r<0||r>=e.size.rows||o<0||o>=e.size.cols)&&s.push("起点位置超出边界: ("+r+", "+o+")")}else s.push("使用路径段方式时必须指定起点位置");e.pathSegments.forEach((function(e,t){e.count<=0&&s.push("路径段 "+t+" 的格子数量必须大于0")}))}if(e.segments){0===e.segments.length&&s.push("至少需要一个线段");for(var i,u=new Set,a=t(e.segments);!(i=a()).done;){var c=i.value;c.startNumber>c.endNumber&&s.push("线段编号错误: "+c.startNumber+" > "+c.endNumber);for(var l=c.startNumber;l<=c.endNumber;l++)u.has(l)&&s.push("格子编号重复: "+l),u.add(l);var m=c.startPos,h=m.row,f=m.col;(h<0||h>=e.size.rows||f<0||f>=e.size.cols)&&s.push("起始位置超出边界: ("+h+", "+f+")")}}return{valid:0===s.length,errors:s}},e.getTotalCells=function(e){return e.pathSegments?e.pathSegments.reduce((function(e,t){return e+t.count}),0):e.segments?e.segments.reduce((function(e,t){return e+(t.endNumber-t.startNumber+1)}),0):0},e.getStyleUsage=function(e){var t={};if(e.pathSegments&&e.startPosition){var s=e.startPosition.style||0;t[s]=(t[s]||0)+1,e.pathSegments.forEach((function(e){if(e.style){var s=e.style,n=s[0],r=s[1],o=Math.max(0,e.count-1);t[n]=(t[n]||0)+o,t[r]=(t[r]||0)+1}}))}return t},e.getNumberRange=function(e){if(e.pathSegments)return{min:1,max:this.getTotalCells(e)};if(e.segments){var t=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;return e.segments.forEach((function(e){t=Math.min(t,e.startNumber),s=Math.max(s,e.endNumber)})),{min:t,max:s}}return{min:1,max:1}},e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/ChessboardGenerator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ChessboardTypes.ts"],(function(e){var o,t,r,n;return{setters:[function(e){o=e.extends},function(e){t=e.cclegacy},function(e){r=e.CellState,n=e.Direction}],execute:function(){t._RF.push({},"fc79aASsyNKqpm/DUmnAbK/","ChessboardGenerator",void 0);e("ChessboardGenerator",function(){function e(){}return e.generateChessboard=function(e){var o=[],t=this.generateFromPathSegments(e.startPosition,e.pathSegments);return o.push.apply(o,t),console.log("=== 棋盘生成调试信息 ==="),o.forEach((function(e){console.log("格子"+e.number+": 位置("+e.gridPos.row+", "+e.gridPos.col+"), 样式"+e.style+", 状态"+e.state)})),console.log("========================"),o},e.generateFromPathSegments=function(e,t){var s=[],c=o({},e),l=1,i=t.reduce((function(e,o){return e+o.count}),0)+1;console.log("总格子数: "+i+" (包括起始点)"),console.log("起点: ("+c.row+", "+c.col+"), 起点样式: "+e.style),s.push({number:l,state:r.起点,gridPos:o({},c),style:e.style||0}),console.log("格子"+l+": 起始点, 位置("+c.row+", "+c.col+"), 样式"+(e.style||0)+", 状态"+r[r.起点]),l++;for(var u=0;u<t.length;u++){var a,g,f=t[u],d=this.getDirectionVector(f.direction),h=u===t.length-1;console.log("处理第"+(u+1)+"段: 方向"+n[f.direction]+", 格子数"+f.count+", 样式["+(null==(a=f.style)?void 0:a[0])+", "+(null==(g=f.style)?void 0:g[1])+"]");for(var y=0;y<f.count;y++){c.row+=d.row,c.col+=d.col;var p=r.常态,w=0;if(l===i)p=r.终点,w=f.style?f.style[1]:0;else w=y===f.count-1&&!h?f.style?f.style[1]:0:f.style?f.style[0]:0;s.push({number:l,state:p,gridPos:o({},c),style:w}),console.log("格子"+l+": 段"+(u+1)+"的第"+(y+1)+"个, 位置("+c.row+", "+c.col+"), 样式"+w+", 状态"+r[p]),l++}}return s},e.generateSegmentCells=function(e){for(var o=[],t=e.startNumber,n=e.endNumber,s=e.startPos,c=e.direction,l=e.specialStates,i=this.getDirectionVector(c),u=function(){var e=t+a,n={row:s.row+i.row*a,col:s.col+i.col*a},c=r.常态;if(l){var u=l.find((function(o){return o.number===e}));u&&(c=u.state)}o.push({number:e,state:c,gridPos:n,style:0})},a=0;a<=n-t;a++)u();return o},e.getDirectionVector=function(e){switch(e){case n.右:return{row:0,col:1};case n.下:return{row:1,col:0};case n.左:return{row:0,col:-1};case n.上:return{row:-1,col:0};default:return{row:0,col:0}}},e.createGridMap=function(e){var o=new Map;return e.forEach((function(e){var t=e.gridPos.row+"_"+e.gridPos.col;o.set(t,e)})),o},e.getGridKey=function(e,o){return e+"_"+o},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ChessboardTypes.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c502eOJ4NVJBq3DTSEBxLXG","ChessboardTypes",void 0);e("CellColor",function(e){return e[e["蓝色"]=0]="蓝色",e[e["红色"]=1]="红色",e[e["绿色"]=2]="绿色",e[e["黄色"]=3]="黄色",e}({})),e("CellState",function(e){return e[e["常态"]=0]="常态",e[e["问号"]=1]="问号",e[e["心号"]=2]="心号",e[e["起点"]=3]="起点",e[e["终点"]=4]="终点",e}({})),e("Direction",function(e){return e[e["右"]=0]="右",e[e["下"]=1]="下",e[e["左"]=2]="左",e[e["上"]=3]="上",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/code.ts",["cc"],(function(A){var I;return{setters:[function(A){I=A.cclegacy}],execute:function(){I._RF.push({},"5d4aaASXmVDf4KsvWqRRg61","code",void 0);var c=A("DIANHAO","。，、．：；！‼？⁇ .,;:~`?!"),N=A("BIAOHAO","「」『』“”‘’（）()【】〖〗〔〕［］｛｝⸺—…●•–～~～～·﹏《》〈〉＿/／\\ {}[]()<>\"'"),e=A("BIAODIAN",""+N+c+" "),t=A("BIAODIANVALIDATEND","。，、．：；！‼？⁇」』”’）】〗〕］｝》〉 .,)!;]}'>\"?");A("BIAODIANVALIDATSTART","「『“‘（【〖〔［｛《〈 ({['\"<"),A("INCOMPRESSIBLE","‼⁇⸺—"),A("COMPRESSLEFT","「『“‘（【〖〔［｛《〈 ({['\"<"),A("ALLBIAODIAN",[].concat(e,t)),A("LINEBREAKING",' )]｝〕〉》」』】〙〗〟’”｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、%,.:;。！？］）：；＝}¢°"†‡℃〆％，．'),A("LINELEADING",'([｛〔〈《「『【〘〖〝‘“｟«$—…‥〳〴〵［（{£¥"々〇＄￥￦#'),A("NOTBREAKING",".");I._RF.pop()}}}));

System.register("chunks:///_virtual/CommonExport.ts",["cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(o){var n;return{setters:[function(c){n=c.cclegacy,o("cc",c)},function(n){o("drongoCC",n)},function(n){o("fgui",n)},function(n){o("drongoGui",n)}],execute:function(){n._RF.push({},"2a54bPglDFEaKMITwv2aDNG","CommonExport",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigBase.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6aa16Nf6rJP87ezxWaLdhoO","ConfigBase",void 0);t("default",function(){function t(){}return t.prototype.init=function(t){var e=this;t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.hasOwnProperty(n)&&(e[n]=t[n])}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(n){var e,t,r,s,i,o,a,u,c;return{setters:[function(n){e=n.inheritsLoose,t=n.createForOfIteratorHelperLoose,r=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){i=n.cclegacy,o=n.JsonAsset},function(n){a=n.autoBindToWindow,u=n.instance_base,c=n.asset}],execute:function(){var f;i._RF.push({},"ab49fwHf11ArqXDrPGKAbkd","ConfigMgr",void 0);var g=a(f=function(n){function i(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))||this).configs=new Map,e.configAssets=new Map,e}e(i,n);var a=i.prototype;return a.loadConfig=function(){var n=r(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.name,!this.configs.has(t)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,c.get("Config/"+t,o,null);case 5:r=n.sent,this.initConfig(e,r);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.initConfig=function(n,e){var t=n.name,r=new Map;for(var s in e.json){var i=e.json[s],o=new n;o.init(i),r.set(parseInt(s),o)}e.decRef(),this.configs.set(t,r)},a.initConfigs=function(){var n=r(s().mark((function n(e){var r,i,a,u,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.get_dir(e,o,null);case 2:for(r=n.sent,i=t(r);!(a=i()).done;)u=a.value,f=u.name.replace(".json",""),this.configAssets.set(f,u);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.getConfig=function(n,e){var t=n.name,r=this.configAssets.get(t);r&&(this.initConfig(n,r),this.configAssets.delete(t));var s=this.configs.get(t);return s?s.get(e):null},a.getAllConfigs=function(n){var e=n.name,t=this.configAssets.get(e);t&&(this.initConfig(n,t),this.configAssets.delete(e));var r=this.configs.get(e);return r||null},a.queryOne=function(n,e){for(var r,s=this.getAllConfigs(n),i=t(s.values());!(r=i()).done;){var o=r.value;if(e(o))return o}return null},a.queryAll=function(n,e){for(var r,s=this.getAllConfigs(n),i=[],o=t(s.values());!(r=o()).done;){var a=r.value;e(a)&&i.push(a)}return i},i}(u))||f;n("configMgr",g.instance());i._RF.pop()}}}));

System.register("chunks:///_virtual/const.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"35b02Z6JORAf6dUL6iwaVqV","const",void 0);e("CharConst",{RoundLine:"roundline",RectLine:"rectline",NoneChar:"nonechar",MeasureText:"中"});n._RF.pop()}}}));

System.register("chunks:///_virtual/Const2.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9de74fx0LdM6JN4EvNOlRUe","Const",void 0);t("ItalicSkewFactor",Math.tan(.207)),t("VertexMaxSize",65535);e._RF.pop()}}}));

System.register("chunks:///_virtual/dfs.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t;return{setters:[function(e){r=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy}],execute:function(){e("default",(function e(t,a){void 0===a&&(a=0);return r().mark((function c(){var u,i,s,o,f;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u=t instanceof Array?t:t.children,i=a,u){r.next=4;break}return r.abrupt("return");case 4:s=n(u);case 5:if((o=s()).done){r.next=15;break}return f=o.value,r.next=9,[f,i];case 9:if(!f.children||!f.children.length){r.next=13;break}return i+=1,r.delegateYield(e(f.children,i),"t0",12);case 12:i-=1;case 13:r.next=5;break;case 15:case"end":return r.stop()}}),c)}))()})),t._RF.push({},"af114gzGABFp6JbyHwFfxXI","dfs",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ETMQuadType.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"954a4Tar4VCSLngZZnk5M2J","ETMQuadType",void 0);e("ETMQuadType",function(e){return e[e.Char=0]="Char",e[e.UnderLine=1]="UnderLine",e[e.DeleteLine=2]="DeleteLine",e[e.Background=3]="Background",e[e.Mask=4]="Mask",e[e.Shadow=5]="Shadow",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/events.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"84574nW88ZApYWn1MdRKEV2","events",void 0);var c=e("EventClickChar",(function(){this.accurate=void 0,this.charInfo=void 0}));e("click_char_event",new c);t._RF.pop()}}}));

System.register("chunks:///_virtual/FontData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Char.ts","./TextureChannel.ts","./FontHelper.ts","./index.ts","./Utils.ts","./const.ts","./index.mjs"],(function(t){var e,i,n,a,s,h,r,c,o,u,f;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,n=t.Rect,a=t.Texture2D},function(t){s=t.Char},function(t){h=t.TextureChannel},function(t){r=t.FontHelper},function(t){c=t.default},function(t){o=t.Utils},function(t){u=t.CharConst},function(t){f=t.default}],execute:function(){i._RF.push({},"2f441UOT5ZPgZ5GJPUD+1uo","FontData",void 0);var l=[];t("FontData",function(){function t(t,e,i,h){if(this._tmFont=void 0,this._texture=null,this._staticLetters=new Map,this._dynamicChannels=void 0,this._actualSize=0,this._buffer=void 0,this._fontRect=new n,this._safePadding=2,this._lru=void 0,this._freeSpaces=[],this.enableAutoFree=!1,this._tmFont=t,this._dynamicChannels=i||[],e?this._texture=e:(this._texture=new a,this._texture.reset({mipmapLevel:0,format:a.PixelFormat.RGBA8888,width:t.textureWidth,height:t.textureHeight})),this._actualSize=c.calcuteFontSize(t.fontSize,t.padding),this._fontRect.set(0,0,this.spaceSize,this.spaceSize),h)for(var r=Object.keys(h.chars),o=0;o<r.length;o++){var u=r[o],f=s.fromTMFCharInfo(u,h,h.chars[u]);f.static=!0,this._staticLetters.set(u,f)}}var i=t.prototype;return i.initial=function(){this.createDynamicChannels()},i.createDynamicChannels=function(){var t=this;if(this._dynamicChannels=[],this._tmFont.dynamic&&4!=this._tmFont.staticChannels){for(var e=0,i=0;i<4;i++)if(i<this._tmFont.staticChannels)this._dynamicChannels.push(null);else{var n=new h(this._tmFont,i,!0);this._dynamicChannels.push(n),e+=n.capacity}e>0&&(this._lru=new f({max:e,dispose:function(e,i){e.char.ref<=0&&(t._freeSpaces.push(e),t._realRemove(e.char))}}))}},i.removeDynamicChar=function(t){},i._realRemove=function(t){if(this.enableAutoFree&&t&&!t.static){var e=this._dynamicChannels[t.cid];if(!e)return;e.freeChar(t.index)}},i.getRoundLine=function(){return this.getCharInfo(u.RoundLine,r.getRoundLine,r)},i.getRectLine=function(){return this.getCharInfo(u.RectLine,r.getRectLine,r)},i.getNoneChar=function(){return this.getCharInfo(u.NoneChar,r.getNoneChar,r)},i.getSpace=function(t){var e=this._freeSpaces.shift();if(e)return l.push(e.char),e.char=null,this._dynamicChannels[e.cid].addUsed(e.index),e;for(var i=null,n=this._dynamicChannels.length,a=0;a<n;a++)if(i=this._dynamicChannels[a]){if(!i.isFull()){i.initialized||(i.initial(),this.clearChannel(i.index));break}i=null}return i&&(e=i.spanEmptySpace())?(e.cid=i.index,e):(console.warn("font "+this.tmFont.fontFamily+" dynamic channels is full, can not get char "+t),null)},i.getCharInfo=function(t,e,i){var n=this._staticLetters.get(t);if(n)return n;if(!this.tmFont.dynamic&&(console.warn("font "+this.tmFont.fontFamily+" is not dynamic, can not get char "+t),null==e))return this.getNoneChar();var a=this.enableAutoFree?this._lru.get(t):this._lru.peek(t);if(a)return a.char;if((!this.tmFont.dynamic||4==this.tmFont.staticChannels)&&null==e)return this.getNoneChar();if(e&&0==this._dynamicChannels.length)return null;var h=this.getSpace(t);if(!h)return this.getNoneChar();var c=e?e.call(i,t,this._tmFont):r.createSDFChar(t,this._tmFont);n=l.pop()||new s,h.char=n,n.code=t,n.index=h.index,n.glyphWidth=c.glyphWidth,n.glyphHeight=c.glyphHeight,n.glyphAdvance=c.glyphAdvance,n.glyphRight=c.glyphRight,n.glyphLeft=c.glyphLeft,n.width=c.width,n.height=c.height,n.size=c.size,n.ascent=c.ascent,n.descent=c.descent,n.scale=c.scale;var o=(h.x+this._safePadding)/this.tmFont.textureWidth,u=(h.y+this._safePadding)/this.tmFont.textureHeight,f=u+c.height/this.tmFont.textureHeight,d=o+c.width/this.tmFont.textureWidth;return n.uvs=new Float32Array([o,u,d,u,o,f,d,f]),n.cid=h.cid,this._fontRect.set(h.x,h.y,this.spaceSize,this.spaceSize),this.writeToTexture(t,h.cid,c),this._lru.set(t,h),n},i.clearChannel=function(t){var e=this._texture.width,i=this._texture.height,a=new n(0,0,e,i);this._buffer=o.readTexturePixels(this._texture,a,this._buffer);for(var s=0;s<e;s++)for(var h=0;h<i;h++){var r=4*(h*e+s);this._buffer[r+t]=0}o.uploadData(this._texture,this._buffer,a)},i.writeToTexture=function(t,e,i){this._buffer=o.readTexturePixels(this._texture,this._fontRect,this._buffer);for(var n=0;n<this._fontRect.width;n++)for(var a=0;a<this._fontRect.height;a++){var s=4*(a*this._fontRect.width+n);if(n>=this._safePadding&&n<i.width+this._safePadding&&a>=this._safePadding&&a<i.height+this._safePadding){var h=n-this._safePadding,r=a-this._safePadding,c=i.data[h+r*i.width];this._buffer[s+e]=c}else this._buffer[s+e]=0}delete i.data,o.uploadData(this._texture,this._buffer,this._fontRect)},e(t,[{key:"tmFont",get:function(){return this._tmFont}},{key:"texture",get:function(){return this._texture}},{key:"spaceSize",get:function(){return this._actualSize}},{key:"safePadding",get:function(){return this._safePadding}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/FontHelper.ts",["cc","./index.ts","./const.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.cclegacy},function(t){n=t.default},function(t){i=t.CharConst}],execute:function(){e._RF.push({},"550bd3bxCJAworH8vc5EN6o","FontHelper",void 0),t("FontHelper",function(){function t(){}return t.getSDF=function(t){var e=this.getFontFamily(t),i=e+"_"+t.fontSize+"_"+t.padding;return this._sdfs[i]?this._sdfs[i]:this._sdfs[i]=new n({fontSize:t.fontSize,fontFamily:e,buffer:t.padding,trimBuffer:t.padTrim})},t.getFontFamily=function(t){var e,n;if(t._finalFontFamily)return t._finalFontFamily;var i=(null==(e=t.font)?void 0:e._nativeAsset)||(null==(n=t.font)?void 0:n._fontFamily)||t.fontFamily||"Arial";return t._finalFontFamily=i,i},t.getKey=function(t,e){return e.font.name+"_"+t},t.createSDFChar=function(t,e){return this.getSDF(e).draw(t,this.getFontFamily(e))},t.getRoundLine=function(t,e){var n=this.getSDF(e);return n.draw(i.RoundLine,this.getFontFamily(e),i.MeasureText,(function(t,n,i,o,r,a){n.clearRect(0,0,i,o);var l=1*(o-2*e.padding),s=l/2;n.lineCap="round",n.strokeStyle="white",n.lineWidth=l,n.beginPath(),n.moveTo(r,a+s),n.lineTo(i,a+s),n.closePath(),n.stroke()}),!0)},t.getRectLine=function(t,e){var n=this.getSDF(e);return n.draw(i.RoundLine,this.getFontFamily(e),i.MeasureText,(function(t,n,i,o,r,a){n.clearRect(0,0,i,o);var l=1*(o-2*e.padding),s=l/2;n.lineCap="butt",n.strokeStyle="white",n.lineWidth=l,n.beginPath(),n.moveTo(r,a+s),n.lineTo(i,a+s),n.closePath(),n.stroke()}),!0)},t.getNoneChar=function(t,e){var n=this.getSDF(e);return n.draw(t,this.getFontFamily(e),i.MeasureText,(function(t,n,i,o,r,a){n.clearRect(0,0,i,o);var l=.15*(o-2*e.padding),s=l/2;n.lineCap="butt",n.strokeStyle="white",n.lineWidth=l,n.beginPath(),n.moveTo(s,s),n.lineTo(i-s,s),n.lineTo(i-s,o-s),n.lineTo(s,o-s),n.lineTo(s,s),n.lineTo(i-s,o-s),n.moveTo(i-s,s),n.lineTo(s,o-s),n.closePath(),n.stroke()}),!0)},t}())._sdfs={},e._RF.pop()}}}));

System.register("chunks:///_virtual/FontManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TMFont.ts","./Utils.ts"],(function(t){var e,n,r,a,o,i,s,u,c,f,p,l,h,d,g,m,v,y,_,b,F,M,w,x,k,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.createClass,r=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.asyncToGenerator,s=t.regeneratorRuntime,u=t.createForOfIteratorHelperLoose},function(t){c=t.cclegacy,f=t._decorator,p=t.CCString,l=t.BufferAsset,h=t.Material,d=t.game,g=t.Component,m=t.assetManager,v=t.Node,y=t.director,_=t.Layers,b=t.view,F=t.UITransform,M=t.Sprite,w=t.SpriteFrame,x=t.Size},function(t){k=t.TMFont},function(t){D=t.Utils}],execute:function(){var N,C,S,A,z,P,R,O,I,T,E,B,L,U,j,H,q,G,V;c._RF.push({},"27cedwBpq9DGqHyS2029jVH","FontManager",void 0);var J=f.ccclass,K=f.property,Q=f.executeInEditMode,W=f.executionOrder,X=f.disallowMultiple,Y="Arial",Z="Arial3D",$=t("RegistFontInfo",(N=J("RegistFontInfo"),C=K({visible:!1}),S=K({type:p}),A=K({type:l,visible:!1}),z=K({type:l}),P=K({type:h,visible:!1}),R=K({type:h}),N((T=e((I=function(){function t(){a(this,"_fontName",T,this),a(this,"_fontData",E,this),a(this,"_material",B,this)}return t.prototype.canLoad=function(){return this._fontName&&this._fontData},n(t,[{key:"fontName",get:function(){return this._fontName},set:function(t){this._fontName!==t&&(et.instance.removeFont(this._fontName),this._fontName=t)}},{key:"fontData",get:function(){return this._fontData},set:function(t){this._fontData!==t&&(et.instance.removeFont(this._fontName),this._fontData=t)}},{key:"material",get:function(){return this._material},set:function(t){this._material!==t&&(this._material=t)}}]),t}()).prototype,"_fontName",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(I.prototype,"fontName",[S],Object.getOwnPropertyDescriptor(I.prototype,"fontName"),I.prototype),E=e(I.prototype,"_fontData",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(I.prototype,"fontData",[z],Object.getOwnPropertyDescriptor(I.prototype,"fontData"),I.prototype),B=e(I.prototype,"_material",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(I.prototype,"material",[R],Object.getOwnPropertyDescriptor(I.prototype,"material"),I.prototype),O=I))||O)),tt=(t("FontInfo",(function(){this.fontName=void 0,this.package=void 0,this.font=void 0,this.material=void 0})),t("FM",function(){function t(){}return t.loadDefaultFont=function(){var t=i(s().mark((function t(e){var n,r,a,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),et.instance||(et._instance=new et),n=null,r=e?"88199481-7036-4137-84c6-220a30978050":"c0552647-e74b-4dd9-b7ee-971ea730d840",m.loadAny({uuid:r},(function(t,e){t?console.error(t):n=e})),a=null,m.loadAny({uuid:"7eeb945d-1451-46d7-b2fb-ee1e8408c949"},(function(t,e){t?console.error(t):a=e})),t.next=9,D.until((function(){return!!n&&!!a}));case 9:return o=e?Z:Y,t.next=12,et.instance.loadFont(o,a,n);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.getFont=function(e){var n=t.fontMap.get(e);return n||((n=t.fontMap.get(Y))||null)},t.getFontAsync=function(){var t=i(s().mark((function t(e){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!et.instance||!et.instance.hasRegistFont(e)){t.next=6;break}return t.next=3,et.instance.getFontAsync(e);case 3:if(!(n=t.sent)){t.next=6;break}return t.abrupt("return",n);case 6:return t.next=8,this.loadDefaultFont(e==Z);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}()));tt.fontMap=new Map;var et=t("FontManager",(L=J("FontManager"),U=W(-100),j=K({type:[$],visible:!0}),L(H=Q(H=X(H=U(((V=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._fontMap=new Map,e._loadingMap=new Map,e._registFontMap=new Map,a(e,"_registFonts",G,o(e)),e}r(e,t),e.create=function(){var t=i(s().mark((function t(n){var r,a,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new v).name="FontManager",a=r.addComponent(e),y.getScene().addChild(r),o=n.map((function(t){return new Promise((function(e){var n=m.getBundle(t.package);n.load([t.font,t.material],null,i(s().mark((function r(o,i){var u;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!o){r.next=4;break}return console.error(o),e(null),r.abrupt("return");case 4:return(u=new $).fontName=t.fontName,u.fontData=n.get(t.font),u.material=n.get(t.material),a._registFonts.push(u),a.refresh(),r.next=12,a.loadAllRegistFont();case 12:e(null);case 13:case"end":return r.stop()}}),r)}))))}))})),t.next=7,Promise.all(o);case 7:return t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var c=e.prototype;return c.hasRegistFont=function(t){return this._registFontMap.has(t)},c.onLoad=function(){e._instance||(d.addPersistRootNode(this.node),e._instance=this,this.refresh(),this.loadAllRegistFont())},c.onFocusInEditor=function(){e._instance=this},c.refresh=function(){var t=this;this._registFontMap.clear(),this._registFonts.forEach((function(e){t._registFontMap.set(e.fontName,e)}))},c.loadAllRegistFont=function(){var t=i(s().mark((function t(){var e,n,r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=u(this._registFontMap.keys());case 2:if((r=n()).done){t.next=10;break}a=r.value,t.next=7;break;case 7:e.push(this.loadFont(a));case 8:t.next=2;break;case 10:return t.next=12,Promise.all(e);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.getFont=function(t){return this._fontMap.get(t)},c.getFontAsync=function(){var t=i(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:if(!this._fontMap.get(e)){t.next=4;break}return t.abrupt("return",this._fontMap.get(e));case 4:return t.next=6,this.loadFont(e);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.loadFont=function(){var t=i(s().mark((function t(e,n,r){var a,o,i,u=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=null),e){t.next=3;break}return t.abrupt("return");case 3:if(!this._loadingMap.get(e)){t.next=6;break}return t.next=6,new Promise((function(t){u._loadingMap.get(e).push(t)}));case 6:if(!this._fontMap.get(e)){t.next=8;break}return t.abrupt("return",this._fontMap.get(e));case 8:if(a=this._registFontMap.get(e),n=n||(null==a?void 0:a.fontData),r=r||(null==a?void 0:a.material),n){t.next=14;break}return console.error("font "+e+" not found"),t.abrupt("return",null);case 14:return this._loadingMap.set(e,[]),t.next=17,k.deserializeAsync(n,r);case 17:return o=t.sent,this._fontMap.set(e,o),i=this._loadingMap.get(e),this._loadingMap.delete(e),i.forEach((function(t){t(o)})),tt.fontMap.set(e,o),t.abrupt("return",o);case 24:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),c._loadFont=function(){var t=i(s().mark((function t(e){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this._registFontMap.get(e))&&n.fontData){t.next=5;break}return console.error("font "+e+" not found"),t.abrupt("return");case 5:return t.next=7,this.loadFont(e,n.fontData,n.material);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.removeFont=function(t){this._fontMap.delete(t)},c.onDestroy=function(){d.removePersistRootNode(this.node),e._instance=null},c.showFontTexture=function(){var t=i(s().mark((function t(n){var r,a,o,i,u,c,f;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.instance.getFont(n)){t.next=3;break}return t.abrupt("return");case 3:if(a=y.getScene().getChildByName("Canvas")){t.next=7;break}return console.error("Canvas not found"),t.abrupt("return");case 7:(o=a.getChildByName("FontSprite"))?(o.getComponent(M).spriteFrame.texture=r.fontData.texture,o.active=!0):((o=new v("FontSprite")).layer=_.Enum.UI_2D,a.addChild(o),o.setPosition(0,200),i=b.getVisibleSize(),u=o.addComponent(F),(c=o.addComponent(M)).spriteFrame=new w,c.sizeMode=M.SizeMode.CUSTOM,c.spriteFrame.texture=r.fontData.texture,f=Math.min(i.width,i.height),u.contentSize=new x(f,f),o.on(v.EventType.TOUCH_END,(function(t){o.active=!1})));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n(e,null,[{key:"instance",get:function(){return e._instance}}]),e}(g))._instance=null,G=e((q=V).prototype,"_registFonts",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=q))||H)||H)||H)||H));c._RF.pop()}}}));

System.register("chunks:///_virtual/FontParser.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e19ddtcI7ZHIKxCIZeitwLD","FontParser",void 0);var r=t("FontParser",function(){function t(){}return t.parse=function(t,e){var r=this._fonts[t];if(r)return r;for(var a={chars:{}},s=e.split("\n"),n=0;n<s.length;n++){var i=s[n].split("=");if(2==i.length){var p=i[0];if("char"!=p)a[p]="version"!=p&&"font"!=p&&"atlas"!=p&&"charset"!=p&&"fontFamily"!=p?parseFloat(i[1]):i[1].replace(/[\r\n]/gi,"");else{var l=i[1].split(",");a.chars[l[0]]={channelID:parseInt(l[1]),x:parseInt(l[2]),y:parseInt(l[3]),width:parseInt(l[4]),height:parseInt(l[5]),size:parseInt(l[6]),glyphWidth:parseInt(l[7]),glyphHeight:parseInt(l[8]),glyphAdvance:parseFloat(l[9]),glyphLeft:parseFloat(l[10]),glyphRight:parseFloat(l[11]),ascent:parseFloat(l[12]),descent:parseFloat(l[13]),scale:parseFloat(l[14])}}}}return a.id=++this._sid,this._fonts[t]=a,a},t}());r._sid=0,r._fonts={},e._RF.pop()}}}));

System.register("chunks:///_virtual/FontUtils.ts",["cc","./code.ts","./isCJK.ts"],(function(t){var r;return{setters:[function(t){r=t.cclegacy},null,null],execute:function(){t("getStringArray",(function(t){return Array.from?Array.from(t):t.split("")})),r._RF.push({},"c96d52qJk1KvI3zMlq38ebY","FontUtils",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Button1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var n,e,o,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.UIPackage,r=t.GButton},function(t){c=t.vm}],execute:function(){var u,i;e._RF.push({},"f65f78RrABD0JadMIaST6m6","Game_Button1",void 0);t("default",c(((i=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this).m_c1=void 0,n}return n(e,t),e.createInstance=function(){return o.createObject("Game","Button1")},e.prototype.onConstruct=function(){this.m_c1=this.getController("c1")},e}(r)).URL="ui://bpp6st2qme221r",i.Dependencies=["Game"],u=i))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Cell_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Cell.ts","./GameTypes.ts"],(function(t){var e,c,s,n,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy},function(t){s=t.addLogic,n=t.GUILogicBase},function(t){i=t.default},function(t){o=t.PlayerType}],execute:function(){var u;c._RF.push({},"5ce4dVQY9tHfYDskeYeX9x6","Game_Cell_Logic",void 0);t("default",s(i)(u=function(t){function c(){for(var e,c=arguments.length,s=new Array(c),n=0;n<c;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).occupants=[],e}e(c,t);var s=c.prototype;return s.onLoad=function(){this.updateDisplay()},s.addPiece=function(t){this.occupants.includes(t)||(this.occupants.push(t),this.updateDisplay(),this._log.log("格子"+this.UI.m_num.text+": 添加"+o[t]+"棋子"))},s.removePiece=function(t){var e=this.occupants.indexOf(t);e>-1&&(this.occupants.splice(e,1),this.updateDisplay(),this._log.log("格子"+this.UI.m_num.text+": 移除"+o[t]+"棋子"))},s.hasPiece=function(t){return this.occupants.includes(t)},s.getOccupants=function(){return[].concat(this.occupants)},s.clearAllPieces=function(){this.occupants=[],this.updateDisplay(),this._log.log("格子"+this.UI.m_num.text+": 清空所有棋子")},s.updateDisplay=function(){if(0===this.occupants.length)this.UI.m_c3.selectedIndex=0;else if(1===this.occupants.length){var t=this.occupants[0];this.UI.m_c3.selectedIndex=t===o.P1?1:2}else{var e=this.occupants[this.occupants.length-1];this.UI.m_c3.selectedIndex=e===o.P1?1:2}this._log.log("格子"+this.UI.m_num.text+": m_c3.selectedIndex = "+this.UI.m_c3.selectedIndex+", 棋子: ["+this.occupants.map((function(t){return o[t]})).join(", ")+"]")},c}(n))||u);c._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Cell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,o,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.UIPackage,c=t.GComponent},function(t){i=t.vm}],execute:function(){var r,u;n._RF.push({},"4fa55F1aLhJromYj4fzaKF7","Game_Cell",void 0);t("default",i(((u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).m_c1=void 0,e.m_c2=void 0,e.m_c3=void 0,e.m_num=void 0,e}return e(n,t),n.createInstance=function(){return o.createObject("Game","Cell")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_c3=this.getController("c3"),this.m_num=this.getChild("num")},n}(c)).URL="ui://bpp6st2qme221k",u.Dependencies=["Game"],r=u))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Dialog_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Dialog.ts","./TaskDialogWindow.ts","./GameEvents.ts"],(function(t){var e,n,i,r,s,a,o,l,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UILayer,r=t.addLogic,s=t.GUIManager,a=t.GUILogicBase},function(t){o=t.default},function(t){l=t.TaskDialogWindow},function(t){c=t.gameEvent}],execute:function(){var u,h;n._RF.push({},"8600dodVdRI7pCBkpcRo+g5","Game_Dialog_Logic",void 0);t("default",r(o)(((h=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).currentTask=null,e.currentPlayer=null,e}e(n,t);var i=n.prototype;return i.onLoad=function(){var t=this;this.UI.m_btn.onClick((function(){return t.onCompleteClick()}),this),this.Data&&this.showTask(this.Data)},i.start=function(){this.Data&&this.showTask(this.Data)},i.showTask=function(t,e){var n;this.currentTask=t,this.currentPlayer=t.player||e;var i="P1"===(null==(n=this.currentPlayer)?void 0:n.name)?0:1;this.UI.m_c1.selectedIndex=i,this._log.log("设置UI样式 - 使用玩家编号: "+i),this.UI.m_title.text=t.title,this.UI.m_content.text=t.content,this._log.log("显示任务对话框完成: "+t.title+" - "+t.content)},i.hideTask=function(){this.currentTask=null,this.currentPlayer=null},i.onCompleteClick=function(){this.currentTask&&999===this.currentTask.id?c.emit(c.key.DialogClosed,{}):this.currentTask&&this.currentPlayer?c.emit(c.key.TaskCompleted,{task:this.currentTask,player:this.currentPlayer}):console.error("普通任务但缺少必要数据:",{hasTask:!!this.currentTask,hasPlayer:!!this.currentPlayer}),s.close(o),this.hideTask()},i.getCurrentTask=function(){return this.currentTask},i.isVisible=function(){return 3===s.getGUIState(o)},n}(a)).uiOptions={layer:i.TIP,modal:!0,windowCls:l},u=h))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Dialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;n._RF.push({},"23a89hJIzhMAbMh1t4GHuo9","Game_Dialog",void 0);t("default",c(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_c1=void 0,e.m_title=void 0,e.m_content=void 0,e.m_btn=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","Dialog")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_title=this.getChild("title"),this.m_content=this.getChild("content"),this.m_btn=this.getChild("btn")},n}(o)).URL="ui://bpp6st2qme221p",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_DiuTouZi_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_DiuTouZi.ts","./Game_Touzi_Logic.ts","./GameEvents.ts"],(function(i){var o,t,e,c,n,u,s,a;return{setters:[function(i){o=i.inheritsLoose},function(i){t=i.cclegacy},function(i){e=i.addLogic,c=i.GUIManager,n=i.GUILogicBase},function(i){u=i.default},function(i){s=i.default},function(i){a=i.gameEvent}],execute:function(){var r,l;t._RF.push({},"a398euXiOtFIKdSYZ74Jj0p","Game_DiuTouZi_Logic",void 0);i("default",e(u)(((l=function(i){function t(){for(var o,t=arguments.length,e=new Array(t),c=0;c<t;c++)e[c]=arguments[c];return(o=i.call.apply(i,[this].concat(e))||this).diceLogic=void 0,o}o(t,i);var e=t.prototype;return e.start=function(){this.setupDiceLogic(),this.startDiceAnimation()},e.setupDiceLogic=function(){this.diceLogic=this.UI.m_touzi.Get(s)},e.startDiceAnimation=function(){var i=this;if(!this.diceLogic)return console.error("骰子逻辑组件未找到"),void this.closeDiceDialog();this._log.log("开始播放骰子动画"),this.diceLogic.playDiceAnimation((function(o){i._log.log("骰子结果: "+o.value),i.scheduleOnce((function(){a.emit(a.key.DiceRolled,o),i.closeDiceDialog()}),1)}))},e.closeDiceDialog=function(){c.close(u)},e.onDestroy=function(){i.prototype.onDestroy.call(this)},t}(n)).uiOptions={modal:!0},r=l))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_DiuTouZi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var n,e,i,o,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){u=t.vm}],execute:function(){var c,r;e._RF.push({},"aa5f4BCnUdK0ZRmw+OT0CMw","Game_DiuTouZi",void 0);t("default",u(((r=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).m_touzi=void 0,n}return n(e,t),e.createInstance=function(){return i.createObject("Game","DiuTouZi")},e.prototype.onConstruct=function(){this.m_touzi=this.getChild("touzi")},e}(o)).URL="ui://bpp6st2qdosa3u",r.Dependencies=["Game"],c=r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_JueSeSelect_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./PlayerDataModel.ts","./Game_JueSeSelect.ts"],(function(t){var e,n,r,i,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.addLogic,i=t.GUILogicBase},function(t){a=t.playerDataModel},function(t){c=t.default}],execute:function(){var s;n._RF.push({},"f92c0GioMlNTLRuNmbu5H7r","Game_JueSeSelect_Logic",void 0);t("default",r(c)(s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).currentIndex=0,e.maxCharacterCount=2,e.playerNumber=1,e}e(n,t);var r=n.prototype;return r.onLoad=function(){this.setupEventListeners()},r.initializeForPlayer=function(t){this.playerNumber=t,this.initializeCharacterSelection()},r.getCurrentIndex=function(){return this.currentIndex},r.initializeCharacterSelection=function(){this.maxCharacterCount=this.UI.m_c1.pageCount,this.currentIndex=a.getPlayerCharacterId(this.playerNumber),(this.currentIndex<0||this.currentIndex>=this.maxCharacterCount)&&(this.currentIndex=0),this.updateCharacterDisplay()},r.setupEventListeners=function(){this.UI.m_left.onClick(this.onLeftClick,this),this.UI.m_right.onClick(this.onRightClick,this)},r.onLeftClick=function(){this.maxCharacterCount<=1||(this.currentIndex=(this.currentIndex-1+this.maxCharacterCount)%this.maxCharacterCount,this.updateCharacterDisplay())},r.onRightClick=function(){this.maxCharacterCount<=1||(this.currentIndex=(this.currentIndex+1)%this.maxCharacterCount,this.updateCharacterDisplay())},r.updateCharacterDisplay=function(){0!==this.maxCharacterCount&&(this.UI.m_c1.selectedIndex=this.currentIndex,this.updateArrowButtons(),this._log.log("P"+this.playerNumber+"当前预览角色ID: "+this.currentIndex))},r.updateArrowButtons=function(){this.UI.m_left.enabled=this.UI.m_c1.selectedIndex>0,this.UI.m_right.enabled=this.UI.m_c1.selectedIndex<this.maxCharacterCount-1},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_JueSeSelect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,i,c,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.UIPackage,c=e.GComponent},function(e){r=e.vm}],execute:function(){var o,u;n._RF.push({},"82cbaw2JcZK7Zr9dpHeExbn","Game_JueSeSelect",void 0);e("default",r(((u=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))||this).m_c1=void 0,t.m_right=void 0,t.m_left=void 0,t}return t(n,e),n.createInstance=function(){return i.createObject("Game","JueSeSelect")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_right=this.getChild("right"),this.m_left=this.getChild("left")},n}(c)).URL="ui://bpp6st2qdosa2r",u.Dependencies=["Game"],o=u))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_List_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_List.ts","./Game_Cell.ts","./Game_Cell_Logic.ts","./Game_Peaple.ts","./Game_Dialog.ts","./Game_Succ.ts","./ChessboardGenerator.ts","./ChessboardExamples.ts","./GameTypes.ts","./TaskManager.ts","./GameEvents.ts","./fairygui.mjs"],(function(e){var t,n,a,i,r,o,s,l,c,h,u,d,g,y,p,f,m,P,v,C,_,G,b;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){i=e.cclegacy,r=e.tween},function(e){o=e.GUIManager,s=e.addLogic,l=e.GUILogicBase},function(e){c=e.default},function(e){h=e.default},function(e){u=e.default},function(e){d=e.default},function(e){g=e.default},function(e){y=e.default},function(e){p=e.ChessboardGenerator},function(e){f=e.DefaultChessboardConfig},function(e){m=e.PlayerType,P=e.GameState,v=e.DefaultGameConfig},function(e){C=e.taskManager},function(e){_=e.gameEvent},function(e){G=e.UIPackage,b=e.GRoot}],execute:function(){var S;i._RF.push({},"6155ad8NiRPCZe4l7KHhner","Game_List_Logic",void 0);e("default",s(c)(S=function(e){function i(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).chessboardData=[],t.gridMap=new Map,t.cellComponents=new Map,t.cellLogics=new Map,t.players=[],t.playerPieces=new Map,t.currentPlayer=0,t.gameState=P.准备中,t.diceLogic=void 0,t}t(i,e);var s=i.prototype;return s.onLoad=function(){this.setupGameEvents()},s.setupGameEvents=function(){var e=this;_.on(_.key.TaskCompleted,(function(t){e.nextPlayer()}),this),_.on(_.key.NextPlayerTurn,(function(t){e._log.log("=== 收到NextPlayerTurn事件 ==="),e._log.log("事件通知: 轮到 "+t.name+" 了")}),this),_.on(_.key.GameEnded,(function(t){e._log.log("=== 收到GameEnded事件 ==="),e._log.log("事件通知: 游戏结束，获胜者是 "+t.name)}),this),_.on(_.key.DialogClosed,(function(t){e._log.log("=== 收到DialogClosed事件 ==="),e._log.log("当前游戏状态: "+e.gameState)}),this)},s.generateChessboard=function(e){this.clearChessboard(),this.chessboardData=p.generateChessboard(e),this.gridMap=p.createGridMap(this.chessboardData),this.createChessboardUI(),this._log.log("棋盘生成完成，共",this.chessboardData.length,"个格子")},s.createChessboardUI=function(){var e=this;this.clearChessboardComponents(),this.chessboardData.forEach((function(t){var n=e.createCellComponent(t);e.cellComponents.set(t.number,n),e.UI.addChild(n);var a=n.Get(u);a&&e.cellLogics.set(t.number,a)}))},s.createCellComponent=function(e){var t=this,n=h.createInstance();return n.m_num.text=e.number.toString(),n.m_c1.selectedIndex=e.style,n.m_c2.selectedIndex=e.state,this.setCellPosition(n,e),n.onClick((function(){return t.onCellClick(e.number)}),this),n},s.setCellPosition=function(e,t){var n,a,i,r=(null==(n=f.cellSpacing)?void 0:n.cellWidth)||60,o=(null==(a=f.cellSpacing)?void 0:a.cellHeight)||60,s=(null==(i=f.cellSpacing)?void 0:i.spacing)||5,l=t.gridPos.col*(r+s)+r/2,c=t.gridPos.row*(o+s)+o/2;e.setPosition(l,c)},s.clearChessboardComponents=function(){this.cellComponents.forEach((function(e){e.parent&&e.parent.removeChild(e)})),this.cellComponents.clear(),this.cellLogics.clear()},s.initializePlayers=function(e,t){var n=this;void 0===e&&(e=0),void 0===t&&(t=1),this.clearPlayers(),this.players=[{type:m.P1,currentPosition:1,isFinished:!1,name:"P1",characterId:e},{type:m.P2,currentPosition:1,isFinished:!1,name:"P2",characterId:t}],this.createPlayerPieces(),this.players.forEach((function(e){var t=n.cellLogics.get(e.currentPosition);t&&t.addPiece(e.type)})),this.updatePlayersZOrder(),this._log.log("玩家初始化完成","P1角色ID: "+e+", P2角色ID: "+t)},s.createPlayerPieces=function(){var e=this;this.players.forEach((function(t,n){var a=d.createInstance();a.m_c2.selectedIndex=n+1,a.m_c1.selectedIndex=t.characterId,e._log.log("创建"+t.name+"棋子 - m_c1: "+n+", m_c2: "+t.characterId),e.playerPieces.set(t.type,a),e.UI.addChild(a)})),this.updatePlayerPositions()},s.updatePlayerPositions=function(){var e=this;this.players.forEach((function(t){var n=e.playerPieces.get(t.type),a=e.cellComponents.get(t.currentPosition);if(n&&a){n.setPosition(a.x,a.y+15),n.m_icon&&(n.m_icon.scaleX=1)}})),this.updatePlayersZOrder()},s.updatePlayersZOrder=function(){var e=this,t=[];this.playerPieces.forEach((function(n,a){var i=e.players.find((function(e){return e.type===a}));if(n&&i){var r,o=(null==(r=e.players[e.currentPlayer])?void 0:r.type)===a;t.push({piece:n,y:n.y,playerName:i.name,playerType:a,isCurrentPlayer:o})}})),t.sort((function(e,t){return e.y!==t.y?e.y-t.y:e.isCurrentPlayer&&!t.isCurrentPlayer?1:!e.isCurrentPlayer&&t.isCurrentPlayer?-1:0})),t.forEach((function(e,n){if(e.piece.parent){var a=e.piece.parent.numChildren,i=Math.max(0,a-t.length)+n;e.piece.parent.setChildIndex(e.piece,Math.min(i,a-1))}}));var n=t.map((function(e){var t=e.isCurrentPlayer?"[当前]":"";return""+e.playerName+t+"(y:"+e.y.toFixed(1)+")"})).join(" < ");this._log.log("棋子层级排序: "+n+" (Y值小到大，层级低到高，相同Y值时当前玩家优先)")},s.moveCurrentPlayer=function(e){var t=this,n=this.players[this.currentPlayer],a=this.chessboardData.length,i=Math.min(n.currentPosition+e,a);this._log.log(n.name+" 从 "+n.currentPosition+" 移动到 "+i+" (总共"+a+"格)");var r=this.cellLogics.get(n.currentPosition);r&&r.removePiece(n.type),this.updatePlayersZOrder(),this.playMoveAnimation(n,i,(function(){var e=t.cellLogics.get(i);e&&e.addPiece(n.type),n.currentPosition=i,t.updatePlayersZOrder(),i>=a?(n.isFinished=!0,t._log.log(n.name+" 到达终点！"),t.checkGameEnd()):t.showTaskDialog(n)}))},s.playMoveAnimation=function(e,t,n){var a=this.playerPieces.get(e.type);if(a){var i=this.calculateMovePath(e.currentPosition,t);this.moveAlongPath(a,i,0,n)}},s.calculateMovePath=function(e,t){for(var n=[],a=e+1;a<=t;a++)n.push(a);return n},s.moveAlongPath=function(e,t,n,a){var i=this;if(n>=t.length)a();else{var o=t[n],s=this.cellComponents.get(o);if(s){var l=s.x,c=s.y+15,h=l-e.x,u=c-e.y;this.updatePieceDirection(e,h,u);var d=v.moveAnimation;r(e).to(.5*d.duration,{x:l-h/2,y:c-u/2,scaleX:d.middleScale,scaleY:d.middleScale}).to(.5*d.duration,{x:l,y:c,scaleX:d.endScale,scaleY:d.endScale}).call((function(){i.updatePlayersZOrder(),i.moveAlongPath(e,t,n+1,a)})).start(),this.playCellScaleAnimation(s,(function(){}))}else this.moveAlongPath(e,t,n+1,a)}},s.updatePieceDirection=function(e,t,n){if(e&&e.m_icon){var a=1;Math.abs(t)>Math.abs(n)?t>0?a=-1:t<0&&(a=1):Math.abs(n)>0&&(n>0?a=-1:n<0&&(a=1)),e.m_icon.scaleX=a,this._log.log("更新棋子朝向: moveX="+t.toFixed(1)+", moveY="+n.toFixed(1)+", scaleX="+a)}},s.playCellScaleAnimation=function(e,t){var n=this,a=v.moveAnimation;r(e).delay(.2*a.duration).call((function(){n.playMoveSound()})).to(.4*a.duration,{scaleX:.8,scaleY:.8}).call((function(){r(e).to(.4*a.duration,{scaleX:1,scaleY:1}).call((function(){t()})).start()})).start()},s.playMoveSound=function(){try{var e=G.getByName("Game");if(e){var t=e.getItemAssetByName("move");t&&b.inst.playOneShotSound(t)}}catch(e){this._log.log("播放移动音效失败:",e)}},s.playWinSound=function(){try{var e=G.getByName("Game");if(e){var t=e.getItemAssetByName("win");t&&b.inst.playOneShotSound(t)}}catch(e){this._log.log("播放胜利音效失败:",e)}},s.showWinScreen=function(){var e=n(a().mark((function e(t){var n,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._log.log("显示胜利界面 - 获胜者: "+t.name+", 类型: "+t.type+", 角色ID: "+t.characterId),n={winner:t},e.next=4,o.open(y,n);case 4:_.once(_.key.WinScreenClosed,(function(){i.resetGame()}),this);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.resetGame=function(){var e=this;this.gameState=P.游戏中,this.currentPlayer=0,this.clearAllCellStates(),this.players.forEach((function(e){e.currentPosition=1,e.isFinished=!1})),this.updatePlayerPositions(),this.players.forEach((function(t){var n=e.cellLogics.get(t.currentPosition);n&&n.addPiece(t.type)})),this.updatePlayersZOrder(),this._log.log("游戏已重置，可以重新开始游戏")},s.clearAllCellStates=function(){this.cellLogics.forEach((function(e,t){e.clearAllPieces()})),this._log.log("已清理所有格子上的棋子状态")},s.nextPlayer=function(){var e;this._log.log("=== 切换玩家 ==="),this._log.log("切换前 - 当前玩家索引: "+this.currentPlayer+", 玩家: "+(null==(e=this.players[this.currentPlayer])?void 0:e.name)),this.currentPlayer=(this.currentPlayer+1)%this.players.length;var t=this.players[this.currentPlayer];this._log.log("切换后 - 当前玩家索引: "+this.currentPlayer+", 玩家: "+t.name+", 类型: "+t.type),this.playPlayerTurnAnimation(t.type),_.emit(_.key.NextPlayerTurn,t)},s.playPlayerTurnAnimation=function(e){var t=this.UI.parent;t?e===m.P1?t.m_t0&&(t.m_t0.play(),this._log.log("播放P1玩家轮次动画 (t0)")):e===m.P2&&t.m_t1&&(t.m_t1.play(),this._log.log("播放P2玩家轮次动画 (t1)")):this._log.log("无法获取Game_Main组件，跳过动画播放")},s.showTaskDialog=function(){var e=n(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._log.log("显示任务对话框 - 当前玩家: "+t.name+", 角色ID: "+t.characterId),n=C.getRandomTaskForPlayer(t),this._log.log("获取到的任务: ID="+n.id+", 标题="+n.title),e.next=5,o.open(g,n);case 5:e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.checkGameEnd=function(){var e=this.players.filter((function(e){return e.isFinished}));if(e.length>0){this.gameState=P.结束;var t=e[0];this._log.log("游戏结束！获胜者：",t.name),this.playWinSound(),this.showWinScreen(t),_.emit(_.key.GameEnded,t)}},s.startGame=function(){this.gameState=P.游戏中,this.currentPlayer=0;var e=this.players[this.currentPlayer];e&&this.playPlayerTurnAnimation(e.type),this._log.log("游戏开始！轮到",this.players[this.currentPlayer].name)},s.canRollDice=function(){return this.gameState===P.游戏中&&!this.isPlayerMoving()},s.handleDiceResult=function(e){this.gameState===P.游戏中&&(this._log.log(this.players[this.currentPlayer].name+" 摇骰子结果: "+e.value),this.moveCurrentPlayer(e.value))},s.isPlayerMoving=function(){return this.diceLogic&&this.diceLogic.getIsAnimating()},s.onCellClick=function(e){this._log.log("点击了格子:",e);var t=this.chessboardData.find((function(t){return t.number===e}));t&&this._log.log("格子信息:",{"编号":t.number,"状态":t.style,"位置":t.gridPos})},s.clearChessboard=function(){this.cellComponents.forEach((function(e){e.parent&&e.parent.removeChild(e),e.dispose()})),this.cellComponents.clear(),this.chessboardData=[],this.gridMap.clear()},s.clearPlayers=function(){this.playerPieces.forEach((function(e){e.dispose()})),this.playerPieces.clear(),this.players=[],this.currentPlayer=0},s.getCellComponent=function(e){return this.cellComponents.get(e)},s.getCellDataByGrid=function(e,t){var n=p.getGridKey(e,t);return this.gridMap.get(n)},s.getAllCellData=function(){return[].concat(this.chessboardData)},s.updateChessboard=function(e){this.generateChessboard(e)},s.onDestroy=function(){_.targetOff(this),this.clearChessboard(),this.clearPlayers(),o.close(g)},i}(l))||S);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,c=t.GComponent},function(t){o=t.vm}],execute:function(){var r,s;n._RF.push({},"3ac27QcEbZEe61ILSdWPDLX","Game_List",void 0);t("default",o(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))||this).m_list=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","List")},n.prototype.onConstruct=function(){this.m_list=this.getChild("list")},n}(c)).URL="ui://bpp6st2qme221l",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Main_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Main.ts","./Game_List_Logic.ts","./Game_DiuTouZi.ts","./ChessboardExamples.ts","./GameEvents.ts","./PlayerDataModel.ts","./fairygui.mjs"],(function(t){var i,e,o,n,s,l,a,c,r,u,h,g,f;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,o=t.AudioSourceComponent},function(t){n=t.GUIManager,s=t.GUILogicBase,l=t.addLogic},function(t){a=t.default},function(t){c=t.default},function(t){r=t.default},function(t){u=t.DefaultChessboardConfig},function(t){h=t.gameEvent},function(t){g=t.playerDataModel},function(t){f=t.UIPackage}],execute:function(){var d;e._RF.push({},"6414axnOOZKdLMRghXK77up","Game_Main_Logic",void 0);t("default",l(a)(d=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).listLogic=void 0,i}i(e,t);var s=e.prototype;return s.start=function(){var t=this;this.listLogic=this.UI.m_list.Get(c),this.listLogic?this.initGame():this.scheduleOnce((function(){t.listLogic=t.UI.m_list.Get(c),t.listLogic&&t.initGame()}),.1),this.setupEventListeners()},s.setupEventListeners=function(){this.UI.m_roll.onClick(this.onRollClick,this),h.on(h.key.DiceRolled,this.onDiceRolled,this)},s.onRollClick=function(){this.UI.m_roll.enabled&&this.listLogic&&this.listLogic.canRollDice()&&(this._log.log("点击投骰子按钮，打开骰子界面"),this.UI.m_roll.enabled=!1,n.open(r))},s.onDiceRolled=function(t){this._log.log("收到骰子结果: "+t.value),this.UI.m_roll.enabled=!0,this.listLogic&&this.listLogic.handleDiceResult(t)},s.initGame=function(){this._log.log("初始化飞行棋游戏");var t=g.player1CharacterId,i=g.player2CharacterId;this._log.log("P1选择角色ID: "+t+", P2选择角色ID: "+i),this.listLogic.generateChessboard(u),this.listLogic.initializePlayers(t,i),this.listLogic.startGame(),this.playBGM(this.UI.node,"Game","bgm")},s.restartGame=function(){this.initGame()},s.getListLogic=function(){return this.listLogic},s.playBGM=function(t,i,e){var n=f.getByName(i).getItemAssetByName(e),s=t.addComponent(o);return s.isValid&&(s.clip=n,s.volume=1,s.loop=!0,s.play()),s},s.onDestroy=function(){h.targetOff(this),t.prototype.onDestroy.call(this)},e}(s))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var i,n,e,o,s;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.UIPackage,o=t.GComponent},function(t){s=t.vm}],execute:function(){var r,a;n._RF.push({},"64803VbHF1B/ItvafCsZQRz","Game_Main",void 0);t("default",s(((a=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).m_list=void 0,i.m_back=void 0,i.m_info=void 0,i.m_roll=void 0,i.m_t0=void 0,i.m_t1=void 0,i}return i(n,t),n.createInstance=function(){return e.createObject("Game","Main")},n.prototype.onConstruct=function(){this.m_list=this.getChild("list"),this.m_back=this.getChild("back"),this.m_info=this.getChild("info"),this.m_roll=this.getChild("roll"),this.m_t0=this.getTransition("t0"),this.m_t1=this.getTransition("t1")},n}(o)).URL="ui://bpp6st2qfm8yl",a.Dependencies=["Game"],r=a))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Peaple_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Peaple.ts"],(function(e){var o,t,n,i,u;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy},function(e){n=e.GUILogicBase,i=e.addLogic},function(e){u=e.default}],execute:function(){var c;t._RF.push({},"336d82rNwhObboxr1lezYPh","Game_Peaple_Logic",void 0);e("default",i(u)(c=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){n.setSortRoot(this.node,!0)},t}(n))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Peaple.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,o,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.UIPackage,c=e.GComponent},function(e){i=e.vm}],execute:function(){var r,a;n._RF.push({},"ef78ajW2VxGTJw4aMGHudCL","Game_Peaple",void 0);e("default",i(((a=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).m_c1=void 0,t.m_c2=void 0,t.m_icon=void 0,t}return t(n,e),n.createInstance=function(){return o.createObject("Game","Peaple")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_icon=this.getChild("icon")},n}(c)).URL="ui://bpp6st2qme221o",a.Dependencies=["Game"],r=a))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_SelectGender_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./PlayerDataModel.ts","./Game_SelectGender.ts","./Game_JueSeSelect_Logic.ts","./Game_Main.ts"],(function(e){var t,i,n,r,o,c,a,s,l,u,p;return{setters:[function(e){t=e.inheritsLoose,i=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){o=e.addLogic,c=e.GUILogicBase,a=e.GUIManager},function(e){s=e.playerDataModel},function(e){l=e.default},function(e){u=e.default},function(e){p=e.default}],execute:function(){var h;r._RF.push({},"f5a9aD1OH1Eibrb+ZPihRMI","Game_SelectGender_Logic",void 0);e("default",o(l)(h=function(e){function r(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).p1Logic=void 0,t.p2Logic=void 0,t}t(r,e);var o=r.prototype;return o.onLoad=function(){this.initializePlayerSelections(),this.setupEventListeners()},o.initializePlayerSelections=function(){this.p1Logic=this.UI.m_P1.Get(u),this.p2Logic=this.UI.m_P2.Get(u),this.p1Logic&&this.p1Logic.initializeForPlayer(1),this.p2Logic&&this.p2Logic.initializeForPlayer(2)},o.setupEventListeners=function(){this.UI.m_ok.onClick(this.onConfirmClick,this)},o.onConfirmClick=function(){var e=this.p1Logic?this.p1Logic.getCurrentIndex():0,t=this.p2Logic?this.p2Logic.getCurrentIndex():1;s.setPlayer1Character(e),s.setPlayer2Character(t),this._log.log("角色选择完成 - P1: "+e+", P2: "+t),this.enterGame()},o.enterGame=function(){var e=i(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.close(l),e.next=4,a.open(p);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("进入游戏失败:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),r}(c))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/Game_SelectGender.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,i,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.UIPackage,o=e.GComponent},function(e){c=e.vm}],execute:function(){var r,s;n._RF.push({},"c5caeCAa19GGIGgHYueihJl","Game_SelectGender",void 0);e("default",c(((s=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).m_P1=void 0,t.m_P2=void 0,t.m_ok=void 0,t}return t(n,e),n.createInstance=function(){return i.createObject("Game","SelectGender")},n.prototype.onConstruct=function(){this.m_P1=this.getChild("P1"),this.m_P2=this.getChild("P2"),this.m_ok=this.getChild("ok")},n}(o)).URL="ui://bpp6st2qdosa2j",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Succ_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Succ.ts","./Game_SelectGender.ts","./GameEvents.ts","./TaskDialogWindow.ts","./Game_Main.ts"],(function(e){var t,n,o,i,c,s,a,r,l,u,h;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.UILayer,i=e.addLogic,c=e.GUIManager,s=e.GUILogicBase},function(e){a=e.default},function(e){r=e.default},function(e){l=e.gameEvent},function(e){u=e.TaskDialogWindow},function(e){h=e.default}],execute:function(){var d,m;n._RF.push({},"229b4jeKDdOy6nhec1eeLHP","Game_Succ_Logic",void 0);e("default",i(a)(((m=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.onLoad=function(){this.setupUI(),this.setupEventListeners()},o.setupUI=function(){var e=this.Data;if(e&&e.winner){var t=e.winner;this._log.log("显示胜利界面 - 获胜者: "+t.name+", 角色ID: "+t.characterId);var n="P1"===t.name?0:1;this.UI.m_c1.selectedIndex=n,this.UI.m_people&&"number"==typeof t.characterId&&(this.UI.m_people.m_c1.selectedIndex=t.characterId,this._log.log("设置角色显示 - m_c1: "+n+", m_c2: "+t.characterId))}else console.error("未找到获胜者数据")},o.setupEventListeners=function(){this.UI.m_home.onClick(this.onHomeClick,this),this.UI.m_btn.onClick(this.onRestartClick,this)},o.onHomeClick=function(){this._log.log("返回角色选择界面"),c.close(a),c.open(r),c.close(h)},o.onRestartClick=function(){this._log.log("重新开始游戏"),l.emit(l.key.WinScreenClosed),c.close(a)},n}(s)).uiOptions={layer:o.TIP,modal:!0,windowCls:u},d=m))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Succ.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,i,n,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;i._RF.push({},"073b9pwT8dHpKgcmH5r/0QP","Game_Succ",void 0);t("default",c(((s=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).m_c1=void 0,e.m_title=void 0,e.m_btn=void 0,e.m_people=void 0,e.m_home=void 0,e}return e(i,t),i.createInstance=function(){return n.createObject("Game","Succ")},i.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_title=this.getChild("title"),this.m_btn=this.getChild("btn"),this.m_people=this.getChild("people"),this.m_home=this.getChild("home")},i}(o)).URL="ui://bpp6st2qdosa4r",s.Dependencies=["Game"],r=s))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Touzi_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Touzi.ts"],(function(i){var n,t,e,o,s;return{setters:[function(i){n=i.inheritsLoose},function(i){t=i.cclegacy},function(i){e=i.addLogic,o=i.GUILogicBase},function(i){s=i.default}],execute:function(){var c;t._RF.push({},"393b9JrtzNJzopm1xE5p6FW","Game_Touzi_Logic",void 0);i("default",e(s)(c=function(i){function t(){for(var n,t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return(n=i.call.apply(i,[this].concat(e))||this).isAnimating=!1,n.onAnimationComplete=void 0,n}n(t,i);var e=t.prototype;return e.onLoad=function(){var i=this;this.UI.m_c1.selectedIndex=0,this.UI.onClick((function(){return i.onDiceClick()}),this)},e.onDiceClick=function(){this.isAnimating||this.playDiceAnimation()},e.playDiceAnimation=function(i){var n=this;if(!this.isAnimating){this.isAnimating=!0,this.onAnimationComplete=i;var t=Math.floor(6*Math.random())+1,e=0,o=0;this.schedule((function(){if(n.UI.m_c1.selectedIndex=o,o=(o+1)%6,++e>=12){n.unscheduleAllCallbacks(),n.UI.m_c1.selectedIndex=t-1,n.isAnimating=!1;var i={value:t};n.onAnimationComplete&&n.onAnimationComplete(i),n._log.log("骰子结果:",t)}}),.08,11,0)}},e.setDiceValue=function(i){i>=1&&i<=6&&(this.UI.m_c1.selectedIndex=i-1)},e.getCurrentValue=function(){return this.UI.m_c1.selectedIndex+1},e.getIsAnimating=function(){return this.isAnimating},e.stopAnimation=function(){this.isAnimating=!1,this.onAnimationComplete=void 0,this.unscheduleAllCallbacks()},e.onDestroy=function(){this.stopAnimation()},t}(o))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Touzi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GButton},function(t){u=t.vm}],execute:function(){var c,r;n._RF.push({},"b0b312XQExF7q+IduSduKqZ","Game_Touzi",void 0);t("default",u(((r=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_c1=void 0,e.m_t0=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","Touzi")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_t0=this.getTransition("t0")},n}(o)).URL="ui://bpp6st2qme221m",r.Dependencies=["Game"],c=r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameBinder.ts",["cc","./drongo-gui.mjs","./fairygui.mjs","./Game_SelectGender.ts","./Game_JueSeSelect.ts","./Game_DiuTouZi.ts","./Game_Succ.ts","./Game_Main.ts","./Game_Cell.ts","./Game_List.ts","./Game_Touzi.ts","./Game_Peaple.ts","./Game_Dialog.ts"],(function(t){var e,n,i,u,s,o,a,c,f,l,r,d,m;return{setters:[function(t){e=t.cclegacy},function(t){n=t.registerBinder},function(t){i=t.UIObjectFactory},function(t){u=t.default},function(t){s=t.default},function(t){o=t.default},function(t){a=t.default},function(t){c=t.default},function(t){f=t.default},function(t){l=t.default},function(t){r=t.default},function(t){d=t.default},function(t){m=t.default}],execute:function(){var x;e._RF.push({},"de59ahxwbxAXYHC/EFeTEKF","GameBinder",void 0);t("default",n(x=function(){function t(){}return t.prototype.bindAll=function(){i.setExtension(u.URL,u),i.setExtension(s.URL,s),i.setExtension(o.URL,o),i.setExtension(a.URL,a),i.setExtension(c.URL,c),i.setExtension(f.URL,f),i.setExtension(l.URL,l),i.setExtension(r.URL,r),i.setExtension(d.URL,d),i.setExtension(m.URL,m)},t}())||x);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvents.ts",["cc","./drongo-cc.mjs"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.event_target}],execute:function(){t._RF.push({},"b5fc6kDkK1ISKsbd/iDCyCW","GameEvents",void 0);e("gameEvent",new n);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameTypes.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8538fcy9OhMFJZKxitfnwsd","GameTypes",void 0);var n=e("PlayerType",function(e){return e[e.P1=0]="P1",e[e.P2=1]="P2",e}({}));e("GameState",function(e){return e[e["准备中"]=0]="准备中",e[e["游戏中"]=1]="游戏中",e[e["暂停"]=2]="暂停",e[e["结束"]=3]="结束",e}({})),e("DefaultGameConfig",{moveAnimation:{duration:.5,easing:7,middleScale:1.2,endScale:1},diceAnimationTime:1}),e("DefaultTaskConfig",{femaleTasks:[{id:2,title:"女生做任务",content:"说出一个你最喜欢的电影并解释原因",playerType:n.P2},{id:3,title:"女生做任务",content:"分享一个你最难忘的旅行经历",playerType:n.P2},{id:4,title:"女生做任务",content:"模仿一个动物的叫声或动作",playerType:n.P2},{id:5,title:"女生做任务",content:"说出三个你的优点和一个缺点",playerType:n.P2}],maleTasks:[{id:2,title:"男生做任务",content:"做10个俯卧撑或者唱一首歌",playerType:n.P1},{id:3,title:"男生做任务",content:"分享一个你最自豪的成就",playerType:n.P1},{id:4,title:"男生做任务",content:"表演一个你最拿手的才艺",playerType:n.P1},{id:5,title:"男生做任务",content:"说出你对理想伴侣的三个要求",playerType:n.P1}]});t._RF.pop()}}}));

System.register("chunks:///_virtual/HorizontalTypeSet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./types.ts","./isCJK.ts","./Const2.ts","./code.ts","./BaseTypeSet.ts"],(function(e){var t,i,n,a,r,h,s,o,l,f,c,d,g,u,p,x;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.v3,a=e.director,r=e.Vec3},function(e){h=e.ETextOverflow,s=e.ETextHorizontalAlign,o=e.EScriptType,l=e.ETextVerticalAlign},function(e){f=e.isCJK},function(e){c=e.ItalicSkewFactor},function(e){d=e.ALLBIAODIAN,g=e.NOTBREAKING,u=e.LINEBREAKING,p=e.LINELEADING},function(e){x=e.BaseTypeSet}],execute:function(){i._RF.push({},"352afhzDhpGYo75fJlgO/7m","HorizontalTypeSet",void 0);var I=n(),b=n();e("HorizontalTypeSet",function(e){function i(){return e.apply(this,arguments)||this}t(i,e);var n=i.prototype;return n.hitTest=function(e,t){var i=e.uiTransform,n=a.root.batcher2D.getFirstRenderCamera(e.node);b.set(t.x,t.y,0),n.screenToWorld(I,b),i.convertToNodeSpaceAR(I,b);for(var r=b.x-e.globalOffsetX,h=b.y-e.globalOffsetY,s=e.layoutResult,o=0,l=o,f=-1,c=0;c<s.lines.length;c++){if(o-=s.linesHeight[c],h<=l&&h>=o){f=c;break}l=o}if(f>=0){var d=s.lines[f];this.hitTestResult.result=!1;for(var g=d[0];g<=d[1];g++){var u=e.charInfos[g];if(r>=u.x+u.offsetX&&r<=u.x+u.offsetX+u.w+u.sw)return this.hitTestResult.result=!0,this.hitTestResult.accurate=!1,this.hitTestResult.charInfo=u,h>=u.y+u.offsetY&&h<=u.y+u.offsetY+u.h+e.lineSpace&&(this.hitTestResult.accurate=!0),this.hitTestResult}}return null},n.processRTL=function(e,t,i){for(var n=e.charInfos,a=[],r=[],h=-1,s=t;s<=i;s++){var o=s==i,l=n[s];d.indexOf(l.char.code)>=0?(h<0&&(a.push(r),r=[],h=s),r.push(s)):(h>=0&&(a.push(r),r=[],h=-1),r.push(s)),o&&(r.push(s),a.push(r))}var f=0;a.reverse();for(var c=a.length,g=0;g<c;g++)for(var u=a[g],p=0;p<u.length;p++){var x=e.charInfos[u[p]];if(x.x=f,f+=x.w,x.style.italic&&p+1<u.length)e.charInfos[u[p+1]].style.italic||(f+=x.sw)}},n.layout=function(e){if(!e.font)return null;this.reset();var t=null;switch(e.overflow){case h.None:t=this.updateInResizeWidthMode(e);break;case h.Clamp:t=this.updateInClampMode(e);break;case h.ResizeHeight:t=this.updateInResizeHeightMode(e);break;case h.Shrink:t=this.updateInShrinkMode(e)}return e.charInfos.length>0&&(this.updateGloabl(e),this.horizontalLayout(e,t),this.verticalLayout(e,t),this.layoutSlots(e,t)),t},n.updateGloabl=function(e){var t=e.uiTransform;e.localOffsetX=0,e.localOffsetY=0,e.globalOffsetX=-t.width*t.anchorX||0,e.globalOffsetY=t.height*(1-t.anchorY)||0},n.updateInClampMode=function(e){return this.updateInWarpMode(e,1,e.multiline)},n.preProcessVertex=function(e,t,i){if(!(null!=t.cjk)){t.cjk=f(t.char.code);var n=t.slot?1:t.style.realFontSize/(e.font.fontSize*t.char.scale)*i,a=n,r=t.scale=a*e.aspect,h="\n"==t.char.code,s=" "==t.char.code;if(h||s)return t.visibleChar=!1,t.w=t.realWidth=h?0:t.char.width*r,t.h=t.realHeight=t.style.realFontSize,t.sw=0,t.sw1=0,t.glyphLeft=t.glyphRight=0,t.descent=0,void(t.offsetX=t.offsetY=0);var o=t.char.width,l=t.char.height,d=t.char.glyphWidth,g=t.char.glyphHeight,u=t.char.descent,p=t.char.ascent,x=t.char.glyphAdvance,I=t.char.glyphLeft;if(t.slot?(d=o=t.slot.width,g=l=t.slot.height,u=0,t.glyphLeft=0,t.glyphRight=0,t.slot.fixed&&(r=1,n=1)):(t.glyphLeft=I*r,t.glyphRight=x<d?(d-x-I)*r:0),t.ascent=p*n,t.descent=u*n,t.fixedOffsetY=e.font.offsetY*a,t.rotate?(t.realWidth=l*r,t.realHeight=o*a,t.offsetY=-u*a,t.slot?(t.w=t.realHeight,t.h=t.realWidth):(t.w=g*r,t.h=x*n)):(t.realWidth=o*r,t.realHeight=l*a,t.offsetY=-u*a,t.slot?(t.w=t.realWidth,t.h=t.realHeight):(t.w=x*r,t.h=g*n)),e.equalWidth){var b=t.w;t.w=e.fontSize,t.glyphLeft=.5*-(e.fontSize-b),t.glyphRight=0}t.sw=0,t.style.italic&&(t.sw=t.realHeight*c,t.sw1=t.descent*c)}},n.calcNextBreakInfo=function(e,t,i,n,a,r){var h=this,o=e.charInfos;i+=o[t].glyphLeft,e.multiline||(r=!1);for(var l=i,f=l,c=-1,d=0,x=0,I=0,b=0,L=0,k=e.letterSpace,v=function(t){h.breakLineInfo.lineHeight=e.fixedLineHeight?e.lineHeight:Math.max(t.h,h.breakLineInfo.lineHeight),h.breakLineInfo.maxDescent=Math.max(t.descent,h.breakLineInfo.maxDescent),h.breakLineInfo.maxAscent=Math.max(t.ascent,h.breakLineInfo.maxAscent),h.breakLineInfo.maxHeight=Math.max(h.breakLineInfo.maxHeight,t.realHeight)},y=t;y<o.length;y++){var m=y-1>=0?o[y-1]:null,H=o[y];this.preProcessVertex(e,H,a),H.visibleChar&&v(H);var w="\n"==H.char.code;if(w&&y==t){if(this.breakLineInfo.index=y,y+1<o.length)"\n"==o[y+1].char.code&&v(H);break}var S=" "==H.char.code;if(S?L++:L=0,r&&1!=L&&l+H.w+H.sw+k+H.glyphRight>n){var T=c>=0;this.breakLineInfo.index=T?c:y-1,l=f,T||(l+=H.sw+H.glyphRight),y==t?this.breakLineInfo.index=y:(this.breakLineInfo.lineHeight=d,this.breakLineInfo.maxDescent=x,this.breakLineInfo.maxAscent=I,this.breakLineInfo.maxHeight=b);break}(S||m&&(m.cjk!=H.cjk||m.cjk&&H.cjk||g.indexOf(m.char.code)>=0))&&(c=-1),l+=H.w,d=this.breakLineInfo.lineHeight,x=this.breakLineInfo.maxDescent,I=this.breakLineInfo.maxAscent,b=this.breakLineInfo.maxHeight;var R=u.indexOf(H.char.code)>=0,W=p.indexOf(H.char.code)>=0,O=e.breakWestern&&m&&m.cjk!=H.cjk;if(y!=t&&!W&&e.autoWarp&&(R||O)){var A=0,z=0;!(S||O)||e.horizontalAlign==s.Right&&y>t||(A=-1,z=-H.w),c=y+A,f=l+z,d=this.breakLineInfo.lineHeight,x=this.breakLineInfo.maxDescent,I=this.breakLineInfo.maxAscent,b=this.breakLineInfo.maxHeight}if(!(y+1<o.length)){this.breakLineInfo.index=y,l+=H.sw;break}l+=k;var Y=o[y+1];this.preProcessVertex(e,Y,a),w="\n"==Y.char.code,l+=this.getWidthExt(H,Y);var M=!1;if(w||r&&l+Y.w+Y.sw+Y.glyphRight>n&&(p.indexOf(Y.char.code)>=0||(M=u.indexOf(Y.char.code)>=0))){var D=c>=0&&!w;this.breakLineInfo.index=D?c:y,M&&e.autoWarp&&this.breakLineInfo.index++,l=f,D&&(l+=H.sw+H.glyphRight,this.breakLineInfo.index=c),this.breakLineInfo.lineHeight=d,this.breakLineInfo.maxDescent=x,this.breakLineInfo.maxAscent=I,this.breakLineInfo.maxHeight=b;break}}return this.breakLineInfo.lineIndex++,this.breakLineInfo},n.getWidthExt=function(e,t){if(e){if(e.style.scriptType!=o.SuperScript&&t.style.scriptType==o.SuperScript)return e.sw;if(e.style.scriptType!=o.SubScript&&t.style.scriptType==o.SubScript)return e.sw1;if(!t.style.italic&&e.style.italic)return e.sw}return 0},n.updateInWarpMode=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=!0),e.globalOffsetX=e.globalOffsetY=0,this.breakLineInfo.lineIndex=0;for(var n=e.uiTransform.width-e.padding.left-e.padding.right,a=0,r=0,h=e.charInfos,s=e.padding.left,l=-e.padding.top,f=l,c=[0,0],d=[c],g=!0,u=0,p=0,x=0,I=[],b=[],L=0,k=0;k<h.length;k++){var v=h[k];g&&this.calcNextBreakInfo(e,k,s,n,t,i),r=this.breakLineInfo.maxHeight,a=this.breakLineInfo.lineHeight,g&&(g=!1,f=l,l-=a,L=.5*(r-a)),c[1]=k,v.line=d.length-1,v.inline=c[1]-c[0];var y=k==h.length-1;this.breakLineInfo.index>=0&&k==this.breakLineInfo.index&&(g=!0);var m=void 0;if(c[0]==k?s+=v.glyphLeft:m=h[k-1],"\n"==v.char.code&&c[0]<k&&k>0?s=m.x+m.realWidth+m.sw:s+=this.getWidthExt(m,v),v.x=s-v.glyphLeft,v.baseY=l,v.y=-L+v.fixedOffsetY,v.startY=f,g){var H=0;d.length>0&&a>0&&(H=e.lineSpace),l-=H}v.style.scriptType==o.SuperScript?v.y+=a-.5*v.h:v.style.scriptType==o.SubScript&&(v.y+=v.descent);for(var w=0;w<this.beginUpdateHandlers.length;w++)this.beginUpdateHandlers[w].call(this,e,k,g);if(s=s+v.w+e.letterSpace*t,g||y){var S=this.getWidth(e,c[0],c[1]);if(b.push(S),I.push(a),u+=a,d.length>1&&a>0&&(u+=e.lineSpace),p=Math.max(S,p),k+1<h.length&&(s=e.padding.left,c=[k+1,0],d.push(c)),y&&this.underLineInfo.startIndex>=0&&v.font.keepUnlderLineSpace){var T=h[this.underLineInfo.startIndex];u+=Math.max(0,T.style.fontSize*e.font.underLineThickness-T.style.fontSize*e.font.underLineOffset)}for(var R=0;R<this.endUpdateHandlers.length;R++)this.endUpdateHandlers[R].call(this,e,k);a=0,x=this.breakLineInfo.maxDescent,this.breakLineInfo.maxAscent,this.breakLineInfo.index=-1,this.breakLineInfo.lineHeight=0,this.breakLineInfo.maxDescent=0,this.breakLineInfo.maxHeight=0,this.breakLineInfo.maxAscent=0}}return{lines:d,maxWidth:p,maxHeight:u,linesHeight:I,linesWidth:b,lastMaxDescent:x}},n.updateInResizeHeightMode=function(e){var t=this.updateInWarpMode(e),i=e.uiTransform,n=(t.maxHeight-i.height)*i.anchorY;return i.height=t.maxHeight||0,e.globalOffsetY+=n,t},n.updateInResizeWidthMode=function(e){var t=this.updateInWarpMode(e,1,!1),i=e.uiTransform;return i.width=t.maxWidth||0,i.height=t.maxHeight||0,t},n.updateInShrinkMode=function(e){var t=this.updateInWarpMode(e,1,!1),i=e.uiTransform,n=1;return t.lines.length<=1?t.maxWidth>i.width&&(n=i.width/t.maxWidth):t.maxHeight>i.height&&(n=i.height/t.maxHeight),1!=n&&(e.clearLayoutInfo(),t=this.updateInWarpMode(e,n,!0)),t},n.horizontalLayout=function(e,t){if(e.horizontalAlign!=s.Left){var i=0;e.horizontalAlign==s.Center?i=.5:e.horizontalAlign==s.Right&&(i=1);for(var n=e.uiTransform,a=0;a<t.lines.length;a++)for(var r=t.lines[a],h=r[1],o=(n.width-t.linesWidth[a])*i,l=r[0];l<=h;l++){e.charInfos[l].x+=o}}},n.verticalLayout=function(e,t){if(e.overflow!=h.ResizeHeight&&e.verticalAlign!=l.Top){var i=e.uiTransform,n=0;e.verticalAlign==l.Middle?n=.5:e.verticalAlign==l.Bottom&&(n=1);var a=t.maxHeight+e.padding.bottom;e.localOffsetY=(a-i.height)*n,e.globalOffsetY+=e.localOffsetY}},n.layoutSlots=function(e,t){for(var i=0;i<e.slots.length;i++){var n=e.slots[i],a=e.charInfos[n.index],h=n.node._uiProps.uiTransformComp;h.width=a.w,h.height=a.h;var s=t.linesHeight[a.line],o=a.x+h.width*n.dx,l=a.baseY+a.y+(h.height-s+e.lineSpace)*n.dy;a.x=o,a.y=l,n.node.position=new r(o+e.globalOffsetX+e.slotOffsetX,l+e.globalOffsetY+e.slotOffsetY,0)}},i}(x));i._RF.pop()}}}));

System.register("chunks:///_virtual/IChar.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"dd1e2ljOCNGhYd3BOrbq1Nb","IChar",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IFontData.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"94a950iUMFF8JYDesL3l551","IFontData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./CanvasPool.ts","./LetterRenderTexture.ts"],(function(t){var i,e,h,n,a,s,r;return{setters:[function(t){i=t.cclegacy,e=t.Rect,h=t.ImageAsset,n=t.errorID,a=t.gfx},function(t){s=t.CanvasPool},function(t){r=t.LetterRenderTexture}],execute:function(){i._RF.push({},"188edbbiHBOkoS4poh3EC4S","index",void 0);var o=1e20,l=new e,f=null;t("default",function(){function t(i){var e=void 0===i?{}:i,h=e.fontSize,n=void 0===h?24:h,a=e.buffer,s=void 0===a?3:a,r=e.radius,o=void 0===r?8:r,l=e.cutoff,f=void 0===l?.15:l,u=e.fontFamily,d=void 0===u?"sans-serif":u,v=e.fontWeight,g=void 0===v?"normal":v,c=e.fontStyle,y=void 0===c?"normal":c,x=e.cacheCanvas,p=void 0===x||x,m=e.trimBuffer,w=void 0!==m&&m;this.buffer=void 0,this.cutoff=void 0,this.radius=void 0,this.canvas=void 0,this.ctx=void 0,this.size=void 0,this.gridOuter=void 0,this.gridInner=void 0,this.f=void 0,this.d=void 0,this.z=void 0,this.v=void 0,this.middle=void 0,this.fontSize=void 0,this.fontFamily="sans-serif",this.fontWeight=void 0,this.fontStyle=void 0,this.cacheCanvas=!0,this.trimBuffer=!1,this.antiAlis=!1,this.resolution=2,this.canvasInst=void 0,this.image=void 0,this.texture=void 0,this.supportGetData=!0,this.buffer=s,this.cutoff=f,this.radius=o,this.trimBuffer=w,this.fontFamily=d,this.fontSize=n,this.fontWeight=g,this.fontStyle=y,this.cacheCanvas=p,this.antiAlis?this.resolution=2:this.resolution=1,this.fontSize*=this.resolution;var z=this.size=t.calcuteFontSize(this.fontSize,s);this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z),this.cacheCanvas&&this.beforeDraw()}t.calcuteFontSize=function(t,i){return t+2*i};var i=t.prototype;return i.setFontFamily=function(t){this.fontFamily=t||this.fontFamily},i._createCanvas=function(t){var i=document.createElement("canvas");return i.width=i.height=t,i},i.beforeDraw=function(){var t=s.getInstance().get(),i=t.canvas;i.width=i.height=this.size;var e=i.getContext("2d",{willReadFrequently:!0});e.getContextAttributes&&(e.getContextAttributes().willReadFrequently=!0),e.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,e.textBaseline="alphabetic",e.textAlign="left",e.fillStyle="black",e.lineJoin="round",this.canvasInst=t,this.ctx=e,this.canvas=i,this.image=new h,this.image.reset(i)},i.afterDraw=function(){s.getInstance().put(this.canvasInst),this.image=null},i.draw=function(t,i,e,h,n){var a,s,d,v;this.fontFamily=i||this.fontFamily,this.cacheCanvas?this.ctx.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily:this.beforeDraw();var g=this.ctx.measureText(t||e)||{};null==f&&(f=null!=g.actualBoundingBoxAscent);var c=g.width||0,y=null!=(a=g.fontBoundingBoxAscent)?a:this.fontSize,x=null!=(s=g.fontBoundingBoxDescent)?s:this.buffer,p=null!=(d=g.actualBoundingBoxLeft)?d:0,m=null!=(v=g.actualBoundingBoxRight)?v:c,w=Math.min(1,this.fontSize/(x+y),this.fontSize/c);if(1==t.length&&w<1){var z,A,B,M;this.ctx.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize*w+"px "+this.fontFamily;var S=this.ctx.measureText(t)||{};c=S.width||0,y=null!=(z=S.fontBoundingBoxAscent)?z:this.fontSize,x=null!=(A=S.fontBoundingBoxDescent)?A:this.buffer,p=null!=(B=S.actualBoundingBoxLeft)?B:0,m=null!=(M=S.actualBoundingBoxRight)?M:c}var F=Math.ceil(y),b=p,C=m,R=Math.min(this.size-2*this.buffer,Math.ceil(m+p)),D=Math.min(this.size-2*this.buffer,Math.ceil(F+x));R+=R%this.resolution,D+=D%this.resolution;var W=R+2*this.buffer,I=D+2*this.buffer;W-=W%this.resolution,I-=I%this.resolution;var T=Math.max(W*I,0),L=new Uint8ClampedArray(T),H=this.size,G={data:L,width:W,height:I,glyphWidth:R,glyphHeight:D,size:H,glyphLeft:b,glyphRight:C,glyphAdvance:c,ascent:F,descent:x,scale:w};if(""==t&&(G.ascent=0,G.descent=0,G.glyphAdvance=0,G.glyphHeight=0,G.glyphLeft=0,G.glyphRight=0,G.glyphWidth=0,G.height=0,G.width=0),0===R||0===D)return G.glyphWidth=G.glyphRight=G.size=G.width=Math.floor(G.glyphAdvance),G.glyphHeight=G.height=1,G;var O=this.ctx,_=this.buffer,U=this.gridInner,q=this.gridOuter;if(O.clearRect(_,_,R,D),null!=h)h(this.canvas,O,W,I,_,_);else{var E=0,P=0;f?(E=_+p,P=H-_-x):(E=(H-this.fontSize)/2,P=H-_-x),O.fillText(t,E,P)}var k=null;if(this.supportGetData&&O.getImageData){var X=null;try{X=O.getImageData(_,_,R,D)}catch(t){this.supportGetData=!1}X?k=X.data:this.supportGetData=!1}null==k&&(this.texture||(this.texture=new r),this.texture.initWithSize(H,H),this.texture.drawTextureAt(this.image,0,0),l.set(_,_,R,D),k=this.readTexturePixels(this.texture,l)),q.fill(o,0,T),U.fill(0,0,T);for(var J=0;J<D;J++)for(var j=0;j<R;j++){var K=k[4*(J*R+j)+3]/255;if(0!==K){var N=(J+_)*W+j+_;if(1===K)q[N]=0,U[N]=o;else{var Q=.5-K;q[N]=Q>0?Q*Q:0,U[N]=Q<0?Q*Q:0}}}k=null,u(q,0,0,W,I,W,this.f,this.v,this.z),u(U,_,_,R,D,W,this.f,this.v,this.z);for(var V=0;V<T;V++){var Y=Math.sqrt(q[V])-Math.sqrt(U[V]);L[V]=Math.round(255-255*(Y/this.radius+this.cutoff))}if(this.antiAlis){var Z=1/this.resolution,$=W*Z,tt=I*Z;G.ascent*=Z,G.descent*=Z,G.glyphAdvance*=Z,G.glyphHeight*=Z,G.glyphLeft*=Z,G.glyphRight*=Z,G.glyphWidth*=Z,G.height=tt,G.width=$;for(var it=new Uint8ClampedArray($*tt),et=0;et<tt;et++)for(var ht=et*$,nt=et*this.resolution*W,at=nt+W,st=0;st<$;st++){var rt=st*this.resolution;it[ht+st]=.25*(L[nt+rt]+L[nt+rt+1]+L[at+rt]+L[at+rt+1])}G.data=it}return this.cacheCanvas||this.afterDraw(),G},i.readTexturePixels=function(t,i,h){(i=i||new e(0,0,t.width,t.height)).x=Math.floor(i.x),i.y=Math.floor(i.y),i.width=Math.floor(i.width),i.height=Math.floor(i.height);var s=t.getGFXTexture();if(!s)return n(7606),null;var r=4*i.width*i.height;if(void 0===h)h=new Uint8Array(r);else if(h.length<r)return n(7607,r),null;var o=[],l=[],f=new a.BufferTextureCopy;f.texOffset.x=i.x,f.texOffset.y=i.y,f.texExtent.width=i.width,f.texExtent.height=i.height,l.push(f),o.push(h);var u=t._getGFXDevice();return null==u||u.copyTextureToBuffers(s,o,l),h},i.round=function(t,i){return i=Math.pow(10,i),Math.round(t*i)/i},i._trimBuffer=function(t,i){for(var e=t.width,h=t.height,n=1e6,a=-1,s=1e6,r=-1,o=0;o<h;o++)for(var l=o*e,f=0;f<e;f++){t.data[l+f]>0&&(n=Math.min(n,f-2),s=Math.min(s,o-2),r=Math.max(r,f+2),a=Math.max(a,o+2))}if(n=Math.max(0,n),s=Math.max(0,s),r=Math.min(e-1,r),a=Math.min(h-1,a),r<=0||a<=0)return console.warn("empty char data:"+i),t;var u=t.width,d=t.height;t.width=r-n,t.height=a-s;var v=u/t.width,g=d/t.height;t.glyphLeft=this.round(t.glyphLeft*v,2),t.glyphRight=this.round(t.glyphRight*v,2),t.glyphWidth=this.round(t.glyphWidth*v,2),t.glyphHeight=this.round(t.glyphHeight*g,2),t.ascent=this.round(t.ascent*g,2),t.descent=this.round(t.descent*g,2),t.glyphAdvance=this.round(t.glyphAdvance*v,2),t.size=Math.max(t.width,t.height);for(var c=new Uint8ClampedArray(t.width*t.height),y=0;y<=t.height;y++)for(var x=y*t.width,p=(y+s)*e,m=0;m<t.width;m++)c[x+m]=t.data[p+m+n];t.data=c},t}());function u(t,i,e,h,n,a,s,r,o){for(var l=i;l<i+h;l++)d(t,e*a+l,a,n,s,r,o);for(var f=e;f<e+n;f++)d(t,f*a+i,1,h,s,r,o)}function d(t,i,e,h,n,a,s){a[0]=0,s[0]=-o,s[1]=o,n[0]=t[i];for(var r=1,l=0,f=0;r<h;r++){n[r]=t[i+r*e];var u=r*r;do{var d=a[l];f=(n[r]-n[d]+u-d*d)/(r-d)/2}while(f<=s[l]&&--l>-1);a[++l]=r,s[l]=f,s[l+1]=o}for(var v=0,g=0;v<h;v++){for(;s[g+1]<v;)g++;var c=a[g],y=v-c;t[i+v*e]=n[c]+y*y}}i._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./TMFont.ts","./types.ts","./LayoutTypes.ts","./TextMeshLabel.ts","./events.ts","./ResManger.ts","./Utils.ts","./UBBParser.ts","./CharInfo.ts","./settings.ts","./SuperLabel.ts","./FontManager.ts","./StyleManager.ts"],(function(e){var t,n,a,o,r;return{setters:[function(e){t=e.cclegacy},function(t){e("TMFont",t.TMFont)},function(t){var n={};n.EScriptType=t.EScriptType,n.ETextDirection=t.ETextDirection,n.ETextHorizontalAlign=t.ETextHorizontalAlign,n.ETextOverflow=t.ETextOverflow,n.ETextVerticalAlign=t.ETextVerticalAlign,n.Margin=t.Margin,e(n)},function(t){var n={};n.Clickable=t.Clickable,n.ESlotSizeType=t.ESlotSizeType,n.ESlotType=t.ESlotType,n.ImageTAG=t.ImageTAG,n.PrefabTAG=t.PrefabTAG,n.Slot=t.Slot,n.SlotTAG=t.SlotTAG,n.SlotTypeMap=t.SlotTypeMap,n.isSlotType=t.isSlotType,e(n)},function(t){n=t.TextMeshLabel;var a={};a.EDirtyFlag=t.EDirtyFlag,a.TextMeshLabel=t.TextMeshLabel,e(a)},function(t){var n={};n.EventClickChar=t.EventClickChar,n.click_char_event=t.click_char_event,e(n)},function(t){e("ResManager",t.ResManager)},function(t){e("Utils",t.Utils)},function(t){var n={};n.TagNode=t.TagNode,n.UBBParser=t.UBBParser,e(n)},function(t){var n={};n.CharInfo=t.CharInfo,n.CharVertex=t.CharVertex,n.getCharInfoFromPool=t.getCharInfoFromPool,n.putCharInfoToPool=t.putCharInfoToPool,n.resetCharInfo=t.resetCharInfo,e(n)},function(t){a=t.TextMeshSettings,e("TextMeshSettings",t.TextMeshSettings)},function(t){o=t.SuperLabel,e("SuperLabel",t.SuperLabel)},function(t){r=t.FontManager;var n={};n.FM=t.FM,n.FontInfo=t.FontInfo,n.FontManager=t.FontManager,n.RegistFontInfo=t.RegistFontInfo,e(n)},function(t){e("StyleManager",t.StyleManager)}],execute:function(){t._RF.push({},"ddde5hpf59FTr3I7T8KGTlv","index",void 0),globalThis.TextMeshSettings=a,globalThis.TextMeshLabel=n,globalThis.SuperLabel=o,globalThis.FontManager=r,t._RF.pop()}}}));

System.register("chunks:///_virtual/isCJK.ts",["cc"],(function(u){var F;return{setters:[function(u){F=u.cclegacy}],execute:function(){u("isCJK",(function(u){return e.test(u)})),F._RF.push({},"bd55ccmyIlNfpobeGhoznGV","isCJK",void 0);var e,t=["\\u1100-\\u11FF","\\u2E80-\\u2EFF","\\u2F00-\\u2FDF","\\u2FF0-\\u2FFF","\\u3000-\\u303F","\\u3040-\\u309F","\\u30A0-\\u30FF","\\u3100-\\u312F","\\u3130-\\u318F","\\u3190-\\u319F","\\u31A0-\\u31BF","\\u31F0-\\u31FF","\\u3200-\\u32FF","\\u3300-\\u33FF","\\u3400-\\u4DBF","\\u4DC0-\\u4DFF","\\u4E00-\\u9FFF","\\uAC00-\\uD7AF","\\uF900-\\uFAFF","\\uFE30-\\uFE4F","\\uFF00-\\uFFEF","\\u{1D300}-\\u{1D35F}","\\u{20000}-\\u{2A6DF}","\\u{2A700}-\\u{2B73F}","\\u{2B740}-\\u{2B81F}","\\u{2B820}-\\u{2CEAF}","\\u{2CEB0}-\\u{2EBEF}","\\u{2F800}-\\u{2FA1F}"];try{e=new RegExp("["+t.join("")+"]","u")}catch(u){e=new RegExp("["+t.slice(0,21).join("")+"]")}F._RF.pop()}}}));

System.register("chunks:///_virtual/ISlot.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"21b451fXhBIXJe9cd4qMTsz","ISlot",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ITMFont.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"cbf02vHg71BTIeC6QVU6XQ7","ITMFont",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ITypeSet.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"c8e5fUJIfFHLrO8/+sudUNG","ITypeSet",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/LayoutTypes.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){t("isSlotType",(function(t){return t==s||t==n||t==o})),i._RF.push({},"981827vrbhNzb8dBRvo6kSS","LayoutTypes",void 0);t("Clickable",(function(){this.name=void 0,this.value=void 0,this.start=void 0,this.end=void 0}));var e=t("ESlotType",function(t){return t[t.Custom=0]="Custom",t[t.Image=1]="Image",t[t.Prefab=2]="Prefab",t}({})),s=t("ImageTAG","img"),n=t("PrefabTAG","pb"),o=t("SlotTAG","slot"),h=t("SlotTypeMap",{});h[s]=e.Image,h[n]=e.Prefab,h[o]=e.Custom;t("ESlotSizeType",function(t){return t[t.None=0]="None",t[t.FontSize=1]="FontSize",t[t.HeightFirst=2]="HeightFirst",t[t.WidthFirst=3]="WidthFirst",t}({})),t("Slot",(function(){this.index=void 0,this.type=e.Image,this.tag="",this.name="",this.src="",this.width=null,this.height=null,this.node=null,this.dx=0,this.dy=0,this.fixed=!1,this.sizeType=0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/LetterRenderTexture.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,i=e.gfx,n=e.Texture2D}],execute:function(){r._RF.push({},"afbc9FGh8pGzaunjYA4MkMI","LetterRenderTexture",void 0);e("LetterRenderTexture",function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var n=r.prototype;return n.initWithSize=function(e,t,r){void 0===r&&(r=35),this.reset({width:e,height:t,format:r})},n.drawTextureAt=function(e,t,r){var n=this.getGFXTexture();if(e&&n){var u=this._getGFXDevice();if(u){var o=new i.BufferTextureCopy;o.texOffset.x=t,o.texOffset.y=r,o.texExtent.width=e.width,o.texExtent.height=e.height,u.copyTexImagesToTexture([e.data],n,[o])}else console.warn("Unable to get device")}},r}(n));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonExport.ts","./ConfigBase.ts","./ChessboardConfigUtils.ts","./ChessboardExamples.ts","./ChessboardGenerator.ts","./GameEvents.ts","./ConfigMgr.ts","./PoolMgr.ts","./TaskManager.ts","./ChessboardTypes.ts","./GameTypes.ts","./PlayerDataModel.ts","./StartView.ts","./GameBinder.ts","./Game_Button1.ts","./Game_Cell.ts","./Game_Cell_Logic.ts","./Game_Dialog.ts","./Game_Dialog_Logic.ts","./Game_DiuTouZi.ts","./Game_DiuTouZi_Logic.ts","./Game_JueSeSelect.ts","./Game_JueSeSelect_Logic.ts","./Game_List.ts","./Game_List_Logic.ts","./Game_Main.ts","./Game_Main_Logic.ts","./Game_Peaple.ts","./Game_Peaple_Logic.ts","./Game_SelectGender.ts","./Game_SelectGender_Logic.ts","./Game_Succ.ts","./Game_Succ_Logic.ts","./Game_Touzi.ts","./Game_Touzi_Logic.ts","./TaskDialogWindow.ts","./Char.ts","./FontData.ts","./FontHelper.ts","./FontManager.ts","./FontParser.ts","./FontUtils.ts","./TMFont.ts","./TextureChannel.ts","./const.ts","./index2.ts","./CharInfo.ts","./LayoutTypes.ts","./SlotConnector.ts","./StyleManager.ts","./StyleMapper.ts","./SuperLabel.ts","./TextMeshAssembler.ts","./TextMeshLabel.ts","./TextMeshRenderData.ts","./TextStyle2.ts","./events.ts","./types.ts","./code.ts","./isCJK.ts","./MeasureText.ts","./TextStyle.ts","./index.ts","./settings.ts","./IChar.ts","./IFontData.ts","./ISlot.ts","./ITMFont.ts","./ITypeSet.ts","./BaseTypeSet.ts","./HorizontalTypeSet.ts","./TypeSetFactory.ts","./CanvasPool.ts","./Const2.ts","./LetterRenderTexture.ts","./ResManger.ts","./UBBParser.ts","./Utils.ts","./dfs.ts","./ETMQuadType.ts","./TMRenderData.ts","./VertexFormat.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MeasureText.ts",["cc","./CanvasPool.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.CanvasPool}],execute:function(){t._RF.push({},"ed99bXYhM1GxJrZjIt8/tYa","MeasureText",void 0);e("MeasureText",function(){function e(){}return e.create=function(e){var t=n.getInstance(),a=t.get(),c=a.canvas,i=c.getContext("2d",{willReadFrequently:!0});e.syncFont(c,i);var r=i.measureText(e.testString);if("actualBoundingBoxAscent"in r){var s=r.actualBoundingBoxAscent,u=r.actualBoundingBoxDescent;return t.put(a),{ascent:s,descent:u,fontSize:s+u}}var o=Math.ceil(r.width*e.baselineX),l=o,f=2*l;l=l*e.baselineY|0,c.width=o,c.height=f,i.fillStyle="#f00",i.fillRect(0,0,o,f),e.syncStyle(c,i),i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,l);var d={ascent:0,descent:0,fontSize:0},g=i.getImageData(0,0,o,f);if(!g)return d.ascent=l,d.descent=l+6,d.fontSize=d.ascent+d.descent,t.put(a),d;var v,x,h=g.data,S=h.length,b=4*o,y=0,p=!1;for(v=0;v<l;v++){for(x=0;x<b;x+=4)if(255!==h[y+x]){p=!0;break}if(p)break;y+=b}for(d.ascent=l-v,y=S-b,p=!1,v=f;v>l;v--){for(x=0;x<b;x+=4)if(255!==h[y+x]){p=!0;break}if(p)break;y-=b}return d.descent=v-l,d.fontSize=d.ascent+d.descent,t.put(a),d},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerDataModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(a){var t,r,e,n;return{setters:[function(a){t=a.inheritsLoose,r=a.createClass},function(a){e=a.cclegacy},function(a){n=a.IDataModel}],execute:function(){e._RF.push({},"2866dcyiSJImZDjn/EcWxMY","PlayerDataModel",void 0);var c=function(){this.isInGame=!1,this.currentRound=0,this.currentPlayer=1};a("playerDataModel",new(function(a){function e(){return a.apply(this,arguments)||this}t(e,a);var n=e.prototype;return n.clearGameData=function(){var a=new c;Object.assign(this.dRunData,a)},n.getPlayerCharacterId=function(a){return 1===a?this.dLocalData.player1CharacterId:this.dLocalData.player2CharacterId},n.setPlayerCharacter=function(a,t){return!(t<0)&&(1===a?this.dLocalData.player1CharacterId=t:this.dLocalData.player2CharacterId=t,!0)},n.setPlayer1Character=function(a){return this.setPlayerCharacter(1,a)},n.setPlayer2Character=function(a){return this.setPlayerCharacter(2,a)},r(e,[{key:"player1CharacterId",get:function(){return this.dLocalData.player1CharacterId}},{key:"player2CharacterId",get:function(){return this.dLocalData.player2CharacterId}}]),e}(n))(new function(){this.player1CharacterId=0,this.player2CharacterId=1},new c));e._RF.pop()}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,r,o,a,i,s,c,u,l,f,p,h,b;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.instantiate,i=e.Prefab},function(e){s=e.PoolBuilder,c=e.instance_base,u=e.asset,l=e.error},function(e){f=e.GTextField,p=e.AutoSizeType,h=e.UIPackage},function(e){b=e.GUIManager}],execute:function(){o._RF.push({},"04672eWqVFIKJiVK6TVkrA3","PoolMgr",void 0);e("objPoolMgr",function(e){function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._prefabpools=new Map,t._gobjpools=new Map,t._txtPool=null,t}t(o,e);var c=o.prototype;return c.getPrefabPool=function(){var e=n(r().mark((function e(t,o){var c,l,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=""+o+t,this._prefabpools.has(c)){e.next=7;break}return l=null,e.next=5,s().create(n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.next=3,u.get(t,i,null,{bundle_s:o});case 3:l=e.sent;case 4:return e.abrupt("return",a(l));case 5:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent=null,e.active=!0,e})).clear((function(e){var t;e.forEach((function(e){e.destroy()})),null==(t=l)||t.decRef(),l=null})).initialSize(5).maxSize(50).buildAsync();case 5:f=e.sent,this._prefabpools.set(c,f);case 7:return e.abrupt("return",this._prefabpools.get(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getGobjPool=function(){var e=n(r().mark((function e(t,o){var a,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=""+t+o,this._gobjpools.has(a)){e.next=7;break}return i=null,e.next=5,s().create(n(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=7;break}if(i=h.getByName(t)){e.next=6;break}return e.next=5,b.loadPackage(t);case 5:i=e.sent;case 6:b.setPackageRefCount(t);case 7:return(n=i.createObject(o))||l("create gobj "+t+"/"+o+" failed,请检查资源是否存在"),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()})),b.setPackageRefCount(t,-1),i=null})).initialSize(5).maxSize(50).buildAsync();case 5:c=e.sent,this._gobjpools.set(a,c);case 7:return e.abrupt("return",this._gobjpools.get(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getTxtPool=function(){return this._txtPool||(this._txtPool=s().create((function(){return new f})).reset((function(e){return e.fontSize=20,e.text="",e.setPivot(.5,1,!0),e.autoSize=p.Both,e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()}))})).initialSize(5).maxSize(100).buildSync()),this._txtPool},c.clear=function(){this._prefabpools.forEach((function(e){e.clear(),e.destroy()})),this._prefabpools.clear(),this._gobjpools.forEach((function(e){e.clear(),e.destroy()})),this._gobjpools.clear(),this._txtPool&&(this._txtPool.clear(),this._txtPool.destroy(),this._txtPool=null)},o}(c).instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/ResManger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts"],(function(n){var t,r,e,u,o,c;return{setters:[function(n){t=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){e=n.cclegacy,u=n.resources,o=n.assetManager},function(n){c=n.Utils}],execute:function(){e._RF.push({},"2bc70jXSGlJS61+G3szU0Jj","ResManger",void 0);n("ResManager",function(){function n(){}return n.preload=function(){var n=t(r().mark((function n(t,e){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){o.preloadAny(t,(function(n){e&&e(n)}),(function(t,r){n(r)}))})));case 1:case"end":return n.stop()}}),n)})));return function(t,r){return n.apply(this,arguments)}}(),n.loadAB=function(){var n=t(r().mark((function n(t,e){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){o.loadBundle(t,(function(n){e&&e(n)}),(function(t,r){n(r)}))})));case 1:case"end":return n.stop()}}),n)})));return function(t,r){return n.apply(this,arguments)}}(),n.getBundle=function(n){if(!n||"resources"==n)return u;var t=o.getBundle(n);return t||console.error("can not find asset bundle named "+n),t},n.getBundleAsync=function(n){var t=this;return new Promise((function(r,e){var u=t.getBundle(n);u?r(u):o.loadBundle(n,(function(n){}),(function(n,t){n?e(n):r(t)}))}))},n.getByUUIDAsync=function(){var n=t(r().mark((function n(t,e){var u,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=!1,i=null,o.loadAny(t,{type:e},null,(function(n,r){u=!0,i=r,n&&console.log("load "+t+" data err:"+n)})),n.next=5,c.until((function(){return u}));case 5:return n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)})));return function(t,r){return n.apply(this,arguments)}}(),n.get=function(n,t,r){var e=this.getBundle(n);if(!e)return null;if("string"==typeof t)return e.get(t,r);for(var u=[],o=0;o<t.length;o++){var c=e.get(t[o],r);u.push(c)}return u},n.getAsync=function(){var n=t(r().mark((function n(t,e,u){var o,i,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=this.get(t,e,u))){n.next=3;break}return n.abrupt("return",o);case 3:return i=!1,a="",this.load(t,e,u).then((function(n){o=n,i=!0})).catch((function(n){a=n,i=!0})),n.next=8,c.until((function(){return i}));case 8:return a&&console.log("load "+t+":"+e+" data err:"+a),n.abrupt("return",o);case 10:case"end":return n.stop()}}),n,this)})));return function(t,r,e){return n.apply(this,arguments)}}(),n.load=function(n,t,r,e){var u=this;return new Promise((function(o,c){u.getBundle(n).load(t,r,e,(function(n,t){n?c(n):o(t)}))}))},n.loadDir=function(n,t,r){var e=this;return new Promise((function(u,o){e.getBundle(n).loadDir(t,r,(function(n,t){n?o(n):u(t)}))}))},n.editorLoad=function(n){return new Promise((function(n,t){n(null)}))},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/settings.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"cd9ceSKL41GeK5AzpBx8hLS","settings",void 0);e("TextMeshSettings",{antiAlis:!0,shadowScale:1,dilateScale:1,disableTextMesh:!1,defulatUseFontPreset:!0});t._RF.pop()}}}));

System.register("chunks:///_virtual/SlotConnector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,i,c,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,l=e.Node,a=e.Component}],execute:function(){var s,u,p,f,d;i._RF.push({},"0df6fcmS09OYZpzI1figns9","SlotConnector",void 0);var y=c.ccclass,h=c.property;e("SlotConnector",(s=y("SlotConnector"),u=h(l),s((d=t((f=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,o(t,"labelNode",d,r(t)),t}return n(t,e),t}(a)).prototype,"labelNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/StartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./CommonExport.ts","./fairygui.mjs","./Game_SelectGender.ts"],(function(e){var r,t,o,n,i,a,s,l,c,u,p,g,h,d,f,b,v,w,y,m,x;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.ProgressBar,p=e.Node,g=e.color,h=e.view,d=e.tween,f=e.Component,b=e.resources},function(e){v=e.GUIManager,w=e.AllBinder},null,function(e){y=e.UIConfig,m=e.GRoot},function(e){x=e.default}],execute:function(){var S,B,P,z,j,D,F,R;s._RF.push({},"b717ey19TVBBpBqTI0xPCo1","StartView",void 0);var k=l.ccclass,G=l.property;e("default",(S=G(c),B=G(u),P=G(p),k((D=r((j=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,o(r,"label",D,n(r)),o(r,"progressBar",F,n(r)),o(r,"bg",R,n(r)),r.progressObj={value:0},r}t(r,e);var s=r.prototype;return s.onLoad=function(){y.buttonSoundVolumeScale=1,y.bringWindowToFrontOnClick=!1,y.modalLayerColor=g(0,0,0,180),this.progressBar.progress=0,this.label.string="0%",this.progressObj.value=0},s.adaptBackgroundSize=function(){if(this.bg)try{var e=m.inst,r=e.width,t=e.height,o=h.getDesignResolutionSize(),n=h.getVisibleSize();console.log("FairyGUI适配信息:\n                FGUI根节点尺寸: "+r+" x "+t+"\n                设计分辨率: "+o.width+" x "+o.height+"\n                屏幕尺寸: "+n.width+" x "+n.height);var i=r/o.width,a=t/o.height;this.bg.setScale(i,a),console.log("背景适配完成:\n                宽度缩放: "+i.toFixed(3)+"\n                高度缩放: "+a.toFixed(3)+"\n                最终背景尺寸: "+(o.width*i).toFixed(1)+" x "+(o.height*a).toFixed(1))}catch(e){console.error("背景适配失败，回退到基础适配:",e);var s=h.getVisibleSize(),l=h.getDesignResolutionSize(),c=s.width/l.width,u=s.height/l.height;this.bg.setScale(c,u)}else console.warn("bg节点未设置，跳过背景适配")},s.start=function(){var e=i(a().mark((function e(){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.bindAll(),e.prev=1,this.adaptBackgroundSize(),console.log("开始加载UI包..."),e.next=6,v.loadPackage("Game",(function(e,t){var o=.7*(e/t);r.updateProgress(o,"加载UI资源")}));case 6:return console.log("开始预加载字体资源..."),e.next=9,this.preloadResourceDir("fonts",.7,.85,"加载字体资源");case 9:return console.log("开始预加载材质资源..."),e.next=12,this.preloadResourceDir("materials",.85,1,"加载材质资源");case 12:console.log("所有资源加载完成！"),v.open(x),this.label.node.parent.active=!1,e.next=22;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("资源加载失败:",e.t0),v.open(x),this.label.node.parent.active=!1;case 22:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),s.preloadResourceDir=function(){var e=i(a().mark((function e(r,t,o,n){var i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){i.updateProgress(t,n),b.loadDir(r,(function(e,r){var a=t+(o-t)*(r>0?e/r:1);i.updateProgress(a,n)}),(function(t,a){t?(console.warn("预加载"+r+"失败:",t),i.updateProgress(o,n),e()):(console.log("预加载"+r+"成功，共加载"+a.length+"个资源"),i.updateProgress(o,n),e())}))})));case 1:case"end":return e.stop()}}),e)})));return function(r,t,o,n){return e.apply(this,arguments)}}(),s.updateProgress=function(e,r){var t=this;d(this.progressObj).stop(),d(this.progressObj).to(.3,{value:e},{onUpdate:function(){t.progressBar.progress=t.progressObj.value;var e=Math.floor(100*t.progressObj.value);t.label.string=e+"%"}}).start()},r}(f)).prototype,"label",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=r(j.prototype,"progressBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=r(j.prototype,"bg",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=j))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/StyleManager.ts",["cc","./TextStyle2.ts"],(function(t){var s,e,a;return{setters:[function(t){s=t.cclegacy,e=t.game},function(t){a=t.TextStyle}],execute:function(){s._RF.push({},"eefba/4uw9KnrIDRsFYIMP0","StyleManager",void 0);var o=t("StyleManager",function(){function t(){}return t._onStyleChanged=function(){e.emit(t.TMF_STYLE_CHANGED)},t.removeAll=function(){this._styles={},this._onStyleChanged()},t.registByStyle=function(t,s){this._styles[t]=s,s.asTag&&(this._tags[t.toLocaleLowerCase()]=s),s.alias&&(this._styles[s.alias]=s,this._tags[s.alias.toLocaleLowerCase()]=s),this._onStyleChanged()},t.registByStyles=function(t,s){for(var e=0;e<t.length;e++){var a=s[e],o=t[e];this._styles[o]=a,a.asTag&&(this._tags[o.toLocaleLowerCase()]=a),a.alias&&(this._styles[a.alias]=a,this._tags[a.alias.toLocaleLowerCase()]=a)}this._onStyleChanged()},t.registByKeyJson=function(t,s){var e=new a;try{e.parseFromJsonStr(s),this._styles[t]=e,e.asTag&&(this._tags[t.toLocaleLowerCase()]=e),e.alias&&(this._styles[e.alias]=e,this._tags[e.alias.toLocaleLowerCase()]=e),this._onStyleChanged()}catch(t){console.error(t)}},t.registByJson=function(t){try{var s=JSON.parse(t);for(var e in s){var o=new a;o.parseFromJson(s[e]),this._styles[e]=o,o.asTag&&(this._tags[e.toLocaleLowerCase()]=o),o.alias&&(this._styles[o.alias]=o,this._tags[o.alias.toLocaleLowerCase()]=o)}this._onStyleChanged()}catch(t){console.error(t)}},t.getStyle=function(t){return this._styles[t]},t.getTagStyle=function(t){return t=t.toLocaleLowerCase(),this._tags[t]},t}());o.TMF_STYLE_CHANGED="tmf_style_changed",o._styles={},o._tags={},s._RF.pop()}}}));

System.register("chunks:///_virtual/StyleMapper.ts",["cc","./types.ts"],(function(o){var e,r;return{setters:[function(o){e=o.cclegacy},function(o){r=o.EScriptType}],execute:function(){e._RF.push({},"58af2fCp3JJ96flV9fnXxom","StyleMapper",void 0);o("StyleMapper",{valueKeys:["asTag","alias"],tagMap:{br:"\n"},sup:{field:"_$scriptType",value:r.SuperScript},sub:{field:"_$scriptType",value:r.SubScript},u:{field:"_$underline",value:!0},s:{field:"_$strike",value:!0},i:{field:"_$italic",value:!0},b:{field:"_$dilate",value:.6},bg:{field:"_$background",value:!0},"color-lt":{field:"_$colorLT"},"color-lb":{field:"_$colorLB"},"color-rt":{field:"_$colorRT"},"color-rb":{field:"_$colorRB"},color:{field:"_$color",value:16777215,attributes:{lt:{mapper:"color-lt"},lb:{mapper:"color-lb"},rt:{mapper:"color-rt"},rb:{mapper:"color-rb"}}},"shadow-color":{field:"_$shadowColor"},"shadow-x":{field:"_$shadowX"},"shadow-y":{field:"_$shadowY"},"shadow-blur":{field:"_$shadowBlur"},shadow:{field:"_$shadow",value:.1,attributes:{color:{mapper:"shadow-color"},x:{mapper:"shadow-x"},y:{mapper:"shadow-y"},blur:{mapper:"shadow-blur"}}},"stroke-color":{field:"_$strokeColor"},"stroke-blur":{field:"_$strokeBlur"},stroke:{field:"_$stroke",attributes:{color:{mapper:"stroke-color"},blur:{mapper:"stroke-blur"}}},"outline-color":{field:"_$strokeColor"},"outline-blur":{field:"_$strokeBlur"},outline:{field:"_$stroke",attributes:{color:{mapper:"stroke-color"},blur:{mapper:"stroke-blur"}}},dilate:{field:"_$dilate"},"background-color":{field:"_$backgroundColor"},background:{field:"_$background",value:!0,attributes:{color:{mapper:"background-color"}}},"mask-color":{field:"_$maskColor"},mask:{field:"_$mask",value:!0,attributes:{color:{mapper:"mask-color"}}},size:{field:"_$fontSize"},"font-size":{field:"_$fontSize"},font:{field:"_$font",value:!0,attributes:{size:{mapper:"font-size"}}}});e._RF.pop()}}}));

System.register("chunks:///_virtual/SuperLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TextMeshLabel.ts","./settings.ts","./env","./Utils.ts"],(function(t){var e,i,o,s,r,n,l,h,a,c,p,_,u,b,f,d,y,g,w,L,x,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.createClass,n=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){h=t.cclegacy,a=t._decorator,c=t.Vec2,p=t.Font,_=t.Color,u=t.Label,b=t.LabelOutline,f=t.LabelShadow,d=t.math,y=t.Component,g=t.RichText},function(t){w=t.TextMeshLabel},function(t){L=t.TextMeshSettings},function(t){x=t.EDITOR},function(t){M=t.Utils}],execute:function(){var m,O,k,S,z,C,v,T,A,D,P,R,j,B,H,N,I,F,U,X,W,E,V,Y,G,q,J,K,Q,Z,$,tt,et,it;h._RF.push({},"f8b15ppXNtLh60Tfv6u9eWa","SuperLabel",void 0);var ot=a.ccclass,st=a.executeInEditMode,rt=a.property,nt=new c;t("SuperLabel",(m=ot("SuperLabel"),O=rt(p),k=rt(_),S=rt({multiline:!0}),z=rt({visible:function(){return!!this._ccLabel}}),C=rt({visible:function(){return!!this._textMeshLabel}}),v=rt({type:c}),T=rt({type:u.Overflow}),A=rt({type:u.HorizontalAlign}),D=rt({type:u.VerticalAlign}),m(P=st((j=e((R=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this)._ccLabel=null,e._outline=null,e._shadow=null,e._ccRichText=null,e._textMeshLabel=null,e.slotSpriteFrameCreateHandler=null,o(e,"_richMode",j,s(e)),o(e,"_textmeshMode",B,s(e)),o(e,"_string",H,s(e)),o(e,"_font",N,s(e)),o(e,"_fontName",I,s(e)),o(e,"_fontSize",F,s(e)),o(e,"_color",U,s(e)),o(e,"_overflow",X,s(e)),o(e,"_horizontalAlign",W,s(e)),o(e,"_verticalAlign",E,s(e)),o(e,"_letterSpace",V,s(e)),o(e,"_underline",Y,s(e)),o(e,"_bold",G,s(e)),o(e,"_italic",q,s(e)),o(e,"_singleLine",J,s(e)),o(e,"_lineHeight",K,s(e)),o(e,"_lineSpace",Q,s(e)),o(e,"_strokeColor",Z,s(e)),o(e,"_shadowColor",$,s(e)),o(e,"_shadowBlur",tt,s(e)),o(e,"_shadowOffset",et,s(e)),o(e,"_stroke",it,s(e)),e.imageAtlas=void 0,e}i(e,t);var h=e.prototype;return h.setMode=function(t,e){this._textmeshMode=t,this._richMode=e,this._changeMode(t)},h.updateOutline=function(){this._ccLabel?(this._outline.width=this._stroke,this._outline.color=this._strokeColor):this._textMeshLabel&&(this._textMeshLabel.stroke=this._stroke/this.fontSize,this._textMeshLabel.strokeColor=this._strokeColor)},h.updateShadow=function(){this._ccLabel?(this._shadow.offset=this._shadowOffset,this._shadow.color=this._shadowColor,this._shadow.blur=this._shadowBlur):this._textMeshLabel&&(this._textMeshLabel.shadowOffsetX=this._shadowOffset.x,this._textMeshLabel.shadowOffsetY=-this._shadowOffset.y,this._textMeshLabel.shadowColor=this._shadowColor,this._textMeshLabel.shadowBlur=this._shadowBlur)},h.onLoad=function(){L.disableTextMesh&&(this.textmeshMode=!1),this.buildLabel()},h.buildLabel=function(){this._textMeshLabel=this.node.getComponent(w),this._ccLabel=this.node.getComponent(u),this._outline=this.node.getComponent(b),this._shadow=this.node.getComponent(f),this._changeMode(this._textmeshMode)},h._changeMode=function(){var t=n(l().mark((function t(e){var i,o,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._textmeshMode=e=e&&!L.disableTextMesh,this._ccLabel=this.node.getComponent(u),this._textMeshLabel=this.node.getComponent(w),this._ccRichText=this.node.getComponent(g),!e){t.next=18;break}if(i=!!this._ccLabel,this._outline&&(this._outline.destroy(),this._outline=null),this._shadow&&(this._shadow.destroy(),this._shadow=null),this._ccLabel&&(this._ccLabel.destroy(),this._ccLabel=null),this._ccRichText&&(this._ccRichText.destroy(),this._ccRichText=null),!i||!x){t.next=13;break}return t.next=13,M.waitframe();case 13:this._textMeshLabel||(this._textMeshLabel=this.node.addComponent(w)),this._textMeshLabel.rich=this._richMode,this._applyLabelInfo(),t.next=37;break;case 18:if(this._richMode){t.next=29;break}if(o=!!this._textMeshLabel,this._ccRichText&&(this._ccRichText.destroy(),this._ccRichText=null),this._textMeshLabel&&(this._textMeshLabel.destroy(),this._textMeshLabel=null),!o||!x){t.next=25;break}return t.next=25,M.waitframe();case 25:this._ccLabel||(this._ccLabel=this.node.addComponent(u)),this._applyLabelInfo(),t.next=37;break;case 29:if(s=!!this._ccRichText,this._ccLabel&&(this._ccLabel.destroy(),this._ccLabel=null),this._textMeshLabel&&(this._textMeshLabel.destroy(),this._textMeshLabel=null),!s||!x){t.next=35;break}return t.next=35,M.waitframe();case 35:this._ccRichText||(this._ccRichText=this.node.addComponent(g)),this._applyLabelInfo();case 37:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),h._applyLabelInfo=function(){this.label&&(this._textmeshMode?this.fontName=this._fontName:this.font=this._font,this.string=this._string,this.fontSize=this._fontSize,this.color=this._color,this.overflow=this._overflow,this.horizontalAlign=this._horizontalAlign,this.verticalAlign=this._verticalAlign,this.letterSpace=this._letterSpace,this.underline=this._underline,this.bold=this._bold,this.italic=this._italic,this.singleLine=this._singleLine,this.stroke=this._stroke,this.lineHeight=this._lineHeight,this.lineSpace=this._lineSpace,this.strokeColor=this._strokeColor,0==this._shadowOffset.x&&0==this._shadowOffset.y||(this.shadowOffset=this._shadowOffset,this.shadowColor=this.shadowColor,this.shadowBlur=this.shadowBlur),this._textMeshLabel&&this._textMeshLabel.setSlotSpriteFrameCreateHandler(this.slotSpriteFrameCreateHandler),this._ccRichText&&(this._ccRichText.imageAtlas=this.imageAtlas))},r(e,[{key:"textmeshMode",get:function(){return this._textmeshMode},set:function(t){this._textmeshMode===t&&(t&&this._textMeshLabel||!t&&(!this._richMode&&this._ccLabel||this._richMode&&this._ccRichText))||(this._textmeshMode=t,this._changeMode(t))}},{key:"richMode",get:function(){return this._richMode},set:function(t){this._richMode!==t&&(this._richMode=t,this._changeMode(this._textmeshMode))}},{key:"string",get:function(){return this._string},set:function(t){this._string=t,this.label&&(this.label.string=t)}},{key:"font",get:function(){return this._font},set:function(t){this._font=t,this._ccLabel&&(this._ccLabel.font=t,t||(this._ccLabel.useSystemFont=!0)),this._ccRichText&&(t?this._ccRichText.font=t:this._ccRichText.useSystemFont=!0),t&&(this.textmeshMode=!1)}},{key:"fontName",get:function(){return this._fontName},set:function(t){this._fontName=t,this._textMeshLabel&&(this._textMeshLabel.fontName=t),t&&(this.textmeshMode=!0)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize=t,this.label&&(this.label.fontSize=t)}},{key:"color",get:function(){return this._color},set:function(t){this._color.set(t),this.label&&(this.label instanceof w||this.label instanceof u)&&(this.label.color=t)}},{key:"stroke",get:function(){return this._stroke},set:function(t){if(this._stroke=t,this._ccLabel){if(!this.enableStroke)return;this._outline.width=t}else if(this._textMeshLabel){var e=this._textMeshLabel.font;e&&(this._textMeshLabel.stroke=d.clamp01(t/this.fontSize),this._textMeshLabel.strokeBlur=e.strokeBlur),this.updateOutline()}}},{key:"enableStroke",get:function(){var t=this._stroke>0;return this._ccLabel&&(t?(this._outline||(this._outline=this.node.addComponent(b)),this.updateOutline()):this._outline&&(this._outline.destroy(),this._outline=null)),t}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){if(this._strokeColor.set(t),this._ccLabel){if(!this.enableStroke)return;this._outline.color=t}else this._textMeshLabel&&(this._textMeshLabel.strokeColor=t)}},{key:"shadowOffset",get:function(){return this._shadowOffset},set:function(t){if(this._shadowOffset.set(t),this._ccLabel){if(!this.enableShadow)return;nt.set(t.x,t.y),this._shadow.offset=nt}else if(this._textMeshLabel)if(this._textMeshLabel.shadowOffsetX=t.x,this._textMeshLabel.shadowOffsetY=-t.y,this.enableShadow){var e=this._textMeshLabel.font;e&&(this._textMeshLabel.shadow<=0&&(this._textMeshLabel.shadow=e.shadowSize),this._textMeshLabel.shadowBlur=e.shadowBlur,this.updateShadow())}else this._textMeshLabel.shadow=0}},{key:"enableShadow",get:function(){var t=0!=this._shadowOffset.x||0!=this._shadowOffset.y;return this._ccLabel&&(this._shadow||(this._shadow=this.node.addComponent(f),this.updateShadow())),t}},{key:"shadowColor",get:function(){return this._shadowColor},set:function(t){if(this._shadowColor.set(t),this._ccLabel){if(!this.enableShadow)return;this._shadow.color=t}else this._textMeshLabel&&(this._textMeshLabel.shadowColor=t)}},{key:"shadowBlur",get:function(){return this._shadowBlur},set:function(t){if(this._shadowBlur=t,this._ccLabel){if(!this.enableShadow)return;this._shadow.blur=t}else this._textMeshLabel&&(this._textMeshLabel.shadowBlur=t)}},{key:"overflow",get:function(){return this._overflow},set:function(t){this._overflow=t,this.label&&(this.label instanceof u||this.label instanceof w)&&(this.label.overflow=t)}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign=t,this.label&&(this.label.horizontalAlign=t)}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(t){this._verticalAlign=t,this.label&&(this.label.verticalAlign=t)}},{key:"letterSpace",get:function(){return this._letterSpace},set:function(t){this._letterSpace=t,this._ccLabel?this._ccLabel.spacingX=t:this._textMeshLabel&&(this._textMeshLabel.letterSpace=t)}},{key:"underline",get:function(){return this._underline},set:function(t){this._underline=t,this._ccLabel?this._ccLabel.isUnderline=t:this._textMeshLabel&&(this._textMeshLabel.enableUnderline=t)}},{key:"bold",get:function(){return this._bold},set:function(t){this._bold=t,this._ccLabel?this._ccLabel.isBold=t:this._textMeshLabel&&(this._textMeshLabel.enableBold=t)}},{key:"italic",get:function(){return this._italic},set:function(t){this._italic,this._ccLabel?this._ccLabel.isItalic=t:this._textMeshLabel&&(this._textMeshLabel.enableItalic=t)}},{key:"singleLine",get:function(){return this._singleLine},set:function(t){this._singleLine=t,this._ccLabel?this._ccLabel.enableWrapText=!t:this._textMeshLabel&&(this._textMeshLabel.autoWarp=!0,this._textMeshLabel.multiline=!t)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight=t,this.label&&(this.label.lineHeight=t)}},{key:"lineSpace",get:function(){return this._lineSpace},set:function(t){this._lineSpace=t,this._textMeshLabel&&(this._textMeshLabel.lineSpace=t)}},{key:"label",get:function(){return this._textMeshLabel?this._textMeshLabel:this._ccLabel?this._ccLabel:this._ccRichText?this._ccRichText:null}}]),e}(y)).prototype,"_richMode",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=e(R.prototype,"_textmeshMode",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=e(R.prototype,"_string",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=e(R.prototype,"_font",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(R.prototype,"_fontName",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),F=e(R.prototype,"_fontSize",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),U=e(R.prototype,"_color",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _(255,255,255,255)}}),X=e(R.prototype,"_overflow",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=e(R.prototype,"_horizontalAlign",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=e(R.prototype,"_verticalAlign",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=e(R.prototype,"_letterSpace",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=e(R.prototype,"_underline",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=e(R.prototype,"_bold",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=e(R.prototype,"_italic",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J=e(R.prototype,"_singleLine",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=e(R.prototype,"_lineHeight",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),Q=e(R.prototype,"_lineSpace",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),Z=e(R.prototype,"_strokeColor",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _(0,0,0,255)}}),$=e(R.prototype,"_shadowColor",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _(0,0,0,255)}}),tt=e(R.prototype,"_shadowBlur",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),et=e(R.prototype,"_shadowOffset",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),it=e(R.prototype,"_stroke",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(R.prototype,"textmeshMode",[rt],Object.getOwnPropertyDescriptor(R.prototype,"textmeshMode"),R.prototype),e(R.prototype,"richMode",[rt],Object.getOwnPropertyDescriptor(R.prototype,"richMode"),R.prototype),e(R.prototype,"string",[S],Object.getOwnPropertyDescriptor(R.prototype,"string"),R.prototype),e(R.prototype,"font",[z],Object.getOwnPropertyDescriptor(R.prototype,"font"),R.prototype),e(R.prototype,"fontName",[C],Object.getOwnPropertyDescriptor(R.prototype,"fontName"),R.prototype),e(R.prototype,"fontSize",[rt],Object.getOwnPropertyDescriptor(R.prototype,"fontSize"),R.prototype),e(R.prototype,"color",[rt],Object.getOwnPropertyDescriptor(R.prototype,"color"),R.prototype),e(R.prototype,"stroke",[rt],Object.getOwnPropertyDescriptor(R.prototype,"stroke"),R.prototype),e(R.prototype,"strokeColor",[rt],Object.getOwnPropertyDescriptor(R.prototype,"strokeColor"),R.prototype),e(R.prototype,"shadowOffset",[v],Object.getOwnPropertyDescriptor(R.prototype,"shadowOffset"),R.prototype),e(R.prototype,"shadowColor",[rt],Object.getOwnPropertyDescriptor(R.prototype,"shadowColor"),R.prototype),e(R.prototype,"shadowBlur",[rt],Object.getOwnPropertyDescriptor(R.prototype,"shadowBlur"),R.prototype),e(R.prototype,"overflow",[T],Object.getOwnPropertyDescriptor(R.prototype,"overflow"),R.prototype),e(R.prototype,"horizontalAlign",[A],Object.getOwnPropertyDescriptor(R.prototype,"horizontalAlign"),R.prototype),e(R.prototype,"verticalAlign",[D],Object.getOwnPropertyDescriptor(R.prototype,"verticalAlign"),R.prototype),e(R.prototype,"letterSpace",[rt],Object.getOwnPropertyDescriptor(R.prototype,"letterSpace"),R.prototype),e(R.prototype,"underline",[rt],Object.getOwnPropertyDescriptor(R.prototype,"underline"),R.prototype),e(R.prototype,"bold",[rt],Object.getOwnPropertyDescriptor(R.prototype,"bold"),R.prototype),e(R.prototype,"italic",[rt],Object.getOwnPropertyDescriptor(R.prototype,"italic"),R.prototype),e(R.prototype,"singleLine",[rt],Object.getOwnPropertyDescriptor(R.prototype,"singleLine"),R.prototype),e(R.prototype,"lineHeight",[rt],Object.getOwnPropertyDescriptor(R.prototype,"lineHeight"),R.prototype),e(R.prototype,"lineSpace",[rt],Object.getOwnPropertyDescriptor(R.prototype,"lineSpace"),R.prototype),P=R))||P)||P));h._RF.pop()}}}));

System.register("chunks:///_virtual/TaskDialogWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs"],(function(n){var t,o,i,a;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n.tween},function(n){a=n.GUIWindow}],execute:function(){o._RF.push({},"d97eaajx3dMSISvLxI0Rrxl","TaskDialogWindow",void 0);n("TaskDialogWindow",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var a=o.prototype;return a.onInit=function(){this.center(),this.contentPane.setPivot(.5,.5)},a.doShowAnimation=function(){var t=this;this.contentPane.scaleX=1.2,this.contentPane.scaleY=1.2,this.contentPane.alpha=.8,i(this.contentPane).to(.5,{scaleX:1,scaleY:1,alpha:1},{easing:"backOut"}).call((function(){n.prototype.doShowAnimation.call(t)})).start()},a.doHideAnimation=function(){var t=this;i(this.contentPane).to(.3,{scaleX:.8,scaleY:.8,alpha:0},{easing:"backIn"}).call((function(){n.prototype.doHideAnimation.call(t)})).start()},o}(a));o._RF.pop()}}}));

System.register("chunks:///_virtual/TaskManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./GameTypes.ts"],(function(s){var a,t,n,e,i,o;return{setters:[function(s){a=s.inheritsLoose,t=s.extends},function(s){n=s.cclegacy},function(s){e=s.autoBindToWindow,i=s.instance_base},function(s){o=s.DefaultTaskConfig}],execute:function(){var l;n._RF.push({},"49149F1kmdENItKaJQMvmdX","TaskManager",void 0);var r=s("TaskManager",e(l=function(s){function n(){var a;return(a=s.call(this)||this).taskConfig=o,a.usedTaskIds=new Set,a.allTasks=[],a.initializeTaskPool(),a}a(n,s);var e=n.prototype;return e.initializeTaskPool=function(){this.allTasks=[].concat(this.taskConfig.femaleTasks,this.taskConfig.maleTasks),console.log("任务池初始化完成，共 "+this.allTasks.length+" 个任务")},e.getRandomTask=function(s){var a=this,n=this.allTasks.filter((function(s){return!a.usedTaskIds.has(s.id)}));if(0===n.length)return this.usedTaskIds.clear(),console.log("所有任务已使用完毕，重置任务池"),this.getRandomTask(s);var e=Math.floor(Math.random()*n.length),i=t({},n[e]);return this.usedTaskIds.add(i.id),console.log("为玩家选择任务: "+i.title),i},e.getRandomTaskForPlayer=function(s){var a=this.getRandomTask();return a.player=s,console.log("为 "+s.name+" (角色ID: "+s.characterId+") 分配任务: "+a.title),a},e.getTaskById=function(s){var a=this.allTasks.find((function(a){return a.id===s}));return a?t({},a):null},e.resetUsedTasks=function(){this.usedTaskIds.clear(),console.log("任务使用记录已重置")},e.getAvailableTaskCount=function(){return this.allTasks.length-this.usedTaskIds.size},e.getAllTasks=function(){return[].concat(this.allTasks)},n}(i))||l);s("taskManager",r.instance());n._RF.pop()}}}));

System.register("chunks:///_virtual/TextMeshAssembler.ts",["cc","./settings.ts","./Const2.ts","./ETMQuadType.ts","./CharInfo.ts","./types.ts"],(function(e){var t,r,a,n,i,o,s,f;return{setters:[function(e){t=e.cclegacy,r=e.Vec3,a=e.Mat4},function(e){n=e.TextMeshSettings},function(e){i=e.ItalicSkewFactor},function(e){o=e.ETMQuadType},function(e){s=e.getCharInfoFromPool},function(e){f=e.ETextOverflow}],execute:function(){t._RF.push({},"6f4c1z/d4ROp5uRAm6CAY6N","TextMeshAssembler",void 0);var h=new r,d=new a;e("TextMeshAssembler",function(){function e(){}return e.createData=function(e){return e.requestRenderData()},e.fillBuffers=function(e,t){if(e.renderData&&e.font){var r=e.node;if(e.renderData.chunk){r.updateWorldTransform(),r.getWorldMatrix(d);var a=0;this._needCheckShdaow(e)&&(a=this._fillElementBuffers(e,t,!0)),this._fillElementBuffers(e,t,!1,a),e.transformDirty=!1}}},e._fillElementBuffers=function(e,t,a,n){void 0===a&&(a=!1),void 0===n&&(n=0);for(var i=e.renderData.chunk,o=i.vb,s=e.renderData.floatStride,f=i.bufferId,u=i.vertexOffset,l=i.vertexAccessor.getMeshBuffer(i.bufferId),c=i.vertexAccessor.getIndexBuffer(f),v=e.getRenderElementCount(),p=n,I=0;I<v;I++){var x=e.getRenderElement(I);if(!x||!x.visible)return;if(!a||(x=x.shadowChar)){for(var g=0;g<x.vertexData.length;g++){var y=x.vertexData[g];h.set(y.rx,y.ry,0),r.transformMat4(h,h,d),y.worldX=h.x,y.worldY=h.y,y.worldZ=h.z;var _=s*p;if(o[_]=y.worldX,o[_+1]=y.worldY,o[_+2]=y.worldZ,p%4==0){var D=p+u,w=l.indexOffset;c[w++]=D,c[w++]=D+1,c[w++]=D+2,c[w++]=D+2,c[w++]=D+1,c[w++]=D+3,l.indexOffset=w}p++}x.dirty=!1}}return l.setDirty(),p},e.updateUVs=function(e){if(e.renderData&&e.renderData.chunk){var t=0;this._needCheckShdaow(e)&&(t=this._updateUVs(e,!0)),this._updateUVs(e,!1,t)}},e._needCheckShdaow=function(e){return!!e.rich||e.style.shadow>1e-4},e._updateUVs=function(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=0),!e.renderData)return 0;for(var a=e.renderData.chunk.vb,n=e.getRenderElementCount(),i=e.renderData.floatStride,o=r,s=0;s<n;s++){var f=e.getRenderElement(s);if(!f||!f.visible)return;if(!t||(f=f.shadowChar))for(var h=0;h<f.vertexData.length;h++){var d=f.vertexData[h],u=i*o;a[u+3]=d.u,a[u+4]=d.v,a[u+5]=d.u1,a[u+6]=d.v1,o++}}return o},e.updateColor=function(e,t,r){e.renderData&&(e.renderData.chunk&&(this._needCheckShdaow(e)&&this._updateColor(e,t,r,!0),this._updateColor(e,t,r)))},e._updateColor=function(e,t,r,a){if(void 0===a&&(a=!1),t&&t.visible&&e.renderData)for(var n=e.renderData.chunk.vb,i=e.renderData.floatStride,o=t.style,s=Array.isArray(r),f=0;f<t.vertexData.length;f++){var h=i*(f+4*t.index),d=null;d=a?o.shadowRGBA:r?s?r[f]:r:o.getFillColor(f%4),n[h+7]=d.x,n[h+8]=d.y,n[h+9]=d.z,n[h+10]=d.w}},e.updateColors=function(e){if(e.renderData&&e.renderData.chunk){var t=0;this._needCheckShdaow(e)&&(t=this._updateColors(e,!0)),this._updateColors(e,!1,t)}},e._updateColors=function(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=0),!e.renderData)return 0;for(var a=e.renderData.chunk.vb,n=e.getRenderElementCount(),i=e.renderData.floatStride,s=r,f=0;f<n;f++){var h=e.getRenderElement(f);if(!h||!h.visible)return;if(!t||(h=h.shadowChar))for(var d=h.style,u=0;u<h.vertexData.length;u++){var l=i*s,c=null;c=h.vertexData[u].type==o.Shadow?d.shadowRGBA:d.getFillColor(u%4),a[l+7]=c.x,a[l+8]=c.y,a[l+9]=c.z,a[l+10]=c.w,s++}}return s},e.updateOthers=function(e){if(e.renderData&&e.renderData.chunk){var t=0;this._needCheckShdaow(e)&&(t=this._updateOthers(e,!0)),this._updateOthers(e,!1,t)}},e._updateOthers=function(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=0),!e.renderData)return 0;for(var a=e.renderData.chunk.vb,i=e.getRenderElementCount(),o=r,s=0;s<i;s++){var f=e.getRenderElement(s);if(!f)return;if(!t||(f=f.shadowChar))for(var h=f.char,d=e.renderData.floatStride,u=f.style,l=(f.vertexData[0],0);l<f.vertexData.length;l++){f.vertexData[l];var c=d*o;a[c+11]=(null==h?void 0:h.cid)||0,a[c+12]=u.dilate*n.dilateScale;var v=null;t?(a[c+12]-=u.shadowBlur,a[c+12]<0&&(a[c+12]=1e-4),v=u.shadowRGBA,a[c+13]=u.shadow,a[c+14]=u.shadowBlur):(v=u.strokeRGBA,a[c+13]=u.stroke,a[c+14]=u.strokeBlur),a[c+15]=v.x,a[c+16]=v.y,a[c+17]=v.z,a[c+18]=v.w,o++}}return o},e.updateVertexData=function(e){if(e.renderData&&e.font&&(e.node.updateWorldTransform(),e.typeSet)){var t=0,r=e.layoutResult;if(e.backgroundColor.a>0){t=e.backgroundInfos.length;for(var a=0;a<t;a++)this.refreshBackgroundInfo(e,a,r)}t=e.charInfos.length;for(var n=0;n<t;n++){var i=e.charInfos[n];i.visibleChar&&this.refreshCharInfo(e,n,i)}if(e.font.strikeThickness>0){t=e.strikeInfos.length;for(var o=0;o<t;o++)this.refreshStrikeInfo(e,o,r)}if(e.font.underLineThickness>0){t=e.underLineInfos.length;for(var s=0;s<t;s++)this.refreshUnderlineInfo(e,s,r)}if(e.maskColor.a>0){t=e.maskInfos.length;for(var f=0;f<t;f++)this.refreshMaskInfo(e,f,r)}}},e.appendShadowQuad=function(e,t,r,a,i,f,h,d){var u=h.style;if(u.shadow>1e-4){u.fontSize;var l=h.shadowChar;l||(l=h.shadowChar=s()).copyFrom(h),this.appendQuad(e,t,r,a+u.shadowOffsetX*n.shadowScale,i-u.shadowOffsetY*n.shadowScale,f,l,d||h.char.uvs,o.Shadow)}},e.refreshCharInfo=function(e,t,r){var a=r.realWidth,n=r.realHeight,s=r.x,f=r.baseY+r.y,h=r.style.italic?i:0;this.appendShadowQuad(e,a,n,s,f,h,r),this.appendQuad(e,a,n,s,f,h,r,r.char.uvs,o.Char)},e._clipX=function(e,t,r,a,n,i){var o=e.uiTransform;this._clipInfo.xy=t,this._clipInfo.len=n;var s=a-r;if(i)t<0?(this._clipInfo.uv=r-s*t/n,this._clipInfo.xy=0,this._clipInfo.len+=t):this._clipInfo.uv=r;else{var f=t+n,h=o.width;if(f>h){var d=f-h;this._clipInfo.uv=a-s*d/n,this._clipInfo.len-=d}else this._clipInfo.uv=a}return this._clipInfo},e._clipY=function(e,t,r,a,n,i){var o=e.uiTransform;this._clipInfo.xy=t,this._clipInfo.len=n;var s=a-r;if(i){var f=t+n;f>0?(this._clipInfo.uv=r+s*f/n,this._clipInfo.len-=f):this._clipInfo.uv=r}else{var h=o.height;if(t<-h){var d=h+t;this._clipInfo.uv=a+s*d/n,this._clipInfo.xy=-h,this._clipInfo.len+=d}else this._clipInfo.uv=a}return this._clipInfo},e.appendQuad=function(e,t,r,a,n,i,s,h,d){void 0===d&&(d=o.Char);var u=e.renderData;if(u){var l=h[0],c=h[1],v=h[2],p=h[3],I=h[4],x=h[5],g=h[6],y=h[7];if(s.slot)l=c=v=p=I=x=g=y=0;else if(e.overflow==f.Clamp){a+=e.localOffsetX,n+=e.localOffsetY;e.uiTransform;var _=this._clipX(e,a,h[0],h[2],t,!0);if(a=_.xy,t=_.len,l=I=_.uv,t<=0)return;if(t=(_=this._clipX(e,a,h[0],h[2],t,!1)).len,v=g=_.uv,t<=0)return;if(r=(_=this._clipY(e,n,h[1],h[5],r,!0)).len,c=p=_.uv,r<=0)return;if(r=(_=this._clipY(e,n,h[1],h[5],r,!1)).len,n=_.xy,x=y=_.uv,r<=0)return;a-=e.localOffsetX,n-=e.localOffsetY}a+=e.globalOffsetX,n+=e.globalOffsetY,u.dataLength+=4,u.resize(u.dataLength,u.dataLength/2*3);var D,w=-i,k=0;0,0;var C=0+i*(k+=r)+w+a,m=1*k+0+0+n,S=1*(D=0+t)+i*k+w+a,b=1*k+0*D+0+n,R=0+0*i+w+a,O=0+n,T=1*D+0*i+w+a,B=0+0*D+0+n,M=s.addVertex();M.rx=M.x=C,M.ry=M.y=m,M.u=l,M.v=c,M.u1=0,M.v1=0,M.type=d,(M=s.addVertex()).rx=M.x=S,M.ry=M.y=b,M.u=v,M.v=p,M.u1=1,M.v1=0,M.type=d,(M=s.addVertex()).rx=M.x=R,M.ry=M.y=O,M.u=I,M.v=x,M.u1=0,M.v1=1,M.type=d,(M=s.addVertex()).rx=M.x=T,M.ry=M.y=B,M.u=g,M.v=y,M.u1=1,M.v1=1,M.type=d}},e.refreshUnderlineInfo=function(e,t,r){var a=e.font,n=e.underLineInfos[t],i=e.charInfos[n.startIndex],s=n.length,f=Math.max(4,i.style.fontSize*a.underLineThickness),h=i.x,d=i.baseY+i.y-e.font.underLineOffset+.5*f,l=n.charInfo.char.uvs,c=l[2]-l[0];u[1]=l[1],u[3]=l[3],u[5]=l[5],u[7]=l[7],u[0]=u[4]=l[0]+.4*c,u[2]=u[6]=l[0]+.6*c,this.appendShadowQuad(e,s,f,h,d,0,n.charInfo,u),this.appendQuad(e,s,f,h,d,0,n.charInfo,u,o.UnderLine)},e.refreshStrikeInfo=function(e,t,r){var a=e.font,n=e.strikeInfos[t],i=e.charInfos[n.startIndex],s=n.length,f=Math.max(4,i.style.fontSize*a.strikeThickness),h=i.x+i.offsetX,d=i.baseY+i.y+.5*n.height-e.font.strikeOffset,l=n.charInfo.char.uvs,c=l[2]-l[0];u[1]=l[1],u[3]=l[3],u[5]=l[5],u[7]=l[7],u[0]=u[4]=l[0]+.4*c,u[2]=u[6]=l[0]+.6*c,this.appendShadowQuad(e,s,f,h,d,0,n.charInfo,u),this.appendQuad(e,s,f,h,d,0,n.charInfo,u,o.DeleteLine)},e.getRectUVs=function(e){var t=e[2]-e[0],r=e[5]-e[1],a=e[0]+.3*t,n=e[1]+.3*r;return u[0]=u[4]=a,u[2]=u[6]=a+.1*t,u[1]=u[5]=n,u[3]=u[7]=n+.1*r,u},e.refreshBackgroundInfo=function(e,t,r){var a=e.backgroundInfos[t],n=e.charInfos[a.startIndex],i=a.length,s=a.height,f=n.x+n.offsetX,h=n.startY-a.height,d=a.charInfo.char.uvs;d=this.getRectUVs(d),this.appendShadowQuad(e,i,s,f,h,0,a.charInfo,d),this.appendQuad(e,i,s,f,h,0,a.charInfo,d,o.Background)},e.refreshMaskInfo=function(e,t,r){var a=e.maskInfos[t],n=e.charInfos[a.startIndex],i=a.length,s=a.height,f=n.x+n.offsetX,h=n.startY-a.height,d=a.charInfo.char.uvs;d=this.getRectUVs(d),this.appendShadowQuad(e,i,s,f,h,0,a.charInfo,d),this.appendQuad(e,i,s,f,h,0,a.charInfo,d,o.Mask)},e.updateRenderData=function(e,t){if(e.renderData&&e.font&&e.renderData.vertDirty){if(0==e.dirtyFlag)return;this.updateVertexData(e),this.updateUVs(e),this.updateColors(e),this.updateOthers(e),e.updateMaterial(),e.renderData.vertDirty=!1,e.markForUpdateRenderData(!1)}},e}())._clipInfo={xy:0,uv:0,len:0};var u=new Float32Array(8);t._RF.pop()}}}));

System.register("chunks:///_virtual/TextMeshLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FontUtils.ts","./TMRenderData.ts","./VertexFormat.ts","./TypeSetFactory.ts","./dfs.ts","./UBBParser.ts","./TextMeshAssembler.ts","./TextStyle2.ts","./types.ts","./CharInfo.ts","./StyleMapper.ts","./LayoutTypes.ts","./ResManger.ts","./events.ts","./StyleManager.ts","./SlotConnector.ts","./settings.ts","./FontManager.ts"],(function(t){var e,r,i,o,n,s,a,l,h,u,p,c,d,y,f,_,g,b,w,k,m,v,C,O,S,D,T,L,z,I,F,P,x,R,B,E,A,M,j,H,N,U,W,G,Y,V,X,q,Z,K,Q,J,$,tt,et;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose,s=t.createClass,a=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){h=t.cclegacy,u=t._decorator,p=t.v2,c=t.Quat,d=t.Node,y=t.Color,f=t.Texture2D,_=t.UITransform,g=t.game,b=t.RenderData,w=t.Vec3,k=t.assetManager,m=t.math,v=t.UIRenderer,C=t.Prefab,O=t.SpriteFrame,S=t.isValid,D=t.instantiate,T=t.Sprite},function(t){L=t.getStringArray},function(t){z=t.putTMQuadRenderDataToPool},function(t){I=t.vfmtTMVertex},function(t){F=t.TypeSetFactory},function(t){P=t.default},function(t){x=t.UBBParser},function(t){R=t.TextMeshAssembler},function(t){B=t.TextStyle},function(t){E=t.Margin,A=t.ETextHorizontalAlign,M=t.ETextVerticalAlign,j=t.ETextOverflow,H=t.ETextDirection},function(t){N=t.putCharInfoToPool,U=t.getCharInfoFromPool},function(t){W=t.StyleMapper},function(t){G=t.Slot,Y=t.isSlotType,V=t.SlotTypeMap,X=t.Clickable,q=t.ESlotType,Z=t.ESlotSizeType},function(t){K=t.ResManager},function(t){Q=t.click_char_event},function(t){J=t.StyleManager},function(t){$=t.SlotConnector},function(t){tt=t.TextMeshSettings},function(t){et=t.FM}],execute:function(){var rt,it,ot,nt,st,at,lt,ht,ut,pt,ct,dt,yt,ft,_t,gt,bt,wt,kt,mt,vt,Ct,Ot,St,Dt,Tt,Lt,zt,It,Ft,Pt,xt,Rt,Bt,Et,At,Mt,jt,Ht,Nt,Ut,Wt,Gt,Yt,Vt,Xt,qt,Zt,Kt,Qt,Jt,$t,te,ee,re,ie,oe,ne,se,ae,le,he,ue,pe,ce,de,ye,fe,_e,ge,be,we,ke,me,ve,Ce,Oe,Se,De,Te,Le,ze,Ie,Fe,Pe,xe,Re,Be,Ee,Ae,Me,je,He,Ne,Ue,We,Ge,Ye,Ve,Xe,qe,Ze,Ke,Qe,Je,$e,tr,er,rr,ir,or,nr,sr,ar,lr,hr,ur,pr,cr,dr,yr,fr,_r,gr,br,wr,kr,mr,vr,Cr,Or,Sr,Dr,Tr,Lr,zr,Ir,Fr,Pr,xr,Rr,Br,Er,Ar,Mr,jr,Hr,Nr,Ur,Wr,Gr,Yr,Vr,Xr,qr,Zr,Kr,Qr,Jr,$r,ti,ei,ri,ii;h._RF.push({},"412cf1tW7RBk6wllzPLYEYs","TextMeshLabel",void 0);var oi=u.ccclass,ni=u.property,si=u.executeInEditMode,ai=u.executionOrder,li=p(),hi=t("EDirtyFlag",function(t){return t[t.None=0]="None",t[t.Text=2]="Text",t[t.Style=4]="Style",t[t.Layout=8]="Layout",t[t.Property=16]="Property",t[t.Slot=32]="Slot",t[t.All=62]="All",t}({})),ui=new c;t("TextMeshLabel",(rt=oi("TextMeshLabel"),it=ai(1),ot=ni({serializable:!0}),nt=ni({visible:!1,serializable:!0}),st=ni({visible:!1,serializable:!0}),at=ni({visible:!1,serializable:!0}),lt=ni({visible:!1,serializable:!0}),ht=ni({visible:!1,serializable:!0}),ut=ni({visible:!1,serializable:!0}),pt=ni({visible:!1,serializable:!0}),ct=ni({visible:!1,serializable:!0}),dt=ni({visible:!1,serializable:!0}),yt=ni({visible:!1,serializable:!0}),ft=ni({visible:!1,serializable:!0}),_t=ni({visible:!1,serializable:!0}),gt=ni({visible:!1,serializable:!0}),bt=ni({visible:!1,serializable:!0}),wt=ni({visible:!1,serializable:!0}),kt=ni({visible:!1,serializable:!0}),mt=ni({visible:!1,serializable:!0}),vt=ni({visible:!1,serializable:!0}),Ct=ni({visible:!1,serializable:!0}),Ot=ni({visible:!1,serializable:!0}),St=ni({visible:!1,serializable:!0}),Dt=ni({visible:!1,serializable:!0}),Tt=ni({visible:!1,serializable:!0}),Lt=ni({visible:!1,serializable:!0}),zt=ni({visible:!1,serializable:!0}),It=ni({visible:!1,serializable:!0}),Ft=ni({visible:!1,serializable:!0}),Pt=ni({visible:!1,serializable:!0}),xt=ni({visible:!1,serializable:!0}),Rt=ni({visible:!1,serializable:!0}),Bt=ni({visible:!1,serializable:!0}),Et=ni({visible:!1,serializable:!0}),At=ni({visible:!1,serializable:!0}),Mt=ni({visible:!1,serializable:!0}),jt=ni({visible:!1,serializable:!0}),Ht=ni({type:E,visible:!1,serializable:!0}),Nt=ni({visible:!1,serializable:!0}),Ut=ni({visible:!1,serializable:!0}),Wt=ni({visible:!1,serializable:!0}),Gt=ni({visible:!1,serializable:!0}),Yt=ni({visible:!1,serializable:!0}),Vt=ni({visible:!1,serializable:!0}),Xt=ni({visible:!1,serializable:!0}),qt=ni({visible:!1,serializable:!0}),Zt=ni({visible:!1,serializable:!0}),Kt=ni({visible:!1,serializable:!0}),Qt=ni({visible:!1,serializable:!0}),Jt=ni({visible:!1,serializable:!0}),$t=ni({visible:!1,serializable:!0}),te=ni({visible:!1,serializable:!0}),ee=ni({visible:!1,serializable:!0}),re=ni({displayOrder:1,tooltip:"",group:"Normal"}),ie=ni({visible:!1,serializable:!0}),oe=ni({displayOrder:1,tooltip:"",group:"Normal"}),ne=ni({type:d,tooltip:"i18n:text-mesh.label.slotsContainer"}),se=ni({displayOrder:1,tooltip:"",multiline:!0,group:"Normal"}),ae=ni({displayOrder:2,group:"Normal"}),le=ni({displayOrder:2,group:"Normal"}),he=ni({visible:function(){return!this._useFontPreset},displayOrder:2,min:0,max:1,step:.01,slide:!0,group:"Normal"}),ue=ni({type:y,displayOrder:3,override:!0,group:"Normal"}),pe=ni({displayOrder:4,group:"Style"}),ce=ni({visible:function(){return this._enableColorRT},type:y,displayOrder:5,group:"Style"}),de=ni({displayOrder:6,group:"Style"}),ye=ni({visible:function(){return this._enableColorRB},type:y,displayOrder:7,group:"Style"}),fe=ni({displayOrder:8,group:"Style"}),_e=ni({visible:function(){return this._enableColorLT},type:y,displayOrder:9,group:"Style"}),ge=ni({displayOrder:10,group:"Style"}),be=ni({visible:function(){return this._enableColorLB},type:y,displayOrder:11,group:"Style"}),we=ni({displayOrder:12,group:"Normal"}),ke=ni({displayOrder:13,group:"Normal"}),me=ni({displayOrder:14,group:"Normal"}),ve=ni({displayOrder:15,group:"Style"}),Ce=ni({visible:function(){return this._enableBackground},displayOrder:16,group:"Style"}),Oe=ni({displayOrder:17,group:"Style"}),Se=ni({visible:function(){return this._enableMask},displayOrder:18,group:"Style"}),De=ni({displayOrder:19,group:"Layout"}),Te=ni({displayOrder:20,group:"Layout"}),Le=ni({displayOrder:21,group:"Layout"}),ze=ni({visible:function(){return this._fixedLineHeight},displayOrder:22,group:"Layout"}),Ie=ni({type:A,displayOrder:24,group:"Layout"}),Fe=ni({type:M,displayOrder:25,group:"Layout"}),Pe=ni({type:j,displayOrder:26,group:"Layout"}),xe=ni({displayOrder:27,group:"Layout"}),Re=ni({displayOrder:28,group:"Layout"}),Be=ni({displayOrder:29,group:"Layout"}),Ee=ni({displayOrder:30,min:0,max:1,step:.001,slide:!0,group:"Stroke"}),Ae=ni({visible:function(){return this._stroke>0},displayOrder:31,min:0,max:1,step:.001,slide:!0,group:"Stroke"}),Me=ni({visible:function(){return this._stroke>0},type:y,displayOrder:32,group:"Stroke"}),je=ni({displayOrder:33,min:0,max:1,step:.001,slide:!0,group:"Shadow"}),He=ni({visible:function(){return this._shadow>0},displayOrder:34,min:0,max:1,step:.001,slide:!0,group:"Shadow"}),Ne=ni({visible:function(){return this._shadow>0},displayOrder:35,min:-100,max:100,step:.1,slide:!0,group:"Shadow"}),Ue=ni({visible:function(){return this._shadow>0},displayOrder:36,min:-100,max:100,step:.1,slide:!0,group:"Shadow"}),We=ni({visible:function(){return this._shadow>0},type:y,displayOrder:37,group:"Shadow"}),Ge=ni({displayOrder:38,min:0,max:3,step:.01,slide:!0,group:"Layout"}),Ye=ni({displayOrder:39,min:0,max:1,step:.01,slide:!0,group:"Layout"}),Ve=ni({type:f,displayOrder:40,group:"Style"}),Xe=ni({displayOrder:41,group:"Style"}),qe=ni({visible:function(){return this._enableGlow},displayOrder:42,group:"Style"}),Ze=ni({visible:function(){return this._enableGlow},displayOrder:43,min:0,max:1,step:.01,slide:!0,group:"Style"}),Ke=ni({visible:function(){return this._enableGlow},displayOrder:44,min:0,max:1,step:.01,slide:!0,group:"Style"}),Qe=ni({visible:function(){return this._enableGlow},displayOrder:45,min:0,max:10,step:.01,slide:!0,group:"Style"}),Je=ni({visible:!0,group:"Layout"}),$e=ni({visible:!0,group:"Normal"}),tr=ni({visible:!0}),rt(er=si(er=it(((ii=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this)._slotCreateHandlers={},e._slotSpriteFrameCreateHandler=null,e._slotPrefabCreateHandler=null,i(e,"_saveTag",ir,o(e)),i(e,"_fontName",or,o(e)),i(e,"_string",nr,o(e)),i(e,"_rich",sr,o(e)),i(e,"_direction",ar,o(e)),i(e,"_horizontalAlign",lr,o(e)),i(e,"_verticalAlign",hr,o(e)),i(e,"_overflow",ur,o(e)),i(e,"_multiline",pr,o(e)),i(e,"_enableItalic",cr,o(e)),i(e,"_enableUnderline",dr,o(e)),i(e,"_enableStrike",yr,o(e)),i(e,"_enableBackground",fr,o(e)),i(e,"_enableMask",_r,o(e)),i(e,"_lineSpace",gr,o(e)),i(e,"_letterSpace",br,o(e)),i(e,"_enableColorRT",wr,o(e)),i(e,"_colorRT",kr,o(e)),i(e,"_enableColorRB",mr,o(e)),i(e,"_colorRB",vr,o(e)),i(e,"_enableColorLT",Cr,o(e)),i(e,"_colorLT",Or,o(e)),i(e,"_enableColorLB",Sr,o(e)),i(e,"_colorLB",Dr,o(e)),i(e,"_backgroundColor",Tr,o(e)),i(e,"_maskColor",Lr,o(e)),i(e,"_strokeColor",zr,o(e)),i(e,"_shadow",Ir,o(e)),i(e,"_shadowOffsetX",Fr,o(e)),i(e,"_shadowOffsetY",Pr,o(e)),i(e,"_shadowBlur",xr,o(e)),i(e,"_shadowColor",Rr,o(e)),i(e,"_handleTouchEvent",Br,o(e)),i(e,"_autoWarp",Er,o(e)),i(e,"_lineHeight",Ar,o(e)),i(e,"_fixedLineHeight",Mr,o(e)),i(e,"_padding",jr,o(e)),i(e,"_dilate",Hr,o(e)),i(e,"_stroke",Nr,o(e)),i(e,"_strokeBlur",Ur,o(e)),i(e,"_aspect",Wr,o(e)),i(e,"_charVisibleRatio",Gr,o(e)),i(e,"_equalWidth",Yr,o(e)),i(e,"_overlayTexture",Vr,o(e)),i(e,"_enableGlow",Xr,o(e)),i(e,"_glowColor",qr,o(e)),i(e,"_glowInner",Zr,o(e)),i(e,"_glowOuter",Kr,o(e)),i(e,"_glowPower",Qr,o(e)),i(e,"_breakWestern",Jr,o(e)),i(e,"_enableBold",$r,o(e)),i(e,"_useFontPreset",ti,o(e)),e._style=new B,e._clicks=[],e._slots=[],e.globalOffsetX=0,e.globalOffsetY=0,e.localOffsetX=0,e.localOffsetY=0,e.slotOffsetX=0,e.slotOffsetY=0,e._layoutResult=void 0,e._dirtyFlag=hi.None,e._uiTransform=void 0,e._ready=!1,e._slotCount=0,e._needUpdateAfterSlotLoaded=!1,e._transformDirty=!0,e._font=void 0,i(e,"_fontSize",ei,o(e)),e._underLineInfos=[],e._strikeInfos=[],e._backgroundInfos=[],e._maskInfos=[],e._charInfos=[],e._tempCharInfos=[],e._typeSet=void 0,i(e,"slotsContainer",ri,o(e)),e}r(e,t);var h=e.prototype;return h.incrSaveTag=function(){this._saveTag++,this._saveTag=this._saveTag%1e5},h._loadFont=function(){var t=this;if(this._fontName){var e=et.getFont(this._fontName);e?this._onTMFLoaded(e):et.getFontAsync(this._fontName).then((function(e){t._onTMFLoaded(e)}))}else this._onTMFLoaded(null)},h.onLoad=function(){var t=this;this._uiTransform=this.node.getComponent(_),this.node.on(d.EventType.LAYER_CHANGED,this._applyLayer,this),this.node.on(d.EventType.ANCHOR_CHANGED,this._onAnchorChanged,this),this.node.on(d.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.on(d.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this),g.on(J.TMF_STYLE_CHANGED,this._onTMFStyleChanged,this),this._style.preset(),this._typeSet=F.get("horizontal"),this._padding.onChanged=function(){t.addDirtyFlag(hi.Layout)}.bind(this),this.clearEditorSlots(),this._loadFont()},h.onFocusInEditor=function(){this._loadFont()},h.clearEditorSlots=function(){var t=this,e=[].concat(this.node.children);e.forEach((function(t){t.name.startsWith("slot_(")&&(t.removeFromParent(),t.destroy())})),this.slotsContainer&&(e=[].concat(this.slotsContainer.children)).forEach((function(e){if(e.name.startsWith("slot_(")){var r=e.getComponent($);r&&r.labelNode!=t.node||(e.removeFromParent(),e.destroy())}}))},h._onTMFLoaded=function(t){this._font=t,this._style.font=t,t&&(this.customMaterial=t.material),this.addDirtyFlag(hi.All)},h._updateStyle=function(t){var e=this._font;t.setFontSize(this._fontSize),t.setFillColor(this._color),t.setStroke(this._stroke*this.font.strokeScale),t.setStrokeBlur(this._strokeBlur),t.setStrokeColor(this._strokeColor),this._useFontPreset?(t.setDilate(this._enableBold?e.normalWeight*this._font.boldWeightScale:e.normalWeight),t.setShadowBlur(e.shadowBlur)):(t.setDilate(this._enableBold?this._dilate*this._font.boldWeightScale:this._dilate),t.setShadowBlur(this._shadowBlur)),t.setShadow(this._shadow),t.setShadowColor(this._shadowColor),t.setShadowOffsetX(this._shadowOffsetX),t.setShadowOffsetY(this._shadowOffsetY),t.setUnderline(this._enableUnderline),t.setBackground(this._enableBackground),t.setBackgroundColor(this._backgroundColor),t.setMask(this._enableMask),t.setMaskColor(this._maskColor),t.setItalic(this._enableItalic),t.setStrike(this._enableStrike),this._enableColorLB?t.setColorLB(this._colorLB):t.enableColorLB=!1,this._enableColorLT?t.setColorLT(this._colorLT):t.enableColorLT=!1,this._enableColorRT?t.setColorRT(this._colorRT):t.enableColorRT=!1,this._enableColorRB?t.setColorRB(this._colorRB):t.enableColorRB=!1,t.calculate()},h._updateAllStyles=function(t){var e=this._style;this._updateStyle(e);for(var r=0;r<this._backgroundInfos.length;r++){var i=this._backgroundInfos[r].charInfo.style;i!=e&&(i.setBackground(this._enableBackground),i.setBackgroundColor(this._backgroundColor),i.setColorLB(this._backgroundColor),i.setColorLT(this._backgroundColor),i.setColorRT(this._backgroundColor),i.setColorRB(this._backgroundColor))}for(var o=0;o<this._charInfos.length;o++){var n=this._charInfos[o];e!=n.style&&(this._updateStyle(n.style),e=n.style)}for(var s=0;s<this._maskInfos.length;s++){var a=this._maskInfos[s].charInfo.style;a.style!=e&&(a.setMask(this._enableMask),a.setMaskColor(this._maskColor),a.setColorLB(this._maskColor),a.setColorLT(this._maskColor),a.setColorRT(this._maskColor),a.setColorRB(this._maskColor))}var l=this._assembler;l.updateColors(this),l.updateOthers(this)},h.onEnable=function(){t.prototype.onEnable.call(this),this.handleTouchEvent&&this._addEventListeners(),this._checkAndRefreshAfterEnable()},h._checkAndRefreshAfterEnable=function(){this._font&&this._string&&this.renderData&&(this.renderData.vertDirty&&this.dirtyFlag===hi.None&&this.addDirtyFlag(hi.Layout))},h.onDisable=function(){t.prototype.onDisable.call(this),this.handleTouchEvent&&this._removeEventListeners()},h.onDestroy=function(){t.prototype.onDestroy.call(this),this.node.off(d.EventType.LAYER_CHANGED,this._applyLayer,this),this.node.off(d.EventType.ANCHOR_CHANGED,this._onAnchorChanged,this),this.node.off(d.EventType.SIZE_CHANGED,this._onSizeChanged,this),g.off(J.TMF_STYLE_CHANGED,this._onTMFStyleChanged,this),this._clearSlots()},h._addEventListeners=function(){this.node.on("touch-end",this._onTouchEnded,this)},h._removeEventListeners=function(){this.node.off("touch-end",this._onTouchEnded,this)},h._onEditorTMFChanged=function(t,e){if(this._font&&this._font.uid==t){this.incrSaveTag();var r=JSON.parse(e),i=this._font;i._underLineOffset=r.underLineOffset||0,i._keepUnlderLineSpace=r.keepUnlderLineSpace||!1,i._underLineThickness=r.underLineThickness||0,i._strikeOffset=r.strikeOffset||0,i._strikeThickness=r.strikeThickness||0,i._scriptThickness=r.scriptThickness||0,this.addDirtyFlag(hi.All)}},h._onTouchEnded=function(t){var r=t.getLocation(li),i=this._typeSet.hitTest(this,r);null!=i&&i.result&&(Q.accurate=i.accurate,Q.charInfo=i.charInfo,this.node.emit(e.CHAR_CLICK_EVENT,Q,t))},h._setLayer=function(t,e){if(t){t.layer=e;for(var r=0;r<t.children.length;r++)this._setLayer(t.children[r],e)}},h._applyLayer=function(){for(var t,e=n(this._slots);!(t=e()).done;){var r=t.value;this._setLayer(r.node,this.node.layer)}},h._onAnchorChanged=function(){this.addDirtyFlag(hi.Layout)},h._onSizeChanged=function(){this.addDirtyFlag(hi.Layout)},h._onTransformChanged=function(){this._transformDirty=!0},h._onTMFStyleChanged=function(){this.addDirtyFlag(hi.Layout)},h._render=function(t){var e;t.commitComp(this,this.renderData,null==(e=this._font)?void 0:e.fontData.texture,this._assembler,null)},h.requestRenderData=function(t){void 0===t&&(t=0);var e=b.add(I);return e.requestRenderData&&e.initRenderDrawInfo(this,t),this._renderData=e,e},h.getRenderElementCount=function(){return this._backgroundInfos.length+this._underLineInfos.length+this._charInfos.length+this._strikeInfos.length+this._maskInfos.length},h.getRenderElement=function(t){return t<this._backgroundInfos.length?this._backgroundInfos[t].charInfo:(t-=this._backgroundInfos.length)<this._underLineInfos.length?this._underLineInfos[t].charInfo:(t-=this._underLineInfos.length)<this._charInfos.length?this._charInfos[t]:(t-=this._charInfos.length)<this._strikeInfos.length?this._strikeInfos[t].charInfo:(t-=this._strikeInfos.length)<this._maskInfos.length?this._maskInfos[t].charInfo:void 0},h._flushAssembler=function(){var t=R;this._assembler!==t&&(this.destroyRenderData(),this._assembler=t),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.sharedMaterial)},h.getRenderMaterial=function(t){return this.renderData?this.renderData.material||this._materialInstances[t]||this._materials[t]:null},h.markForUpdateRenderData=function(e){void 0===e&&(e=!0),t.prototype.markForUpdateRenderData.call(this,e)},h.updateRenderData=function(t){void 0===t&&(t=!1),!t&&this._renderData||(this._flushAssembler(),this._applyFontTexture(),this.renderData&&(this.renderData.vertDirty=!0)),this._assembler&&this._assembler.updateRenderData(this)},h.setSlotCreateHandler=function(t,e){this._slotCreateHandlers[t]=e},h.setSlotSpriteFrameCreateHandler=function(t){this._slotSpriteFrameCreateHandler=t},h.setSlotPrefabCreateHandler=function(t){this._slotPrefabCreateHandler=t},h.makeDirty=function(t){this.dirtyFlag|=t},h._updateOverlayTexture=function(t){if(!t)return!1;var e=null!=this._overlayTexture,r=t.passes[0];return(null!=r.defines.USE_OVERLAY_TEXTURE&&r.defines.USE_OVERLAY_TEXTURE!=e||null==r.defines.USE_OVERLAY_TEXTURE&&e)&&(t.recompileShaders({USE_OVERLAY_TEXTURE:e}),e&&t.setProperty("overlayTexture",this._overlayTexture)),e},h._updateGlow=function(t){if(!t)return!1;var e=t.passes[0];return(null!=e.defines.USE_GLOW&&e.defines.USE_GLOW!=this._enableGlow||null==e.defines.USE_GLOW&&this._enableGlow)&&(t.recompileShaders({USE_GLOW:this._enableGlow}),this._enableGlow&&(t.setProperty("glowColor",this._glowColor),t.setProperty("glowInner",this._glowInner),t.setProperty("glowOuter",this._glowOuter),t.setProperty("glowPower",this._glowPower))),this._enableGlow},h._updateMaterialProperties=function(t){var e=!1;return e=this._updateOverlayTexture(t)||e,e=this._updateGlow(t)||e},h.updateMaterial=function(){if(t.prototype.updateMaterial.call(this),this._customMaterial){var e=this.getMaterialInstance(0);this._updateMaterialProperties(e)?(this._renderData&&(this._renderData.material=e,this.setMaterialInstance(e,0)),this.markForUpdateRenderData()):this._renderData&&(this._renderData.material=this.sharedMaterial)}},h._applyFontTexture=function(){},h._updateLayout=function(){var t=this.typeSet.layout(this);this._layoutResult=t},h.forceUpdate=function(){this.lateUpdate(0)},h._updateText=function(){null!=this._font?(this._clearSlots(),this._preFreeCharInfos(),this._rich?this._parseRich(this._string):this._parse(this._string),this._freeCharInfos()):console.warn("font is null")},h.clearLayoutInfo=function(){for(var t=0;t<this._charInfos.length;t++){this._charInfos[t].reset()}this._clearAdditions()},h._clearAdditions=function(){for(var t=0;t<this._underLineInfos.length;t++)z(this._underLineInfos[t]);this._underLineInfos.length=0;for(var e=0;e<this._strikeInfos.length;e++)z(this._strikeInfos[e]);this._strikeInfos.length=0;for(var r=0;r<this._backgroundInfos.length;r++)z(this._backgroundInfos[r]);this._backgroundInfos.length=0;for(var i=0;i<this._maskInfos.length;i++)z(this._maskInfos[i]);this._maskInfos.length=0},h._resetAdditions=function(){for(var t=0;t<this._underLineInfos.length;t++)this._underLineInfos[t].reset();for(var e=0;e<this._strikeInfos.length;e++)this._strikeInfos[e].reset();for(var r=0;r<this._backgroundInfos.length;r++)this._backgroundInfos[r].reset();for(var i=0;i<this._maskInfos.length;i++)this._maskInfos[i].reset()},h._preFreeCharInfos=function(){this._tempCharInfos=this._charInfos.concat(),this._charInfos.length=0,this._clearAdditions()},h._freeCharInfos=function(){for(var t=0;t<this._tempCharInfos.length;t++)N(this._tempCharInfos[t]);this._tempCharInfos.length=0},h._clearSlots=function(){this._slotCount=0,this._needUpdateAfterSlotLoaded=!1;for(var t=0;t<this._slots.length;t++){var e=this._slots[t];e.node&&e.node.destroy()}this._slots.length=0},h._parse=function(t){if(null!=this._font){this._updateStyle(this._style);for(var e=t.length,r=0;r<e;r++){var i=U();i.index=this._charInfos.length,i.click=null,i.slot=null,i.cjk=null,i.style=this.style,i.char=this.font.getCharInfo(t[r]),i.font=this.font,this._charInfos.push(i)}}},h._parseSlot=function(t,e,r,i){var o=new G;o.index=t;for(var n=Object.keys(o),s=0;s<n.length;s++){var a=n[s];void 0!==e.attributes[a]&&(o[a]=e.attributes[a])}return o.type=r,this._createSlot(o,i),o},h._createSlot=function(){var t=a(l().mark((function t(e,r){var i,o,n,s,a,h,u,p,c,y,f,g,b,w,k,m,v,L,z,I;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=new d).layer=this.node.layer,i.name="slot_("+this.node.name+"_"+e.type+"_"+e.name+")",e.node=i,this.slotsContainer?(this.slotsContainer.addChild(i),i.addComponent($).labelNode=this.node,this.slotOffsetX=this.node.worldPosition.x-i.worldPosition.x,this.slotOffsetY=this.node.worldPosition.y-i.worldPosition.y):(this.node.addChild(i),this.slotOffsetX=0,this.slotOffsetY=0),i.addComponent(_).anchorPoint.set(0,0),o=null!=e.width,n=null!=e.height,s=null!=e.width&&null!=e.height,e.width=o?e.width:r,e.height=n?e.height:r,e.sizeType==Z.None&&s&&(e.sizeType=Z.FontSize),t.next=19;break;case 19:if(!e.src){t.next=71;break}if(e.type!=q.Image){t.next=45;break}if(!this._slotCreateHandlers[q.Image]){t.next=25;break}this._slotCreateHandlers[q.Image](this,i,e),t.next=43;break;case 25:if(a=null,!this._slotSpriteFrameCreateHandler){t.next=35;break}if(!((a=this._slotSpriteFrameCreateHandler(e.src))instanceof Promise)){t.next=33;break}return t.next=32,a;case 32:a=t.sent;case 33:t.next=42;break;case 35:return h=e.src.substring(5),u=h.indexOf("/"),p=h.substring(0,u),c=h.substring(u+1),t.next=41,K.getAsync(p,c+"/spriteFrame",O);case 41:a=t.sent;case 42:a&&S(i)&&((y=new d).name="sprite",y.layer=i.layer,i.addChild(y),(f=y.addComponent(_)).setAnchorPoint(0,0),(g=y.addComponent(T)).sizeMode=T.SizeMode.CUSTOM,g.type=T.Type.SIMPLE,g.spriteFrame=a,e.sizeType==Z.WidthFirst?(b=e.width/f.width,y.setScale(b,b)):e.sizeType==Z.HeightFirst?(b=e.height/f.height,y.setScale(b,b)):e.sizeType==Z.FontSize?(f.width=e.width,f.height=e.height):(e.width=f.width,e.height=f.height,e.fixed=!0,this._charInfos[e.index].cjk=null,this._needUpdateAfterSlotLoaded=!0));case 43:t.next=71;break;case 45:if(e.type!=q.Prefab){t.next=70;break}if(!this._slotCreateHandlers[q.Prefab]){t.next=50;break}this._slotCreateHandlers[q.Prefab](this,i,e),t.next=68;break;case 50:if(w=null,!this._slotPrefabCreateHandler){t.next=60;break}if(!((w=this._slotPrefabCreateHandler(e.src))instanceof Promise)){t.next=58;break}return t.next=57,w;case 57:w=t.sent;case 58:t.next=67;break;case 60:return k=e.src.substring(5),m=k.indexOf("/"),v=k.substring(0,m),L=k.substring(m+1),t.next=66,K.getAsync(v,L,C);case 66:w=t.sent;case 67:w&&S(i)&&(z=D(w),i.addChild(z),null==(I=z.getComponent(_))&&(I=z.addComponent(_)),I.setAnchorPoint(0,0),e.sizeType==Z.WidthFirst?(b=e.width/I.width,z.setScale(b,b)):e.sizeType==Z.HeightFirst?(b=e.height/I.height,z.setScale(b,b)):e.sizeType==Z.FontSize?(I.width=e.width,I.height=e.height):(I.width=e.width,I.height=e.height,e.fixed=!0,this._charInfos[e.index].cjk=null,this._needUpdateAfterSlotLoaded=!0),I&&(I.width=I.width,I.height=I.height));case 68:t.next=71;break;case 70:this._slotCreateHandlers[q.Custom]&&this._slotCreateHandlers[q.Custom](this,i,e);case 71:this._slotCount++,this.isValid&&this._slotCount==this._slots.length&&this._needUpdateAfterSlotLoaded&&(this.dirtyFlag|=hi.Slot);case 73:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),h._parseClick=function(t){var e=new X;return t.attributes&&(e.name=t.attributes.name,e.value=t.attributes.value),e},h._parseRich=function(t){this._updateStyle(this._style),this._clicks.length=0;for(var e,r=x.inst.parse(t),i=0,o=this._style,s=this._style,a=[o],l=[],h=[],u=W.tagMap||{},p=n(P(r));!(e=p()).done;){var c=e.value,d=c[0],y=c[1];if(y<i){for(var f=i-y;f>=0;f--)s=o=a.pop()||this._style;var _=l.pop();"click"==(null==_?void 0:_.name)&&h.pop()}else y==i&&(o=s,l.push(d));var g=d;if("text"!=g.type){if(y>i&&a.push(o),s=o,o=o.clone(),Y(d.name)){var b=this._parseSlot(this._charInfos.length,d,V[d.name],o.fontSize);this._slots.push(b),this._addCharInfo("",o,h.length>0,this._slots[this._slots.length-1])}else if("click"==d.name){var w=this._parseClick(d);this._clicks.push(w),h.push(w)}else{var k=W[d.name];if(k){if(k.field&&(null!=d.value?o[k.field]=d.value:o[k.field]=k.value),d.attributes&&k.attributes)for(var m=Object.keys(d.attributes),v=0;v<m.length;v++){var C=m[v],O=k.attributes[C];if(O)if(O.field)o[O.field]=d.attributes[C];else if(O.mapper){var S=W[O.mapper];S?S.field&&(o[S.field]=d.attributes[C]):console.error("can not find mapper",O.mapper)}}}else if("style"==g.name){for(var D=g.value.split(/[ ;,]/gi),T=0;T<D.length;T++)if(D[T]){var z=J.getStyle(D[T]);z?o.copyFrom(z):console.error("can not find style named ",D[T])}}else if(u[g.name])this._addCharInfo(u[g.name],o,h.length>0);else if(J.getTagStyle(g.name)){var I=J.getTagStyle(g.name);o.copyFrom(I)}else{var F="_$"+d.name;Object.keys(o).indexOf(F)>=0&&("boolean"==typeof o[F]?o[F]=!0:o[F]=void 0===d.value||d.value)}}o!=this._style&&o.preset()}if(g.text)for(var R=g.text,B=L(R),E=B.length,A=0;A<E;A++)this._addCharInfo(B[A],o,h.length>0);i=y}},h._addCharInfo=function(t,e,r,i){var o=U();o.index=this._charInfos.length,o.style=e,o.char=this.font.getCharInfo(t),o.font=this.font,o.click=r?this._clicks[this._clicks.length-1]:null,o.slot=i,this._charInfos.push(o)},h.resetRenderData=function(){this.destroyRenderData()},h.lateUpdate=function(t){this.enabledInHierarchy&&this._font&&this.dirtyFlag!=hi.None&&(this._ready=!1,this.dirtyFlag==hi.Style?this._updateAllStyles():this.dirtyFlag==hi.Property?this.updateMaterial():this.dirtyFlag==hi.Slot?(this.clearLayoutInfo(),this._updateLayout(),this.resetRenderData(),this.updateRenderData(),this.markForUpdateRenderData(!0)):(this._updateText(),this._updateLayout(),this.resetRenderData(),this.updateRenderData(),this.markForUpdateRenderData(!0)),this.dirtyFlag=hi.None,this._ready=!0,this._transformDirty=!0)},h.addDirtyFlag=function(t){this.dirtyFlag|=t},h.clearDirtyFlag=function(){this.dirtyFlag=hi.None},h.getCharInfo=function(t){return t>=0&&t<this._charInfos.length?this._charInfos[t]:(console.error("index out of range",t),null)},h.setCharColor=function(t,e){t&&R.updateColor(this,t,e)},h.setCharTransform=function(t,e,r,i,o){if(t){if(t.slot){var n=t.slot.node;n.setScale(o,o,o);var s=n._uiProps.uiTransformComp,a=s.width*(.5-s.anchorX),l=s.height*(.5-s.anchorY);n.setPosition(t.x+this.globalOffsetX,t.y+this.globalOffsetY,0),c.fromEuler(ui,0,0,180*i/Math.PI),n.setRotation(ui);var h=new w(s.width*s.anchorX,s.height*s.anchorY,0),u=new w(a,l,0);return w.rotateZ(h,h,u,i),void n.setPosition(n.position.x+h.x,n.position.y+h.y,0)}if(0!=t.vertexData.length){var p=new w,d=t.vertexData;p.x=(d[0].x+d[1].x+d[2].x+d[3].x)/4,p.y=(d[0].y+d[1].y+d[2].y+d[3].y)/4;for(var y=0;y<4;y++){var f=new w;w.subtract(f,d[y],p),f.multiplyScalar(o),w.add(f,p,f),0!=i&&w.rotateZ(f,f,p,i),d[y].rx=f.x+e,d[y].ry=f.y+r}t.dirty=!0}}},h.setCustomMaterialByUUID=function(t){var e=this;t&&k.loadAny({uuid:t},(function(t,r){t?console.error(t):e.customMaterial=r}))},h._canRender=function(){return!!(t.prototype._canRender.call(this)&&this._string&&this._font)},s(e,[{key:"transformDirty",get:function(){return this._transformDirty},set:function(t){this._transformDirty=t}},{key:"ready",get:function(){return this._ready}},{key:"slots",get:function(){return this._slots}},{key:"style",get:function(){return this._style}},{key:"layoutResult",get:function(){return this._layoutResult}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this._style.font=t,this.addDirtyFlag(hi.All))}},{key:"fontName",get:function(){return this._fontName},set:function(t){this._fontName!==t&&(this._fontName=t,t?this._loadFont():this._font=null)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!=t&&(this._fontSize=t,this.addDirtyFlag(hi.Layout))}},{key:"underLineInfos",get:function(){return this._underLineInfos}},{key:"strikeInfos",get:function(){return this._strikeInfos}},{key:"backgroundInfos",get:function(){return this._backgroundInfos}},{key:"maskInfos",get:function(){return this._maskInfos}},{key:"charInfos",get:function(){return this._charInfos}},{key:"typeSet",get:function(){return this._typeSet}},{key:"string",get:function(){return this._string},set:function(t){t=null==t?"":t.toString(),this._string!==t&&(this._string=t,this.addDirtyFlag(hi.Text|hi.Layout))}},{key:"rich",get:function(){return this._rich},set:function(t){t=!!t,this._rich!==t&&(this._rich=t,this.addDirtyFlag(hi.Text|hi.Layout))}},{key:"multiline",get:function(){return this._multiline},set:function(t){t!=this._multiline&&(this._multiline=t,this.addDirtyFlag(hi.Layout))}},{key:"dilate",get:function(){return this._dilate},set:function(t){t!=this._dilate&&(this._dilate=t,this.addDirtyFlag(hi.Style))}},{key:"color",get:function(){return this._color},set:function(t){this._color.equals(t)||(this._color.set(t),this.addDirtyFlag(hi.Style),this._updateColor())}},{key:"enableColorRT",get:function(){return this._enableColorRT},set:function(t){t!=this._enableColorRT&&(this._enableColorRT=t,this.addDirtyFlag(hi.Style))}},{key:"colorRT",get:function(){return this._colorRT},set:function(t){this._colorRT.equals(t)||(this._colorRT.set(t),this.addDirtyFlag(hi.Style))}},{key:"enableColorRB",get:function(){return this._enableColorRB},set:function(t){t!=this._enableColorRB&&(this._enableColorRB=t,this.addDirtyFlag(hi.Style))}},{key:"colorRB",get:function(){return this._colorRB},set:function(t){this._colorRB.equals(t)||(this._colorRB.set(t),this.addDirtyFlag(hi.Style))}},{key:"enableColorLT",get:function(){return this._enableColorLT},set:function(t){t!=this._enableColorLT&&(this._enableColorLT=t,this.addDirtyFlag(hi.Style))}},{key:"colorLT",get:function(){return this._colorLT},set:function(t){this._colorLT.equals(t)||(this._colorLT.set(t),this.addDirtyFlag(hi.Style))}},{key:"enableColorLB",get:function(){return this._enableColorLB},set:function(t){t!=this._enableColorLB&&(this._enableColorLB=t,this.addDirtyFlag(hi.Style))}},{key:"colorLB",get:function(){return this._colorLB},set:function(t){this._colorLB.equals(t)||(this._colorLB.set(t),this.addDirtyFlag(hi.Style))}},{key:"enableItalic",get:function(){return this._enableItalic},set:function(t){t!=this._enableItalic&&(this._enableItalic=t,this.addDirtyFlag(hi.Layout))}},{key:"enableUnderline",get:function(){return this._enableUnderline},set:function(t){t!=this._enableUnderline&&(this._enableUnderline=t,this.addDirtyFlag(hi.Layout))}},{key:"enableStrike",get:function(){return this._enableStrike},set:function(t){t!=this._enableStrike&&(this._enableStrike=t,this.addDirtyFlag(hi.Layout))}},{key:"enableBackground",get:function(){return this._enableBackground},set:function(t){t!=this._enableBackground&&(this._enableBackground=t,this.addDirtyFlag(hi.Layout))}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor.equals(t)||(this._backgroundColor.set(t),this.addDirtyFlag(hi.Style))}},{key:"enableMask",get:function(){return this._enableMask},set:function(t){t!=this._enableMask&&(this._enableMask=t,this.addDirtyFlag(hi.Layout))}},{key:"maskColor",get:function(){return this._maskColor},set:function(t){this._maskColor.equals(t)||(this._maskColor.set(t),this.addDirtyFlag(hi.Style))}},{key:"autoWarp",get:function(){return this._autoWarp},set:function(t){t!=this._autoWarp&&(this._autoWarp=t,this.addDirtyFlag(hi.Layout))}},{key:"equalWidth",get:function(){return this._equalWidth},set:function(t){t!=this._equalWidth&&(this._equalWidth=t,this.addDirtyFlag(hi.Layout))}},{key:"fixedLineHeight",get:function(){return this._fixedLineHeight},set:function(t){t!=this._fixedLineHeight&&(this._fixedLineHeight=t,this.addDirtyFlag(hi.Layout))}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){t!=this._lineHeight&&(this._lineHeight=t,this.addDirtyFlag(hi.Layout))}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(t){t!=this._horizontalAlign&&(this._horizontalAlign=t,this.addDirtyFlag(hi.Layout))}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(t){t!=this._verticalAlign&&(this._verticalAlign=t,this.addDirtyFlag(hi.Layout))}},{key:"overflow",get:function(){return this._overflow},set:function(t){t!=this._overflow&&(this._overflow=t,this.addDirtyFlag(hi.Layout))}},{key:"lineSpace",get:function(){return this._lineSpace},set:function(t){t!=this._lineSpace&&(this._lineSpace=t,this.addDirtyFlag(hi.Layout))}},{key:"letterSpace",get:function(){return this._letterSpace},set:function(t){t!=this._letterSpace&&(this._letterSpace=t,this.addDirtyFlag(hi.Layout))}},{key:"padding",get:function(){return this._padding},set:function(t){t!=this._padding&&(this._padding=t,this.addDirtyFlag(hi.Layout))}},{key:"stroke",get:function(){return this._stroke},set:function(t){t!=this._stroke&&(this._stroke=t,this.addDirtyFlag(hi.Style))}},{key:"strokeBlur",get:function(){return this._strokeBlur},set:function(t){t!=this._strokeBlur&&(this._strokeBlur=t,this.addDirtyFlag(hi.Style))}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor.equals(t)||(this._strokeColor.set(t),this.addDirtyFlag(hi.Style))}},{key:"shadow",get:function(){return this._shadow},set:function(t){t!=this._shadow&&(this._shadow=t,this.addDirtyFlag(hi.Layout))}},{key:"shadowBlur",get:function(){return this._shadowBlur},set:function(t){t!=this._shadowBlur&&(this._shadowBlur=t,this.addDirtyFlag(hi.Style))}},{key:"shadowOffsetX",get:function(){return this._shadowOffsetX},set:function(t){t!=this._shadowOffsetX&&(this._shadowOffsetX=t,this.addDirtyFlag(hi.Layout))}},{key:"shadowOffsetY",get:function(){return this._shadowOffsetY},set:function(t){t!=this._shadowOffsetY&&(this._shadowOffsetY=t,this.addDirtyFlag(hi.Layout))}},{key:"shadowColor",get:function(){return this._shadowColor},set:function(t){this._shadowColor.equals(t)||(this._shadowColor.set(t),this.addDirtyFlag(hi.Style))}},{key:"aspect",get:function(){return this._aspect},set:function(t){t!=this._aspect&&(this._aspect=t,this.addDirtyFlag(hi.Layout))}},{key:"charVisibleRatio",get:function(){return this._charVisibleRatio},set:function(t){if(this._charVisibleRatio!=t){this._charVisibleRatio=m.clamp01(t);for(var e=this._charInfos.length*this._charVisibleRatio,r=0;r<this._charInfos.length;r++){var i=this._charInfos[r],o=r<e;i.slot&&(i.slot.node.active=o),i.visible=o}}}},{key:"overlayTexture",get:function(){return this._overlayTexture},set:function(t){t!=this._overlayTexture&&(this._overlayTexture=t,this.addDirtyFlag(hi.Property))}},{key:"enableGlow",get:function(){return this._enableGlow},set:function(t){t!=this._enableGlow&&(this._enableGlow=t,this.addDirtyFlag(hi.Property))}},{key:"glowColor",get:function(){return this._glowColor},set:function(t){this._glowColor.equals(t)||(this._glowColor.set(t),this.addDirtyFlag(hi.Property))}},{key:"glowInner",get:function(){return this._glowInner},set:function(t){t!=this._glowInner&&(this._glowInner=t,this.addDirtyFlag(hi.Property))}},{key:"glowOuter",get:function(){return this._glowOuter},set:function(t){t!=this._glowOuter&&(this._glowOuter=t,this.addDirtyFlag(hi.Property))}},{key:"glowPower",get:function(){return this._glowPower},set:function(t){t!=this._glowPower&&(this._glowPower=t,this.addDirtyFlag(hi.Property))}},{key:"breakWestern",get:function(){return this._breakWestern},set:function(t){t!=this._breakWestern&&(this._breakWestern=t,this.addDirtyFlag(hi.Layout))}},{key:"enableBold",get:function(){return this._enableBold},set:function(t){t!=this._enableBold&&(this._enableBold=t,this.addDirtyFlag(hi.Layout))}},{key:"useFontPreset",get:function(){return this._useFontPreset},set:function(t){t!=this._useFontPreset&&(this._useFontPreset=t,this.addDirtyFlag(hi.Layout))}},{key:"handleTouchEvent",get:function(){return this._handleTouchEvent},set:function(t){this._handleTouchEvent!==t&&(this._handleTouchEvent=t,this.enabledInHierarchy&&(this.handleTouchEvent?this._addEventListeners():this._removeEventListeners()))}},{key:"uiTransform",get:function(){return this._uiTransform}},{key:"renderEntity",get:function(){return this._renderEntity}},{key:"dirtyFlag",get:function(){return this._dirtyFlag},set:function(t){this.dirtyFlag!=t&&(this._transformDirty=!0,this._dirtyFlag=t)}}]),e}(v)).CHAR_CLICK_EVENT="CHAR_CLICK_EVENT",ir=e((rr=ii).prototype,"_saveTag",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),or=e(rr.prototype,"_fontName",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Arial"}}),nr=e(rr.prototype,"_string",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"text mesh"}}),sr=e(rr.prototype,"_rich",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ar=e(rr.prototype,"_direction",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.Horizontal}}),lr=e(rr.prototype,"_horizontalAlign",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.Center}}),hr=e(rr.prototype,"_verticalAlign",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.Middle}}),ur=e(rr.prototype,"_overflow",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.None}}),pr=e(rr.prototype,"_multiline",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),cr=e(rr.prototype,"_enableItalic",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),dr=e(rr.prototype,"_enableUnderline",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yr=e(rr.prototype,"_enableStrike",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fr=e(rr.prototype,"_enableBackground",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_r=e(rr.prototype,"_enableMask",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gr=e(rr.prototype,"_lineSpace",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),br=e(rr.prototype,"_letterSpace",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wr=e(rr.prototype,"_enableColorRT",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kr=e(rr.prototype,"_colorRT",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,255,255,255)}}),mr=e(rr.prototype,"_enableColorRB",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vr=e(rr.prototype,"_colorRB",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,255,255,255)}}),Cr=e(rr.prototype,"_enableColorLT",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Or=e(rr.prototype,"_colorLT",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,255,255,255)}}),Sr=e(rr.prototype,"_enableColorLB",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dr=e(rr.prototype,"_colorLB",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,255,255,255)}}),Tr=e(rr.prototype,"_backgroundColor",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,255,255,255)}}),Lr=e(rr.prototype,"_maskColor",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,255,255,128)}}),zr=e(rr.prototype,"_strokeColor",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(0,0,0,255)}}),Ir=e(rr.prototype,"_shadow",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fr=e(rr.prototype,"_shadowOffsetX",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pr=e(rr.prototype,"_shadowOffsetY",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xr=e(rr.prototype,"_shadowBlur",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Rr=e(rr.prototype,"_shadowColor",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(0,0,0,255)}}),Br=e(rr.prototype,"_handleTouchEvent",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Er=e(rr.prototype,"_autoWarp",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ar=e(rr.prototype,"_lineHeight",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),Mr=e(rr.prototype,"_fixedLineHeight",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jr=e(rr.prototype,"_padding",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new E}}),Hr=e(rr.prototype,"_dilate",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),Nr=e(rr.prototype,"_stroke",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ur=e(rr.prototype,"_strokeBlur",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Wr=e(rr.prototype,"_aspect",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Gr=e(rr.prototype,"_charVisibleRatio",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Yr=e(rr.prototype,"_equalWidth",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vr=e(rr.prototype,"_overlayTexture",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xr=e(rr.prototype,"_enableGlow",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qr=e(rr.prototype,"_glowColor",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,255,255,255)}}),Zr=e(rr.prototype,"_glowInner",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Kr=e(rr.prototype,"_glowOuter",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qr=e(rr.prototype,"_glowPower",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Jr=e(rr.prototype,"_breakWestern",[$t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$r=e(rr.prototype,"_enableBold",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ti=e(rr.prototype,"_useFontPreset",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return tt.defulatUseFontPreset}}),e(rr.prototype,"fontName",[re],Object.getOwnPropertyDescriptor(rr.prototype,"fontName"),rr.prototype),ei=e(rr.prototype,"_fontSize",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 24}}),e(rr.prototype,"fontSize",[oe],Object.getOwnPropertyDescriptor(rr.prototype,"fontSize"),rr.prototype),ri=e(rr.prototype,"slotsContainer",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(rr.prototype,"string",[se],Object.getOwnPropertyDescriptor(rr.prototype,"string"),rr.prototype),e(rr.prototype,"rich",[ae],Object.getOwnPropertyDescriptor(rr.prototype,"rich"),rr.prototype),e(rr.prototype,"multiline",[le],Object.getOwnPropertyDescriptor(rr.prototype,"multiline"),rr.prototype),e(rr.prototype,"dilate",[he],Object.getOwnPropertyDescriptor(rr.prototype,"dilate"),rr.prototype),e(rr.prototype,"color",[ue],Object.getOwnPropertyDescriptor(rr.prototype,"color"),rr.prototype),e(rr.prototype,"enableColorRT",[pe],Object.getOwnPropertyDescriptor(rr.prototype,"enableColorRT"),rr.prototype),e(rr.prototype,"colorRT",[ce],Object.getOwnPropertyDescriptor(rr.prototype,"colorRT"),rr.prototype),e(rr.prototype,"enableColorRB",[de],Object.getOwnPropertyDescriptor(rr.prototype,"enableColorRB"),rr.prototype),e(rr.prototype,"colorRB",[ye],Object.getOwnPropertyDescriptor(rr.prototype,"colorRB"),rr.prototype),e(rr.prototype,"enableColorLT",[fe],Object.getOwnPropertyDescriptor(rr.prototype,"enableColorLT"),rr.prototype),e(rr.prototype,"colorLT",[_e],Object.getOwnPropertyDescriptor(rr.prototype,"colorLT"),rr.prototype),e(rr.prototype,"enableColorLB",[ge],Object.getOwnPropertyDescriptor(rr.prototype,"enableColorLB"),rr.prototype),e(rr.prototype,"colorLB",[be],Object.getOwnPropertyDescriptor(rr.prototype,"colorLB"),rr.prototype),e(rr.prototype,"enableItalic",[we],Object.getOwnPropertyDescriptor(rr.prototype,"enableItalic"),rr.prototype),e(rr.prototype,"enableUnderline",[ke],Object.getOwnPropertyDescriptor(rr.prototype,"enableUnderline"),rr.prototype),e(rr.prototype,"enableStrike",[me],Object.getOwnPropertyDescriptor(rr.prototype,"enableStrike"),rr.prototype),e(rr.prototype,"enableBackground",[ve],Object.getOwnPropertyDescriptor(rr.prototype,"enableBackground"),rr.prototype),e(rr.prototype,"backgroundColor",[Ce],Object.getOwnPropertyDescriptor(rr.prototype,"backgroundColor"),rr.prototype),e(rr.prototype,"enableMask",[Oe],Object.getOwnPropertyDescriptor(rr.prototype,"enableMask"),rr.prototype),e(rr.prototype,"maskColor",[Se],Object.getOwnPropertyDescriptor(rr.prototype,"maskColor"),rr.prototype),e(rr.prototype,"autoWarp",[De],Object.getOwnPropertyDescriptor(rr.prototype,"autoWarp"),rr.prototype),e(rr.prototype,"equalWidth",[Te],Object.getOwnPropertyDescriptor(rr.prototype,"equalWidth"),rr.prototype),e(rr.prototype,"fixedLineHeight",[Le],Object.getOwnPropertyDescriptor(rr.prototype,"fixedLineHeight"),rr.prototype),e(rr.prototype,"lineHeight",[ze],Object.getOwnPropertyDescriptor(rr.prototype,"lineHeight"),rr.prototype),e(rr.prototype,"horizontalAlign",[Ie],Object.getOwnPropertyDescriptor(rr.prototype,"horizontalAlign"),rr.prototype),e(rr.prototype,"verticalAlign",[Fe],Object.getOwnPropertyDescriptor(rr.prototype,"verticalAlign"),rr.prototype),e(rr.prototype,"overflow",[Pe],Object.getOwnPropertyDescriptor(rr.prototype,"overflow"),rr.prototype),e(rr.prototype,"lineSpace",[xe],Object.getOwnPropertyDescriptor(rr.prototype,"lineSpace"),rr.prototype),e(rr.prototype,"letterSpace",[Re],Object.getOwnPropertyDescriptor(rr.prototype,"letterSpace"),rr.prototype),e(rr.prototype,"padding",[Be],Object.getOwnPropertyDescriptor(rr.prototype,"padding"),rr.prototype),e(rr.prototype,"stroke",[Ee],Object.getOwnPropertyDescriptor(rr.prototype,"stroke"),rr.prototype),e(rr.prototype,"strokeBlur",[Ae],Object.getOwnPropertyDescriptor(rr.prototype,"strokeBlur"),rr.prototype),e(rr.prototype,"strokeColor",[Me],Object.getOwnPropertyDescriptor(rr.prototype,"strokeColor"),rr.prototype),e(rr.prototype,"shadow",[je],Object.getOwnPropertyDescriptor(rr.prototype,"shadow"),rr.prototype),e(rr.prototype,"shadowBlur",[He],Object.getOwnPropertyDescriptor(rr.prototype,"shadowBlur"),rr.prototype),e(rr.prototype,"shadowOffsetX",[Ne],Object.getOwnPropertyDescriptor(rr.prototype,"shadowOffsetX"),rr.prototype),e(rr.prototype,"shadowOffsetY",[Ue],Object.getOwnPropertyDescriptor(rr.prototype,"shadowOffsetY"),rr.prototype),e(rr.prototype,"shadowColor",[We],Object.getOwnPropertyDescriptor(rr.prototype,"shadowColor"),rr.prototype),e(rr.prototype,"aspect",[Ge],Object.getOwnPropertyDescriptor(rr.prototype,"aspect"),rr.prototype),e(rr.prototype,"charVisibleRatio",[Ye],Object.getOwnPropertyDescriptor(rr.prototype,"charVisibleRatio"),rr.prototype),e(rr.prototype,"overlayTexture",[Ve],Object.getOwnPropertyDescriptor(rr.prototype,"overlayTexture"),rr.prototype),e(rr.prototype,"enableGlow",[Xe],Object.getOwnPropertyDescriptor(rr.prototype,"enableGlow"),rr.prototype),e(rr.prototype,"glowColor",[qe],Object.getOwnPropertyDescriptor(rr.prototype,"glowColor"),rr.prototype),e(rr.prototype,"glowInner",[Ze],Object.getOwnPropertyDescriptor(rr.prototype,"glowInner"),rr.prototype),e(rr.prototype,"glowOuter",[Ke],Object.getOwnPropertyDescriptor(rr.prototype,"glowOuter"),rr.prototype),e(rr.prototype,"glowPower",[Qe],Object.getOwnPropertyDescriptor(rr.prototype,"glowPower"),rr.prototype),e(rr.prototype,"breakWestern",[Je],Object.getOwnPropertyDescriptor(rr.prototype,"breakWestern"),rr.prototype),e(rr.prototype,"enableBold",[$e],Object.getOwnPropertyDescriptor(rr.prototype,"enableBold"),rr.prototype),e(rr.prototype,"useFontPreset",[tr],Object.getOwnPropertyDescriptor(rr.prototype,"useFontPreset"),rr.prototype),er=rr))||er)||er)||er));h._RF.pop()}}}));

System.register("chunks:///_virtual/TextMeshRenderData.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d52dbiCjAJPg4aNxNv3jKJf","TextMeshRenderData",void 0);t("TextMeshRenderData",(function(){this.x=void 0,this.y=void 0,this.z=void 0,this.u=void 0,this.v=void 0,this.color=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/TextStyle.ts",["cc","./MeasureText.ts"],(function(t){var i,s;return{setters:[function(t){i=t.cclegacy},function(t){s=t.MeasureText}],execute:function(){i._RF.push({},"3652dnPQrdKvpmHH3krXNuw","TextStyle",void 0);t("TextStyle",function(){function t(t,i){this.parent=void 0,this.fontFamily="Arial",this.fontSize="16px",this.fontStyle="",this.backgroundColor="#fff",this.color="#000",this.stroke="#000",this.strokeThickness=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowColor="#000",this.shadowBlur=0,this.shadowStroke=!1,this.shadowFill=!1,this.align="left",this.maxLines=0,this.fixedWidth=0,this.fixedHeight=0,this.resolution=0,this.rtl=!1,this.testString="|MÃ‰qgy",this.baselineX=1.2,this.baselineY=1.4,this.wordWrapWidth=0,this.wordWrapCallback=void 0,this.wordWrapCallbackScope=void 0,this.wordWrapUseAdvanced=!1,this.metrics={ascent:0,descent:0,fontSize:0},this._font=void 0,this.parent=t,this.fontStyle=i,this.metrics=s.create(this)}var i=t.prototype;return i.setStyle=function(t,i,s){void 0===i&&(i=!0),t=t||{};var e=Object.keys(t);for(var o in e)this[o]=t[o];if(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),i)return this.update(!0)},i.syncFont=function(t,i){i.font=this._font},i.syncStyle=function(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"},i.syncShadow=function(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor="#000",t.shadowBlur=0)},i.update=function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=s.create(this)),this.parent.updateText()},i.setFont=function(t,i){void 0===i&&(i=!0);var s=t.fontFamily,e=t.fontSize,o=t.fontStyle;return s===this.fontFamily&&e===this.fontSize&&o===this.fontStyle||(this.fontFamily=s,this.fontSize=e,this.fontStyle=o,i&&this.update(!0)),this.parent},i.setFontFamily=function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},i.setFontStyle=function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},i.setFontSize=function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},i.setTestString=function(t){return this.testString=t,this.update(!0)},i.setFixedSize=function(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(!1)},i.setBackgroundColor=function(t){return this.backgroundColor=t,this.update(!1)},i.setFillfunction=function(t){return this.color=t,this.update(!1)},i.setColor=function(t){return this.color=t,this.update(!1)},i.setResolution=function(t){return this.resolution=t,this.update(!1)},i.setStroke=function(t,i){return void 0===i&&(i=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===i||(this.stroke=t,this.strokeThickness=i,this.update(!0)),this.parent},i.setShadow=function(t,i,s,e,o,n){return void 0===i&&(i=0),void 0===s&&(s="#000"),void 0===e&&(e=0),void 0===o&&(o=!1),void 0===n&&(n=!0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s="#000"),void 0===e&&(e=0),void 0===o&&(o=!1),void 0===n&&(n=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=s,this.shadowBlur=e,this.shadowStroke=o,this.shadowFill=n,this.update(!1)},i.setShadowOffset=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)},i.setShadowColor=function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},i.setShadowBlur=function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},i.setShadowStroke=function(t){return this.shadowStroke=t,this.update(!1)},i.setShadowFill=function(t){return this.shadowFill=t,this.update(!1)},i.setWordWrapWidth=function(t,i){return this.wordWrapWidth=t,this.update(!1)},i.setWordWrapCallback=function(t,i){return void 0===i&&(i=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=i,this.update(!1)},i.setAlign=function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},i.setMaxLines=function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},i.getTextMetrics=function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},i.destroy=function(){this.parent=void 0},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/TextStyle2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StyleMapper.ts","./types.ts"],(function(t){var i,o,s,e,l,n;return{setters:[function(t){i=t.createForOfIteratorHelperLoose,o=t.createClass},function(t){s=t.cclegacy,e=t.Color},function(t){l=t.StyleMapper},function(t){n=t.EScriptType}],execute:function(){s._RF.push({},"a14240cwzZPp62rHADoRWq3","TextStyle",void 0);var r={red:e.RED,green:e.GREEN,blue:e.BLUE,yellow:e.YELLOW,cyan:e.CYAN,magenta:e.MAGENTA,black:e.BLACK,white:e.WHITE,gray:e.GRAY,transparent:e.TRANSPARENT},h=t("ECornerType",function(t){return t[t.LT=0]="LT",t[t.RT=1]="RT",t[t.LB=2]="LB",t[t.RB=3]="RB",t}({}));t("TextStyle",function(){function t(t){this._$color=void 0,this._$colorLT=void 0,this._$colorLB=void 0,this._$colorRT=void 0,this._$colorRB=void 0,this._$shadow=void 0,this._$shadowColor=void 0,this._$shadowX=void 0,this._$shadowY=void 0,this._$shadowBlur=void 0,this._$stroke=void 0,this._$strokeBlur=void 0,this._$strokeColor=void 0,this._$backgroundColor=void 0,this._$maskColor=void 0,this._$fontSize=void 0,this._$dilate=void 0,this._$scriptType=void 0,this._$strike=void 0,this._$strikeColor=void 0,this._$underline=void 0,this._$underlineColor=void 0,this._$italic=void 0,this._$background=void 0,this._$mask=void 0,this._tmFont=void 0,this._fontSize=18,this._dilate=.25,this._background=!1,this._mask=!1,this._italic=!1,this._scriptType=n.None,this._strike=!1,this._strikeRGBA=new e(0,0,0,255),this._underline=!1,this._underlineRGBA=new e(0,0,0,255),this._fillRGBA=new e(0,0,0,255),this._enableColorLT=!1,this._enableColorLB=!1,this._enableColorRT=!1,this._enableColorRB=!1,this._colorLT=new e,this._colorLB=new e,this._colorRT=new e,this._colorRB=new e,this._strokeRGBA=new e(0,0,0,255),this._shadowRGBA=new e(0,0,0,255),this._backgroundRGBA=new e(0,0,0,255),this._maskRGBA=new e(0,0,0,128),this._stroke=0,this._strokeBlur=0,this._gamma=1,this._shadow=0,this._shadowBlur=0,this._shadowOffsetX=0,this._shadowOffsetY=0,this._realFontSize=18,this._tmFont=t}var s=t.prototype;return s.reset=function(){this._$color=null,this._$shadowColor=null,this._$shadowBlur=null,this._shadowOffsetX=null,this._shadowOffsetY=null,this._$stroke=null,this._$strokeColor=null,this._$strokeBlur=null,this._$backgroundColor=null,this._$maskColor=null,this._$fontSize=null,this._fontSize=null,this._$italic=null,this._$dilate=null,this._$strike=null,this._$strikeColor=null,this._$underline=null,this._$underlineColor=null,this._$scriptType=null,this._scriptType=null,this._enableColorLB=!1,this._enableColorLT=!1,this._enableColorRB=!1,this._enableColorRT=!1},s.clone=function(){return t.copy(this)},s.copyFrom=function(t,o){void 0===o&&(o=!0);for(var s,l=(o?t.changedFields:null)||Object.keys(t),n=i(l);!(s=n()).done;){var r=s.value,h=t[r];h instanceof e?this[r].set(h):this[r]=t[r]}return this},t.copy=function(i){for(var o=new t,s=0,l=Object.keys(i);s<l.length;s++){var n=l[s],r=i[n];r instanceof e?o[n].set(r):o[n]=i[n]}return o},s.calcFontSize=function(){this._realFontSize=this._fontSize,this._scriptType!=n.None&&(this._realFontSize=this._fontSize*(this.font?this.font.scriptThickness:.3))},s.getColor=function(t,i){if(i=i||new e,"string"==typeof t){if(t=t.toLocaleLowerCase(),r[t])return r[t];var o=t.replace("0x","#");e.fromHEX(i,o)}else if("number"==typeof t){var s=t>>24&255,l=t>>16&255,n=t>>8&255,h=255&t;i.set(s,l,n,h)}return i},s.preset=function(){if(this._$color&&"string"==typeof this._$color){var t=this._$color.split(",");this._$color=t[0],4==t.length?(null==this._$colorLT&&(this._$colorLT=t[0]),null==this._$colorLB&&(this._$colorLB=t[1]),null==this._$colorRT&&(this._$colorRT=t[2]),null==this._$colorRB&&(this._$colorRB=t[3])):3==t.length?(null==this._$colorLT&&(this._$colorLT=t[0]),null==this._$colorRT&&(this._$colorRT=t[1]),null==this._$colorRB&&(this._$colorRB=t[2]),null==this._$colorLB&&(this._$colorLB=t[1])):2==t.length&&(null==this._$colorLT&&(this._$colorLT=t[0]),null==this._$colorRB&&(this._$colorRB=t[1]),null==this._$colorRT&&(this._$colorRT=t[0]),null==this._$colorLB&&(this._$colorLB=t[1]))}this._fillRGBA=this.getColor(this._$color,this._fillRGBA),this._strokeRGBA=this.getColor(this._$strokeColor,this._strokeRGBA),this._shadowRGBA=this.getColor(this._$shadowColor,this._shadowRGBA),this._backgroundRGBA=this.getColor(this._$backgroundColor,this._backgroundRGBA),this._maskRGBA=this.getColor(this._$maskColor,this._maskRGBA),this._strikeRGBA=this.getColor(this._$strikeColor||this._$color,this._strikeRGBA),this._underlineRGBA=this.getColor(this._$underlineColor||this._$color,this._underlineRGBA),this._fontSize=null==this._$fontSize?this._fontSize:this._$fontSize,this._shadow=null==this._$shadow?this._shadow:this._$shadow,this._shadowOffsetX=null==this._$shadowX?this._shadowOffsetX:this._$shadowX,this._shadowOffsetY=null==this._$shadowY?this._shadowOffsetY:this._$shadowY,this._stroke=null==this._$stroke?this._stroke:this._$stroke,this._strokeBlur=null==this._$strokeBlur?this._strokeBlur:this._$strokeBlur,this._dilate=null==this._$dilate?this._dilate:this._$dilate,this._background=null==this._$background?this._background:this._$background,this._mask=null==this._$mask?this._mask:this._$mask,this._italic=null==this._$italic?this._italic:this._$italic,this._strike=null==this._$strike?this._strike:this._$strike,this._underline=null==this._$underline?this._underline:this._$underline,this._scriptType=null==this._$scriptType?this._scriptType:this._$scriptType,this._$colorLB&&(this._enableColorLB=!0,this._colorLB=this.getColor(this._$colorLB,this._colorLB)),this._$colorLT&&(this._enableColorLT=!0,this._colorLT=this.getColor(this._$colorLT,this._colorLT)),this._$colorRB&&(this._enableColorRB=!0,this._colorRB=this.getColor(this._$colorRB,this._colorRB)),this._$colorRT&&(this._enableColorRT=!0,this._colorRT=this.getColor(this._$colorRT,this._colorRT)),this.calculate()},s.calculate=function(){this.calcGamma(),this.calcFontSize()},s.calcGamma=function(){this._gamma=2.8284/(this.realFontSize*(this._strokeRGBA.a<=0?1:1.8))},s.setFontSize=function(t,i){void 0===i&&(i=!1),(null==this._$fontSize||i)&&(this._fontSize=t)},s.setShadow=function(t,i){void 0===i&&(i=!1),(null==this._$shadow||i)&&(this._shadow=t)},s.setShadowOffsetX=function(t,i){void 0===i&&(i=!1),(null==this._$shadowX||i)&&(this._shadowOffsetX=t)},s.setShadowOffsetY=function(t,i){void 0===i&&(i=!1),(null==this._$shadowY||i)&&(this._shadowOffsetY=t)},s.setFillColor=function(t,i){void 0===i&&(i=!1),(null==this._$color||i)&&this._fillRGBA.set(t)},s.getFillColor=function(t){switch(t){case h.LB:return this.enableColorLB?this._colorLB:this._fillRGBA;case h.LT:return this.enableColorLT?this._colorLT:this._fillRGBA;case h.RB:return this.enableColorRB?this._colorRB:this._fillRGBA;case h.RT:return this.enableColorRT?this._colorRT:this._fillRGBA}},s.setColorLB=function(t,i){void 0===i&&(i=!1),(null==this._$colorLB||i)&&(this._enableColorLB=!0,this._colorLB.set(t))},s.setColorLT=function(t,i){void 0===i&&(i=!1),(null==this._$colorLT||i)&&(this._enableColorLT=!0,this._colorLT.set(t))},s.setColorRB=function(t,i){void 0===i&&(i=!1),(null==this._$colorRB||i)&&(this._enableColorRB=!0,this._colorRB.set(t))},s.setColorRT=function(t,i){void 0===i&&(i=!1),(null==this._$colorRT||i)&&(this._enableColorRT=!0,this._colorRT.set(t))},s.setStrokeColor=function(t,i){void 0===i&&(i=!1),(null==this._$strokeColor||i)&&this._strokeRGBA.set(t)},s.setShadowColor=function(t,i){void 0===i&&(i=!1),(null==this._$shadowColor||i)&&this._shadowRGBA.set(t)},s.setBackgroundColor=function(t,i){void 0===i&&(i=!1),(null==this._$backgroundColor||i)&&this._backgroundRGBA.set(t)},s.setMaskColor=function(t,i){void 0===i&&(i=!1),(null==this._$maskColor||i)&&this._maskRGBA.set(t)},s.setDilate=function(t,i){void 0===i&&(i=!1),(null==this._$dilate||i)&&(this._dilate=t)},s.setStroke=function(t,i){void 0===i&&(i=!1),(null==this._$stroke||i)&&(this._stroke=t)},s.setStrokeBlur=function(t,i){void 0===i&&(i=!1),(null==this._$strokeBlur||i)&&(this._strokeBlur=t)},s.setBackground=function(t,i){void 0===i&&(i=!1),(null==this._$background||i)&&(this._background=t)},s.setMask=function(t,i){void 0===i&&(i=!1),(null==this._$mask||i)&&(this._mask=t)},s.setShadowBlur=function(t,i){void 0===i&&(i=!1),(null==this._$shadowBlur||i)&&(this._shadowBlur=t)},s.setItalic=function(t,i){void 0===i&&(i=!1),(null==this._$italic||i)&&(this._italic=t)},s.setScriptType=function(t,i){void 0===i&&(i=!1),(null==this._$scriptType||i)&&(this._scriptType=t)},s.setStrike=function(t,i){void 0===i&&(i=!1),(null==this._$strike||i)&&(this._strike=t)},s.setStrikeColor=function(t,i){void 0===i&&(i=!1),(null==this._$strikeColor||i)&&this._strikeRGBA.set(t)},s.setUnderline=function(t,i){void 0===i&&(i=!1),(null==this._$underline||i)&&(this._underline=t)},s.setUnderlineColor=function(t,i){void 0===i&&(i=!1),(null==this._$underlineColor||i)&&this._underlineRGBA.set(t)},s.setAttributeFromObject=function(t,i,o){if(null!=t)for(var s=Object.keys(t),e=0;e<s.length;e++){var n=s[e],r=t[n];if("enables"==n&&Array.isArray(r))for(var h=0;h<r.length;h++){var _=r[h],u=l[_];null!=u?(this[u.field]=u.value,null!=o&&o.push(u.field)):console.warn("StyleMapper not found: "+_)}else if(null!=r)if(i&&(n=i+"-"+n),"object"!=typeof r){var c=l[n];if(null==c){if(l.valueKeys.indexOf(n)>=0){this[n]=r;continue}console.warn("StyleMapper["+n+"] is null")}else if(c.field)this[c.field]=null!=r?r:c.value,null!=o&&o.push(c.field);else if(c.mapper){var a=l[c.mapper];a?a.field&&(this[a.field]=null!=r?r:c.value,null!=o&&o.push(a.field)):console.error("can not find mapper",c.mapper)}}else this.setAttributeFromObject(r,n,o)}},s.parseFromJson=function(t){var i=[];this.changedFields=i,this.setAttributeFromObject(t,null,i),this.preset()},s.parseFromJsonStr=function(t){var i=JSON.parse(t),o=[];this.changedFields=o,this.setAttributeFromObject(i,null,o),this.preset()},o(t,[{key:"font",get:function(){return this._tmFont},set:function(t){this._tmFont!==t&&(this._tmFont=t)}},{key:"realFontSize",get:function(){return this._realFontSize}},{key:"fontSize",get:function(){return this._fontSize}},{key:"shadow",get:function(){return this._shadow}},{key:"shadowOffsetX",get:function(){return this._shadowOffsetX}},{key:"shadowOffsetY",get:function(){return this._shadowOffsetY}},{key:"fillRGBA",get:function(){return this._fillRGBA}},{key:"enableColorLB",get:function(){return this._enableColorLB||!!this._$colorLB},set:function(t){this._enableColorLB=t}},{key:"enableColorLT",get:function(){return this._enableColorLT||!!this._$colorLT},set:function(t){this._enableColorLT=t}},{key:"enableColorRB",get:function(){return this._enableColorRB||!!this._$colorRB},set:function(t){this._enableColorRB=t}},{key:"enableColorRT",get:function(){return this._enableColorRT||!!this._$colorRT},set:function(t){this._enableColorRT=t}},{key:"colorLB",get:function(){return this._colorLB}},{key:"colorLT",get:function(){return this._colorLT}},{key:"colorRB",get:function(){return this._colorRB}},{key:"colorRT",get:function(){return this._colorRT}},{key:"strokeRGBA",get:function(){return this._strokeRGBA}},{key:"shadowRGBA",get:function(){return this._shadowRGBA}},{key:"backgroundRGBA",get:function(){return this._backgroundRGBA}},{key:"maskRGBA",get:function(){return this._maskRGBA}},{key:"dilate",get:function(){return this._dilate}},{key:"stroke",get:function(){return this._stroke}},{key:"strokeBlur",get:function(){return this._strokeBlur}},{key:"gamma",get:function(){return this._gamma}},{key:"background",get:function(){return this._background}},{key:"mask",get:function(){return this._mask}},{key:"shadowBlur",get:function(){return this._shadowBlur}},{key:"italic",get:function(){return this._italic}},{key:"scriptType",get:function(){return this._scriptType}},{key:"strike",get:function(){return this._strike}},{key:"strikeRGBA",get:function(){return this._strikeRGBA}},{key:"underline",get:function(){return this._underline}},{key:"underlineRGBA",get:function(){return this._underlineRGBA}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/TextureChannel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"aa02cCPnp1BB6dWrpGWN2Fo","TextureChannel",void 0);i("TextureChannel",function(){var i=e.prototype;function e(i,t,e,n){this._tmFont=void 0,this._isDynamic=void 0,this._index=void 0,this._rowSize=void 0,this._colSize=void 0,this._capacity=void 0,this._size=void 0,this._disposedSpaces=[],this._fullIndices=[],this._initialized=!1,this._tmFont=i,this._index=t,this._isDynamic=e,this._size=i.fontData.spaceSize,this._colSize=Math.floor(i.textureWidth/this._size),this._rowSize=Math.floor(i.textureHeight/this._size),this._capacity=this._colSize*this._rowSize,this._fullIndices=new Array(this._capacity);for(var s=this._capacity-1;s>=0;s--)this._fullIndices[s]=s}return i.initial=function(){this._initialized=!0},i.freeChar=function(i){this._fullIndices.push(i)},i.addUsed=function(i){var t=this._fullIndices.indexOf(i);t>=0&&this._fullIndices.splice(t,1)},i.isFull=function(){return 0==this._fullIndices.length},i.spanEmptySpace=function(){if(this.isFull())return null;var i=this._fullIndices.pop(),t=Math.floor(i/this._colSize),e=i%this._colSize,n=e*this._size,s=t*this._size,c=this._size,h=this._size;return{index:i,cid:this._index,row:t,col:e,width:c,height:h,x:n,y:s,char:null}},t(e,[{key:"initialized",get:function(){return this._initialized}},{key:"index",get:function(){return this._index}},{key:"isDynamic",get:function(){return this._isDynamic}},{key:"count",get:function(){return this._capacity-this._fullIndices.length}},{key:"rowSize",get:function(){return this._rowSize}},{key:"colSize",get:function(){return this._colSize}},{key:"capacity",get:function(){return this._capacity}}]),e}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TMFont.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FontData.ts","./Utils.ts","./FontParser.ts","./ResManger.ts"],(function(e){var t,n,r,i,a,s,o,u,f,c,l,h,_,d,k,g,p;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,r=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){a=e.cclegacy,s=e._decorator,o=e.assetManager,u=e.TextAsset,f=e.BufferAsset,c=e.Asset,l=e.Texture2D,h=e.TTFFont,_=e.Material},function(e){d=e.FontData},function(e){k=e.Utils},function(e){g=e.FontParser},function(e){p=e.ResManager}],execute:function(){var y,m;a._RF.push({},"8ec3aIyWnpCgJ0faVpwoFVJ","TMFont",void 0);var b=s.ccclass,v=(s.property,s.executeInEditMode,e("TMFont",b("TMFont")(((m=function(e){function a(){var t;return(t=e.call(this)||this)._version=void 0,t._uid=void 0,t._font=void 0,t._fontFamily=void 0,t._fontData=void 0,t._fontSize=45,t._padding=60,t._atlasWidth=1024,t._atlasHeight=1024,t._staticChannels=3,t._dynamic=!0,t._padTrim=!1,t._enableAutoFree=!1,t._offsetY=0,t._normalWeight=.14,t._boldWeightScale=1.2,t._strokeScale=.1,t._strokeBlur=0,t._shadowSize=.03,t._shadowBlur=0,t._underLineOffset=-6.9,t._keepUnlderLineSpace=!1,t._underLineThickness=.15,t._strikeOffset=.4,t._strikeThickness=.1,t._scriptThickness=.3,t._material=void 0,t._chars={},t}t(a,e);var s=a.prototype;return s.initial=function(e,t,n){this._font=e,this._fontData=new d(this,t,null,n),this._fontData.enableAutoFree=this._enableAutoFree,this._fontData.initial()},s.getCharInfo=function(e){var t=this._fontData.getCharInfo(e,null);return t.ref++,t},s.freeChar=function(e){e.ref--,this._enableAutoFree&&!e.static&&e.ref<=0&&(e.ref=0,this._fontData.removeDynamicChar(e.code))},s._loadFontInfo=function(){var e=r(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._version=t.version,this._fontFamily=t.fontFamily,this._fontSize=t.fontSize,this._padding=t.padding,this._atlasWidth=t.atlasWidth,this._atlasHeight=t.atlasHeight,this._staticChannels=t.staticChannels||0,this._dynamic=1==t.dynamic||0==this._staticChannels,this._padTrim=1==t.padTrim,this._enableAutoFree=1==t.enableAutoFree,this._offsetY=t.offsetY||0,this._normalWeight=t.normalWeight,this._boldWeightScale=t.boldWeightScale,this._strokeScale=t.strokeScale,this._strokeBlur=t.strokeBlur,this._shadowSize=t.shadowSize,this._shadowBlur=t.shadowBlur,this._underLineOffset=t.underLineOffset,this._keepUnlderLineSpace=1==t.keepUnlderLineSpace,this._underLineThickness=t.underLineThickness,this._strikeOffset=t.strikeOffset,this._strikeThickness=t.strikeThickness,this._scriptThickness=t.scriptThickness,!(t.dynamic&&t.staticChannels<4&&t.font)){e.next=27;break}return e.next=26,p.getByUUIDAsync(t.font,h);case 26:n=e.sent;case 27:if(!(t.staticChannels>0)){e.next=31;break}return e.next=30,p.getByUUIDAsync(t.atlas+"@6c48a",l);case 30:r=e.sent;case 31:this.initial(n,r,t);case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.isNone=function(e){return null==e||Number.isNaN(e)},a.deserializeAsync=function(){var e=r(i().mark((function e(t,n){var r,s,c,l,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",s="","string"!=typeof t){e.next=6;break}r=t,e.next=22;break;case 6:if(!(t instanceof u)){e.next=11;break}r=t.text,s=t._uuid,e.next=22;break;case 11:if(!(t instanceof ArrayBuffer)){e.next=15;break}r=k.arrayBufferToString(t),e.next=22;break;case 15:if(!(t instanceof f)){e.next=20;break}r=k.arrayBufferToString(t.buffer()),s=t._uuid,e.next=22;break;case 20:return console.error("invaliad tmf data"),e.abrupt("return",null);case 22:if(!a._fontMap.has(s)){e.next=26;break}return e.abrupt("return",a._fontMap.get(s));case 26:if(!a._loadingMap.has(s)){e.next=28;break}return e.abrupt("return",new Promise((function(e,t){var n=setInterval((function(){a._fontMap.has(s)&&(clearInterval(n),e(a._fontMap.get(s)))}),100)})));case 28:if(this._loadingMap.set(s,!0),c=g.parse(s,r),(l=new a)._uid=s,n){e.next=40;break}return h=!1,"456042ba-7dd1-452c-a76b-cf79a55fcd6c",o.loadAny({uuid:"456042ba-7dd1-452c-a76b-cf79a55fcd6c"},(function(e,t){e?console.error(e):(l._material=new _,l._material.copy(t),h=!0)})),e.next=38,k.until((function(){return h}));case 38:e.next=42;break;case 40:l._material=new _,l._material.copy(n);case 42:return e.next=44,l._loadFontInfo(c);case 44:return a._fontMap.set(s,l),this._loadingMap.delete(s),e.abrupt("return",l);case 47:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),a.deserialize=function(e){var t="",n="";if("string"==typeof e)t=e;else if(e instanceof u)t=e.text,n=e._uuid,o.releaseAsset(e);else if(e instanceof ArrayBuffer)t=k.arrayBufferToString(e),e=null;else{if(!(e instanceof f))return console.error("invaliad tmf data"),null;t=k.arrayBufferToString(e.buffer()),n=e._uuid,o.releaseAsset(e)}var r=g.parse(n,t),i=new a;return i._loadFontInfo(r),i},n(a,[{key:"version",get:function(){return this._version}},{key:"material",get:function(){return this._material}},{key:"uid",get:function(){return this._uid}},{key:"font",get:function(){return this._font}},{key:"fontFamily",get:function(){return this._fontFamily}},{key:"fontSize",get:function(){return this._fontSize}},{key:"padding",get:function(){return this._padding}},{key:"textureWidth",get:function(){return this._atlasWidth}},{key:"textureHeight",get:function(){return this._atlasHeight}},{key:"dynamic",get:function(){return this._dynamic}},{key:"staticChannels",get:function(){return this._staticChannels}},{key:"fontData",get:function(){return this._fontData}},{key:"enableAutoFree",get:function(){return this._enableAutoFree}},{key:"offsetY",get:function(){return this._offsetY}},{key:"normalWeight",get:function(){return this._normalWeight}},{key:"boldWeightScale",get:function(){return this._boldWeightScale}},{key:"strokeScale",get:function(){return this._strokeScale}},{key:"strokeBlur",get:function(){return this._strokeBlur}},{key:"shadowSize",get:function(){return this._shadowSize}},{key:"shadowBlur",get:function(){return this._shadowBlur}},{key:"underLineOffset",get:function(){return this._underLineOffset}},{key:"underLineThickness",get:function(){return this._underLineThickness}},{key:"keepUnlderLineSpace",get:function(){return this._keepUnlderLineSpace}},{key:"strikeOffset",get:function(){return this._strikeOffset}},{key:"strikeThickness",get:function(){return this._strikeThickness}},{key:"scriptThickness",get:function(){return this._scriptThickness}},{key:"padTrim",get:function(){return this._padTrim}}]),a}(c))._fontMap=new Map,m._loadingMap=new Map,y=m))||y));o.downloader.register(".tmf",o.downloader._downloaders[".json"]),o.factory.register(".tmf",(function(e,t,n,r){var i=new v;i._nativeUrl=e,i._nativeAsset=t,console.log("factory: tmf parse ",t),r(null,i)})),a._RF.pop()}}}));

System.register("chunks:///_virtual/TMRenderData.ts",["cc","./CharInfo.ts","./ETMQuadType.ts"],(function(t){var e,i,h,n,s;return{setters:[function(t){e=t.cclegacy,i=t.Color,h=t.Pool},function(t){n=t.putCharInfoToPool},function(t){s=t.ETMQuadType}],execute:function(){e._RF.push({},"608fedIBclNlpN1YGxDpKDV","TMRenderData",void 0);var o=t("TMRenderData",(function(){this.x=0,this.y=0,this.z=0,this.u=0,this.v=0,this.u1=0,this.v1=0,this.color=i.WHITE.clone(),this.textureId=0,this.stroke=0,this.strokeBlur=.1,this.fill=.2,this.strokeColor=new i(0,255,255,255),this.shadowColor=new i(128,128,128,255),this.shadow=0,this.shadowBlur=0,this.shadowOffsetX=1,this.shadowOffsetY=.1,this.char=null,this.type=s.Char,this.style=void 0})),r=(t("TMRenderDataPool",new h((function(){return new o}),128)),t("TMQuadRenderData",function(){function t(){this.charInfo=null,this.type=s.Char,this.startIndex=void 0,this.endIndex=void 0,this.length=void 0,this.height=void 0,this.maxHeight=void 0}return t.prototype.reset=function(){this.charInfo=null,this.type=s.Char,this.startIndex=0,this.endIndex=0,this.length=0,this.height=0,this.maxHeight=0},t}())),a=t("TMQuadRenderDataPool",new h((function(){return new r}),10));t("putTMQuadRenderDataToPool",(function(t){t.charInfo&&n(t.charInfo),t.reset(),a.free(t)}));e._RF.pop()}}}));

System.register("chunks:///_virtual/types.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,o,n,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,r=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t._decorator,p=t.ccenum}],execute:function(){var s,c,l,a,u,h,f,g,b,y,_;o._RF.push({},"ec10c9o3BhHAadfsi7cl/nI","types",void 0);var d=n.ccclass,m=n.property,v=t("ETextDirection",function(t){return t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical",t}({}));p(v);var z=t("ETextHorizontalAlign",function(t){return t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t}({}));p(z);var C=t("ETextVerticalAlign",function(t){return t[t.Top=0]="Top",t[t.Middle=1]="Middle",t[t.Bottom=2]="Bottom",t}({}));p(C);var S=t("ETextOverflow",function(t){return t[t.None=0]="None",t[t.Clamp=1]="Clamp",t[t.Shrink=2]="Shrink",t[t.ResizeHeight=3]="ResizeHeight",t}({}));p(S);t("EScriptType",function(t){return t[t.None=0]="None",t[t.SuperScript=1]="SuperScript",t[t.SubScript=2]="SubScript",t}({})),t("Margin",(s=d("Margin"),c=m({visible:!1,serializable:!0}),l=m({visible:!1,serializable:!0}),a=m({visible:!1,serializable:!0}),u=m({visible:!1,serializable:!0}),s((g=e((f=function(){function t(){this.onChanged=void 0,r(this,"_left",g,this),r(this,"_right",b,this),r(this,"_top",y,this),r(this,"_bottom",_,this)}return i(t,[{key:"left",get:function(){return this._left},set:function(t){this._left!=t&&(this._left=t,this.onChanged&&this.onChanged())}},{key:"right",get:function(){return this._right},set:function(t){this._right!=t&&(this._right=t,this.onChanged&&this.onChanged())}},{key:"top",get:function(){return this._top},set:function(t){this._top!=t&&(this._top=t,this.onChanged&&this.onChanged())}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom!=t&&(this._bottom=t,this.onChanged&&this.onChanged())}}]),t}()).prototype,"_left",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=e(f.prototype,"_right",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=e(f.prototype,"_top",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=e(f.prototype,"_bottom",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(f.prototype,"left",[m],Object.getOwnPropertyDescriptor(f.prototype,"left"),f.prototype),e(f.prototype,"right",[m],Object.getOwnPropertyDescriptor(f.prototype,"right"),f.prototype),e(f.prototype,"top",[m],Object.getOwnPropertyDescriptor(f.prototype,"top"),f.prototype),e(f.prototype,"bottom",[m],Object.getOwnPropertyDescriptor(f.prototype,"bottom"),f.prototype),h=f))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/TypeSetFactory.ts",["cc","./HorizontalTypeSet.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.HorizontalTypeSet}],execute:function(){e._RF.push({},"a74dcUgArBNtpzlVVGmXu6E","TypeSetFactory",void 0);var r=t("TypeSetFactory",function(){function t(){}return t.regist=function(t,e){this._typeMap[t]=e},t.get=function(t){if(this._typeInsts[t])return this._typeInsts[t];if(!this._typeMap[t])return console.error("can not find typeset type named "+t),null;var e=new this._typeMap[t];return this._typeInsts[t]=e,e},t}());r._typeMap={},r._typeInsts={},r.regist("horizontal",n),e._RF.pop()}}}));

System.register("chunks:///_virtual/UBBParser.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var i;e._RF.push({},"3a86ab69JpAzosGPlSbQnod","UBBParser",void 0);var s=t("TagNode",(function(t){this.type=void 0,this.name=void 0,this.value=void 0,this.attributes=void 0,this.text=void 0,this.children=void 0,this._parent=void 0,this._closed=void 0,this.name=t||""})),n=/^(true|false)$/i,r=t("UBBParser",function(){function t(){this._text=void 0,this._root=void 0,this._currentNode=void 0,this._tagInfo={name:"",pos:0,ended:!1},this.lastColor=void 0,this.lastSize=void 0,this.linkUnderline=void 0,this.linkColor=void 0}var e=t.prototype;return e.exception=function(t){console.error("UBBParser: "+t),this._tagInfo.pos=this._text.length},e.addTextNode=function(t){var e=new s;e.type="text",e.text=t,this._currentNode.children||(this._currentNode.children=[]),this._currentNode.children.push(e)},e.addNode=function(t,e){var i=new s;i.type="node",i.name=t,i.value=e,this._currentNode.children||(this._currentNode.children=[]),this._currentNode.children.push(i),i._parent=this._currentNode,this._currentNode=i},e.addAttribute=function(t,e){this._currentNode.attributes||(this._currentNode.attributes={}),this._currentNode.attributes[t]=e},e.setNodeText=function(t){this._currentNode.text=t},e.closeNode=function(t){if(t&&(this._currentNode.name!=t?this.exception("close node error:"+this._currentNode.name+" != "+t):this._currentNode._closed=!0),this._tagInfo.name=null,this._tagInfo.ended=!1,this._currentNode!=this._root&&this._currentNode._closed){var e=this._currentNode;return this._currentNode=this._currentNode._parent,delete e._parent,delete e._closed,!0}return!1},e.isValidChar=function(t,e){return(0==e||e>0&&"\\"!==this._text[e-1])&&this._text.substring(e,e+t.length)==t},e.getTagName=function(t,e){this._tagInfo.ended=!1;for(var i="",s=null,n=t,r=this._text.length;n<r;){if("="==this._text[n]){i=this._text.substring(t,n),s=this.getTagValue(i,n,e);break}var o=this.isValidChar(e,n),h=this.isValidChar("/"+e,n);if(" "==this._text[n]||o||h){i=this._text.substring(t,n),this._tagInfo.pos=n,n++,h&&(n++,this._tagInfo.ended=!0,this._tagInfo.pos=n);break}n++}return this._tagInfo.name=i,this.addNode(i,s),this._tagInfo},e.getTagValue=function(t,e,i){for(var s=null,r=e,o=this._text.length,h=null,a=!1,u=!1;r<o;){if(!u){if(" "==this._text[r]){r++;continue}if("="==this._text[r]){if(++r>=o){this.exception("tag value error,"+this._text.substring(e,r));break}'"'!=this._text[r]&&"'"!=this._text[r]||(h=this._text[r],r++),e=r,u=!0;continue}}if(h){if(this.isValidChar(h,r)){s=this._text.substring(e,r),e=++r,h=null,a=!0;break}r++}else if(u){var l=this.isValidChar(i,r),_=this.isValidChar("/"+i,r);if(" "==this._text[r]||l||_){s=this._text.substring(e,r),_&&(this._tagInfo.ended=!0),e=r,h=null,null!=s&&(n.test(s)?s="true"==s.toLowerCase():-1!=s.indexOf(".")?(s=parseFloat(s),Number.isNaN(s)&&console.error("tag value error,"+this._text.substring(e,r))):"color"==t||"#"==s[0]||"0x"==s.substring(0,2)||(s=parseInt(s),Number.isNaN(s)&&console.error("tag value error,"+this._text.substring(e,r)))),a=!0;break}r++}else r++}return a||this.exception("get tag value error"),this._tagInfo.pos=r,s},e.getAttribute=function(t,e){for(var i=this,s="",r="",o=t,h=null,a=this._text.length,u=function(){!s&&o>t&&(s=i._text.substring(t,o).replace(/ /g,""))&&(i.addAttribute(s,!0),t=o,s=null)};o<a;)if(s)if(h)this.isValidChar(h,o)?(r=this._text.substring(t,o),o++,t=o,h=null,this.addAttribute(s,r),s=null):o++;else{var l=" "==this._text[o],_=this.isValidChar(e,o),d=this.isValidChar("/"+e,o);l||_||d?(r=this._text.substring(t,o),l&&o++,t=o,h=null,n.test(r)?r="true"==r.toLowerCase():-1!=r.indexOf(".")?r=parseFloat(r):"color"==s||"#"==r[0]||"0x"==r.substring(0,2)||(r=parseInt(r)),this.addAttribute(s,r),s=null):o++}else{if(" "==this._text[o]){u(),o++,t=o;continue}if(this.isValidChar(e,o)){u(),o++;break}if(this.isValidChar("/"+e,o)){u(),o+=2,this._tagInfo.ended=!0;break}if("="==this._text[o]){if(s=this._text.substring(t,o),++o>=a){this.exception("tag value error,"+this._text.substring(t,o));break}'"'!=this._text[o]&&"'"!=this._text[o]||(h=this._text[o],o++),t=o}else o++}return h&&this.exception("attribute value is not closed"),this._tagInfo.pos=o,o},e.getText=function(t,e,i){if(this._text[t]==e)return t;for(var s,n=t,r=this._text.length,o=[];n<r;){if(this._text[n]==e){if(this.isValidChar(e,n))break;o.pop(),o.push(this._text[n])}else o.push(this._text[n]);n++}return s=o.join(""),this._tagInfo.pos=n,this.setNodeText(s),n},e.getTail=function(t,e,i){if(this._text[t]!=e||this._text[t]==e&&"/"!=this._text[t+1])return this._tagInfo.name=null,t;for(var s="",n=t,r=this._text.length,o=0;n<r;)if(this.isValidChar(e+"/",n))t=n+=2,o++;else if(" "!=this._text[n]){if(this._text[n]==i){s=this._text.substring(t,n),n++,o++;break}n++}else n++;return 2!=o?this.exception("tag tail error"):this._tagInfo.ended=!0,this._tagInfo.name=s,this._tagInfo.pos=n,n},e.parse=function(t,e){this._root=new s("root"),this._root.type="root",this._tagInfo.name=null,this._tagInfo.ended=!1,this._tagInfo.pos=0,this._currentNode=this._root,this._text=t,this.lastColor=null,this.lastSize=null;for(var i=0,n=0,r=e?"[":"<",o=e?"]":">",h=this._text.length;n<h;)if(this._tagInfo.name||this._text[n]!=r)n!=h-1||this._tagInfo.name||this.addTextNode(this._text.substring(i,n+1)),n++;else{if(i<n&&!this._tagInfo.name&&this.addTextNode(this._text.substring(i,n)),n=this.getTail(n,r,o),this._tagInfo.ended){this.closeNode(this._tagInfo.name),this._tagInfo.name=null,i=n;continue}if(n++,this.getTagName(n,o),!this._tagInfo.name){console.log("tag name is null in pos: "+n);break}if(n=this._tagInfo.pos,this._tagInfo.ended){this.closeNode(this._tagInfo.name),this._tagInfo.name=null,i=n;continue}if(n=this.getAttribute(n,o),this._tagInfo.ended||(n=this.getText(n,r,o),n=this.getTail(n,r,o)),this._tagInfo.ended){this.closeNode(this._tagInfo.name),this._tagInfo.name=null,i=n;continue}this._tagInfo.name=null,i=n,this.closeNode(null)}return this._text=null,this._root},t}());i=r,r.inst=new i,e._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,u,f,a;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,i=e.gfx,o=e.Rect,u=e.errorID,f=e.director,a=e.Director}],execute:function(){n._RF.push({},"bee10jvh0JI45p8xSts5hqv","Utils",void 0);var h=[new i.BufferTextureCopy];e("Utils",function(){function e(){}return e.readTexturePixels=function(e,t,r){(t=t||new o(0,0,e.width,e.height)).x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height);var n=e.getGFXTexture();if(!n)return u(7606),null;var f=4*t.width*t.height;if(void 0===r)r=new Uint8Array(f);else if(r.length<f)return u(7607,f),null;var a=[],h=[],c=new i.BufferTextureCopy;c.texOffset.x=t.x,c.texOffset.y=t.y,c.texExtent.width=t.width,c.texExtent.height=t.height,h.push(c),a.push(r);var s=e._getGFXDevice();return null==s||s.copyTextureToBuffers(n,a,h),r},e.uploadData=function(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var o=e.getGFXTexture();if(o&&!(e._mipmapLevel<=n)){var u=e._getGFXDevice();if(u){var f=h[0];r?(f.texOffset.x=r.x,f.texOffset.y=r.y,f.texExtent.width=r.width>>n,f.texExtent.height=r.height>>n):(f.texOffset.x=0,f.texOffset.y=0,f.texExtent.width=e._textureWidth>>n,f.texExtent.height=e._textureHeight>>n),f.texSubres.mipLevel=n,f.texSubres.baseArrayLayer=i,ArrayBuffer.isView(t)?u.copyBuffersToTexture([t],o,h):u.copyTexImagesToTexture([t],o,h)}}},e.until=function(e){var t=this;return new Promise((function(r,n){f.on(a.EVENT_BEGIN_FRAME,(function n(){e()&&(f.off(a.EVENT_BEGIN_FRAME,n,t),r())}),t)}))},e.wait=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){setTimeout((function(){e()}),t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.waitframe=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){f.once(a.EVENT_BEGIN_FRAME,(function(){e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.arrayBufferToString=function(e,t){void 0===t&&(t=0);var r=new Uint8Array(e),n=0,i="",o=0,u=0;for(n=t;n<r.length;)(u=r[n])>>>7==0?(i+=String.fromCharCode(r[n]),n+=1):252==(252&u)?(o=(3&r[n])<<30,o|=(63&r[n+1])<<24,o|=(63&r[n+2])<<18,o|=(63&r[n+3])<<12,o|=(63&r[n+4])<<6,o|=63&r[n+5],i+=String.fromCharCode(o),n+=6):248==(248&u)?(o=(7&r[n])<<24,o|=(63&r[n+1])<<18,o|=(63&r[n+2])<<12,o|=(63&r[n+3])<<6,o|=63&r[n+4],i+=String.fromCharCode(o),n+=5):240==(240&u)?(o=(15&r[n])<<18,o|=(63&r[n+1])<<12,o|=(63&r[n+2])<<6,o|=63&r[n+3],i+=String.fromCharCode(o),n+=4):224==(224&u)?(o=(31&r[n])<<12,o|=(63&r[n+1])<<6,o|=63&r[n+2],i+=String.fromCharCode(o),n+=3):192==(192&u)?(o=(63&r[n])<<6,o|=63&r[n+1],i+=String.fromCharCode(o),n+=2):(i+=String.fromCharCode(r[n]),n+=1);return i},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/VertexFormat.ts",["cc"],(function(t){var e,r;return{setters:[function(t){e=t.cclegacy,r=t.gfx}],execute:function(){e._RF.push({},"31a0fxmx59EkILXIC6r9iYs","VertexFormat",void 0);t("vfmtTMVertex",[new r.Attribute(r.AttributeName.ATTR_POSITION,r.Format.RGB32F),new r.Attribute(r.AttributeName.ATTR_TEX_COORD,r.Format.RG32F),new r.Attribute(r.AttributeName.ATTR_TEX_COORD1,r.Format.RG32F),new r.Attribute(r.AttributeName.ATTR_COLOR,r.Format.RGBA32F),new r.Attribute(r.AttributeName.ATTR_TEX_COORD2,r.Format.RG32F),new r.Attribute(r.AttributeName.ATTR_TEX_COORD3,r.Format.RG32F),new r.Attribute("a_strokeColor0",r.Format.RG32F),new r.Attribute("a_strokeColor1",r.Format.RG32F)]);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});