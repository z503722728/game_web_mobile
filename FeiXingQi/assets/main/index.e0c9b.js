System.register("chunks:///_virtual/ChessboardConfigUtils.ts",["cc","./ChessboardGenerator.ts"],(function(r){var o,e;return{setters:[function(r){o=r.cclegacy},function(r){e=r.ChessboardGenerator}],execute:function(){o._RF.push({},"ab9a7LVw3xFaLb3k0xGZyiH","ChessboardConfigUtils",void 0);r("ChessboardConfigUtils",function(){function r(){}return r.validatePathContinuity=function(r){var o=[],n=e.generateChessboard(r);n.sort((function(r,o){return r.number-o.number})),console.log("=== 路径连续性检查 ===");for(var s=0;s<n.length-1;s++){var t=n[s],i=n[s+1],a=Math.abs(i.gridPos.row-t.gridPos.row)+Math.abs(i.gridPos.col-t.gridPos.col);console.log(t.number+"("+t.gridPos.row+","+t.gridPos.col+") -> "+i.number+"("+i.gridPos.row+","+i.gridPos.col+") 距离:"+a),1!==a&&o.push("格子"+t.number+"到"+i.number+"不相邻，距离为"+a)}return console.log("====================="),{valid:0===o.length,errors:o}},r.getCellPositions=function(r){var o=e.generateChessboard(r),n=new Map;return o.forEach((function(r){n.set(r.number,r.gridPos)})),n},r}());o._RF.pop()}}}));

System.register("chunks:///_virtual/ChessboardExamples.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ChessboardTypes.ts"],(function(e){var t,s,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy},function(e){n=e.Direction}],execute:function(){s._RF.push({},"f2cb1btQp1L1q+cRMLKy2/B","ChessboardExamples",void 0);e("DefaultChessboardConfig",{size:{rows:9,cols:6},cellSpacing:{cellWidth:104,cellHeight:104,spacing:10},startPosition:{row:0,col:5,style:2},pathSegments:[{direction:n.左,count:5,style:[1,0]},{direction:n.下,count:8,style:[3,4]},{direction:n.右,count:5,style:[5,6]},{direction:n.上,count:6,style:[3,7]},{direction:n.左,count:3,style:[3,8]},{direction:n.下,count:4,style:[3,3]},{direction:n.右,count:1,style:[3,9]}]}),e("ChessboardConfigUtils",function(){function e(){}return e.validateConfig=function(e){var s=[];if((e.size.rows<=0||e.size.cols<=0)&&s.push("棋盘尺寸必须大于0"),e.pathSegments){if(0===e.pathSegments.length&&s.push("至少需要一个路径段"),e.startPosition){var n=e.startPosition,r=n.row,o=n.col;(r<0||r>=e.size.rows||o<0||o>=e.size.cols)&&s.push("起点位置超出边界: ("+r+", "+o+")")}else s.push("使用路径段方式时必须指定起点位置");e.pathSegments.forEach((function(e,t){e.count<=0&&s.push("路径段 "+t+" 的格子数量必须大于0")}))}if(e.segments){0===e.segments.length&&s.push("至少需要一个线段");for(var i,u=new Set,a=t(e.segments);!(i=a()).done;){var c=i.value;c.startNumber>c.endNumber&&s.push("线段编号错误: "+c.startNumber+" > "+c.endNumber);for(var l=c.startNumber;l<=c.endNumber;l++)u.has(l)&&s.push("格子编号重复: "+l),u.add(l);var m=c.startPos,h=m.row,f=m.col;(h<0||h>=e.size.rows||f<0||f>=e.size.cols)&&s.push("起始位置超出边界: ("+h+", "+f+")")}}return{valid:0===s.length,errors:s}},e.getTotalCells=function(e){return e.pathSegments?e.pathSegments.reduce((function(e,t){return e+t.count}),0):e.segments?e.segments.reduce((function(e,t){return e+(t.endNumber-t.startNumber+1)}),0):0},e.getStyleUsage=function(e){var t={};if(e.pathSegments&&e.startPosition){var s=e.startPosition.style||0;t[s]=(t[s]||0)+1,e.pathSegments.forEach((function(e){if(e.style){var s=e.style,n=s[0],r=s[1],o=Math.max(0,e.count-1);t[n]=(t[n]||0)+o,t[r]=(t[r]||0)+1}}))}return t},e.getNumberRange=function(e){if(e.pathSegments)return{min:1,max:this.getTotalCells(e)};if(e.segments){var t=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;return e.segments.forEach((function(e){t=Math.min(t,e.startNumber),s=Math.max(s,e.endNumber)})),{min:t,max:s}}return{min:1,max:1}},e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/ChessboardGenerator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ChessboardTypes.ts"],(function(e){var o,t,r,n;return{setters:[function(e){o=e.extends},function(e){t=e.cclegacy},function(e){r=e.CellState,n=e.Direction}],execute:function(){t._RF.push({},"fc79aASsyNKqpm/DUmnAbK/","ChessboardGenerator",void 0);e("ChessboardGenerator",function(){function e(){}return e.generateChessboard=function(e){var o=[],t=this.generateFromPathSegments(e.startPosition,e.pathSegments);return o.push.apply(o,t),console.log("=== 棋盘生成调试信息 ==="),o.forEach((function(e){console.log("格子"+e.number+": 位置("+e.gridPos.row+", "+e.gridPos.col+"), 样式"+e.style+", 状态"+e.state)})),console.log("========================"),o},e.generateFromPathSegments=function(e,t){var s=[],c=o({},e),l=1,i=t.reduce((function(e,o){return e+o.count}),0)+1;console.log("总格子数: "+i+" (包括起始点)"),console.log("起点: ("+c.row+", "+c.col+"), 起点样式: "+e.style),s.push({number:l,state:r.起点,gridPos:o({},c),style:e.style||0}),console.log("格子"+l+": 起始点, 位置("+c.row+", "+c.col+"), 样式"+(e.style||0)+", 状态"+r[r.起点]),l++;for(var u=0;u<t.length;u++){var a,g,f=t[u],d=this.getDirectionVector(f.direction),h=u===t.length-1;console.log("处理第"+(u+1)+"段: 方向"+n[f.direction]+", 格子数"+f.count+", 样式["+(null==(a=f.style)?void 0:a[0])+", "+(null==(g=f.style)?void 0:g[1])+"]");for(var y=0;y<f.count;y++){c.row+=d.row,c.col+=d.col;var p=r.常态,w=0;if(l===i)p=r.终点,w=f.style?f.style[1]:0;else w=y===f.count-1&&!h?f.style?f.style[1]:0:f.style?f.style[0]:0;s.push({number:l,state:p,gridPos:o({},c),style:w}),console.log("格子"+l+": 段"+(u+1)+"的第"+(y+1)+"个, 位置("+c.row+", "+c.col+"), 样式"+w+", 状态"+r[p]),l++}}return s},e.generateSegmentCells=function(e){for(var o=[],t=e.startNumber,n=e.endNumber,s=e.startPos,c=e.direction,l=e.specialStates,i=this.getDirectionVector(c),u=function(){var e=t+a,n={row:s.row+i.row*a,col:s.col+i.col*a},c=r.常态;if(l){var u=l.find((function(o){return o.number===e}));u&&(c=u.state)}o.push({number:e,state:c,gridPos:n,style:0})},a=0;a<=n-t;a++)u();return o},e.getDirectionVector=function(e){switch(e){case n.右:return{row:0,col:1};case n.下:return{row:1,col:0};case n.左:return{row:0,col:-1};case n.上:return{row:-1,col:0};default:return{row:0,col:0}}},e.createGridMap=function(e){var o=new Map;return e.forEach((function(e){var t=e.gridPos.row+"_"+e.gridPos.col;o.set(t,e)})),o},e.getGridKey=function(e,o){return e+"_"+o},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ChessboardTypes.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c502eOJ4NVJBq3DTSEBxLXG","ChessboardTypes",void 0);e("CellColor",function(e){return e[e["蓝色"]=0]="蓝色",e[e["红色"]=1]="红色",e[e["绿色"]=2]="绿色",e[e["黄色"]=3]="黄色",e}({})),e("CellState",function(e){return e[e["常态"]=0]="常态",e[e["问号"]=1]="问号",e[e["心号"]=2]="心号",e[e["起点"]=3]="起点",e[e["终点"]=4]="终点",e}({})),e("Direction",function(e){return e[e["右"]=0]="右",e[e["下"]=1]="下",e[e["左"]=2]="左",e[e["上"]=3]="上",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonExport.ts",["cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(o){var n;return{setters:[function(c){n=c.cclegacy,o("cc",c)},function(n){o("drongoCC",n)},function(n){o("fgui",n)},function(n){o("drongoGui",n)}],execute:function(){n._RF.push({},"2a54bPglDFEaKMITwv2aDNG","CommonExport",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigBase.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6aa16Nf6rJP87ezxWaLdhoO","ConfigBase",void 0);t("default",function(){function t(){}return t.prototype.init=function(t){var e=this;t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.hasOwnProperty(n)&&(e[n]=t[n])}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(n){var e,t,r,s,i,o,a,u,c;return{setters:[function(n){e=n.inheritsLoose,t=n.createForOfIteratorHelperLoose,r=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){i=n.cclegacy,o=n.JsonAsset},function(n){a=n.autoBindToWindow,u=n.instance_base,c=n.asset}],execute:function(){var f;i._RF.push({},"ab49fwHf11ArqXDrPGKAbkd","ConfigMgr",void 0);var g=a(f=function(n){function i(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))||this).configs=new Map,e.configAssets=new Map,e}e(i,n);var a=i.prototype;return a.loadConfig=function(){var n=r(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.name,!this.configs.has(t)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,c.get("Config/"+t,o,null);case 5:r=n.sent,this.initConfig(e,r);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.initConfig=function(n,e){var t=n.name,r=new Map;for(var s in e.json){var i=e.json[s],o=new n;o.init(i),r.set(parseInt(s),o)}e.decRef(),this.configs.set(t,r)},a.initConfigs=function(){var n=r(s().mark((function n(e){var r,i,a,u,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.get_dir(e,o,null);case 2:for(r=n.sent,i=t(r);!(a=i()).done;)u=a.value,f=u.name.replace(".json",""),this.configAssets.set(f,u);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.getConfig=function(n,e){var t=n.name,r=this.configAssets.get(t);r&&(this.initConfig(n,r),this.configAssets.delete(t));var s=this.configs.get(t);return s?s.get(e):null},a.getAllConfigs=function(n){var e=n.name,t=this.configAssets.get(e);t&&(this.initConfig(n,t),this.configAssets.delete(e));var r=this.configs.get(e);return r||null},a.queryOne=function(n,e){for(var r,s=this.getAllConfigs(n),i=t(s.values());!(r=i()).done;){var o=r.value;if(e(o))return o}return null},a.queryAll=function(n,e){for(var r,s=this.getAllConfigs(n),i=[],o=t(s.values());!(r=o()).done;){var a=r.value;e(a)&&i.push(a)}return i},i}(u))||f;n("configMgr",g.instance());i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Button1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var n,e,o,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.UIPackage,r=t.GButton},function(t){c=t.vm}],execute:function(){var u,i;e._RF.push({},"f65f78RrABD0JadMIaST6m6","Game_Button1",void 0);t("default",c(((i=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this).m_c1=void 0,n}return n(e,t),e.createInstance=function(){return o.createObject("Game","Button1")},e.prototype.onConstruct=function(){this.m_c1=this.getController("c1")},e}(r)).URL="ui://bpp6st2qme221r",i.Dependencies=["Game"],u=i))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Button7.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var n,e,o,u,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.UIPackage,u=t.GButton},function(t){i=t.vm}],execute:function(){var r,c;e._RF.push({},"3ee9fJEXGhAVIV/H85MpV3U","Game_Button7",void 0);t("default",i(((c=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];return(n=t.call.apply(t,[this].concat(o))||this).m_t0=void 0,n}return n(e,t),e.createInstance=function(){return o.createObject("Game","Button7")},e.prototype.onConstruct=function(){this.m_t0=this.getTransition("t0")},e}(u)).URL="ui://bpp6st2qdosa3y",c.Dependencies=["Game"],r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Button9.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var n,e,o,u,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.UIPackage,u=t.GButton},function(t){i=t.vm}],execute:function(){var r,c;e._RF.push({},"19f629ap3VCMqB/IBtzO2LW","Game_Button9",void 0);t("default",i(((c=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];return(n=t.call.apply(t,[this].concat(o))||this).m_t0=void 0,n}return n(e,t),e.createInstance=function(){return o.createObject("Game","Button9")},e.prototype.onConstruct=function(){this.m_t0=this.getTransition("t0")},e}(u)).URL="ui://bpp6st2qdosa4t",c.Dependencies=["Game"],r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Cell_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Cell.ts","./GameTypes.ts"],(function(t){var e,c,s,n,i,o,u;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy,s=t.Label},function(t){n=t.addLogic,i=t.GUILogicBase},function(t){o=t.default},function(t){u=t.PlayerType}],execute:function(){var a;c._RF.push({},"5ce4dVQY9tHfYDskeYeX9x6","Game_Cell_Logic",void 0);t("default",n(o)(a=function(t){function c(){for(var e,c=arguments.length,s=new Array(c),n=0;n<c;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).occupants=[],e}e(c,t);var n=c.prototype;return n.onLoad=function(){this.updateDisplay(),this.UI.m_num._label.cacheMode=s.CacheMode.BITMAP},n.addPiece=function(t){this.occupants.includes(t)||(this.occupants.push(t),this.updateDisplay(),this._log.log("格子"+this.UI.m_num.text+": 添加"+u[t]+"棋子"))},n.removePiece=function(t){var e=this.occupants.indexOf(t);e>-1&&(this.occupants.splice(e,1),this.updateDisplay(),this._log.log("格子"+this.UI.m_num.text+": 移除"+u[t]+"棋子"))},n.hasPiece=function(t){return this.occupants.includes(t)},n.getOccupants=function(){return[].concat(this.occupants)},n.clearAllPieces=function(){this.occupants=[],this.updateDisplay(),this._log.log("格子"+this.UI.m_num.text+": 清空所有棋子")},n.updateDisplay=function(){if(0===this.occupants.length)this.UI.m_c3.selectedIndex=0;else if(1===this.occupants.length){var t=this.occupants[0];this.UI.m_c3.selectedIndex=t===u.P1?1:2}else{var e=this.occupants[this.occupants.length-1];this.UI.m_c3.selectedIndex=e===u.P1?1:2}this._log.log("格子"+this.UI.m_num.text+": m_c3.selectedIndex = "+this.UI.m_c3.selectedIndex+", 棋子: ["+this.occupants.map((function(t){return u[t]})).join(", ")+"]")},c}(i))||a);c._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Cell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,o,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.UIPackage,c=t.GComponent},function(t){i=t.vm}],execute:function(){var r,u;n._RF.push({},"4fa55F1aLhJromYj4fzaKF7","Game_Cell",void 0);t("default",i(((u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).m_c1=void 0,e.m_c2=void 0,e.m_c3=void 0,e.m_num=void 0,e}return e(n,t),n.createInstance=function(){return o.createObject("Game","Cell")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_c3=this.getController("c3"),this.m_num=this.getChild("num")},n}(c)).URL="ui://bpp6st2qme221k",u.Dependencies=["Game"],r=u))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Dialog_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Dialog.ts","./TaskDialogWindow.ts","./GameEvents.ts"],(function(t){var e,n,r,i,s,a,o,c,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.UILayer,i=t.addLogic,s=t.GUIManager,a=t.GUILogicBase},function(t){o=t.default},function(t){c=t.TaskDialogWindow},function(t){l=t.gameEvent}],execute:function(){var u,h;n._RF.push({},"8600dodVdRI7pCBkpcRo+g5","Game_Dialog_Logic",void 0);t("default",i(o)(((h=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).currentTask=null,e.currentPlayer=null,e}e(n,t);var r=n.prototype;return r.onLoad=function(){var t=this;this.UI.m_btn.onClick((function(){return t.onCompleteClick()}),this),this.Data&&this.showTask(this.Data)},r.start=function(){this.Data&&this.showTask(this.Data)},r.showTask=function(t){var e;this.currentTask=t,this.currentPlayer=t.player;var n="P1"===(null==(e=this.currentPlayer)?void 0:e.name)?0:1;this.UI.m_c1.selectedIndex=n,this._log.log("设置UI样式 - 使用玩家编号: "+n),this.UI.m_c2.selectedIndex=this.currentPlayer.characterId,this._log.log("设置m_c2控制器 - 角色ID: "+this.currentPlayer.characterId),this.UI.m_content.text=t.content,this._log.log("显示任务对话框完成: ID="+t.id+", 分类="+t.category+" - "+t.content)},r.hideTask=function(){this.currentTask=null,this.currentPlayer=null},r.onCompleteClick=function(){this.currentTask&&999===this.currentTask.id?l.emit(l.key.DialogClosed,{}):this.currentTask&&this.currentPlayer?l.emit(l.key.TaskCompleted,{task:this.currentTask,player:this.currentPlayer}):console.error("普通任务但缺少必要数据:",{hasTask:!!this.currentTask,hasPlayer:!!this.currentPlayer}),s.close(o),this.hideTask()},r.getCurrentTask=function(){return this.currentTask},r.isVisible=function(){return 3===s.getGUIState(o)},n}(a)).uiOptions={layer:r.TIP,modal:!0,windowCls:c},u=h))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Dialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;n._RF.push({},"23a89hJIzhMAbMh1t4GHuo9","Game_Dialog",void 0);t("default",c(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_c1=void 0,e.m_c2=void 0,e.m_title=void 0,e.m_content=void 0,e.m_btn=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","Dialog")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_title=this.getChild("title"),this.m_content=this.getChild("content"),this.m_btn=this.getChild("btn")},n}(o)).URL="ui://bpp6st2qme221p",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_DiuTouZi_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_DiuTouZi.ts","./Game_Touzi_Logic.ts","./GameEvents.ts","./fairygui.mjs"],(function(i){var t,o,e,n,c,u,a,s,l,r;return{setters:[function(i){t=i.inheritsLoose},function(i){o=i.cclegacy},function(i){e=i.addLogic,n=i.GUIManager,c=i.GUILogicBase},function(i){u=i.default},function(i){a=i.default},function(i){s=i.gameEvent},function(i){l=i.UIPackage,r=i.GRoot}],execute:function(){var g,f;o._RF.push({},"a398euXiOtFIKdSYZ74Jj0p","Game_DiuTouZi_Logic",void 0);i("default",e(u)(((f=function(i){function o(){for(var t,o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];return(t=i.call.apply(i,[this].concat(e))||this).diceLogic=void 0,t}t(o,i);var e=o.prototype;return e.start=function(){this.setupDiceLogic(),this.startDiceAnimation()},e.setupDiceLogic=function(){this.diceLogic=this.UI.m_touzi.Get(a)},e.playDiceSound=function(){try{var i=l.getByName("Game");if(i){var t=i.getItemAssetByName("diutouzi");t&&(r.inst.playOneShotSound(t),this._log.log("播放骰子音效"))}}catch(i){this._log.log("播放骰子音效失败:",i)}},e.startDiceAnimation=function(){var i=this;if(!this.diceLogic)return console.error("骰子逻辑组件未找到"),void this.closeDiceDialog();this._log.log("开始播放骰子动画"),this.playDiceSound(),this.diceLogic.playDiceAnimation((function(t){i._log.log("骰子结果: "+t.value),i.scheduleOnce((function(){s.emit(s.key.DiceRolled,t),i.closeDiceDialog()}),1)}))},e.closeDiceDialog=function(){n.close(u)},e.onDestroy=function(){i.prototype.onDestroy.call(this)},o}(c)).uiOptions={modal:!0},g=f))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/Game_DiuTouZi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var n,e,i,o,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){u=t.vm}],execute:function(){var c,r;e._RF.push({},"aa5f4BCnUdK0ZRmw+OT0CMw","Game_DiuTouZi",void 0);t("default",u(((r=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).m_touzi=void 0,n}return n(e,t),e.createInstance=function(){return i.createObject("Game","DiuTouZi")},e.prototype.onConstruct=function(){this.m_touzi=this.getChild("touzi")},e}(o)).URL="ui://bpp6st2qdosa3u",r.Dependencies=["Game"],c=r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_JueSeSelect_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./PlayerDataModel.ts","./Game_JueSeSelect.ts"],(function(t){var e,n,r,i,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.addLogic,i=t.GUILogicBase},function(t){a=t.playerDataModel},function(t){c=t.default}],execute:function(){var s;n._RF.push({},"f92c0GioMlNTLRuNmbu5H7r","Game_JueSeSelect_Logic",void 0);t("default",r(c)(s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).currentIndex=0,e.maxCharacterCount=2,e.playerNumber=1,e}e(n,t);var r=n.prototype;return r.onLoad=function(){this.setupEventListeners()},r.initializeForPlayer=function(t){this.playerNumber=t,this.initializeCharacterSelection()},r.getCurrentIndex=function(){return this.currentIndex},r.initializeCharacterSelection=function(){this.maxCharacterCount=this.UI.m_c1.pageCount,this.currentIndex=a.getPlayerCharacterId(this.playerNumber),(this.currentIndex<0||this.currentIndex>=this.maxCharacterCount)&&(this.currentIndex=0),this.updateCharacterDisplay()},r.setupEventListeners=function(){this.UI.m_left.onClick(this.onLeftClick,this),this.UI.m_right.onClick(this.onRightClick,this)},r.onLeftClick=function(){this.maxCharacterCount<=1||(this.currentIndex=(this.currentIndex-1+this.maxCharacterCount)%this.maxCharacterCount,this.updateCharacterDisplay())},r.onRightClick=function(){this.maxCharacterCount<=1||(this.currentIndex=(this.currentIndex+1)%this.maxCharacterCount,this.updateCharacterDisplay())},r.updateCharacterDisplay=function(){0!==this.maxCharacterCount&&(this.UI.m_c1.selectedIndex=this.currentIndex,this.updateArrowButtons(),this._log.log("P"+this.playerNumber+"当前预览角色ID: "+this.currentIndex))},r.updateArrowButtons=function(){this.UI.m_left.enabled=this.UI.m_c1.selectedIndex>0,this.UI.m_right.enabled=this.UI.m_c1.selectedIndex<this.maxCharacterCount-1},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_JueSeSelect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,i,c,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.UIPackage,c=e.GComponent},function(e){r=e.vm}],execute:function(){var o,u;n._RF.push({},"82cbaw2JcZK7Zr9dpHeExbn","Game_JueSeSelect",void 0);e("default",r(((u=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))||this).m_c1=void 0,t.m_right=void 0,t.m_left=void 0,t}return t(n,e),n.createInstance=function(){return i.createObject("Game","JueSeSelect")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_right=this.getChild("right"),this.m_left=this.getChild("left")},n}(c)).URL="ui://bpp6st2qdosa2r",u.Dependencies=["Game"],o=u))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_List_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_List.ts","./Game_Cell.ts","./Game_Cell_Logic.ts","./Game_Peaple.ts","./Game_Dialog.ts","./Game_Succ.ts","./ChessboardGenerator.ts","./ChessboardExamples.ts","./GameTypes.ts","./TaskManager.ts","./GameEvents.ts","./fairygui.mjs"],(function(e){var t,n,a,i,r,o,s,l,c,h,u,d,g,y,p,f,m,P,v,C,_,G,b;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){i=e.cclegacy,r=e.tween},function(e){o=e.GUIManager,s=e.addLogic,l=e.GUILogicBase},function(e){c=e.default},function(e){h=e.default},function(e){u=e.default},function(e){d=e.default},function(e){g=e.default},function(e){y=e.default},function(e){p=e.ChessboardGenerator},function(e){f=e.DefaultChessboardConfig},function(e){m=e.PlayerType,P=e.GameState,v=e.DefaultGameConfig},function(e){C=e.taskManager},function(e){_=e.gameEvent},function(e){G=e.UIPackage,b=e.GRoot}],execute:function(){var S;i._RF.push({},"6155ad8NiRPCZe4l7KHhner","Game_List_Logic",void 0);e("default",s(c)(S=function(e){function i(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).chessboardData=[],t.gridMap=new Map,t.cellComponents=new Map,t.cellLogics=new Map,t.players=[],t.playerPieces=new Map,t.currentPlayer=0,t.gameState=P.准备中,t.diceLogic=void 0,t}t(i,e);var s=i.prototype;return s.onLoad=function(){this.setupGameEvents()},s.setupGameEvents=function(){var e=this;_.on(_.key.TaskCompleted,(function(t){e.nextPlayer()}),this),_.on(_.key.NextPlayerTurn,(function(t){e._log.log("=== 收到NextPlayerTurn事件 ==="),e._log.log("事件通知: 轮到 "+t.name+" 了")}),this),_.on(_.key.GameEnded,(function(t){e._log.log("=== 收到GameEnded事件 ==="),e._log.log("事件通知: 游戏结束，获胜者是 "+t.name)}),this),_.on(_.key.DialogClosed,(function(t){e._log.log("=== 收到DialogClosed事件 ==="),e._log.log("当前游戏状态: "+e.gameState)}),this)},s.generateChessboard=function(e){this.clearChessboard(),this.chessboardData=p.generateChessboard(e),this.gridMap=p.createGridMap(this.chessboardData),this.createChessboardUI(),this._log.log("棋盘生成完成，共",this.chessboardData.length,"个格子")},s.createChessboardUI=function(){var e=this;this.clearChessboardComponents(),this.chessboardData.forEach((function(t){var n=e.createCellComponent(t);e.cellComponents.set(t.number,n),e.UI.addChild(n);var a=n.Get(u);a&&e.cellLogics.set(t.number,a)}))},s.createCellComponent=function(e){var t=this,n=h.createInstance();return n.m_num.text=e.number.toString(),n.m_c1.selectedIndex=e.style,n.m_c2.selectedIndex=e.state,this.setCellPosition(n,e),n.onClick((function(){return t.onCellClick(e.number)}),this),n},s.setCellPosition=function(e,t){var n,a,i,r=(null==(n=f.cellSpacing)?void 0:n.cellWidth)||60,o=(null==(a=f.cellSpacing)?void 0:a.cellHeight)||60,s=(null==(i=f.cellSpacing)?void 0:i.spacing)||5,l=t.gridPos.col*(r+s)+r/2,c=t.gridPos.row*(o+s)+o/2;e.setPosition(l,c)},s.clearChessboardComponents=function(){this.cellComponents.forEach((function(e){e.parent&&e.parent.removeChild(e)})),this.cellComponents.clear(),this.cellLogics.clear()},s.initializePlayers=function(e,t){var n=this;void 0===e&&(e=0),void 0===t&&(t=1),this.clearPlayers(),this.players=[{type:m.P1,currentPosition:1,isFinished:!1,name:"P1",characterId:e},{type:m.P2,currentPosition:1,isFinished:!1,name:"P2",characterId:t}],this.createPlayerPieces(),this.players.forEach((function(e){var t=n.cellLogics.get(e.currentPosition);t&&t.addPiece(e.type)})),this.updatePlayersZOrder(),this._log.log("玩家初始化完成","P1角色ID: "+e+", P2角色ID: "+t)},s.createPlayerPieces=function(){var e=this;this.players.forEach((function(t,n){var a=d.createInstance();a.m_c2.selectedIndex=n+1,a.m_c1.selectedIndex=t.characterId,e._log.log("创建"+t.name+"棋子 - m_c1: "+n+", m_c2: "+t.characterId),e.playerPieces.set(t.type,a),e.UI.addChild(a)})),this.updatePlayerPositions()},s.updatePlayerPositions=function(){var e=this;this.players.forEach((function(t){var n=e.playerPieces.get(t.type),a=e.cellComponents.get(t.currentPosition);if(n&&a){n.setPosition(a.x,a.y+15),n.m_icon&&(n.m_icon.scaleX=1)}})),this.updatePlayersZOrder()},s.updatePlayersZOrder=function(){var e=this,t=[];this.playerPieces.forEach((function(n,a){var i=e.players.find((function(e){return e.type===a}));if(n&&i){var r,o=(null==(r=e.players[e.currentPlayer])?void 0:r.type)===a;t.push({piece:n,y:n.y,playerName:i.name,playerType:a,isCurrentPlayer:o})}})),t.sort((function(e,t){return e.y!==t.y?e.y-t.y:e.isCurrentPlayer&&!t.isCurrentPlayer?1:!e.isCurrentPlayer&&t.isCurrentPlayer?-1:0})),t.forEach((function(e,n){if(e.piece.parent){var a=e.piece.parent.numChildren,i=Math.max(0,a-t.length)+n;e.piece.parent.setChildIndex(e.piece,Math.min(i,a-1))}}));var n=t.map((function(e){var t=e.isCurrentPlayer?"[当前]":"";return""+e.playerName+t+"(y:"+e.y.toFixed(1)+")"})).join(" < ");this._log.log("棋子层级排序: "+n+" (Y值小到大，层级低到高，相同Y值时当前玩家优先)")},s.moveCurrentPlayer=function(e){var t=this,n=this.players[this.currentPlayer],a=this.chessboardData.length,i=Math.min(n.currentPosition+e,a);this._log.log(n.name+" 从 "+n.currentPosition+" 移动到 "+i+" (总共"+a+"格)");var r=this.cellLogics.get(n.currentPosition);r&&r.removePiece(n.type),this.updatePlayersZOrder(),this.playMoveAnimation(n,i,(function(){var e=t.cellLogics.get(i);e&&e.addPiece(n.type),n.currentPosition=i,t.updatePlayersZOrder(),i>=a?(n.isFinished=!0,t._log.log(n.name+" 到达终点！"),t.checkGameEnd()):t.showTaskDialog(n)}))},s.playMoveAnimation=function(e,t,n){var a=this.playerPieces.get(e.type);if(a){var i=this.calculateMovePath(e.currentPosition,t);this.moveAlongPath(a,i,0,n)}},s.calculateMovePath=function(e,t){for(var n=[],a=e+1;a<=t;a++)n.push(a);return n},s.moveAlongPath=function(e,t,n,a){var i=this;if(n>=t.length)a();else{var o=t[n],s=this.cellComponents.get(o);if(s){var l=s.x,c=s.y+15,h=l-e.x,u=c-e.y;this.updatePieceDirection(e,h,u);var d=v.moveAnimation;r(e).to(.5*d.duration,{x:l-h/2,y:c-u/2,scaleX:d.middleScale,scaleY:d.middleScale}).to(.5*d.duration,{x:l,y:c,scaleX:d.endScale,scaleY:d.endScale}).call((function(){i.updatePlayersZOrder(),i.moveAlongPath(e,t,n+1,a)})).start(),this.playCellScaleAnimation(s,(function(){}))}else this.moveAlongPath(e,t,n+1,a)}},s.updatePieceDirection=function(e,t,n){if(e&&e.m_icon){var a=1;Math.abs(t)>Math.abs(n)?t>0?a=-1:t<0&&(a=1):Math.abs(n)>0&&(n>0?a=-1:n<0&&(a=1)),e.m_icon.scaleX=a,this._log.log("更新棋子朝向: moveX="+t.toFixed(1)+", moveY="+n.toFixed(1)+", scaleX="+a)}},s.playCellScaleAnimation=function(e,t){var n=this,a=v.moveAnimation;r(e).delay(.2*a.duration).call((function(){n.playMoveSound()})).to(.4*a.duration,{scaleX:.8,scaleY:.8}).call((function(){r(e).to(.4*a.duration,{scaleX:1,scaleY:1}).call((function(){t()})).start()})).start()},s.playMoveSound=function(){try{var e=G.getByName("Game");if(e){var t=e.getItemAssetByName("move");t&&b.inst.playOneShotSound(t)}}catch(e){this._log.log("播放移动音效失败:",e)}},s.playWinSound=function(){try{var e=G.getByName("Game");if(e){var t=e.getItemAssetByName("win");t&&b.inst.playOneShotSound(t)}}catch(e){this._log.log("播放胜利音效失败:",e)}},s.showWinScreen=function(){var e=n(a().mark((function e(t){var n,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._log.log("显示胜利界面 - 获胜者: "+t.name+", 类型: "+t.type+", 角色ID: "+t.characterId),n={winner:t},e.next=4,o.open(y,n);case 4:_.once(_.key.WinScreenClosed,(function(){i.resetGame()}),this);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.resetGame=function(){var e=this;this.gameState=P.游戏中,this.currentPlayer=0,this.clearAllCellStates(),this.players.forEach((function(e){e.currentPosition=1,e.isFinished=!1})),this.updatePlayerPositions(),this.players.forEach((function(t){var n=e.cellLogics.get(t.currentPosition);n&&n.addPiece(t.type)})),this.updatePlayersZOrder(),this._log.log("游戏已重置，可以重新开始游戏")},s.clearAllCellStates=function(){this.cellLogics.forEach((function(e,t){e.clearAllPieces()})),this._log.log("已清理所有格子上的棋子状态")},s.nextPlayer=function(){var e;this._log.log("=== 切换玩家 ==="),this._log.log("切换前 - 当前玩家索引: "+this.currentPlayer+", 玩家: "+(null==(e=this.players[this.currentPlayer])?void 0:e.name)),this.currentPlayer=(this.currentPlayer+1)%this.players.length;var t=this.players[this.currentPlayer];this._log.log("切换后 - 当前玩家索引: "+this.currentPlayer+", 玩家: "+t.name+", 类型: "+t.type),this.playPlayerTurnAnimation(t.type),_.emit(_.key.NextPlayerTurn,t)},s.playPlayerTurnAnimation=function(e){var t=this.UI.parent;t?e===m.P1?t.m_t0&&(t.m_t0.play(),this._log.log("播放P1玩家轮次动画 (t0)")):e===m.P2&&t.m_t1&&(t.m_t1.play(),this._log.log("播放P2玩家轮次动画 (t1)")):this._log.log("无法获取Game_Main组件，跳过动画播放")},s.showTaskDialog=function(){var e=n(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._log.log("显示任务对话框 - 当前玩家: "+t.name+", 角色ID: "+t.characterId),n=C.getRandomTaskForPlayer(t),this._log.log("获取到的任务: ID="+n.id),e.next=5,o.open(g,n);case 5:e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.checkGameEnd=function(){var e=this.players.filter((function(e){return e.isFinished}));if(e.length>0){this.gameState=P.结束;var t=e[0];this._log.log("游戏结束！获胜者：",t.name),this.playWinSound(),this.showWinScreen(t),_.emit(_.key.GameEnded,t)}},s.startGame=function(){this.gameState=P.游戏中,this.currentPlayer=0;var e=this.players[this.currentPlayer];e&&this.playPlayerTurnAnimation(e.type),this._log.log("游戏开始！轮到",this.players[this.currentPlayer].name)},s.canRollDice=function(){return this.gameState===P.游戏中&&!this.isPlayerMoving()},s.handleDiceResult=function(e){this.gameState===P.游戏中&&(this._log.log(this.players[this.currentPlayer].name+" 摇骰子结果: "+e.value),this.moveCurrentPlayer(e.value))},s.isPlayerMoving=function(){return this.diceLogic&&this.diceLogic.getIsAnimating()},s.onCellClick=function(e){this._log.log("点击了格子:",e);var t=this.chessboardData.find((function(t){return t.number===e}));t&&this._log.log("格子信息:",{"编号":t.number,"状态":t.style,"位置":t.gridPos})},s.clearChessboard=function(){this.cellComponents.forEach((function(e){e.parent&&e.parent.removeChild(e),e.dispose()})),this.cellComponents.clear(),this.chessboardData=[],this.gridMap.clear()},s.clearPlayers=function(){this.playerPieces.forEach((function(e){e.dispose()})),this.playerPieces.clear(),this.players=[],this.currentPlayer=0},s.getCellComponent=function(e){return this.cellComponents.get(e)},s.getCellDataByGrid=function(e,t){var n=p.getGridKey(e,t);return this.gridMap.get(n)},s.getAllCellData=function(){return[].concat(this.chessboardData)},s.updateChessboard=function(e){this.generateChessboard(e)},s.onDestroy=function(){_.targetOff(this),this.clearChessboard(),this.clearPlayers(),o.close(g)},i}(l))||S);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,c=t.GComponent},function(t){o=t.vm}],execute:function(){var r,s;n._RF.push({},"3ac27QcEbZEe61ILSdWPDLX","Game_List",void 0);t("default",o(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))||this).m_list=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","List")},n.prototype.onConstruct=function(){this.m_list=this.getChild("list")},n}(c)).URL="ui://bpp6st2qme221l",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Main_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Main.ts","./Game_List_Logic.ts","./Game_DiuTouZi.ts","./ChessboardExamples.ts","./GameEvents.ts","./PlayerDataModel.ts","./fairygui.mjs"],(function(t){var i,e,o,n,s,l,a,c,r,u,g,h,f;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,o=t.AudioSourceComponent},function(t){n=t.GUIManager,s=t.GUILogicBase,l=t.addLogic},function(t){a=t.default},function(t){c=t.default},function(t){r=t.default},function(t){u=t.DefaultChessboardConfig},function(t){g=t.gameEvent},function(t){h=t.playerDataModel},function(t){f=t.UIPackage}],execute:function(){var d;e._RF.push({},"6414axnOOZKdLMRghXK77up","Game_Main_Logic",void 0);t("default",l(a)(d=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).listLogic=void 0,i}i(e,t);var s=e.prototype;return s.start=function(){var t=this;this.listLogic=this.UI.m_list.Get(c),this.listLogic?this.initGame():this.scheduleOnce((function(){t.listLogic=t.UI.m_list.Get(c),t.listLogic&&t.initGame()}),.1),this.setupEventListeners()},s.setupEventListeners=function(){this.UI.m_roll.onClick(this.onRollClick,this),g.on(g.key.DiceRolled,this.onDiceRolled,this)},s.onRollClick=function(){this.UI.m_roll.enabled&&this.listLogic&&this.listLogic.canRollDice()&&(this._log.log("点击投骰子按钮，打开骰子界面"),this.UI.m_roll.enabled=!1,n.open(r))},s.onDiceRolled=function(t){this._log.log("收到骰子结果: "+t.value),this.UI.m_roll.enabled=!0,this.listLogic&&this.listLogic.handleDiceResult(t)},s.initGame=function(){this._log.log("初始化飞行棋游戏");var t=h.player1CharacterId,i=h.player2CharacterId;this._log.log("P1选择角色ID: "+t+", P2选择角色ID: "+i),this.listLogic.generateChessboard(u),this.listLogic.initializePlayers(t,i),this.listLogic.startGame()},s.restartGame=function(){this.initGame()},s.getListLogic=function(){return this.listLogic},s.playBGM=function(t,i,e){var n=f.getByName(i).getItemAssetByName(e),s=t.addComponent(o);return s.isValid&&(s.clip=n,s.volume=1,s.loop=!0,s.play()),s},s.onDestroy=function(){g.targetOff(this),t.prototype.onDestroy.call(this)},e}(s))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var i,n,e,o,s;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.UIPackage,o=t.GComponent},function(t){s=t.vm}],execute:function(){var r,a;n._RF.push({},"64803VbHF1B/ItvafCsZQRz","Game_Main",void 0);t("default",s(((a=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).m_list=void 0,i.m_back=void 0,i.m_info=void 0,i.m_roll=void 0,i.m_t0=void 0,i.m_t1=void 0,i}return i(n,t),n.createInstance=function(){return e.createObject("Game","Main")},n.prototype.onConstruct=function(){this.m_list=this.getChild("list"),this.m_back=this.getChild("back"),this.m_info=this.getChild("info"),this.m_roll=this.getChild("roll"),this.m_t0=this.getTransition("t0"),this.m_t1=this.getTransition("t1")},n}(o)).URL="ui://bpp6st2qfm8yl",a.Dependencies=["Game"],r=a))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Peaple_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Peaple.ts"],(function(e){var o,t,n,i,u;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy},function(e){n=e.GUILogicBase,i=e.addLogic},function(e){u=e.default}],execute:function(){var c;t._RF.push({},"336d82rNwhObboxr1lezYPh","Game_Peaple_Logic",void 0);e("default",i(u)(c=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){n.setSortRoot(this.node,!0)},t}(n))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Peaple.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,o,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.UIPackage,c=e.GComponent},function(e){i=e.vm}],execute:function(){var r,a;n._RF.push({},"ef78ajW2VxGTJw4aMGHudCL","Game_Peaple",void 0);e("default",i(((a=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).m_c1=void 0,t.m_c2=void 0,t.m_icon=void 0,t}return t(n,e),n.createInstance=function(){return o.createObject("Game","Peaple")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_icon=this.getChild("icon")},n}(c)).URL="ui://bpp6st2qme221o",a.Dependencies=["Game"],r=a))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_SelectGender_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./PlayerDataModel.ts","./Game_SelectGender.ts","./Game_JueSeSelect_Logic.ts","./Game_Main.ts"],(function(e){var t,i,n,r,o,c,a,s,l,u,p;return{setters:[function(e){t=e.inheritsLoose,i=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){o=e.addLogic,c=e.GUILogicBase,a=e.GUIManager},function(e){s=e.playerDataModel},function(e){l=e.default},function(e){u=e.default},function(e){p=e.default}],execute:function(){var h;r._RF.push({},"f5a9aD1OH1Eibrb+ZPihRMI","Game_SelectGender_Logic",void 0);e("default",o(l)(h=function(e){function r(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).p1Logic=void 0,t.p2Logic=void 0,t}t(r,e);var o=r.prototype;return o.onLoad=function(){this.initializePlayerSelections(),this.setupEventListeners()},o.initializePlayerSelections=function(){this.p1Logic=this.UI.m_P1.Get(u),this.p2Logic=this.UI.m_P2.Get(u),this.p1Logic&&this.p1Logic.initializeForPlayer(1),this.p2Logic&&this.p2Logic.initializeForPlayer(2)},o.setupEventListeners=function(){this.UI.m_ok.onClick(this.onConfirmClick,this)},o.onConfirmClick=function(){var e=this.p1Logic?this.p1Logic.getCurrentIndex():0,t=this.p2Logic?this.p2Logic.getCurrentIndex():1;s.setPlayer1Character(e),s.setPlayer2Character(t),this._log.log("角色选择完成 - P1: "+e+", P2: "+t),this.enterGame()},o.enterGame=function(){var e=i(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.close(l),e.next=4,a.open(p);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("进入游戏失败:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),r}(c))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/Game_SelectGender.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,i,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.UIPackage,o=e.GComponent},function(e){c=e.vm}],execute:function(){var r,s;n._RF.push({},"c5caeCAa19GGIGgHYueihJl","Game_SelectGender",void 0);e("default",c(((s=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).m_P1=void 0,t.m_P2=void 0,t.m_ok=void 0,t}return t(n,e),n.createInstance=function(){return i.createObject("Game","SelectGender")},n.prototype.onConstruct=function(){this.m_P1=this.getChild("P1"),this.m_P2=this.getChild("P2"),this.m_ok=this.getChild("ok")},n}(o)).URL="ui://bpp6st2qdosa2j",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Succ_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Succ.ts","./Game_SelectGender.ts","./GameEvents.ts","./WinDialogWindow.ts","./Game_Main.ts"],(function(e){var t,n,i,o,c,s,a,r,l,u,h;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.UILayer,o=e.addLogic,c=e.GUIManager,s=e.GUILogicBase},function(e){a=e.default},function(e){r=e.default},function(e){l=e.gameEvent},function(e){u=e.WinDialogWindow},function(e){h=e.default}],execute:function(){var d,m;n._RF.push({},"229b4jeKDdOy6nhec1eeLHP","Game_Succ_Logic",void 0);e("default",o(a)(((m=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.onLoad=function(){this.setupUI(),this.setupEventListeners()},i.setupUI=function(){var e=this.Data;if(e&&e.winner){var t=e.winner;this._log.log("显示胜利界面 - 获胜者: "+t.name+", 角色ID: "+t.characterId);var n="P1"===t.name?0:1;this.UI.m_c1.selectedIndex=n,this.UI.m_people&&"number"==typeof t.characterId&&(this.UI.m_people.m_c1.selectedIndex=t.characterId,this._log.log("设置角色显示 - m_c1: "+n+", m_c2: "+t.characterId))}else console.error("未找到获胜者数据")},i.setupEventListeners=function(){this.UI.m_home.onClick(this.onHomeClick,this),this.UI.m_btn.onClick(this.onRestartClick,this)},i.onHomeClick=function(){this._log.log("返回角色选择界面"),c.close(a),c.open(r),c.close(h)},i.onRestartClick=function(){this._log.log("重新开始游戏"),l.emit(l.key.WinScreenClosed),c.close(a)},n}(s)).uiOptions={layer:i.TIP,modal:!0,windowCls:u},d=m))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Succ.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,i,n,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;i._RF.push({},"073b9pwT8dHpKgcmH5r/0QP","Game_Succ",void 0);t("default",c(((s=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).m_c1=void 0,e.m_title=void 0,e.m_btn=void 0,e.m_people=void 0,e.m_home=void 0,e}return e(i,t),i.createInstance=function(){return n.createObject("Game","Succ")},i.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_title=this.getChild("title"),this.m_btn=this.getChild("btn"),this.m_people=this.getChild("people"),this.m_home=this.getChild("home")},i}(o)).URL="ui://bpp6st2qdosa4r",s.Dependencies=["Game"],r=s))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Touzi_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Touzi.ts"],(function(e){var i,t,n,o,u,a;return{setters:[function(e){i=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){o=e.addLogic,u=e.GUILogicBase},function(e){a=e.default}],execute:function(){var s,c;n._RF.push({},"393b9JrtzNJzopm1xE5p6FW","Game_Touzi_Logic",void 0);e("default",o(a)(((c=function(e){function n(){for(var i,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(i=e.call.apply(e,[this].concat(n))||this).isAnimating=!1,i.onAnimationComplete=void 0,i.cumulativeWeights=[],i}i(n,e);var o=n.prototype;return o.onLoad=function(){this.initializeCumulativeWeights(),this.UI.m_c1.selectedIndex=0},o.initializeCumulativeWeights=function(){var e=n.DICE_WEIGHTS.reduce((function(e,i){return e+i.weight}),0);100!==e&&console.warn("骰子权重配置异常！总权重为"+e+"%，应为100%"),this.cumulativeWeights=[];for(var i,o=0,u=t(n.DICE_WEIGHTS);!(i=u()).done;){o+=i.value.weight,this.cumulativeWeights.push(o)}this._log.log("骰子概率配置:",n.DICE_WEIGHTS.map((function(e){return e.value+"点:"+e.weight+"%"})).join(", "))},o.onDiceClick=function(){this.isAnimating||this.playDiceAnimation()},o.generateWeightedDiceResult=function(){for(var e=100*Math.random(),i=0;i<this.cumulativeWeights.length;i++)if(e<this.cumulativeWeights[i])return n.DICE_WEIGHTS[i].value;return n.DICE_WEIGHTS[n.DICE_WEIGHTS.length-1].value},o.playDiceAnimation=function(e){var i=this;if(!this.isAnimating){this.isAnimating=!0,this.onAnimationComplete=e;var t=this.generateWeightedDiceResult(),n=function(e){var i=e/24;return i<.3?.015:i<.7?.025:.04},o=0,u=1;this.UI.m_c1.selectedIndex=0,this.UI.m_c2.selectedIndex=u;for(var a=0,s=0;s<24;s++)a+=n(s);this._log.log("🎲 开始骰子动画 - 目标结果:"+t+"点，总时长:"+a.toFixed(2)+"秒");!function e(){if(o>=24){i.UI.m_c1.selectedIndex=t-1,i.UI.m_c2.selectedIndex=0,i.isAnimating=!1;var a={value:t};return i.onAnimationComplete&&i.onAnimationComplete(a),void i._log.log("🎯 骰子动画完成！最终结果: "+t+"点")}i.UI.m_c2.selectedIndex=u,++u>4&&(u=1),o++;var s=n(o-1);i.scheduleOnce((function(){e()}),s)}()}},o.setDiceValue=function(e){e>=1&&e<=6&&(this.UI.m_c1.selectedIndex=e-1)},o.getCurrentValue=function(){return this.UI.m_c1.selectedIndex+1},o.getIsAnimating=function(){return this.isAnimating},o.stopAnimation=function(){this.isAnimating&&(this.isAnimating=!1,this.onAnimationComplete=void 0,this.unscheduleAllCallbacks(),this.UI.m_c2.selectedIndex=0,this._log.log("🛑 骰子动画已强制停止"))},o.onDestroy=function(){this.stopAnimation()},n}(u)).DICE_WEIGHTS=[{value:1,weight:25},{value:2,weight:25},{value:3,weight:20},{value:4,weight:15},{value:5,weight:10},{value:6,weight:5}],s=c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Touzi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GButton},function(t){c=t.vm}],execute:function(){var r,u;n._RF.push({},"b0b312XQExF7q+IduSduKqZ","Game_Touzi",void 0);t("default",c(((u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_c1=void 0,e.m_c2=void 0,e.m_t0=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","Touzi")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_t0=this.getTransition("t0")},n}(o)).URL="ui://bpp6st2qme221m",u.Dependencies=["Game"],r=u))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameBinder.ts",["cc","./drongo-gui.mjs","./fairygui.mjs","./Game_SelectGender.ts","./Game_JueSeSelect.ts","./Game_DiuTouZi.ts","./Game_Button7.ts","./Game_Succ.ts","./Game_Button9.ts","./Game_Main.ts","./Game_Cell.ts","./Game_List.ts","./Game_Touzi.ts","./Game_Peaple.ts","./Game_Dialog.ts"],(function(t){var e,n,i,u,s,o,a,f,c,l,d,r,m,x,G;return{setters:[function(t){e=t.cclegacy},function(t){n=t.registerBinder},function(t){i=t.UIObjectFactory},function(t){u=t.default},function(t){s=t.default},function(t){o=t.default},function(t){a=t.default},function(t){f=t.default},function(t){c=t.default},function(t){l=t.default},function(t){d=t.default},function(t){r=t.default},function(t){m=t.default},function(t){x=t.default},function(t){G=t.default}],execute:function(){var _;e._RF.push({},"de59ahxwbxAXYHC/EFeTEKF","GameBinder",void 0);t("default",n(_=function(){function t(){}return t.prototype.bindAll=function(){i.setExtension(u.URL,u),i.setExtension(s.URL,s),i.setExtension(o.URL,o),i.setExtension(a.URL,a),i.setExtension(f.URL,f),i.setExtension(c.URL,c),i.setExtension(l.URL,l),i.setExtension(d.URL,d),i.setExtension(r.URL,r),i.setExtension(m.URL,m),i.setExtension(x.URL,x),i.setExtension(G.URL,G)},t}())||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvents.ts",["cc","./drongo-cc.mjs"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.event_target}],execute:function(){t._RF.push({},"b5fc6kDkK1ISKsbd/iDCyCW","GameEvents",void 0);e("gameEvent",new n);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameTypes.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8538fcy9OhMFJZKxitfnwsd","GameTypes",void 0);e("PlayerType",function(e){return e[e.P1=0]="P1",e[e.P2=1]="P2",e}({}));var o=e("TaskCategory",function(e){return e.DAILY_INTERACTION="A",e.INTIMATE_CHALLENGE="B",e.RANDOM_SURPRISE="C",e}({}));e("GameState",function(e){return e[e["准备中"]=0]="准备中",e[e["游戏中"]=1]="游戏中",e[e["暂停"]=2]="暂停",e[e["结束"]=3]="结束",e}({})),e("DefaultGameConfig",{moveAnimation:{duration:.5,easing:7,middleScale:1.2,endScale:1},diceAnimationTime:1}),e("DefaultTaskConfig",{dailyInteractionTasks:[{id:101,content:"Tell me about your favorite childhood memory",category:o.DAILY_INTERACTION},{id:102,content:"Share what made you smile today",category:o.DAILY_INTERACTION},{id:103,content:"Describe your ideal weekend plan",category:o.DAILY_INTERACTION},{id:104,content:"What's your favorite season and why?",category:o.DAILY_INTERACTION},{id:105,content:"Tell me about a book or movie you recently enjoyed",category:o.DAILY_INTERACTION}],intimateChallengeTasks:[{id:201,content:"Share three things you're grateful for about our friendship",category:o.INTIMATE_CHALLENGE},{id:202,content:"Tell me about a time when you felt most proud of yourself",category:o.INTIMATE_CHALLENGE},{id:203,content:"What's one thing you've always wanted to try but haven't yet?",category:o.INTIMATE_CHALLENGE},{id:204,content:"Describe your biggest dream or goal for the future",category:o.INTIMATE_CHALLENGE},{id:205,content:"Share a moment when someone's kindness made a difference in your life",category:o.INTIMATE_CHALLENGE}],randomSurpriseTasks:[{id:301,content:"Do your best impression of a famous person or character",category:o.RANDOM_SURPRISE},{id:302,content:"Create a short poem about the weather right now",category:o.RANDOM_SURPRISE},{id:303,content:"Demonstrate a dance move or teach me one",category:o.RANDOM_SURPRISE},{id:304,content:"Make up a funny story using three random objects in the room",category:o.RANDOM_SURPRISE},{id:305,content:"Sing happy birthday in a funny voice or style",category:o.RANDOM_SURPRISE}]});t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonExport.ts","./ConfigBase.ts","./ChessboardConfigUtils.ts","./ChessboardExamples.ts","./ChessboardGenerator.ts","./GameEvents.ts","./ConfigMgr.ts","./PoolMgr.ts","./TaskManager.ts","./ChessboardTypes.ts","./GameTypes.ts","./PlayerDataModel.ts","./StartView.ts","./GameBinder.ts","./Game_Button1.ts","./Game_Button7.ts","./Game_Button9.ts","./Game_Cell.ts","./Game_Cell_Logic.ts","./Game_Dialog.ts","./Game_Dialog_Logic.ts","./Game_DiuTouZi.ts","./Game_DiuTouZi_Logic.ts","./Game_JueSeSelect.ts","./Game_JueSeSelect_Logic.ts","./Game_List.ts","./Game_List_Logic.ts","./Game_Main.ts","./Game_Main_Logic.ts","./Game_Peaple.ts","./Game_Peaple_Logic.ts","./Game_SelectGender.ts","./Game_SelectGender_Logic.ts","./Game_Succ.ts","./Game_Succ_Logic.ts","./Game_Touzi.ts","./Game_Touzi_Logic.ts","./TaskDialogWindow.ts","./WinDialogWindow.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerDataModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(a){var t,r,e,n;return{setters:[function(a){t=a.inheritsLoose,r=a.createClass},function(a){e=a.cclegacy},function(a){n=a.IDataModel}],execute:function(){e._RF.push({},"2866dcyiSJImZDjn/EcWxMY","PlayerDataModel",void 0);var c=function(){this.isInGame=!1,this.currentRound=0,this.currentPlayer=1};a("playerDataModel",new(function(a){function e(){return a.apply(this,arguments)||this}t(e,a);var n=e.prototype;return n.clearGameData=function(){var a=new c;Object.assign(this.dRunData,a)},n.getPlayerCharacterId=function(a){return 1===a?this.dLocalData.player1CharacterId:this.dLocalData.player2CharacterId},n.setPlayerCharacter=function(a,t){return!(t<0)&&(1===a?this.dLocalData.player1CharacterId=t:this.dLocalData.player2CharacterId=t,!0)},n.setPlayer1Character=function(a){return this.setPlayerCharacter(1,a)},n.setPlayer2Character=function(a){return this.setPlayerCharacter(2,a)},r(e,[{key:"player1CharacterId",get:function(){return this.dLocalData.player1CharacterId}},{key:"player2CharacterId",get:function(){return this.dLocalData.player2CharacterId}}]),e}(n))(new function(){this.player1CharacterId=0,this.player2CharacterId=1},new c));e._RF.pop()}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,r,o,a,i,s,c,u,l,f,p,h,b;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.instantiate,i=e.Prefab},function(e){s=e.PoolBuilder,c=e.instance_base,u=e.asset,l=e.error},function(e){f=e.GTextField,p=e.AutoSizeType,h=e.UIPackage},function(e){b=e.GUIManager}],execute:function(){o._RF.push({},"04672eWqVFIKJiVK6TVkrA3","PoolMgr",void 0);e("objPoolMgr",function(e){function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._prefabpools=new Map,t._gobjpools=new Map,t._txtPool=null,t}t(o,e);var c=o.prototype;return c.getPrefabPool=function(){var e=n(r().mark((function e(t,o){var c,l,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=""+o+t,this._prefabpools.has(c)){e.next=7;break}return l=null,e.next=5,s().create(n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.next=3,u.get(t,i,null,{bundle_s:o});case 3:l=e.sent;case 4:return e.abrupt("return",a(l));case 5:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent=null,e.active=!0,e})).clear((function(e){var t;e.forEach((function(e){e.destroy()})),null==(t=l)||t.decRef(),l=null})).initialSize(5).maxSize(50).buildAsync();case 5:f=e.sent,this._prefabpools.set(c,f);case 7:return e.abrupt("return",this._prefabpools.get(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getGobjPool=function(){var e=n(r().mark((function e(t,o){var a,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=""+t+o,this._gobjpools.has(a)){e.next=7;break}return i=null,e.next=5,s().create(n(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=7;break}if(i=h.getByName(t)){e.next=6;break}return e.next=5,b.loadPackage(t);case 5:i=e.sent;case 6:b.setPackageRefCount(t);case 7:return(n=i.createObject(o))||l("create gobj "+t+"/"+o+" failed,请检查资源是否存在"),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()})),b.setPackageRefCount(t,-1),i=null})).initialSize(5).maxSize(50).buildAsync();case 5:c=e.sent,this._gobjpools.set(a,c);case 7:return e.abrupt("return",this._gobjpools.get(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getTxtPool=function(){return this._txtPool||(this._txtPool=s().create((function(){return new f})).reset((function(e){return e.fontSize=20,e.text="",e.setPivot(.5,1,!0),e.autoSize=p.Both,e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()}))})).initialSize(5).maxSize(100).buildSync()),this._txtPool},c.clear=function(){this._prefabpools.forEach((function(e){e.clear(),e.destroy()})),this._prefabpools.clear(),this._gobjpools.forEach((function(e){e.clear(),e.destroy()})),this._gobjpools.clear(),this._txtPool&&(this._txtPool.clear(),this._txtPool.destroy(),this._txtPool=null)},o}(c).instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/StartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./CommonExport.ts","./fairygui.mjs","./Game_SelectGender.ts"],(function(e){var t,r,o,n,i,a,s,l,c,u,g,p,h,d,b,f,v,y,m,w,B,S,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.ProgressBar,g=e.Node,p=e.color,h=e.view,d=e.AudioSourceComponent,b=e.tween,f=e.Component},function(e){v=e.GUIManager,y=e.AllBinder},null,function(e){m=e.UIConfig,w=e.registerFont,B=e.GRoot,S=e.UIPackage},function(e){x=e.default}],execute:function(){var I,G,z,F,j,k,C,P;s._RF.push({},"b717ey19TVBBpBqTI0xPCo1","StartView",void 0);var U=l.ccclass,M=l.property;e("default",(I=M(c),G=M(u),z=M(g),U((k=t((j=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"label",k,n(t)),o(t,"progressBar",C,n(t)),o(t,"bg",P,n(t)),t.progressObj={value:0},t}r(t,e);var s=t.prototype;return s.onLoad=function(){m.buttonSoundVolumeScale=1,m.bringWindowToFrontOnClick=!1,w("Inter-BoldItalic"),m.defaultFont="Inter-BoldItalic",m.modalLayerColor=p(0,0,0,100),this.progressBar.progress=0,this.label.string="0%",this.progressObj.value=0},s.adaptBackgroundSize=function(){if(this.bg)try{var e=B.inst,t=e.width,r=e.height,o=h.getDesignResolutionSize(),n=h.getVisibleSize();console.log("FairyGUI适配信息:\n                FGUI根节点尺寸: "+t+" x "+r+"\n                设计分辨率: "+o.width+" x "+o.height+"\n                屏幕尺寸: "+n.width+" x "+n.height);var i=t/o.width,a=r/o.height;this.bg.setScale(i,a),console.log("背景适配完成:\n                宽度缩放: "+i.toFixed(3)+"\n                高度缩放: "+a.toFixed(3)+"\n                最终背景尺寸: "+(o.width*i).toFixed(1)+" x "+(o.height*a).toFixed(1))}catch(e){console.error("背景适配失败，回退到基础适配:",e);var s=h.getVisibleSize(),l=h.getDesignResolutionSize(),c=s.width/l.width,u=s.height/l.height;this.bg.setScale(c,u)}else console.warn("bg节点未设置，跳过背景适配")},s.playBGM=function(e,t,r){var o=S.getByName(t).getItemAssetByName(r),n=e.addComponent(d);return n.isValid&&(n.clip=o,n.volume=1,n.loop=!0,n.play()),n},s.start=function(){var e=i(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.bindAll(),e.prev=1,this.adaptBackgroundSize(),console.log("开始加载UI包..."),e.next=6,v.loadPackage("Game",(function(e,r){var o=e/r;t.updateProgress(o,"加载UI资源")}));case 6:console.log("所有资源加载完成！");try{this.playBGM(this.node,"Game","bgm"),console.log("BGM播放成功")}catch(e){console.warn("BGM播放失败:",e)}v.open(x),this.label.node.parent.active=!1,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("资源加载失败:",e.t0),v.open(x),this.label.node.parent.active=!1;case 17:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),s.updateProgress=function(e,t){var r=this;b(this.progressObj).stop(),b(this.progressObj).to(.3,{value:e},{onUpdate:function(){r.progressBar.progress=r.progressObj.value;var e=Math.floor(100*r.progressObj.value);r.label.string=e+"%"}}).start()},t}(f)).prototype,"label",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(j.prototype,"progressBar",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(j.prototype,"bg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=j))||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/TaskDialogWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./fairygui.mjs"],(function(o){var n,t,a,e,i,r;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,a=o.tween},function(o){e=o.GUIWindow},function(o){i=o.GLoader,r=o.LoaderFillType}],execute:function(){t._RF.push({},"d97eaajx3dMSISvLxI0Rrxl","TaskDialogWindow",void 0);o("TaskDialogWindow",function(o){function t(){for(var n,t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];return(n=o.call.apply(o,[this].concat(a))||this).backgroundLoader=null,n}n(t,o);var e=t.prototype;return e.onInit=function(){this.makeFullScreen(),this.contentPane.setPivot(.5,.5),this.loadBackgroundImage()},e.loadBackgroundImage=function(){try{this.backgroundLoader=new i,this.backgroundLoader.url="ui://bpp6st2qi3nk51",this.backgroundLoader.fill=r.ScaleFree,this.backgroundLoader.setSize(this.width,this.height),this.backgroundLoader.x=0,this.backgroundLoader.y=0,this.addChildAt(this.backgroundLoader,0),console.log("成功加载任务对话框背景图片")}catch(o){console.warn("加载任务对话框背景图片失败:",o)}},e.doShowAnimation=function(){var n=this;this.contentPane.scaleX=1.2,this.contentPane.scaleY=1.2,this.contentPane.alpha=.8,a(this.contentPane).to(.5,{scaleX:1,scaleY:1,alpha:1},{easing:"backOut"}).call((function(){o.prototype.doShowAnimation.call(n)})).start()},e.doHideAnimation=function(){var n=this;a(this.contentPane).to(.3,{scaleX:.8,scaleY:.8,alpha:0},{easing:"backIn"}).call((function(){o.prototype.doHideAnimation.call(n)})).start()},e.onDestroy=function(){this.backgroundLoader&&this.backgroundLoader.parent&&(this.backgroundLoader.removeFromParent(),this.backgroundLoader.dispose(),this.backgroundLoader=null),o.prototype.onDestroy.call(this)},t}(e));t._RF.pop()}}}));

System.register("chunks:///_virtual/TaskManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./GameTypes.ts"],(function(s){var t,a,n,e,i,o,r;return{setters:[function(s){t=s.inheritsLoose,a=s.extends},function(s){n=s.cclegacy},function(s){e=s.autoBindToWindow,i=s.instance_base},function(s){o=s.DefaultTaskConfig,r=s.TaskCategory}],execute:function(){var l;n._RF.push({},"49149F1kmdENItKaJQMvmdX","TaskManager",void 0);var c=s("TaskManager",e(l=function(s){function n(){var t;return(t=s.call(this)||this).taskConfig=o,t.usedTaskIds=new Set,t.allTasks=[],t.initializeTaskPool(),t}t(n,s);var e=n.prototype;return e.initializeTaskPool=function(){this.allTasks=[].concat(this.taskConfig.dailyInteractionTasks,this.taskConfig.intimateChallengeTasks,this.taskConfig.randomSurpriseTasks),console.log("任务池初始化完成，共 "+this.allTasks.length+" 个任务"),console.log("- A日常互动任务: "+this.taskConfig.dailyInteractionTasks.length+" 个"),console.log("- B亲密挑战任务: "+this.taskConfig.intimateChallengeTasks.length+" 个"),console.log("- C随机惊喜任务: "+this.taskConfig.randomSurpriseTasks.length+" 个")},e.getRandomTask=function(s){var t=this,n=this.allTasks.filter((function(s){return!t.usedTaskIds.has(s.id)}));if(0===n.length)return this.usedTaskIds.clear(),console.log("所有任务已使用完毕，重置任务池"),this.getRandomTask(s);var e=Math.floor(Math.random()*n.length),i=a({},n[e]);return this.usedTaskIds.add(i.id),console.log("为玩家选择任务: ID="+i.id+", 分类="+i.category),i},e.getRandomTaskForPlayer=function(s){var t=this.getRandomTask();return t.player=s,console.log("为 "+s.name+" (角色ID: "+s.characterId+") 分配任务: ID="+t.id+", 分类="+t.category),t},e.getTaskById=function(s){var t=this.allTasks.find((function(t){return t.id===s}));return t?a({},t):null},e.resetUsedTasks=function(){this.usedTaskIds.clear(),console.log("任务使用记录已重置")},e.getAvailableTaskCount=function(){return this.allTasks.length-this.usedTaskIds.size},e.getAllTasks=function(){return[].concat(this.allTasks)},e.getRandomTaskByCategory=function(s){var t=this,n=[];switch(s){case r.DAILY_INTERACTION:n=this.taskConfig.dailyInteractionTasks;break;case r.INTIMATE_CHALLENGE:n=this.taskConfig.intimateChallengeTasks;break;case r.RANDOM_SURPRISE:n=this.taskConfig.randomSurpriseTasks}var e=n.filter((function(s){return!t.usedTaskIds.has(s.id)}));if(0===e.length)return new Set(n.map((function(s){return s.id}))).forEach((function(s){return t.usedTaskIds.delete(s)})),console.log(s+"分类任务已用完，重置该分类任务池"),this.getRandomTaskByCategory(s);var i=Math.floor(Math.random()*e.length),o=a({},e[i]);return this.usedTaskIds.add(o.id),console.log("从"+s+"分类选择任务: ID="+o.id),o},e.getTaskCountByCategory=function(s){switch(s){case r.DAILY_INTERACTION:return this.taskConfig.dailyInteractionTasks.length;case r.INTIMATE_CHALLENGE:return this.taskConfig.intimateChallengeTasks.length;case r.RANDOM_SURPRISE:return this.taskConfig.randomSurpriseTasks.length;default:return 0}},n}(i))||l);s("taskManager",c.instance());n._RF.pop()}}}));

System.register("chunks:///_virtual/WinDialogWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./fairygui.mjs"],(function(n){var o,t,a,i,e,r;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,a=n.tween},function(n){i=n.GUIWindow},function(n){e=n.GLoader,r=n.LoaderFillType}],execute:function(){t._RF.push({},"4defeitiJ5CQpYyT8hciTAj","WinDialogWindow",void 0);n("WinDialogWindow",function(n){function t(){for(var o,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(o=n.call.apply(n,[this].concat(a))||this).backgroundLoader=null,o}o(t,n);var i=t.prototype;return i.onInit=function(){this.makeFullScreen(),this.contentPane.setPivot(.5,.5)},i.loadBackgroundImage=function(){try{this.backgroundLoader=new e,this.backgroundLoader.url="ui://bpp6st2qi3nk51",this.backgroundLoader.fill=r.ScaleFree,this.backgroundLoader.setSize(this.width,this.height),this.backgroundLoader.x=0,this.backgroundLoader.y=0,this.addChildAt(this.backgroundLoader,0),console.log("成功加载任务对话框背景图片")}catch(n){console.warn("加载任务对话框背景图片失败:",n)}},i.doShowAnimation=function(){var o=this;this.contentPane.scaleX=1.2,this.contentPane.scaleY=1.2,this.contentPane.alpha=.8,a(this.contentPane).to(.5,{scaleX:1,scaleY:1,alpha:1},{easing:"backOut"}).call((function(){n.prototype.doShowAnimation.call(o)})).start()},i.doHideAnimation=function(){var o=this;a(this.contentPane).to(.3,{scaleX:.8,scaleY:.8,alpha:0},{easing:"backIn"}).call((function(){n.prototype.doHideAnimation.call(o)})).start()},i.onDestroy=function(){this.backgroundLoader&&this.backgroundLoader.parent&&(this.backgroundLoader.removeFromParent(),this.backgroundLoader.dispose(),this.backgroundLoader=null),n.prototype.onDestroy.call(this)},t}(i));t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});