System.register("chunks:///_virtual/CommonExport.ts",["cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(o){var n;return{setters:[function(c){n=c.cclegacy,o("cc",c)},function(n){o("drongoCC",n)},function(n){o("fgui",n)},function(n){o("drongoGui",n)}],execute:function(){n._RF.push({},"2a54bPglDFEaKMITwv2aDNG","CommonExport",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigBase.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6aa16Nf6rJP87ezxWaLdhoO","ConfigBase",void 0);t("default",function(){function t(){}return t.prototype.init=function(t){var e=this;t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.hasOwnProperty(n)&&(e[n]=t[n])}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(n){var e,t,r,s,i,o,a,u,c;return{setters:[function(n){e=n.inheritsLoose,t=n.createForOfIteratorHelperLoose,r=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){i=n.cclegacy,o=n.JsonAsset},function(n){a=n.autoBindToWindow,u=n.instance_base,c=n.asset}],execute:function(){var f;i._RF.push({},"ab49fwHf11ArqXDrPGKAbkd","ConfigMgr",void 0);var g=a(f=function(n){function i(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))||this).configs=new Map,e.configAssets=new Map,e}e(i,n);var a=i.prototype;return a.loadConfig=function(){var n=r(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.name,!this.configs.has(t)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,c.get("Config/"+t,o,null);case 5:r=n.sent,this.initConfig(e,r);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.initConfig=function(n,e){var t=n.name,r=new Map;for(var s in e.json){var i=e.json[s],o=new n;o.init(i),r.set(parseInt(s),o)}e.decRef(),this.configs.set(t,r)},a.initConfigs=function(){var n=r(s().mark((function n(e){var r,i,a,u,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.get_dir(e,o,null);case 2:for(r=n.sent,i=t(r);!(a=i()).done;)u=a.value,f=u.name.replace(".json",""),this.configAssets.set(f,u);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.getConfig=function(n,e){var t=n.name,r=this.configAssets.get(t);r&&(this.initConfig(n,r),this.configAssets.delete(t));var s=this.configs.get(t);return s?s.get(e):null},a.getAllConfigs=function(n){var e=n.name,t=this.configAssets.get(e);t&&(this.initConfig(n,t),this.configAssets.delete(e));var r=this.configs.get(e);return r||null},a.queryOne=function(n,e){for(var r,s=this.getAllConfigs(n),i=t(s.values());!(r=i()).done;){var o=r.value;if(e(o))return o}return null},a.queryAll=function(n,e){for(var r,s=this.getAllConfigs(n),i=[],o=t(s.values());!(r=o()).done;){var a=r.value;e(a)&&i.push(a)}return i},i}(u))||f;n("configMgr",g.instance());i._RF.pop()}}}));

System.register("chunks:///_virtual/FormatUtils.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"ab706W0bE1FA4RMRfDRblr4","FormatUtils",void 0);t("FormatUtils",function(){function t(){}return t.padZero=function(t,r){return void 0===r&&(r=2),t.toString().padStart(r,"0")},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Card_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Card.ts","./fairygui.mjs"],(function(t){var e,n,i,a,o,c,s,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.tween},function(t){a=t.addLogic,o=t.GUILogicBase},function(t){c=t.default},function(t){s=t.UIPackage,l=t.GRoot}],execute:function(){var r;n._RF.push({},"9c47c9XjKBPdoA4fh0FDVfb","Game_Card_Logic",void 0);t("default",a(c)(r=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).cardData=null,e.onClickCallback=null,e}e(n,t);var a=n.prototype;return a.onLoad=function(){this.UI.onClick(this.onCardClick,this)},a.start=function(){this.setCardType(0)},a.setCardData=function(t){this.cardData=t,this.setCardType(t.isFlipped?t.type:0)},a.setCardType=function(t){this.UI.m_cardType.selectedIndex=t},a.setClickCallback=function(t){this.onClickCallback=t},a.onCardClick=function(){this.cardData&&this.onClickCallback&&this.onClickCallback(this.cardData.id)},a.playFlopSound=function(){try{var t=s.getByName("Game");if(!t)return void this._log.log("警告：无法找到 Game UI包");var e=t.getItemAssetByName("Flop");e?l.inst.playOneShotSound(e):this._log.log("警告：无法加载 Flop 音效")}catch(t){this._log.log("播放翻牌音效失败:",t)}},a.playFlipAnimation=function(t,e){var n=this;return void 0===e&&(e=.3),new Promise((function(a){var o=e/2;n.playFlopSound(),i(n.UI).stop(),i(n.UI).to(o,{scaleX:0},{easing:"sineOut"}).call((function(){n.setCardType(t)})).to(o,{scaleX:1},{easing:"sineIn"}).call((function(){t>0?n.showSelectFrame():n.hideSelectFrame(),a()})).start()}))},a.showSelectFrame=function(){this.UI.m_seleted.selectedIndex=1},a.hideSelectFrame=function(){this.UI.m_seleted.selectedIndex=0},a.playShakeAnimation=function(){var t=this;return new Promise((function(e){var n=t.UI.x;i(t.UI).stop(),i(t.UI).to(.05,{x:n-5}).to(.05,{x:n+5}).to(.05,{x:n-5}).to(.05,{x:n+5}).to(.05,{x:n}).call((function(){e()})).start()}))},a.hide=function(){this.UI.visible=!1},a.show=function(){this.UI.visible=!0},a.getCardData=function(){return this.cardData},n}(o))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,r,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){r=e.UIPackage,o=e.GComponent},function(e){c=e.vm}],execute:function(){var i,a;n._RF.push({},"efd8aEUDshIw6pvNHhisb2t","Game_Card",void 0);e("default",c(((a=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).m_cardType=void 0,t.m_seleted=void 0,t}return t(n,e),n.createInstance=function(){return r.createObject("Game","Card")},n.prototype.onConstruct=function(){this.m_cardType=this.getController("cardType"),this.m_seleted=this.getController("seleted")},n}(o)).URL="ui://6gpz43l1g1kk25",a.Dependencies=["Game"],i=a))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ChuChangBlue_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_ChuChangBlue.ts"],(function(n){var t,e,r,a,u,i,o,c;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){a=n.cclegacy,u=n.tween},function(n){i=n.addLogic,o=n.GUILogicBase},function(n){c=n.default}],execute:function(){var s;a._RF.push({},"4671crXjRRDhrTJ39QbX3T/","Game_ChuChangBlue_Logic",void 0);n("default",i(c)(s=function(n){function a(){return n.apply(this,arguments)||this}t(a,n);var i=a.prototype;return i.onLoad=function(){},i.playEnterAnimation=function(){var n=e(r().mark((function n(t,e){var a=this;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===e&&(e=.5),n.abrupt("return",new Promise((function(n){u(a.UI).to(e,{x:t},{easing:"sineOut"}).call((function(){return n()})).start()})));case 2:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),i.playFadeOutAnimation=function(){var n=e(r().mark((function n(t){var e=this;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===t&&(t=.3),n.abrupt("return",new Promise((function(n){u(e.UI).to(t,{alpha:0}).call((function(){return n()})).start()})));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),i.playVSAnimation=function(){var n=e(r().mark((function n(){var t=this;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var e=t.UI.m_vs;e.visible=!0,e.setPivot(.5,.5,!0),e.setScale(3,3),e.alpha=0,u(e).to(.3,{scaleX:1,scaleY:1,alpha:1},{easing:"backOut"}).to(.1,{scaleX:1.2,scaleY:1.2},{easing:"sineOut"}).to(.1,{scaleX:1,scaleY:1},{easing:"sineIn"}).call((function(){return n()})).start()})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),a}(o))||s);a._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ChuChangBlue.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,i,o,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.UIPackage,o=e.GComponent},function(e){s=e.vm}],execute:function(){var u,r;n._RF.push({},"f860f6dzcVGMYSd2OTAH6sy","Game_ChuChangBlue",void 0);e("default",s(((r=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).m_isAI=void 0,t.m_img=void 0,t.m_name=void 0,t.m_vs=void 0,t}return t(n,e),n.createInstance=function(){return i.createObject("Game","ChuChangBlue")},n.prototype.onConstruct=function(){this.m_isAI=this.getController("isAI"),this.m_img=this.getChild("img"),this.m_name=this.getChild("name"),this.m_vs=this.getChild("vs")},n}(o)).URL="ui://6gpz43l1g1kk1a",r.Dependencies=["Game"],u=r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ChuChangRed_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_ChuChangRed.ts"],(function(n){var t,r,e,u,a,o,i,c;return{setters:[function(n){t=n.inheritsLoose,r=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){u=n.cclegacy,a=n.tween},function(n){o=n.addLogic,i=n.GUILogicBase},function(n){c=n.default}],execute:function(){var s;u._RF.push({},"4acacYgAU5MZ5jY14K/266Q","Game_ChuChangRed_Logic",void 0);n("default",o(c)(s=function(n){function u(){return n.apply(this,arguments)||this}t(u,n);var o=u.prototype;return o.onLoad=function(){},o.playEnterAnimation=function(){var n=r(e().mark((function n(t,r){var u=this;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===r&&(r=.5),n.abrupt("return",new Promise((function(n){a(u.UI).to(r,{x:t},{easing:"sineOut"}).call((function(){return n()})).start()})));case 2:case"end":return n.stop()}}),n)})));return function(t,r){return n.apply(this,arguments)}}(),o.playFadeOutAnimation=function(){var n=r(e().mark((function n(t){var r=this;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===t&&(t=.3),n.abrupt("return",new Promise((function(n){a(r.UI).to(t,{alpha:0}).call((function(){return n()})).start()})));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),u}(i))||s);u._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ChuChangRed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var n,t,o,r,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){o=e.UIPackage,r=e.GComponent},function(e){i=e.vm}],execute:function(){var u,c;t._RF.push({},"afa28Cboc1HUrLGNuHHaKN3","Game_ChuChangRed",void 0);e("default",i(((c=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this).m_isAI=void 0,n}return n(t,e),t.createInstance=function(){return o.createObject("Game","ChuChangRed")},t.prototype.onConstruct=function(){this.m_isAI=this.getController("isAI")},t}(r)).URL="ui://6gpz43l1g1kk17",c.Dependencies=["Game"],u=c))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Component1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var n,t,o,r,a;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){o=e.UIPackage,r=e.GComponent},function(e){a=e.vm}],execute:function(){var i,c;t._RF.push({},"b3324riBLtLd7piO5ptb5au","Game_Component1",void 0);e("default",a(((c=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this).m_CardArea=void 0,n}return n(t,e),t.createInstance=function(){return o.createObject("Game","Component1")},t.prototype.onConstruct=function(){this.m_CardArea=this.getChild("CardArea")},t}(r)).URL="ui://6gpz43l1od3a2w",c.Dependencies=["Game"],i=c))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_DialogWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs"],(function(t){var n,e,o,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t.tween},function(t){i=t.GUIWindow}],execute:function(){e._RF.push({},"d0b77ZtPKdKZo0x35vhMw65","Game_DialogWindow",void 0);t("GameDialogWindow",function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.onInit=function(){this.center(),this.contentPane.setPivot(.5,.5,!0),this.contentPane.x+=this.contentPane.width/2,this.contentPane.y+=this.contentPane.height/2},i.doShowAnimation=function(){var n=this;this.contentPane.setScale(.8,.8),this.contentPane.alpha=0,o(this.contentPane).to(.3,{scaleX:1,scaleY:1,alpha:1},{easing:"backOut"}).call((function(){return t.prototype.doShowAnimation.call(n)})).start()},i.doHideAnimation=function(){var n=this;o(this.contentPane).to(.2,{scaleX:.8,scaleY:.8,alpha:0},{easing:"backIn"}).call((function(){return t.prototype.doHideAnimation.call(n)})).start()},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GanmePage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_GanmePage.ts","./Game_Card.ts","./Game_Card_Logic.ts","./Game_StartPage.ts","./Game_ResultPage.ts","./Game_ResultTwoPlayerPage.ts","./Game_ChuChangRed.ts","./Game_ChuChangBlue.ts","./Game_ChuChangRed_Logic.ts","./Game_ChuChangBlue_Logic.ts","./Game_GuideView.ts","./Game_GuideView_Logic.ts","./GameMgr.ts","./FormatUtils.ts","./fairygui.mjs"],(function(t){var e,a,n,r,i,s,o,u,c,l,h,d,g,f,m,p,I,U,x,y,_,v,b,k,C,G;return{setters:[function(t){e=t.inheritsLoose,a=t.createForOfIteratorHelperLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){i=t.cclegacy,s=t.tween,o=t.Color},function(t){u=t.addLogic,c=t.GUILogicBase,l=t.GBind,h=t.GUIManager},function(t){d=t.default},function(t){g=t.default},function(t){f=t.default},function(t){m=t.default},function(t){p=t.default},function(t){I=t.default},function(t){U=t.default},function(t){x=t.default},function(t){y=t.default},function(t){_=t.default},function(t){v=t.default},function(t){b=t.default},function(t){k=t.gameMgr},function(t){C=t.FormatUtils},function(t){G=t.GGraph}],execute:function(){var w,P;i._RF.push({},"6cb2cmmLExBIqdbgbBU/cFV","Game_GanmePage_Logic",void 0);t("default",u(d)(((P=function(t){function i(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).cardUIMap=new Map,e.isAIProcessing=!1,e}e(i,t);var u=i.prototype;return u.onLoad=function(){this.UI.m_exitBtn.onClick(this.onExitClick,this),this.createCardUIs(),c.setUISorting(this.UI.m_redValue.node,!1),c.setUISorting(this.UI.m_blueValue.node,!1),c.setUISorting(this.UI.m_fipsNum.node,!1),c.setUISorting(this.UI.m_username.node,!1),l(this.UI.m_redValue,k.observableData,(function(t){return t.redScore})).setFormatFunc((function(t){return C.padZero(t)})).bindTarget(this),l(this.UI.m_blueValue,k.observableData,(function(t){return t.blueScore})).setFormatFunc((function(t){return C.padZero(t)})).bindTarget(this),l(this.UI.m_fipsNum,k.observableData,(function(t){return t.flipsCount})).setFormatFunc((function(t){return C.padZero(t)})).bindTarget(this)},u.start=function(){var t=this;this.resetGame(),setTimeout((function(){t.playStartAnimation()}),100)},u.createCardUIs=function(){for(var t=0;t<22;t++){var e=g.createInstance(),a=e.Get(f);e.setPivot(.5,.5,!0),this.UI.m_CardArea.addChild(e),a.setClickCallback(this.onCardClick.bind(this)),this.cardUIMap.set(t,a)}this._log.log("创建了 "+this.cardUIMap.size+" 张卡牌UI")},u.layoutCards=function(){var t=this,e=k.getGameState();if(e){for(var n,r=k.getLayoutConfig(),i=this.UI.m_CardArea.width,s=this.UI.m_CardArea.height,o=Math.max.apply(Math,r.map((function(t){return t.row})))+1,u=Math.max.apply(Math,r.map((function(t){return t.cols}))),c=i/u,l=s/o,h=function(){var e=n.value,a=t.cardUIMap.get(e.id);if(!a)return 0;a.UI.parent!==t.UI.m_CardArea&&t.UI.m_CardArea.addChild(a.UI);var i=r.find((function(t){return t.row===e.row}));if(!i)return 0;var s=(u-i.cols)*c/2+e.col*c+c/2,o=e.row*l+l/2;a.UI.setPosition(s,o)},d=a(e.cards);!(n=d()).done;)h();this._log.log("卡牌布局完成")}},u.resetGame=function(){var t=k.getGameState();if(t){this.layoutCards();for(var e,n=a(t.cards);!(e=n()).done;){var r=e.value,i=this.cardUIMap.get(r.id);i&&(i.setCardData(r),i.show(),i.UI.scaleX=1,i.UI.scaleY=1,i.UI.alpha=1,i.hideSelectFrame())}this.UI.m_isAI.selectedIndex="single"===t.mode?1:0,this.highlightCurrentPlayer(),this._log.log("游戏重置完成")}},u.onCardClick=function(){var t=n(r().mark((function t(e){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=k.getGameState())&&!a.isProcessing&&!this.isAIProcessing){t.next=3;break}return t.abrupt("return");case 3:if(!k.isAITurn()){t.next=6;break}return this._log.log("AI回合，玩家不能操作"),t.abrupt("return");case 6:return t.next=8,this.handleFlipCard(e);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),u.handleFlipCard=function(){var t=n(r().mark((function t(e){var a,n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k.flipCard(e)){t.next=3;break}return t.abrupt("return");case 3:if(k.setProcessing(!0),a=k.getGameState()){t.next=8;break}return k.setProcessing(!1),t.abrupt("return");case 8:if(n=a.cards.find((function(t){return t.id===e})),i=this.cardUIMap.get(e),!n||!i){t.next=13;break}return t.next=13,i.playFlipAnimation(n.type);case 13:if(2!==a.selectedCards.length){t.next=20;break}return t.next=16,this.delay(500);case 16:return t.next=18,this.checkAndHandleMatch();case 18:t.next=26;break;case 20:if(k.setProcessing(!1),!k.isAITurn()){t.next=26;break}return t.next=24,this.delay(800);case 24:return t.next=26,this.aiTurn();case 26:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),u.checkAndHandleMatch=function(){var t=n(r().mark((function t(){var e,n,i,s,o,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=k.getGameState())for(n=a(e.selectedCards);!(i=n()).done;)s=i.value,(o=this.cardUIMap.get(s.id))&&o.hideSelectFrame();if(!0!==(u=k.checkMatch())){t.next=8;break}return t.next=6,this.handleMatchSuccess();case 6:t.next=11;break;case 8:if(!1!==u){t.next=11;break}return t.next=11,this.handleMatchFail();case 11:if(!k.isGameOver()){t.next=16;break}return t.next=14,this.delay(500);case 14:return this.showResult(),t.abrupt("return");case 16:if(k.setProcessing(!1),!k.isAITurn()){t.next=22;break}return t.next=20,this.delay(1e3);case 20:return t.next=22,this.aiTurn();case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.handleMatchSuccess=function(){var t=n(r().mark((function t(){var e,a,n,i,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=k.getGameState()){t.next=3;break}return t.abrupt("return");case 3:return i=n.selectedCards,s=i[0],o=i[1],this._log.log("配对成功！Type: "+s.type),t.next=7,this.playMatchSuccessAnimation(s,o);case 7:null==(e=this.cardUIMap.get(s.id))||e.hide(),null==(a=this.cardUIMap.get(o.id))||a.hide(),k.clearSelection(),this._log.log("配对成功，当前玩家继续回合");case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.handleMatchFail=function(){var t=n(r().mark((function t(){var e,a,n,i,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=k.getGameState()){t.next=3;break}return t.abrupt("return");case 3:if(a=e.selectedCards,n=a[0],i=a[1],this._log.log("配对失败！"+n.type+" vs "+i.type),s=this.cardUIMap.get(n.id),o=this.cardUIMap.get(i.id),!s||!o){t.next=10;break}return t.next=10,Promise.all([s.playShakeAnimation(),o.playShakeAnimation()]);case 10:return t.next=12,this.delay(800);case 12:if(!s||!o){t.next=15;break}return t.next=15,Promise.all([s.playFlipAnimation(0),o.playFlipAnimation(0)]);case 15:k.resetSelection(),k.switchPlayer(),this.highlightCurrentPlayer(),this._log.log("配对失败，切换回合");case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.aiTurn=function(){var t=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k.isAITurn()){t.next=2;break}return t.abrupt("return");case 2:return this.isAIProcessing=!0,t.next=5,this.delay(400+300*Math.random());case 5:if(null===(e=k.aiSelectCard())){t.next=9;break}return t.next=9,this.handleFlipCard(e);case 9:this.isAIProcessing=!1;case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.playMatchSuccessAnimation=function(){var t=n(r().mark((function t(e,a){var n,i,o,u,c,l,h,d,g,f,m,p,I,U,x,y;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.cardUIMap.get(e.id),i=this.cardUIMap.get(a.id),n&&i){t.next=4;break}return t.abrupt("return");case 4:if(o=k.getGameState()){t.next=7;break}return t.abrupt("return");case 7:return u=n.UI.localToGlobal(0,0),c=i.UI.localToGlobal(0,0),l=this.UI.globalToLocal(u.x,u.y),h=this.UI.globalToLocal(c.x,c.y),this.UI.addChild(n.UI),this.UI.addChild(i.UI),n.UI.setPosition(l.x,l.y),i.UI.setPosition(h.x,h.y),d=this.UI.width/2,g=this.UI.height/2,f=n.UI.width,40,p=d-(m=2*f+40)/2,I=d+m/2,U=0===o.currentPlayer?30:this.UI.height-30,15,x=d-7.5,y=d+7.5,t.abrupt("return",new Promise((function(t){var e=s(n.UI).to(.3,{x:p,y:g},{easing:"sineOut"}).to(.3,{scaleX:2,scaleY:2},{easing:"backOut"}).delay(1).to(.4,{x:x,y:U,scaleX:.3,scaleY:.3},{easing:"sineIn"}).to(.2,{alpha:0}),a=s(i.UI).to(.3,{x:I,y:g},{easing:"sineOut"}).to(.3,{scaleX:2,scaleY:2},{easing:"backOut"}).delay(1).to(.4,{x:y,y:U,scaleX:.3,scaleY:.3},{easing:"sineIn"}).to(.2,{alpha:0}).call((function(){t()}));e.start(),a.start()})));case 27:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}(),u.playStartAnimation=function(){var t=n(r().mark((function t(){var e,a,n,s,u,c,l,d,g,f,m,p,I;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=k.getGameState()){t.next=3;break}return t.abrupt("return");case 3:return this._log.log("播放开场动画"),(n=new G).setSize(this.UI.width,this.UI.height),n.drawRect(0,o.TRANSPARENT,new o(0,0,0,150)),this.UI.addChild(n),s=U.createInstance(),u=x.createInstance(),c=s.Get(y),l=u.Get(_),d="single"===(null==(e=k.getGameState())?void 0:e.mode)?1:0,s.m_isAI.selectedIndex=d,u.m_isAI.selectedIndex=d,g=this.UI.height/2,s.setPosition(-200,g),s.setPivot(.5,.5,!0),u.setPosition(this.UI.width+200,g),u.setPivot(.5,.5,!0),u.m_vs.visible=!1,this.UI.addChild(s),this.UI.addChild(u),f=s.width/2,m=this.UI.width-u.width/2,t.next=27,Promise.all([c.playEnterAnimation(f),l.playEnterAnimation(m)]);case 27:return t.next=29,l.playVSAnimation();case 29:return t.next=31,this.delay(500);case 31:return t.next=33,Promise.all([c.playFadeOutAnimation(),l.playFadeOutAnimation()]);case 33:if(s.removeFromParent(),u.removeFromParent(),s.dispose(),u.dispose(),n.removeFromParent(),n.dispose(),"single"!==a.mode||i.hasShownGuide){t.next=49;break}return this._log.log("显示引导弹窗"),t.next=43,h.open(v);case 43:return p=t.sent,I=p.contentPane.Get(b),t.next=47,I.waitForComplete();case 47:this._log.log("引导弹窗已完成"),i.hasShownGuide=!0;case 49:if(!k.isAITurn()){t.next=54;break}return t.next=52,this.delay(500);case 52:return t.next=54,this.aiTurn();case 54:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.highlightCurrentPlayer=function(){var t=k.getGameState();if(t){var e=t.currentPlayer;0===e?(this.UI.m_red.grayed=!1,this.UI.m_blue.grayed=!0,this.UI.m_ai.grayed=!1,this.UI.m_user.grayed=!0,this.UI.m_img.grayed=!0,this.UI.m_touxiangkuang.grayed=!1,"single"===t.mode&&this.playAvatarRotateAnimation()):(this.UI.m_red.grayed=!0,this.UI.m_blue.grayed=!1,this.UI.m_ai.grayed=!0,this.UI.m_user.grayed=!1,this.UI.m_img.grayed=!1,this.UI.m_touxiangkuang.grayed=!0),this._log.log("高亮玩家: "+(0===e?"红方":"蓝方"))}},u.playAvatarRotateAnimation=function(){var t=this;s(this.UI.m_touxiangkuang).stop(),this.UI.m_touxiangkuang.rotation=0,s(this.UI.m_touxiangkuang).to(.5,{rotation:360},{easing:"backOut"}).call((function(){t.UI.m_touxiangkuang.rotation=0})).start()},u.showResult=function(){var t=k.getGameResult();if(t){this._log.log("游戏结束！获胜方: "+t.winner.side+", 评级: "+t.rank);var e=k.getGameState();"single"===(null==e?void 0:e.mode)?h.open(p):h.open(I)}},u.onExitClick=function(){this._log.log("退出游戏"),k.resetGame(),h.close(d),h.open(m)},u.delay=function(t){return new Promise((function(e){return setTimeout(e,t)}))},i}(c)).hasShownGuide=!1,w=P))||w);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GanmePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var i,t,s,n,a;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy},function(e){s=e.UIPackage,n=e.GComponent},function(e){a=e.vm}],execute:function(){var u,r;t._RF.push({},"dee41/IGZlDa66PrG1YMViV","Game_GanmePage",void 0);e("default",a(((r=function(e){function t(){for(var i,t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return(i=e.call.apply(e,[this].concat(s))||this).m_isAI=void 0,i.m_red=void 0,i.m_blue=void 0,i.m_CardArea=void 0,i.m_fipsNum=void 0,i.m_user=void 0,i.m_username=void 0,i.m_img=void 0,i.m_ai=void 0,i.m_touxiangkuang=void 0,i.m_exitBtn=void 0,i.m_blueValue=void 0,i.m_redValue=void 0,i}return i(t,e),t.createInstance=function(){return s.createObject("Game","GanmePage")},t.prototype.onConstruct=function(){this.m_isAI=this.getController("isAI"),this.m_red=this.getChild("red"),this.m_blue=this.getChild("blue"),this.m_CardArea=this.getChild("CardArea"),this.m_fipsNum=this.getChild("fipsNum"),this.m_user=this.getChild("user"),this.m_username=this.getChild("username"),this.m_img=this.getChild("img"),this.m_ai=this.getChild("ai"),this.m_touxiangkuang=this.getChild("touxiangkuang"),this.m_exitBtn=this.getChild("exitBtn"),this.m_blueValue=this.getChild("blueValue"),this.m_redValue=this.getChild("redValue")},t}(n)).URL="ui://6gpz43l1g1kk1c",r.Dependencies=["Game"],u=r))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GuideView_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_GuideView.ts","./Game_SimpleWindow.ts"],(function(e){var t,i,n,o,s,c,l;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){n=e.addLogic,o=e.GUIManager,s=e.GUILogicBase},function(e){c=e.default},function(e){l=e.GameSimpleWindow}],execute:function(){var a,r;i._RF.push({},"49fb5LbghNPzY69id9C+mNP","Game_GuideView_Logic",void 0);e("default",n(c)(((r=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).currentStage=1,t.resolveCallback=null,t}t(i,e);var n=i.prototype;return n.onLoad=function(){var e=this;this.UI.onClick((function(){1===e.currentStage&&e.showStage2()}),this),this.UI.m_close.onClick((function(){e.closeGuide()}),this)},n.start=function(){this.showStage1()},n.showStage1=function(){this.currentStage=1,this.UI.m_content.text="Hi, [color=#FFBC14]user[/color]\nlet's have a competition",this.UI.m_c1.selectedIndex=0,this.UI.m_close.visible=!1},n.showStage2=function(){this.currentStage=2,this.UI.m_content.text="Click on the card, and the same\ncard will earn points",this.UI.m_c1.selectedIndex=1,this.UI.m_close.visible=!0},n.closeGuide=function(){o.close(c),this.resolveCallback&&(this.resolveCallback(),this.resolveCallback=null)},n.waitForComplete=function(){var e=this;return new Promise((function(t){e.resolveCallback=t}))},i}(s)).uiOptions={modal:!0,windowCls:l},a=r))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GuideView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,i,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.UIPackage,o=e.GComponent},function(e){c=e.vm}],execute:function(){var r,u;n._RF.push({},"3aed43FEDNDrY4Mc4FEE5AV","Game_GuideView",void 0);e("default",c(((u=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).m_c1=void 0,t.m_content=void 0,t.m_close=void 0,t}return t(n,e),n.createInstance=function(){return i.createObject("Game","GuideView")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_content=this.getChild("content"),this.m_close=this.getChild("close")},n}(o)).URL="ui://6gpz43l1wntw33",u.Dependencies=["Game"],r=u))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ResultPage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_ResultPage.ts","./Game_GanmePage.ts","./Game_StartPage.ts","./GameMgr.ts","./FormatUtils.ts","./Game_DialogWindow.ts","./fairygui.mjs"],(function(e){var t,n,i,a,o,s,r,u,l,c,f,g,m,h,p,d;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){a=e.cclegacy,o=e.tween},function(e){s=e.addLogic,r=e.GUIManager,u=e.GUILogicBase},function(e){l=e.default},function(e){c=e.default},function(e){f=e.default},function(e){g=e.gameMgr},function(e){m=e.FormatUtils},function(e){h=e.GameDialogWindow},function(e){p=e.UIPackage,d=e.GRoot}],execute:function(){var y,_;a._RF.push({},"a3c181TufVA6Z+nUsDXww7y","Game_ResultPage_Logic",void 0);e("default",s(l)(((_=function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var s=a.prototype;return s.onLoad=function(){this.UI.m_playAgainBtn.onClick(this.onPlayAgain,this),this.UI.m_homeBtn.onClick(this.onBackHome,this)},s.start=function(){var e=n(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.displayResult(),this.playResultSound(),e.next=4,this.delay(300);case 4:return e.next=6,this.playRankAnimation();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.displayResult=function(){var e=g.getGameResult();if(e){var t=e.winner,n=e.loser,i=e.flipsCount,a=e.rank,o=e.efficiency;this.UI.m_winner.selectedIndex="red"===t.side?0:1;var s="red"===e.winner.side?t.score:n.score,r="blue"===e.winner.side?t.score:n.score;this.UI.m_redValue.text=m.padZero(s),this.UI.m_blueValue.text=m.padZero(r),this.UI.m_flipsValue.setVar("value",m.padZero(i)).flushVars();this.UI.m_pingfen.selectedIndex={SSS:0,SS:1,S:2,A:3,B:4}[a]||4,this.UI.m_img,this._log.log("结算显示 - 获胜: "+t.side+", 评级: "+a+", 效率: "+o.toFixed(2)+", 翻牌数: "+i)}else console.error("无法获取游戏结果")},s.onPlayAgain=function(){this._log.log("再玩一局"),g.initGame("single"),r.close(l),r.open(c)},s.onBackHome=function(){this._log.log("返回首页"),r.close(l),r.close(c),r.open(f)},s.playResultSound=function(){var e=g.getGameResult();if(e)try{var t=p.getByName("Game");if(!t)return void this._log.log("警告：无法找到 Game UI包");var n=e.winner.isAI?"fail":"Win",i=t.getItemAssetByName(n);i?(d.inst.playOneShotSound(i),this._log.log("播放"+n+"音效")):this._log.log("警告：无法加载 "+n+" 音效")}catch(e){this._log.log("播放结算音效失败:",e)}},s.playRankAnimation=function(){var e=n(i().mark((function e(){var t,n,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.UI.m_pinfenIcon){e.next=3;break}return e.abrupt("return");case 3:return n=t.y,t.y=n-200,t.alpha=0,t.scaleX=.5,t.scaleY=.5,e.abrupt("return",new Promise((function(e){o(t).to(.6,{y:n,alpha:1,scaleX:1,scaleY:1},{easing:"backOut"}).call((function(){a._log.log("评分图标动画播放完成"),e()})).start()})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},a}(u)).uiOptions={modal:!0,windowCls:h},y=_))||y);a._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ResultPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var i,t,n,l,o;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy},function(e){n=e.UIPackage,l=e.GComponent},function(e){o=e.vm}],execute:function(){var s,a;t._RF.push({},"1ae219s0glIspTQ5DiYE5Vd","Game_ResultPage",void 0);e("default",o(((a=function(e){function t(){for(var i,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(i=e.call.apply(e,[this].concat(n))||this).m_winner=void 0,i.m_pingfen=void 0,i.m_blueValue=void 0,i.m_redValue=void 0,i.m_playAgainBtn=void 0,i.m_homeBtn=void 0,i.m_flipsValue=void 0,i.m_img=void 0,i.m_name=void 0,i.m_pinfenIcon=void 0,i}return i(t,e),t.createInstance=function(){return n.createObject("Game","ResultPage")},t.prototype.onConstruct=function(){this.m_winner=this.getController("winner"),this.m_pingfen=this.getController("pingfen"),this.m_blueValue=this.getChild("blueValue"),this.m_redValue=this.getChild("redValue"),this.m_playAgainBtn=this.getChild("playAgainBtn"),this.m_homeBtn=this.getChild("homeBtn"),this.m_flipsValue=this.getChild("flipsValue"),this.m_img=this.getChild("img"),this.m_name=this.getChild("name"),this.m_pinfenIcon=this.getChild("pinfenIcon")},t}(l)).URL="ui://6gpz43l1l2hm2k",a.Dependencies=["Game"],s=a))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ResultTwoPlayerPage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_ResultTwoPlayerPage.ts","./Game_GanmePage.ts","./Game_StartPage.ts","./GameMgr.ts","./FormatUtils.ts","./Game_DialogWindow.ts","./fairygui.mjs"],(function(e){var t,o,i,n,a,s,l,u,r,c,g,m,d;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy},function(e){i=e.addLogic,n=e.GUIManager,a=e.GUILogicBase},function(e){s=e.default},function(e){l=e.default},function(e){u=e.default},function(e){r=e.gameMgr},function(e){c=e.FormatUtils},function(e){g=e.GameDialogWindow},function(e){m=e.UIPackage,d=e.GRoot}],execute:function(){var h,f;o._RF.push({},"b909amDWtlHQ7JFbCXtUlSk","Game_ResultTwoPlayerPage_Logic",void 0);e("default",i(s)(((f=function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var i=o.prototype;return i.onLoad=function(){this.UI.m_playAgainBtn.onClick(this.onPlayAgain,this),this.UI.m_homeBtn.onClick(this.onBackHome,this)},i.start=function(){this.displayResult(),this.playWinSound()},i.displayResult=function(){var e=r.getGameResult();if(e){var t=e.winner,o=e.loser;this.UI.m_winner.selectedIndex="red"===t.side?0:1;var i="red"===t.side?t.score:o.score,n="blue"===t.side?t.score:o.score;this.UI.m_redValue.text=c.padZero(i),this.UI.m_blueValue.text=c.padZero(n),this._log.log("双人结算 - 获胜: "+t.side+", 红方: "+this.UI.m_redValue.text+", 蓝方: "+this.UI.m_blueValue.text)}else console.error("无法获取游戏结果")},i.onPlayAgain=function(){this._log.log("再玩一局（双人模式）"),r.initGame("double"),n.close(s),n.open(l)},i.onBackHome=function(){this._log.log("返回首页"),n.close(s),n.close(l),n.open(u)},i.playWinSound=function(){try{var e=m.getByName("Game");if(!e)return void this._log.log("警告：无法找到 Game UI包");var t=e.getItemAssetByName("Win");t?(d.inst.playOneShotSound(t),this._log.log("播放Win音效")):this._log.log("警告：无法加载 Win 音效")}catch(e){this._log.log("播放胜利音效失败:",e)}},o}(a)).uiOptions={modal:!0,windowCls:g},h=f))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ResultTwoPlayerPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,i,a,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.UIPackage,a=e.GComponent},function(e){o=e.vm}],execute:function(){var l,r;n._RF.push({},"faada9AmvxCXIyGQ5W6qC9+","Game_ResultTwoPlayerPage",void 0);e("default",o(((r=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).m_winner=void 0,t.m_blueValue=void 0,t.m_redValue=void 0,t.m_playAgainBtn=void 0,t.m_homeBtn=void 0,t}return t(n,e),n.createInstance=function(){return i.createObject("Game","ResultTwoPlayerPage")},n.prototype.onConstruct=function(){this.m_winner=this.getController("winner"),this.m_blueValue=this.getChild("blueValue"),this.m_redValue=this.getChild("redValue"),this.m_playAgainBtn=this.getChild("playAgainBtn"),this.m_homeBtn=this.getChild("homeBtn")},n}(a)).URL="ui://6gpz43l1l2hm2q",r.Dependencies=["Game"],l=r))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_SimpleWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs"],(function(n){var e,t,i;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){i=n.GUIWindow}],execute:function(){t._RF.push({},"0c5f4lgqvtD75xvbCHmoeKr","Game_SimpleWindow",void 0);n("GameSimpleWindow",function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.onInit=function(){this.center()},t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_StartPage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_StartPage.ts","./Game_GanmePage.ts","./GameMgr.ts"],(function(n){var t,e,o,i,a,c,l,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){o=n.GUIManager,i=n.addLogic,a=n.GUILogicBase},function(n){c=n.default},function(n){l=n.default},function(n){r=n.gameMgr}],execute:function(){var s;e._RF.push({},"a2ad6HnnrBMGLzWRJYmJWwV","Game_StartPage_Logic",void 0);n("default",i(c)(s=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var i=e.prototype;return i.onLoad=function(){this.UI.m_OnePlayerBtn.onClick(this.onOnePlayerClick,this),this.UI.m_TwoPlayerBtn.onClick(this.onTwoPlayerClick,this)},i.onOnePlayerClick=function(){this._log.log("开始单人游戏"),r.initGame("single"),o.close(c),o.open(l)},i.onTwoPlayerClick=function(){this._log.log("开始双人游戏"),r.initGame("double"),o.close(c),o.open(l)},e}(a))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_StartPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,r,o,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.UIPackage,o=t.GComponent},function(t){a=t.vm}],execute:function(){var i,c;n._RF.push({},"0b8f3Ash9pDFpvP0/oF/VlW","Game_StartPage",void 0);t("default",a(((c=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).m_OnePlayerBtn=void 0,e.m_TwoPlayerBtn=void 0,e}return e(n,t),n.createInstance=function(){return r.createObject("Game","StartPage")},n.prototype.onConstruct=function(){this.m_OnePlayerBtn=this.getChild("OnePlayerBtn"),this.m_TwoPlayerBtn=this.getChild("TwoPlayerBtn")},n}(o)).URL="ui://6gpz43l1g1kko",c.Dependencies=["Game"],i=c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameBinder.ts",["cc","./drongo-gui.mjs","./fairygui.mjs","./Game_ChuChangRed.ts","./Game_ChuChangBlue.ts","./Game_GanmePage.ts","./Game_Card.ts","./Game_StartPage.ts","./Game_ResultPage.ts","./Game_ResultTwoPlayerPage.ts","./Game_Component1.ts","./Game_GuideView.ts"],(function(t){var e,n,u,i,a,s,o,f,c,r,d,l;return{setters:[function(t){e=t.cclegacy},function(t){n=t.registerBinder},function(t){u=t.UIObjectFactory},function(t){i=t.default},function(t){a=t.default},function(t){s=t.default},function(t){o=t.default},function(t){f=t.default},function(t){c=t.default},function(t){r=t.default},function(t){d=t.default},function(t){l=t.default}],execute:function(){var m;e._RF.push({},"ae88b+X2utK0o1r28DEi0ak","GameBinder",void 0);t("default",n(m=function(){function t(){}return t.prototype.bindAll=function(){u.setExtension(i.URL,i),u.setExtension(a.URL,a),u.setExtension(s.URL,s),u.setExtension(o.URL,o),u.setExtension(f.URL,f),u.setExtension(c.URL,c),u.setExtension(r.URL,r),u.setExtension(d.URL,d),u.setExtension(l.URL,l)},t}())||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(e){var t,a,r,i,s,n;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy},function(e){i=e.autoBindToWindow,s=e.log,n=e.instance_base}],execute:function(){var o;r._RF.push({},"7b9f8w+XSxOGo9ObH2Onxor","GameMgr",void 0);var c=i(o=function(e){function r(){for(var t,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).gameState=null,t.observableData={redScore:0,blueScore:0,flipsCount:0},t.LAYOUT_CONFIG=[{row:0,cols:4},{row:1,cols:3},{row:2,cols:4},{row:3,cols:4},{row:4,cols:3},{row:5,cols:4}],t.RANK_RULES=[{rank:"SSS",maxEfficiency:2.1,description:"完美记忆"},{rank:"SS",maxEfficiency:2.3,description:"超凡"},{rank:"S",maxEfficiency:2.5,description:"大师"},{rank:"A",maxEfficiency:3,description:"高手"},{rank:"B",maxEfficiency:1/0,description:"新手"}],t}t(r,e);var i=r.prototype;return i.initGame=function(e){var t=.6+.2*Math.random();this.gameState={mode:e,cards:this.generateCards(),players:[{isAI:"single"===e,score:0,side:"red"},{isAI:!1,score:0,side:"blue"}],currentPlayer:0,flipsCount:0,selectedCards:[],aiMemory:new Map,aiProbability:t,isProcessing:!1},this.syncObservableData(),s("游戏初始化完成 - 模式: "+e+", 先手: 红方, AI概率: "+(100*t).toFixed(1)+"%")},i.resetGame=function(){this.gameState=null,this.observableData.redScore=0,this.observableData.blueScore=0,this.observableData.flipsCount=0,s("游戏状态已重置")},i.syncObservableData=function(){this.gameState&&(this.observableData.redScore=this.gameState.players[0].score,this.observableData.blueScore=this.gameState.players[1].score,this.observableData.flipsCount=this.gameState.flipsCount)},i.generateCards=function(){for(var e=[],t=1;t<=11;t++)e.push(t,t);for(var r=e.length-1;r>0;r--){var i=Math.floor(Math.random()*(r+1)),s=[e[i],e[r]];e[r]=s[0],e[i]=s[1]}for(var n,o=[],c=0,l=a(this.LAYOUT_CONFIG);!(n=l()).done;)for(var u=n.value,h=u.row,f=u.cols,d=0;d<f;d++)o.push({id:o.length,type:e[c++],col:d,row:h,isFlipped:!1,isMatched:!1});return o},i.flipCard=function(e){if(!this.gameState||this.gameState.isProcessing)return!1;var t=this.gameState.cards.find((function(t){return t.id===e}));return!(!t||t.isFlipped||t.isMatched)&&(!(this.gameState.selectedCards.length>=2)&&(t.isFlipped=!0,this.gameState.selectedCards.push(t),this.gameState.flipsCount++,this.syncObservableData(),this.gameState.aiMemory.set(t.id,t.type),s("翻牌 - ID: "+e+", Type: "+t.type+", 已选: "+this.gameState.selectedCards.length+"/2"),!0))},i.checkMatch=function(){if(!this.gameState)return null;var e=this.gameState.selectedCards;if(2!==e.length)return null;var t=e[0],a=e[1],r=t.type===a.type;return r?(t.isMatched=!0,a.isMatched=!0,this.gameState.players[this.gameState.currentPlayer].score++,this.syncObservableData(),s("配对成功 - Type: "+t.type+", 当前玩家得分: "+this.gameState.players[this.gameState.currentPlayer].score)):s("配对失败 - Type: "+t.type+" vs "+a.type),r},i.resetSelection=function(){if(this.gameState){for(var e,t=a(this.gameState.selectedCards);!(e=t()).done;){var r=e.value;r.isMatched||(r.isFlipped=!1)}this.gameState.selectedCards=[]}},i.clearSelection=function(){this.gameState&&(this.gameState.selectedCards=[])},i.switchPlayer=function(){this.gameState&&(this.gameState.currentPlayer=0===this.gameState.currentPlayer?1:0,s("回合切换 - 当前玩家: "+(0===this.gameState.currentPlayer?"红方":"蓝方")))},i.isGameOver=function(){return!!this.gameState&&this.gameState.cards.every((function(e){return e.isMatched}))},i.getGameResult=function(){if(!this.gameState||!this.isGameOver())return null;var e=this.gameState.players,t=e[0],a=e[1],r=t.score>a.score?t:a,i=t.score>a.score?a:t,s=this.gameState.flipsCount/11,n=this.calculateRank(s);return{winner:r,loser:i,flipsCount:this.gameState.flipsCount,rank:n,efficiency:s}},i.calculateRank=function(e){for(var t,r=a(this.RANK_RULES);!(t=r()).done;){var i=t.value;if(e<=i.maxEfficiency)return i.rank}return"B"},i.getRankDescription=function(e){var t=this.RANK_RULES.find((function(t){return t.rank===e}));return t?t.description:"新手"},i.isAITurn=function(){return!!this.gameState&&this.gameState.players[this.gameState.currentPlayer].isAI},i.aiSelectCard=function(){if(!this.gameState)return null;var e=this.gameState,t=e.cards,r=e.selectedCards,i=e.aiMemory,n=e.aiProbability,o=t.filter((function(e){return!e.isFlipped&&!e.isMatched}));if(0===o.length)return null;if(0===r.length){if(Math.random()<n&&i.size>0)for(var c,l,u=function(){var e=l.value,t=i.get(e.id);if(void 0!==t&&o.find((function(a){return a.id!==e.id&&i.get(a.id)===t})))return s("AI使用记忆 - 选择卡牌 "+e.id+", Type: "+t),{v:e.id}},h=a(o);!(l=h()).done;)if(c=u())return c.v;var f=o[Math.floor(Math.random()*o.length)];return s("AI随机选择 - 卡牌 "+f.id),f.id}var d=r[0].type;if(Math.random()<n){var g=o.find((function(e){return i.get(e.id)===d}));if(g)return s("AI使用记忆配对 - 卡牌 "+g.id+", Type: "+d),g.id}var m=o[Math.floor(Math.random()*o.length)];return s("AI随机选择第二张 - 卡牌 "+m.id),m.id},i.setProcessing=function(e){this.gameState&&(this.gameState.isProcessing=e)},i.getGameState=function(){return this.gameState},i.getLayoutConfig=function(){return this.LAYOUT_CONFIG},r}(n))||o;e("gameMgr",c.instance());r._RF.pop()}}}));

System.register("chunks:///_virtual/GameTypes.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8a3f9wtThtNKp8+e2xdTj8q","GameTypes",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonExport.ts","./ConfigBase.ts","./ConfigMgr.ts","./GameMgr.ts","./PoolMgr.ts","./GameTypes.ts","./FormatUtils.ts","./StartView.ts","./Game_Card.ts","./Game_Card_Logic.ts","./GameBinder.ts","./Game_ChuChangBlue.ts","./Game_ChuChangBlue_Logic.ts","./Game_ChuChangRed.ts","./Game_ChuChangRed_Logic.ts","./Game_Component1.ts","./Game_DialogWindow.ts","./Game_GanmePage.ts","./Game_GanmePage_Logic.ts","./Game_ResultPage.ts","./Game_ResultPage_Logic.ts","./Game_ResultTwoPlayerPage.ts","./Game_ResultTwoPlayerPage_Logic.ts","./Game_SimpleWindow.ts","./Game_StartPage.ts","./Game_StartPage_Logic.ts","./Game_GuideView.ts","./Game_GuideView_Logic.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,r,o,a,i,s,c,u,l,f,p,h,b;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.instantiate,i=e.Prefab},function(e){s=e.PoolBuilder,c=e.instance_base,u=e.asset,l=e.error},function(e){f=e.GTextField,p=e.AutoSizeType,h=e.UIPackage},function(e){b=e.GUIManager}],execute:function(){o._RF.push({},"04672eWqVFIKJiVK6TVkrA3","PoolMgr",void 0);e("objPoolMgr",function(e){function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._prefabpools=new Map,t._gobjpools=new Map,t._txtPool=null,t}t(o,e);var c=o.prototype;return c.getPrefabPool=function(){var e=n(r().mark((function e(t,o){var c,l,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=""+o+t,this._prefabpools.has(c)){e.next=7;break}return l=null,e.next=5,s().create(n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.next=3,u.get(t,i,null,{bundle_s:o});case 3:l=e.sent;case 4:return e.abrupt("return",a(l));case 5:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent=null,e.active=!0,e})).clear((function(e){var t;e.forEach((function(e){e.destroy()})),null==(t=l)||t.decRef(),l=null})).initialSize(5).maxSize(50).buildAsync();case 5:f=e.sent,this._prefabpools.set(c,f);case 7:return e.abrupt("return",this._prefabpools.get(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getGobjPool=function(){var e=n(r().mark((function e(t,o){var a,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=""+t+o,this._gobjpools.has(a)){e.next=7;break}return i=null,e.next=5,s().create(n(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=7;break}if(i=h.getByName(t)){e.next=6;break}return e.next=5,b.loadPackage(t);case 5:i=e.sent;case 6:b.setPackageRefCount(t);case 7:return(n=i.createObject(o))||l("create gobj "+t+"/"+o+" failed,请检查资源是否存在"),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()})),b.setPackageRefCount(t,-1),i=null})).initialSize(5).maxSize(50).buildAsync();case 5:c=e.sent,this._gobjpools.set(a,c);case 7:return e.abrupt("return",this._gobjpools.get(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getTxtPool=function(){return this._txtPool||(this._txtPool=s().create((function(){return new f})).reset((function(e){return e.fontSize=20,e.text="",e.setPivot(.5,1,!0),e.autoSize=p.Both,e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()}))})).initialSize(5).maxSize(100).buildSync()),this._txtPool},c.clear=function(){this._prefabpools.forEach((function(e){e.clear(),e.destroy()})),this._prefabpools.clear(),this._gobjpools.forEach((function(e){e.clear(),e.destroy()})),this._gobjpools.clear(),this._txtPool&&(this._txtPool.clear(),this._txtPool.destroy(),this._txtPool=null)},o}(c).instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/StartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./CommonExport.ts","./fairygui.mjs","./drongo-cc.mjs","./Game_StartPage.ts"],(function(e){var t,r,o,n,i,a,s,l,c,u,g,p,h,d,b,f,v,m,y,w,B,S,x,I,F,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.ProgressBar,g=e.Node,p=e.color,h=e.view,d=e.AudioSourceComponent,b=e.tween,f=e.Component},function(e){v=e.GUIManager,m=e.AllBinder},null,function(e){y=e.UIConfig,w=e.registerFont,B=e.GRoot,S=e.UIPackage},function(e){x=e.logConfig,I=e.LogLevel,F=e.log},function(e){G=e.default}],execute:function(){var z,j,C,P,k,U,L,M;s._RF.push({},"b717ey19TVBBpBqTI0xPCo1","StartView",void 0);var O=l.ccclass,V=l.property;e("default",(z=V(c),j=V(u),C=V(g),O((U=t((k=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"label",U,n(t)),o(t,"progressBar",L,n(t)),o(t,"bg",M,n(t)),t.progressObj={value:0},t}r(t,e);var s=t.prototype;return s.onLoad=function(){y.buttonSoundVolumeScale=1,y.bringWindowToFrontOnClick=!1,w("Inter-BoldItalic"),y.defaultFont="Inter-BoldItalic",y.modalLayerColor=p(0,0,0,100),this.progressBar.progress=0,this.label.string="0%",this.progressObj.value=0,x.level_n=I.none},s.adaptBackgroundSize=function(){if(this.bg)try{var e=B.inst,t=e.width,r=e.height,o=h.getDesignResolutionSize(),n=h.getVisibleSize();F("FairyGUI适配信息:\n                FGUI根节点尺寸: "+t+" x "+r+"\n                设计分辨率: "+o.width+" x "+o.height+"\n                屏幕尺寸: "+n.width+" x "+n.height);var i=t/o.width,a=r/o.height;this.bg.setScale(i,a),F("背景适配完成:\n                宽度缩放: "+i.toFixed(3)+"\n                高度缩放: "+a.toFixed(3)+"\n                最终背景尺寸: "+(o.width*i).toFixed(1)+" x "+(o.height*a).toFixed(1))}catch(e){console.error("背景适配失败，回退到基础适配:",e);var s=h.getVisibleSize(),l=h.getDesignResolutionSize(),c=s.width/l.width,u=s.height/l.height;this.bg.setScale(c,u)}else console.warn("bg节点未设置，跳过背景适配")},s.playBGM=function(e,t,r){var o=S.getByName(t).getItemAssetByName(r),n=e.addComponent(d);return n.isValid&&(n.clip=o,n.volume=.7,n.loop=!0,n.play()),n},s.start=function(){var e=i(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.bindAll(),e.prev=1,this.adaptBackgroundSize(),F("开始加载UI包..."),e.next=6,v.loadPackage("Game",(function(e,r){var o=e/r;t.updateProgress(o,"加载UI资源")}));case 6:F("所有资源加载完成！");try{this.playBGM(this.node,"Game","Flop_bgm"),F("BGM播放成功")}catch(e){console.warn("BGM播放失败:",e)}v.open(G),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("资源加载失败:",e.t0),v.open(G);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),s.updateProgress=function(e,t){var r=this;b(this.progressObj).stop(),b(this.progressObj).to(.3,{value:e},{onUpdate:function(){r.progressBar.progress=r.progressObj.value;var e=Math.floor(100*r.progressObj.value);r.label.string=e+"%"}}).start()},t}(f)).prototype,"label",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(k.prototype,"progressBar",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(k.prototype,"bg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=k))||P));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});