System.register("chunks:///_virtual/CommonExport.ts",["cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs","./GameItemType.ts","./SimpleSpinCalculator.ts","./LocalSpinConfig.ts"],(function(e){var t;return{setters:[function(a){t=a.cclegacy,e("cc",a)},function(t){e("drongoCC",t)},function(t){e("fgui",t)},function(t){e("drongoGui",t)},function(t){var a={};a.EasterEggMessages=t.EasterEggMessages,a.GameItemDisplayNames=t.GameItemDisplayNames,a.GameItemRarities=t.GameItemRarities,a.GameItemType=t.GameItemType,a.getAllItemTypes=t.getAllItemTypes,a.getEasterEggMessage=t.getEasterEggMessage,a.getItemDisplayName=t.getItemDisplayName,a.getItemRarity=t.getItemRarity,a.getItemTypeByIndex=t.getItemTypeByIndex,a.hasEasterEggMessage=t.hasEasterEggMessage,e(a)},function(t){var a={};a.SimpleSpinCalculator=t.SimpleSpinCalculator,a.testCategorySpins=t.testCategorySpins,a.testSimpleCalculator=t.testSimpleCalculator,e(a)},function(t){var a={};a.LocalSpinConfig=t.LocalSpinConfig,a.SpinStage=t.SpinStage,a.localSpinConfig=t.localSpinConfig,e(a)}],execute:function(){t._RF.push({},"2a54bPglDFEaKMITwv2aDNG","CommonExport",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigBase.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6aa16Nf6rJP87ezxWaLdhoO","ConfigBase",void 0);t("default",function(){function t(){}return t.prototype.init=function(t){var e=this;t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.hasOwnProperty(n)&&(e[n]=t[n])}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(n){var e,t,r,s,i,o,a,u,c;return{setters:[function(n){e=n.inheritsLoose,t=n.createForOfIteratorHelperLoose,r=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){i=n.cclegacy,o=n.JsonAsset},function(n){a=n.autoBindToWindow,u=n.instance_base,c=n.asset}],execute:function(){var f;i._RF.push({},"ab49fwHf11ArqXDrPGKAbkd","ConfigMgr",void 0);var g=a(f=function(n){function i(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))||this).configs=new Map,e.configAssets=new Map,e}e(i,n);var a=i.prototype;return a.loadConfig=function(){var n=r(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.name,!this.configs.has(t)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,c.get("Config/"+t,o,null);case 5:r=n.sent,this.initConfig(e,r);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.initConfig=function(n,e){var t=n.name,r=new Map;for(var s in e.json){var i=e.json[s],o=new n;o.init(i),r.set(parseInt(s),o)}e.decRef(),this.configs.set(t,r)},a.initConfigs=function(){var n=r(s().mark((function n(e){var r,i,a,u,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.get_dir(e,o,null);case 2:for(r=n.sent,i=t(r);!(a=i()).done;)u=a.value,f=u.name.replace(".json",""),this.configAssets.set(f,u);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.getConfig=function(n,e){var t=n.name,r=this.configAssets.get(t);r&&(this.initConfig(n,r),this.configAssets.delete(t));var s=this.configs.get(t);return s?s.get(e):null},a.getAllConfigs=function(n){var e=n.name,t=this.configAssets.get(e);t&&(this.initConfig(n,t),this.configAssets.delete(e));var r=this.configs.get(e);return r||null},a.queryOne=function(n,e){for(var r,s=this.getAllConfigs(n),i=t(s.values());!(r=i()).done;){var o=r.value;if(e(o))return o}return null},a.queryAll=function(n,e){for(var r,s=this.getAllConfigs(n),i=[],o=t(s.values());!(r=o()).done;){var a=r.value;e(a)&&i.push(a)}return i},i}(u))||f;n("configMgr",g.instance());i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Btn2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,o,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.UIPackage,c=t.GButton},function(t){r=t.vm}],execute:function(){var i,u;n._RF.push({},"27625dPQRNPrrt+70wio4Tp","Game_Btn2",void 0);t("default",r(((u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).m_close=void 0,e}return e(n,t),n.createInstance=function(){return o.createObject("Game","Btn2")},n.prototype.onConstruct=function(){this.m_close=this.getChild("close")},n}(c)).URL="ui://6gpz43l1jx0ll",u.Dependencies=["Game"],i=u))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Dialog_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Dialog.ts","./Game_DialogWindow.ts"],(function(o){var e,n,t,i,s,c,l;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy},function(o){t=o.addLogic,i=o.GUIManager,s=o.GUILogicBase},function(o){c=o.default},function(o){l=o.GameDialogWindow}],execute:function(){var a,r;n._RF.push({},"97dbbTuuGFNUL5Q3Pzck7rb","Game_Dialog_Logic",void 0);o("default",t(c)(((r=function(o){function n(){return o.apply(this,arguments)||this}e(n,o);var t=n.prototype;return t.onLoad=function(){console.log("🎭 彩蛋对话框初始化"),this.UI.m_close.onClick(this.onCloseButtonClick,this)},t.start=function(){this.processDialogData()},t.processDialogData=function(){var o=this.Data;if(o)try{console.log("📋 处理对话框数据:",o),this.UI.m_item&&"number"==typeof o.itemIndex?(this.UI.m_item.m_c1.selectedIndex=o.itemIndex,console.log("🎯 设置物品图标索引为: "+o.itemIndex)):console.warn("⚠️ 无法设置物品图标索引"),this.UI.m_content&&o.message?(this.UI.m_content.text=o.message,console.log("📝 设置对话框消息内容")):console.warn("⚠️ 无法设置对话框消息内容")}catch(o){console.error("❌ 处理对话框数据失败:",o)}else console.warn("⚠️ 对话框数据为空")},t.onCloseButtonClick=function(){console.log("❌ 关闭彩蛋对话框");try{i.close(c)}catch(o){console.error("❌ 关闭对话框失败:",o)}},t.onDestroy=function(){console.log("🗑️ 彩蛋对话框已销毁")},n}(s)).uiOptions={modal:!0,windowCls:l},a=r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Dialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;n._RF.push({},"96fc4mIBYJI5KprJiQIOcxN","Game_Dialog",void 0);t("default",c(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_close=void 0,e.m_item=void 0,e.m_content=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","Dialog")},n.prototype.onConstruct=function(){this.m_close=this.getChild("close"),this.m_item=this.getChild("item"),this.m_content=this.getChild("content")},n}(o)).URL="ui://6gpz43l1d7oa27",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_DialogWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs"],(function(t){var n,e,o,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t.tween},function(t){i=t.GUIWindow}],execute:function(){e._RF.push({},"2aa6cjgqFhBDKQ0DaCIe0vX","Game_DialogWindow",void 0);t("GameDialogWindow",function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.onInit=function(){this.center(),this.y-=100,this.contentPane.setPivot(.5,.5,!0),this.contentPane.x+=this.contentPane.width/2},i.doShowAnimation=function(){var n=this;this.contentPane.setScale(.8,.8),this.contentPane.alpha=0,o(this.contentPane).to(.3,{scaleX:1,scaleY:1,alpha:1},{easing:"backOut"}).call((function(){return t.prototype.doShowAnimation.call(n)})).start()},i.doHideAnimation=function(){var n=this;o(this.contentPane).to(.2,{scaleX:.8,scaleY:.8,alpha:0},{easing:"backIn"}).call((function(){return t.prototype.doHideAnimation.call(n)})).start()},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_LaoHuJi_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./fairygui.mjs","./Game_LaoHuJi.ts","./Game_List_Logic.ts","./Game_Tips.ts","./Game_Dialog.ts","./GameItemType.ts","./SimpleSpinCalculator.ts"],(function(t){var e,i,n,o,s,r,a,c,l,u,h,g,p,m,f,d,I,y,L;return{setters:[function(t){e=t.inheritsLoose,i=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t.tween},function(t){r=t.addLogic,a=t.GUILogicBase,c=t.GUIManager},function(t){l=t.UIPackage,u=t.GRoot},function(t){h=t.default},function(t){g=t.default},function(t){p=t.default},function(t){m=t.default},function(t){f=t.getItemRarity,d=t.getItemDisplayName,I=t.getEasterEggMessage,y=t.GameItemType},function(t){L=t.SimpleSpinCalculator}],execute:function(){var v;o._RF.push({},"53068LX+SxPEoNoPdC8rY1V","Game_LaoHuJi_Logic",void 0);t("default",r(h)(v=function(t){function o(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).isSpinning=!1,e.list1Logic=null,e.list2Logic=null,e.list3Logic=null,e.spinCalculator=null,e.previousRoundResults=null,e.lightAnimationId=0,e.currentLightState=0,e.lightTimeoutIds=[],e.currentEasterEggIndex=0,e}e(o,t);var r=o.prototype;return r.onLoad=function(){var t=i(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.list1Logic=this.UI.m_list1.Get(g),this.list2Logic=this.UI.m_list2.Get(g),this.list3Logic=this.UI.m_list3.Get(g),this.UI.m_btnChouJiang.onClick(this.onSpinButtonClick,this),this.UI.m_tipBtn.onClick(this.onTipButtonClick,this),t.next=7,this.initializeSpinSystem();case 7:this.startIdleLightAnimation(),console.log("🎰 老虎机初始化完成");case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.initializeSpinSystem=function(){var t=i(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("🔧 初始化转盘配置系统..."),this.spinCalculator=new L(0),t.next=5,this.spinCalculator.initialize();case 5:console.log("✅ 转盘系统初始化完成, 当前次数: "+this.spinCalculator.getSpinCount()),console.log("📊 配置版本: "+this.spinCalculator.getConfigVersion()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("❌ 转盘系统初始化失败:",t.t0),console.error("⚠️ 将使用默认抽奖逻辑作为后备方案");case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),r.onSpinButtonClick=function(){var t=i(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isSpinning){t.next=2;break}return t.abrupt("return");case 2:return console.log("🎰 开始抽奖！"),this.isSpinning=!0,this.UI.m_btnChouJiang.enabled=!1,this.resetUIState(),this.startSpinLightAnimation(),t.prev=7,t.next=10,this.performSpinAnimation();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(7),console.error("❌ 抽奖出错:",t.t0);case 15:return t.prev=15,this.isSpinning=!1,this.UI.m_btnChouJiang.enabled=!0,t.finish(15);case 19:case"end":return t.stop()}}),t,this,[[7,12,15,19]])})));return function(){return t.apply(this,arguments)}}(),r.onTipButtonClick=function(){var t=i(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("💡 打开游戏提示弹窗"),t.prev=1,t.next=4,c.open(p);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error("❌ 打开提示弹窗失败:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),r.performSpinAnimation=function(){var t=i(n().mark((function t(){var e,i,o,s,r,a=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if([],i=[],!this.spinCalculator||!this.spinCalculator.isReady()){t.next=9;break}e=this.spinCalculator.performFullSpin(),i=this.spinCalculator.convertSpinResults(e),console.log("🎯 配置系统抽奖结果:",e),console.log("📦 转换后的奖励结果:",i),t.next=17;break;case 9:return console.warn("⚠️ 配置系统不可用，使用后备滚动逻辑"),o=function(t){return new Promise((function(e){return setTimeout(e,t)}))},2,s=[this.list1Logic.spin(2),o(200).then((function(){return a.list2Logic.spin(2.5)})),o(400).then((function(){return a.list3Logic.spin(3)}))],t.next=15,Promise.all(s);case 15:r=[this.list1Logic.getCurrentCenterItem(),this.list2Logic.getCurrentCenterItem(),this.list3Logic.getCurrentCenterItem()],i=r.filter((function(t){return null!==t}));case 17:if(!(i.length>=3)){t.next=20;break}return t.next=20,this.performVisualSpinAnimation(i);case 20:return console.log("🎊 抽奖动画完成！"),console.log("🎁 最终结果:",i.map((function(t){return d(t.itemType)}))),t.next=24,this.checkWinningCombination(i);case 24:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.performVisualSpinAnimation=function(){var t=i(n().mark((function t(e){var i,o,s,r=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length<3)){t.next=3;break}return console.warn("⚠️ 目标结果不足3个，无法执行同步滚动"),t.abrupt("return");case 3:return i=function(t){return new Promise((function(e){return setTimeout(e,t)}))},2,console.log("🎭 开始同步滚动到配置系统结果:"),console.log("   A转盘目标: "+d(e[0].itemType)+" ("+e[0].itemType+") - 2秒"),console.log("   B转盘目标: "+d(e[1].itemType)+" ("+e[1].itemType+") - 2.5秒"),console.log("   C转盘目标: "+d(e[2].itemType)+" ("+e[2].itemType+") - 3秒"),o=[this.list1Logic.spinToTarget(e[0],2),i(200).then((function(){return r.list2Logic.spinToTarget(e[1],2.5)})),i(400).then((function(){return r.list3Logic.spinToTarget(e[2],3)}))],t.next=12,Promise.all(o);case 12:console.log("✨ 同步滚动动画完成，视觉效果已与配置系统结果一致"),s=[this.list1Logic.getCurrentCenterItem(),this.list2Logic.getCurrentCenterItem(),this.list3Logic.getCurrentCenterItem()],console.log("🔍 滚动后验证:"),s.forEach((function(t,i){var n=d(e[i].itemType),o=t?d(t.itemType):"未知",s=(null==t?void 0:t.itemType)===e[i].itemType?"✅":"❌";console.log("   转盘"+(i+1)+": 目标["+n+"] 实际["+o+"] "+s)}));case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.checkWinningCombination=function(){var t=i(n().mark((function t(e){var i,o,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(3===e.length){t.next=3;break}return console.log("❌ 抽奖结果不完整"),t.abrupt("return");case 3:if(i=e[0],o=e[1],s=e[2],i.itemType!==o.itemType||o.itemType!==s.itemType){t.next=9;break}return t.next=7,this.onWinThreeOfAKind(i,e);case 7:t.next=10;break;case 9:i.itemType===o.itemType||o.itemType===s.itemType||i.itemType===s.itemType?this.onWinTwoOfAKind(e):this.isSpecialCombination(e)?this.onSpecialCombination(e):this.onBasicWin(e);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.onWinThreeOfAKind=function(){var t=i(n().mark((function t(e,i){var o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.getRarityMultiplier(f(e.itemType)),console.log("🎉 恭喜！三个"+d(e.itemType)+"！获得 "+o+"倍 奖励！"),this.startBigWinLightAnimation(),this.playWinEffect("three_of_a_kind",o,i),t.next=6,this.showEasterEggDialog(e);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),r.onWinTwoOfAKind=function(t){for(var e=null,i=0;i<t.length-1;i++){for(var n=i+1;n<t.length;n++)if(t[i].itemType===t[n].itemType){e=t[i];break}if(e)break}if(e){var o=Math.floor(this.getRarityMultiplier(f(e.itemType))/2);console.log("🎊 不错！两个"+d(e.itemType)+"！获得 "+o+"倍 奖励！"),this.startMediumWinLightAnimation(),this.playWinEffect("two_of_a_kind",o,t)}},r.getRarityMultiplier=function(t){switch(t){case"Common":return 10;case"Rare":return 20;case"Epic":return 30;case"Legendary":return 50;default:return 10}},r.isSpecialCombination=function(t){return t.map((function(t){return f(t.itemType)})).every((function(t){return"Epic"===t||"Legendary"===t}))},r.onSpecialCombination=function(t){console.log("✨ 特殊组合！获得额外奖励！"),this.startSpecialComboLightAnimation(),this.playWinEffect("special_combo",15,t)},r.onBasicWin=function(t){var e=this.calculateAverageMultiplier(t);console.log("🎊 恭喜中奖！获得基础奖励 "+e+"倍！"),this.startBasicWinLightAnimation(),this.playWinEffect("basic_win",e,t)},r.calculateAverageMultiplier=function(t){var e=this,i=t.reduce((function(t,i){return t+e.getRarityMultiplier(f(i.itemType))}),0);return Math.max(1,Math.floor(i/3/t.length))},r.playWinEffect=function(t,e,i){console.log("🎭 播放效果: "+t+", 倍数: "+e),this.showResultsOnUI(i,t,e)},r.showResultsOnUI=function(t,e,i){try{console.log("🎨 在UI上显示抽奖结果:",t),this.previousRoundResults=[].concat(t),console.log("💾 当前轮结果已保存为下一轮的历史结果"),this.isFirstTimeSpinning()?console.log("🥇 首次抽奖完成，结果已保存但不显示界面"):(this.UI.m_c2.selectedIndex=1,console.log("✅ 切换m_c2到index 1，显示抽奖结果界面"),t.length>=3?(this.highlightWinningItemsInLists(t),console.log("🎊 当前轮抽奖完成: ["+d(t[0].itemType)+", "+d(t[1].itemType)+", "+d(t[2].itemType)+"]")):console.warn("⚠️ 结果数据不足3个，无法高亮中奖物品"))}catch(t){console.error("❌ 显示UI结果失败:",t)}},r.isFirstTimeSpinning=function(){try{var t=0;this.spinCalculator&&(t=this.spinCalculator.getSpinCount());var e=1===t;return console.log("🎲 首次抽奖检查: 抽奖次数="+t+", 判定为首次="+e),e}catch(t){return console.warn("⚠️ 检查首次抽奖状态失败:",t),!1}},r.highlightWinningItemsInLists=function(t){try{console.log("🌟 高亮转动列表中的中奖物品"),t.length>=3?(this.list1Logic.highlightWinningItem(t[0]),this.list2Logic.highlightWinningItem(t[1]),this.list3Logic.highlightWinningItem(t[2]),console.log("✨ 转动列表高亮完成: ["+d(t[0].itemType)+", "+d(t[1].itemType)+", "+d(t[2].itemType)+"]")):console.warn("⚠️ 中奖结果数据不足，无法高亮转动列表item")}catch(t){console.error("❌ 高亮转动列表中奖物品失败:",t)}},r.resetUIState=function(){try{this.stopLightAnimation(),this.updateHistoryDisplay(),this.resetItemHighlights()}catch(t){console.error("❌ 重置UI状态失败:",t)}},r.updateHistoryDisplay=function(){try{if(this.previousRoundResults&&this.previousRoundResults.length>=3){console.log("📜 更新历史结果显示:",this.previousRoundResults),this.showHistoryArea(!0);var t=this.previousRoundResults[0].itemType;this.UI.m_lastItem1.m_c1.selectedIndex=t,console.log("📜 历史lastItem1设置为图标"+t+" ("+d(this.previousRoundResults[0].itemType)+")");var e=this.previousRoundResults[1].itemType;this.UI.m_lastItem2.m_c1.selectedIndex=e,console.log("📜 历史lastItem2设置为图标"+e+" ("+d(this.previousRoundResults[1].itemType)+")");var i=this.previousRoundResults[2].itemType;this.UI.m_lastItem3.m_c1.selectedIndex=i,console.log("📜 历史lastItem3设置为图标"+i+" ("+d(this.previousRoundResults[2].itemType)+")"),console.log("✅ 历史结果显示完成: ["+d(this.previousRoundResults[0].itemType)+", "+d(this.previousRoundResults[1].itemType)+", "+d(this.previousRoundResults[2].itemType)+"]")}else console.log("📜 无上一轮结果，隐藏历史区域"),this.showHistoryArea(!1)}catch(t){console.error("❌ 更新历史结果显示失败:",t)}},r.showHistoryArea=function(t){try{this.UI.m_lastItem1.visible=t,this.UI.m_lastItem2.visible=t,this.UI.m_lastItem3.visible=t,console.log(t?"👁️ 历史区域已显示":"🙈 历史区域已隐藏")}catch(t){console.error("❌ 控制历史区域显示失败:",t)}},r.resetItemHighlights=function(){try{console.log("🔄 重置转动列表ITEM高亮状态"),this.list1Logic.resetAllItemHighlights(),this.list2Logic.resetAllItemHighlights(),this.list3Logic.resetAllItemHighlights(),console.log("✅ 所有转动列表item高亮状态已重置")}catch(t){console.error("❌ 重置转动列表ITEM高亮状态失败:",t)}},r.getItemDisplayNameById=function(t){var e=parseInt(t);return d(e)},r.showWinFeedback=function(t){t>0&&s(this.UI.m_btnChouJiang).to(.1,{scaleX:1.1,scaleY:1.1}).to(.1,{scaleX:1,scaleY:1}).start()},r.forceStopSpin=function(){this.list1Logic.stopSpin(),this.list2Logic.stopSpin(),this.list3Logic.stopSpin(),this.isSpinning=!1,this.UI.m_btnChouJiang.enabled=!0},r.showEasterEggDialog=function(){var t=i(n().mark((function t(e){var i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("🥚 彩蛋时刻！显示特殊对话框"),i=I(e.itemType),o={itemIndex:e.itemType,itemName:d(e.itemType),rarity:f(e.itemType),message:i},t.next=6,c.open(m,o);case 6:console.log("✅ 彩蛋对话框已关闭"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("❌ 显示彩蛋对话框失败:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),r.playSlotsSound=function(){try{console.log("🔊 播放抽奖音效: slots");var t=l.getByName("Game");if(!t)return void console.warn("⚠️ 未找到Game包，无法播放音效");var e=t.getItemAssetByName("slots");if(!e)return void console.warn("⚠️ 未找到slots音效资源");u.inst.playOneShotSound(e),console.log("✅ slots音效播放成功")}catch(t){console.error("❌ 播放slots音效失败:",t)}},r.resetSpinCount=function(){this.spinCalculator&&(this.spinCalculator.resetSpinCount(),console.log("🔄 抽奖次数已重置为0"))},r.getSpinStats=function(){return this.spinCalculator?this.spinCalculator.getStats():{error:"配置系统未初始化"}},r.getDebugInfo=function(){return this.spinCalculator?this.spinCalculator.getDebugInfo():"❌ 配置系统未初始化"},r.triggerTestEasterEgg=function(){var t=i(n().mark((function t(){var e,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isSpinning){t.next=3;break}return console.warn("⚠️ 正在抽奖中，无法触发测试彩蛋"),t.abrupt("return");case 3:if(this.spinCalculator){t.next=6;break}return console.error("❌ 抽奖计算器未初始化，无法进行测试"),t.abrupt("return");case 6:return console.log("🧪 启动彩蛋测试模式..."),e=[y.COSPLAY,y.WINE_GLASS,y.BLINDFOLD,y.MUTE],i=e[this.currentEasterEggIndex],console.log("🎯 预设彩蛋物品: "+d(i)+" (索引: "+this.currentEasterEggIndex+"/"+(e.length-1)+")"),this.currentEasterEggIndex=(this.currentEasterEggIndex+1)%e.length,console.log("🔄 下次彩蛋索引已更新为: "+this.currentEasterEggIndex),this.spinCalculator.setTestEasterEgg(i),t.next=15,this.performSpinAnimation();case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.onDestroy=function(){this.forceStopSpin(),this.stopLightAnimation(),console.log("🎰 老虎机组件已销毁")},r.startIdleLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("💡 启动待机灯光动画"),this.currentLightState=0,this.UI.m_c1.selectedIndex=this.currentLightState,this.lightAnimationId=window.setInterval((function(){t.currentLightState=0===t.currentLightState?1:0,t.UI.m_c1.selectedIndex=t.currentLightState}),500)},r.startSpinLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("⚡ 启动抽奖灯光动画"),this.currentLightState=0,this.lightAnimationId=window.setInterval((function(){t.currentLightState=0===t.currentLightState?1:0,t.UI.m_c1.selectedIndex=t.currentLightState}),200)},r.startBigWinLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("🎆 启动大奖灯光动画"),this.UI.m_c1.selectedIndex=3,this.setLightTimeout((function(){var e=2;t.UI.m_c1.selectedIndex=e,t.lightAnimationId=window.setInterval((function(){e=2===e?3:2,t.UI.m_c1.selectedIndex=e}),150),t.setLightTimeout((function(){t.startIdleLightAnimation()}),1500)}),1e3)},r.startMediumWinLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("🎉 启动中等奖励灯光动画"),this.UI.m_c1.selectedIndex=2,this.setLightTimeout((function(){t.currentLightState=0,t.lightAnimationId=window.setInterval((function(){t.currentLightState=0===t.currentLightState?1:0,t.UI.m_c1.selectedIndex=t.currentLightState}),200),t.setLightTimeout((function(){t.startIdleLightAnimation()}),1e3)}),800)},r.startBasicWinLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("🎈 启动基础奖励灯光动画"),this.UI.m_c1.selectedIndex=2,this.setLightTimeout((function(){t.currentLightState=0,t.lightAnimationId=window.setInterval((function(){t.currentLightState=0===t.currentLightState?1:0,t.UI.m_c1.selectedIndex=t.currentLightState}),250),t.setLightTimeout((function(){t.startIdleLightAnimation()}),800)}),600)},r.startSpecialComboLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("🌟 启动特殊组合灯光动画"),this.UI.m_c1.selectedIndex=3,this.setLightTimeout((function(){var e=[2,3,0,1],i=0;t.lightAnimationId=window.setInterval((function(){t.UI.m_c1.selectedIndex=e[i],i=(i+1)%e.length}),200),t.setLightTimeout((function(){t.startIdleLightAnimation()}),1200)}),800)},r.setLightTimeout=function(t,e){var i=window.setTimeout(t,e);this.lightTimeoutIds.push(i)},r.stopLightAnimation=function(){this.lightAnimationId>0&&(window.clearInterval(this.lightAnimationId),this.lightAnimationId=0),this.lightTimeoutIds.forEach((function(t){window.clearTimeout(t)})),this.lightTimeoutIds=[],console.log("🛑 所有灯光动画已停止")},o}(a))||v);o._RF.pop()}}}));

System.register("chunks:///_virtual/Game_LaoHuJi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var i,e,s,n,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy},function(t){s=t.UIPackage,n=t.GComponent},function(t){o=t.vm}],execute:function(){var l,h;e._RF.push({},"9c466Ear5tOKah6GPn595XD","Game_LaoHuJi",void 0);t("default",o(((h=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(i=t.call.apply(t,[this].concat(s))||this).m_c1=void 0,i.m_c2=void 0,i.m_btnChouJiang=void 0,i.m_list1=void 0,i.m_list2=void 0,i.m_list3=void 0,i.m_tipBtn=void 0,i.m_lastItem1=void 0,i.m_lastItem2=void 0,i.m_lastItem3=void 0,i}return i(e,t),e.createInstance=function(){return s.createObject("Game","LaoHuJi")},e.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_btnChouJiang=this.getChild("btnChouJiang"),this.m_list1=this.getChild("list1"),this.m_list2=this.getChild("list2"),this.m_list3=this.getChild("list3"),this.m_tipBtn=this.getChild("tipBtn"),this.m_lastItem1=this.getChild("lastItem1"),this.m_lastItem2=this.getChild("lastItem2"),this.m_lastItem3=this.getChild("lastItem3")},e}(n)).URL="ui://6gpz43l1jx0lh",h.Dependencies=["Game"],l=h))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_List_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_List.ts","./Game_ListItem.ts","./Game_ListItem_Logic.ts","./fairygui.mjs","./GameItemType.ts"],(function(t){var e,i,n,s,o,r,a,h,c,u,l,p,g,m;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,n=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,r=t.tween,a=t.AudioSource},function(t){h=t.addLogic,c=t.GUILogicBase},function(t){u=t.default},function(t){l=t.default},function(t){p=t.default},function(t){g=t.UIPackage},function(t){m=t.getItemDisplayName}],execute:function(){var f;o._RF.push({},"a224edGKPpCPpJiMS6CQtlR","Game_List_Logic",void 0);t("default",h(u)(f=function(t){function o(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).rewardItems=[],e.controllerPageCount=0,e.itemInstances=[],e.itemLogics=[],e.isSpinning=!1,e.spinTween=null,e.currentOffset=0,e.VISIBLE_ITEMS=7,e.DISPLAY_ITEMS=3,e.itemHeight=0,e.lineGap=0,e.rowHeight=0,e.containerHeight=0,e.POSITION_OFFSET_ADJUSTMENT=-100,e.CENTER_INDEX_ADJUSTMENT=0,e.FINAL_OFFSET_ADJUSTMENT=0,e.spinAudioSource=null,e}e(o,t);var h=o.prototype;return h.onLoad=function(){console.log("🔧 Game_List_Logic onLoad 开始");try{this.initializeLayoutSettings(),this.initializeItems(),this.setupInitialPosition(),this.applyCurveEffect(),console.log("✅ Game_List_Logic 初始化完成")}catch(t){console.error("❌ Game_List_Logic 初始化失败:",t)}},h.initializeLayoutSettings=function(){console.log("🔧 初始化布局设置"),this.lineGap=this.UI.m_list.lineGap,console.log("📏 从m_list获取行距: "+this.lineGap);var t=l.createInstance();this.itemHeight=t.height,this.controllerPageCount=t.m_c1.pageCount,t.dispose(),this.initializeRewardItems(),this.rowHeight=this.itemHeight+this.lineGap,this.containerHeight=this.DISPLAY_ITEMS*this.rowHeight,console.log("📐 布局参数: item高度="+this.itemHeight+", 行距="+this.lineGap+", 总行高="+this.rowHeight+", 容器高度="+this.containerHeight),console.log("🎰 Controller页面数量: "+this.controllerPageCount+", 奖品数量: "+this.rewardItems.length)},h.initializeRewardItems=function(){console.log("🔧 根据Controller页面数量初始化奖品数据"),this.rewardItems=[];for(var t=0;t<this.controllerPageCount;t++){var e=t;this.rewardItems.push({itemType:e})}console.log("✅ 创建了"+this.rewardItems.length+"个奖品数据")},h.initializeItems=function(){console.log("🔧 开始创建item实例");for(var t=0;t<this.VISIBLE_ITEMS;t++)try{var e=l.createInstance(),i=e.Get(p);this.UI.addChild(e),this.itemInstances.push(e),this.itemLogics.push(i)}catch(e){console.error("❌ 创建第 "+(t+1)+" 个item失败:",e)}},h.setupInitialPosition=function(){this.currentOffset=0,this.updateItemsDisplay(),console.log("🔧 初始位置设置完成，偏移="+this.currentOffset)},h.updateItemsDisplay=function(){for(var t=Math.floor(this.currentOffset/this.rowHeight),e=0;e<this.VISIBLE_ITEMS;e++){var i=this.itemInstances[e],n=this.itemLogics[e],s=Math.floor(this.VISIBLE_ITEMS/2)+this.CENTER_INDEX_ADJUSTMENT,o=(t-s+e+1e3*this.rewardItems.length)%this.rewardItems.length,r=this.rewardItems[o];n.setItemData(r);var a=(e-s)*this.rowHeight-this.currentOffset%this.rowHeight+this.POSITION_OFFSET_ADJUSTMENT;i.y=a;var h=a>=-this.rowHeight&&a<=this.containerHeight;i.visible=h}},h.applyCurveEffect=function(){},h.spin=function(){var t=n(s().mark((function t(e){var i,n,o=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=2),!this.isSpinning){t.next=4;break}return console.log("⚠️ 正在旋转中，忽略新的旋转请求"),t.abrupt("return",null);case 4:return this.isSpinning=!0,console.log("🎰 开始随机旋转，时长: "+e+"秒"),this.spinTween&&this.spinTween.stop(),i=this.getRandomReward(),n=this.rewardItems.findIndex((function(t){return t.itemType===i.itemType})),t.abrupt("return",new Promise((function(t){o.performSpin(e,i,n,t)})));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),h.spinToTarget=function(){var t=n(s().mark((function t(e,i){var n,o,r,a=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i&&(i=2),!this.isSpinning){t.next=4;break}return console.log("⚠️ 正在旋转中，忽略新的旋转请求"),t.abrupt("return",e);case 4:if(this.isSpinning=!0,console.log("🎯 开始滚动到指定目标: "+m(e.itemType)+" ("+e.itemType+")，时长: "+i+"秒"),this.spinTween&&this.spinTween.stop(),-1!==(n=this.rewardItems.findIndex((function(t){return t.itemType===e.itemType})))){t.next=12;break}return console.warn("⚠️ 未找到目标物品 "+m(e.itemType)+"，使用第一个物品"),o=this.rewardItems[0],t.abrupt("return",new Promise((function(t){a.performSpin(i,o,0,t)})));case 12:return r=this.rewardItems[n],console.log("✅ 找到本地目标物品: "+m(r.itemType)+", 索引: "+n),t.abrupt("return",new Promise((function(t){a.performSpin(i,r,n,t)})));case 15:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),h.performSpin=function(t,e,i,n){var s=this;console.log("🎯 开始滚动到目标: 索引="+i+", 物品="+m(e.itemType)+", 时长="+t+"秒"),this.playSpinSound();var o=this.currentOffset,a=this.rewardItems.length,h=this.rowHeight*a*3,c=Math.round(o/this.rowHeight)%a,u=-this.rowHeight,l=i-c;l<0&&(l+=a);var p=Math.round(o/this.rowHeight)*this.rowHeight+h+l*this.rowHeight+u+this.FINAL_OFFSET_ADJUSTMENT,g={offset:o};this.spinTween=r(g).to(t,{offset:p},{easing:"cubicOut",onUpdate:function(){s.currentOffset=g.offset,s.updateItemsDisplay(),s.applyCurveEffect()}}).call((function(){s.currentOffset=p,s.updateItemsDisplay(),s.applyCurveEffect(),s.isSpinning=!1,s.stopSpinSound();var t=s.getCurrentCenterItem();console.log("✅ 旋转完成，目标: "+m(e.itemType)+", 实际中心: "+(t?m(t.itemType):"未知")),console.log("📋 当前所有可见item状态:");for(var i=0;i<s.VISIBLE_ITEMS;i++)if(s.itemInstances[i].visible)s.itemLogics[i].getItemData(),Math.floor(s.VISIBLE_ITEMS/2),s.CENTER_INDEX_ADJUSTMENT;n(e)})),this.spinTween.start()},h.getCurrentCenterItem=function(){var t=(this.currentOffset+this.rowHeight)/this.rowHeight,e=(Math.round(t)%this.rewardItems.length+this.rewardItems.length)%this.rewardItems.length;return this.rewardItems[e]},h.getRandomReward=function(){var t=Math.floor(Math.random()*this.rewardItems.length);return this.rewardItems[t]||this.rewardItems[0]},h.stopSpin=function(){this.spinTween&&(this.spinTween.stop(),this.spinTween=null),this.isSpinning=!1,this.stopSpinSound()},h.resetAllItemHighlights=function(){console.log("🔄 重置转动列表所有item高亮状态");for(var t,e=i(this.itemLogics);!(t=e()).done;){t.value.resetHighlight()}},h.highlightWinningItem=function(t){console.log("🌟 高亮转动列表中的中奖item: "+m(t.itemType));for(var e,n=i(this.itemLogics);!(e=n()).done;){var s=e.value,o=s.getItemData();o&&o.itemType===t.itemType?s.setHighlight(!0):s.setHighlight(!1)}},h.playSpinSound=function(){try{console.log("🔊 开始播放循环转动音效"),this.stopSpinSound();var t=g.getByName("Game");if(!t)return void console.warn("⚠️ 未找到Game包，无法播放转动音效");var e=t.getItemAssetByName("slots");if(!e)return void console.warn("⚠️ 未找到slots音效资源");this.spinAudioSource||(this.spinAudioSource=this.UI.node.addComponent(a)),this.spinAudioSource.clip=e,this.spinAudioSource.volume=.5,this.spinAudioSource.loop=!0,this.spinAudioSource.playOnAwake=!1,this.spinAudioSource.play(),console.log("✅ 循环转动音效播放开始")}catch(t){console.error("❌ 播放循环转动音效失败:",t)}},h.stopSpinSound=function(){try{this.spinAudioSource&&this.spinAudioSource.playing&&(this.spinAudioSource.stop(),console.log("🔇 循环转动音效已停止"))}catch(t){console.error("❌ 停止循环转动音效失败:",t)}},h.onDestroy=function(){this.stopSpin(),this.stopSpinSound(),this.spinAudioSource&&(this.spinAudioSource.destroy(),this.spinAudioSource=null);for(var t,e=i(this.itemInstances);!(t=e()).done;){var n=t.value;n&&n.parent&&n.parent.removeChild(n)}this.itemInstances=[],this.itemLogics=[]},o}(c))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/Game_List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;n._RF.push({},"a6828/5bmRDmKzjmiFjMCTg","Game_List",void 0);t("default",c(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_list=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","List")},n.prototype.onConstruct=function(){this.m_list=this.getChild("list")},n}(o)).URL="ui://6gpz43l1jx0li",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ListItem_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_ListItem.ts"],(function(t){var e,i,n,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.addLogic,s=t.GUILogicBase},function(t){c=t.default}],execute:function(){var a;i._RF.push({},"af797pqiI9OP5NKkIXq041v","Game_ListItem_Logic",void 0);t("default",n(c)(a=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).itemData=null,e}e(i,t);var n=i.prototype;return n.onLoad=function(){},n.setItemData=function(t){try{this.itemData=t,this.updateDisplay()}catch(e){console.error("❌ 设置item数据失败:",e,t)}},n.updateDisplay=function(){if(this.itemData){var t=this.itemData.itemType;t>=0&&t<this.UI.m_c1.pageCount?this.UI.m_c1.selectedIndex=t:this.UI.m_c1.selectedIndex=0,this.UI.m_c2&&(this.UI.m_c2.selectedIndex=0)}},n.getItemData=function(){return this.itemData},n.setHighlight=function(t){this.UI.m_c2&&(this.UI.m_c2.selectedIndex=t?1:0)},n.resetHighlight=function(){this.setHighlight(!1)},i}(s))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;n._RF.push({},"5a1aftqf4FFtrg38oAdIngc","Game_ListItem",void 0);t("default",c(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_c1=void 0,e.m_c2=void 0,e.m_title=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","ListItem")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_title=this.getChild("title")},n}(o)).URL="ui://6gpz43l1jx0lj",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Main_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Main.ts","./Game_LaoHuJi_Logic.ts"],(function(t){var n,o,e,i,r,c,a,u;return{setters:[function(t){n=t.inheritsLoose,o=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){i=t.cclegacy},function(t){r=t.addLogic,c=t.GUILogicBase},function(t){a=t.default},function(t){u=t.default}],execute:function(){var s;i._RF.push({},"b1be6hjkcJNEbWAMaTzJw7t","Game_Main_Logic",void 0);t("default",r(a)(s=function(t){function i(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).laoHuJiLogic=null,n}n(i,t);var r=i.prototype;return r.onLoad=function(){console.log("🎮 主界面加载中..."),this.laoHuJiLogic=this.UI.m_LaoHuJi.Get(u),this.UI.m_caidan.onClick(this.onCaidanButtonClick,this),console.log("✅ 主界面加载完成！"),console.log("🎰 老虎机已准备就绪，可以开始抽奖！"),console.log("🧪 测试按钮已设置：点击菜单按钮可以触发彩蛋测试")},r.getLaoHuJiLogic=function(){return this.laoHuJiLogic},r.onCaidanButtonClick=function(){var t=o(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("🧪 菜单按钮被点击，触发彩蛋测试"),this.laoHuJiLogic){t.next=5;break}return console.error("❌ 老虎机逻辑组件未初始化"),t.abrupt("return");case 5:return t.next=7,this.laoHuJiLogic.triggerTestEasterEgg();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("❌ 触发彩蛋测试失败:",t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),r.testSpin=function(){this.laoHuJiLogic&&console.log("🧪 脚本触发测试抽奖...")},r.triggerEasterEggTest=function(){var t=o(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.onCaidanButtonClick();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i}(c))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(n){var t,e,i,a,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){i=n.UIPackage,a=n.GComponent},function(n){o=n.vm}],execute:function(){var c,r;e._RF.push({},"21c70EJVrJPmpX+Ven0ryCl","Game_Main",void 0);n("default",o(((r=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))||this).m_LaoHuJi=void 0,t.m_caidan=void 0,t}return t(e,n),e.createInstance=function(){return i.createObject("Game","Main")},e.prototype.onConstruct=function(){this.m_LaoHuJi=this.getChild("LaoHuJi"),this.m_caidan=this.getChild("caidan")},e}(a)).URL="ui://6gpz43l1jx0l6",r.Dependencies=["Game"],c=r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Tips_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Tips.ts"],(function(o){var n,t,e,i,s,c,u;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy},function(o){e=o.UILayer,i=o.addLogic,s=o.GUIManager,c=o.GUILogicBase},function(o){u=o.default}],execute:function(){var l,r;t._RF.push({},"e455651zgtOyqYdT6rrbhyg","Game_Tips_Logic",void 0);o("default",i(u)(((r=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var e=t.prototype;return e.onLoad=function(){this.UI.m_close.onClick(this.onCloseButtonClick,this),console.log("💡 游戏提示弹窗初始化完成")},e.onCloseButtonClick=function(){console.log("❌ 关闭游戏提示弹窗"),s.close(u)},t}(c)).uiOptions={layer:e.WINDOW,modal:!0,hideLoadModal:!0},l=r))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var n,t,c,o,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){c=e.UIPackage,o=e.GComponent},function(e){i=e.vm}],execute:function(){var r,u;t._RF.push({},"5fc73p3AMBJTJUuVDeIHVe+","Game_Tips",void 0);e("default",i(((u=function(e){function t(){for(var n,t=arguments.length,c=new Array(t),o=0;o<t;o++)c[o]=arguments[o];return(n=e.call.apply(e,[this].concat(c))||this).m_close=void 0,n}return n(t,e),t.createInstance=function(){return c.createObject("Game","Tips")},t.prototype.onConstruct=function(){this.m_close=this.getChild("close")},t}(o)).URL="ui://6gpz43l1u9ma20",u.Dependencies=["Game"],r=u))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameBinder.ts",["cc","./drongo-gui.mjs","./fairygui.mjs","./Game_Dialog.ts","./Game_Main.ts","./Game_LaoHuJi.ts","./Game_List.ts","./Game_ListItem.ts","./Game_Tips.ts"],(function(t){var n,e,i,s,o,u,a,c,f;return{setters:[function(t){n=t.cclegacy},function(t){e=t.registerBinder},function(t){i=t.UIObjectFactory},function(t){s=t.default},function(t){o=t.default},function(t){u=t.default},function(t){a=t.default},function(t){c=t.default},function(t){f=t.default}],execute:function(){var r;n._RF.push({},"08650ol6cNIYZrNjDtTl1mL","GameBinder",void 0);t("default",e(r=function(){function t(){}return t.prototype.bindAll=function(){i.setExtension(s.URL,s),i.setExtension(o.URL,o),i.setExtension(u.URL,u),i.setExtension(a.URL,a),i.setExtension(c.URL,c),i.setExtension(f.URL,f)},t}())||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameItemType.ts",["cc"],(function(e){var E;return{setters:[function(e){E=e.cclegacy}],execute:function(){var t,n,T;e({getAllItemTypes:function(){return Object.values(r).filter((function(e){return"number"==typeof e}))},getEasterEggMessage:function(e){var E=s[e];if(E)return E;return"🎉 Easter Egg Moment! 🎉\n\nCongratulations on getting three identical "+i(e)+"!\n\nThis is a special Easter egg moment, you got an extra surprise reward!"},getItemDisplayName:i,getItemRarity:function(e){return a[e]||"Common"},getItemTypeByIndex:function(e){if(e>=0&&e<=r.MOUTH)return e;return null},hasEasterEggMessage:function(e){return""!==s[e]}}),E._RF.push({},"0f92d3FW31FepgJSfrDuDkZ","GameItemType",void 0);var r=e("GameItemType",function(e){return e[e.TIME_10_SECONDS=0]="TIME_10_SECONDS",e[e.COSPLAY=1]="COSPLAY",e[e.EAR=2]="EAR",e[e.MUTE=3]="MUTE",e[e.WINE_GLASS=4]="WINE_GLASS",e[e.BLINDFOLD=5]="BLINDFOLD",e[e.THREE_TIMES=6]="THREE_TIMES",e[e.TONGUE=7]="TONGUE",e[e.HAND=8]="HAND",e[e.PEACH_BUTT=9]="PEACH_BUTT",e[e.DONUT=10]="DONUT",e[e.LEG=11]="LEG",e[e.TOY=12]="TOY",e[e.BANANA_MALE=13]="BANANA_MALE",e[e.TEETH_BITE=14]="TEETH_BITE",e[e.CHERRY_CHEST=15]="CHERRY_CHEST",e[e.MOUTH=16]="MOUTH",e}({})),o=e("GameItemDisplayNames",((t={})[r.TIME_10_SECONDS]="10秒",t[r.COSPLAY]="cosplay",t[r.EAR]="耳朵",t[r.MUTE]="静音",t[r.WINE_GLASS]="酒杯",t[r.BLINDFOLD]="蒙眼",t[r.THREE_TIMES]="三次",t[r.TONGUE]="舌头",t[r.HAND]="手",t[r.PEACH_BUTT]="桃子",t[r.DONUT]="甜甜圈",t[r.LEG]="腿",t[r.TOY]="玩具",t[r.BANANA_MALE]="香蕉",t[r.TEETH_BITE]="牙齿",t[r.CHERRY_CHEST]="樱桃",t[r.MOUTH]="嘴巴",t)),a=e("GameItemRarities",((n={})[r.TIME_10_SECONDS]="Common",n[r.COSPLAY]="Rare",n[r.EAR]="Common",n[r.MUTE]="Common",n[r.WINE_GLASS]="Rare",n[r.BLINDFOLD]="Epic",n[r.THREE_TIMES]="Legendary",n[r.TONGUE]="Rare",n[r.HAND]="Common",n[r.PEACH_BUTT]="Epic",n[r.DONUT]="Common",n[r.LEG]="Rare",n[r.TOY]="Epic",n[r.BANANA_MALE]="Epic",n[r.TEETH_BITE]="Rare",n[r.CHERRY_CHEST]="Legendary",n[r.MOUTH]="Rare",n));function i(e){return o[e]||"未知物品"+e}var s=e("EasterEggMessages",((T={})[r.COSPLAY]="Let's change roles tonight. How about you play the bad guy and I'll be the \"punisher\"?",T[r.WINE_GLASS]="Wine is the auxiliary, routine is the appetizer, and the main course... you know.",T[r.BLINDFOLD]="It's more exciting when you can't see. You have to rely on your feelings to move. It's hard to say who is in control.",T[r.MUTE]="No talking, just flirting! Tonight we're going to express our feelings with our actions~",T[r.TIME_10_SECONDS]="",T[r.EAR]="",T[r.THREE_TIMES]="",T[r.TONGUE]="",T[r.HAND]="",T[r.PEACH_BUTT]="",T[r.DONUT]="",T[r.LEG]="",T[r.TOY]="",T[r.BANANA_MALE]="",T[r.TEETH_BITE]="",T[r.CHERRY_CHEST]="",T[r.MOUTH]="",T));E._RF.pop()}}}));

System.register("chunks:///_virtual/LocalSpinConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameItemType.ts"],(function(e){var i,t,n,r,o,s,a;return{setters:[function(e){i=e.createForOfIteratorHelperLoose,t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,o=e.resources,s=e.JsonAsset},function(e){a=e.GameItemType}],execute:function(){r._RF.push({},"018798Mn9RBpYjD2GFG7zUT","LocalSpinConfig",void 0);var l=e("SpinStage",function(e){return e.EARLY="early",e.MIDDLE="middle",e.LATE="late",e}({})),c=e("LocalSpinConfig",function(){function e(){this.config=void 0,this.itemConfigMap=new Map,this.tripleTriggerItems=[],this.isInitialized=!1}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var r=e.prototype;return r.initialize=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitialized){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,console.log("🔧 开始加载本地转盘配置..."),e.next=6,this.loadConfigFromResources();case 6:this.isInitialized=!0,console.log("✅ 转盘配置初始化完成"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("❌ 配置初始化失败:",e.t0),this.initDefaultConfig(),this.isInitialized=!0;case 15:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),r.loadConfigFromResources=function(){var e=t(n().mark((function e(){var i=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){o.load("config/spin-wheel-config",s,(function(n,r){if(n)return console.error("❌ 从resources加载配置失败:",n),void t(n);try{if(i.config=r.json,!i.config)throw new Error("JSON资源为空");i.processConfig(),e()}catch(e){console.error("❌ 处理配置JSON失败:",e),t(e)}}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.processConfig=function(){for(var e=0,i=Object.entries(this.config.itemProbabilities);e<i.length;e++){var t=i[e],n=t[0],r=t[1],o=parseInt(n);this.itemConfigMap.set(o,r)}this.tripleTriggerItems=this.config.tripleTriggerItems.map((function(e){return e})),console.log("📊 配置处理完成:"),console.log("   版本: "+this.config.version),console.log("   物品数量: "+this.itemConfigMap.size),console.log("   三连触发物品: "+this.tripleTriggerItems.length+"个")},r.initDefaultConfig=function(){console.log("📋 使用默认配置"),this.config={version:"1.0.0-default",spinCountThresholds:{earlyMax:9,middleMax:19}},this.itemConfigMap.set(a.HAND,{category:"ACTION",name:"手",probabilities:{early:40,middle:35,late:30}}),this.itemConfigMap.set(a.MOUTH,{category:"ACTION",name:"嘴巴",probabilities:{early:30,middle:25,late:20}}),this.tripleTriggerItems=[a.BLINDFOLD,a.MUTE,a.COSPLAY,a.WINE_GLASS]},r.isReady=function(){return this.isInitialized},r.checkInitialized=function(){if(!this.isInitialized)throw new Error("转盘配置未初始化，请先调用 initialize() 方法")},r.getSpinStage=function(e){this.checkInitialized();var i=this.config.spinCountThresholds||{earlyMax:9,middleMax:19};return e<=i.earlyMax?l.EARLY:e<=i.middleMax?l.MIDDLE:l.LATE},r.getItemProbability=function(e,i){this.checkInitialized();var t=this.getSpinStage(i),n=this.itemConfigMap.get(e);return n?n.probabilities[t]:(console.warn("⚠️ 未找到物品配置: "+e),0)},r.getTripleProbability=function(e){var i=this;return this.checkInitialized(),this.tripleTriggerItems.reduce((function(t,n){return t+i.getItemProbability(n,e)}),0)},r.isTripleTriggerItem=function(e){return this.checkInitialized(),this.tripleTriggerItems.includes(e)},r.getCategoryItems=function(e){this.checkInitialized();for(var t,n=[],r=i(this.itemConfigMap.entries());!(t=r()).done;){var o=t.value,s=o[0];o[1].category===e.toUpperCase()&&n.push(s)}return n},r.getItemName=function(e){if(!this.isInitialized)return"物品"+e;var i=this.itemConfigMap.get(e);return i?i.name:"未知"+e},r.getTripleTriggerItems=function(){return this.checkInitialized(),[].concat(this.tripleTriggerItems)},r.getVersion=function(){return this.config?this.config.version||"未知":"未初始化"},r.getDebugInfo=function(e){if(!this.isInitialized)return"❌ 配置未初始化";var t=this.getSpinStage(e),n=this.getTripleProbability(e),r="📊 转盘配置信息 (版本: "+this.getVersion()+")\n";r+="次数: "+e+" ("+t+"阶段)\n",r+="三连概率: "+n.toFixed(2)+"%\n\n";var o=this.getCategoryItems("ACTION");if(o.length>0){r+="ACTION类物品概率:\n";for(var s,a=i(o);!(s=a()).done;){var l=s.value,c=this.getItemProbability(l,e);r+="  "+this.getItemName(l)+" ("+l+"): "+c+"%\n"}}var g=this.getCategoryItems("BODY");if(g.length>0){r+="\nBODY类物品概率:\n";for(var u,f=i(g);!(u=f()).done;){var h=u.value,p=this.getItemProbability(h,e);r+="  "+this.getItemName(h)+" ("+h+"): "+p+"%\n"}}var I=this.getCategoryItems("SPECIAL");if(I.length>0){r+="\nSPECIAL类物品概率:\n";for(var m,d=i(I);!(m=d()).done;){var v=m.value,C=this.getItemProbability(v,e);r+="  "+this.getItemName(v)+" ("+v+")"+(this.isTripleTriggerItem(v)?" (三连触发)":"")+": "+C+"%\n"}}return r},r.validateConfig=function(){if(!this.isInitialized)return console.error("❌ 无法验证：配置未初始化"),!1;console.log("🔧 验证转盘配置...");for(var e=0,i=[l.EARLY,l.MIDDLE,l.LATE];e<i.length;e++){var t=i[e],n=t===l.EARLY?5:t===l.MIDDLE?15:25,r=this.getTripleProbability(n);console.log("📊 "+t+"阶段三连概率: "+r+"%")}for(var o=this.itemConfigMap.size,s=0,a=["ACTION","BODY","SPECIAL"];s<a.length;s++){var c=a[s],g=this.getCategoryItems(c);console.log("📋 "+c+"类物品数量: "+g.length)}return console.log("✅ 配置验证完成, 总物品数: "+o),!0},e}());c.instance=null;e("localSpinConfig",c.getInstance());r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonExport.ts","./ConfigBase.ts","./LocalSpinConfig.ts","./SimpleSpinCalculator.ts","./ConfigMgr.ts","./PoolMgr.ts","./GameItemType.ts","./StartView.ts","./GameBinder.ts","./Game_Btn2.ts","./Game_Dialog.ts","./Game_DialogWindow.ts","./Game_Dialog_Logic.ts","./Game_LaoHuJi.ts","./Game_LaoHuJi_Logic.ts","./Game_List.ts","./Game_ListItem.ts","./Game_ListItem_Logic.ts","./Game_List_Logic.ts","./Game_Main.ts","./Game_Main_Logic.ts","./Game_Tips.ts","./Game_Tips_Logic.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,r,o,a,i,s,c,u,l,f,p,h,b;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.instantiate,i=e.Prefab},function(e){s=e.PoolBuilder,c=e.instance_base,u=e.asset,l=e.error},function(e){f=e.GTextField,p=e.AutoSizeType,h=e.UIPackage},function(e){b=e.GUIManager}],execute:function(){o._RF.push({},"04672eWqVFIKJiVK6TVkrA3","PoolMgr",void 0);e("objPoolMgr",function(e){function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._prefabpools=new Map,t._gobjpools=new Map,t._txtPool=null,t}t(o,e);var c=o.prototype;return c.getPrefabPool=function(){var e=n(r().mark((function e(t,o){var c,l,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=""+o+t,this._prefabpools.has(c)){e.next=7;break}return l=null,e.next=5,s().create(n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.next=3,u.get(t,i,null,{bundle_s:o});case 3:l=e.sent;case 4:return e.abrupt("return",a(l));case 5:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent=null,e.active=!0,e})).clear((function(e){var t;e.forEach((function(e){e.destroy()})),null==(t=l)||t.decRef(),l=null})).initialSize(5).maxSize(50).buildAsync();case 5:f=e.sent,this._prefabpools.set(c,f);case 7:return e.abrupt("return",this._prefabpools.get(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getGobjPool=function(){var e=n(r().mark((function e(t,o){var a,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=""+t+o,this._gobjpools.has(a)){e.next=7;break}return i=null,e.next=5,s().create(n(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=7;break}if(i=h.getByName(t)){e.next=6;break}return e.next=5,b.loadPackage(t);case 5:i=e.sent;case 6:b.setPackageRefCount(t);case 7:return(n=i.createObject(o))||l("create gobj "+t+"/"+o+" failed,请检查资源是否存在"),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()})),b.setPackageRefCount(t,-1),i=null})).initialSize(5).maxSize(50).buildAsync();case 5:c=e.sent,this._gobjpools.set(a,c);case 7:return e.abrupt("return",this._gobjpools.get(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getTxtPool=function(){return this._txtPool||(this._txtPool=s().create((function(){return new f})).reset((function(e){return e.fontSize=20,e.text="",e.setPivot(.5,1,!0),e.autoSize=p.Both,e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()}))})).initialSize(5).maxSize(100).buildSync()),this._txtPool},c.clear=function(){this._prefabpools.forEach((function(e){e.clear(),e.destroy()})),this._prefabpools.clear(),this._gobjpools.forEach((function(e){e.clear(),e.destroy()})),this._gobjpools.clear(),this._txtPool&&(this._txtPool.clear(),this._txtPool.destroy(),this._txtPool=null)},o}(c).instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/SimpleSpinCalculator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameItemType.ts","./LocalSpinConfig.ts"],(function(t){var e,n,i,o,r,s;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){r=t.GameItemType},function(t){s=t.localSpinConfig}],execute:function(){t({testCategorySpins:function(){return g.apply(this,arguments)},testSimpleCalculator:function(){return c.apply(this,arguments)}}),o._RF.push({},"2e981v2PvNFWa1nStOWFEJk","SimpleSpinCalculator",void 0);var u,a=(t({SimpleSpinCalculator:u=function(){function t(t){void 0===t&&(t=0),this.spinConfig=void 0,this.currentSpinCount=0,this.testMode=!1,this.testEasterEggItem=null,this.spinConfig=s,this.currentSpinCount=t}var o=t.prototype;return o.initialize=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("🚀 初始化转盘计算器..."),t.next=4,this.spinConfig.initialize();case 4:this.spinConfig.validateConfig(),console.log("✅ 计算器初始化完成, 当前次数: "+this.currentSpinCount),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(0),console.error("❌ 计算器初始化失败:",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),o.isReady=function(){return this.spinConfig.isReady()},o.setSpinCount=function(t){this.currentSpinCount=Math.max(0,t)},o.getSpinCount=function(){return this.currentSpinCount},o.incrementSpinCount=function(){this.currentSpinCount++},o.getCurrentStage=function(){return this.spinConfig.getSpinStage(this.currentSpinCount)},o.performNormalSpin=function(t){if(void 0===t&&(t=!0),!this.isReady())return console.error("❌ 配置未初始化, 返回默认物品"),r.MOUTH;for(var n=[],i=0,o=["ACTION","BODY","SPECIAL"];i<o.length;i++)for(var s,u=o[i],a=this.spinConfig.getCategoryItems(u),g=e(a);!(s=g()).done;){var c=s.value;if(!t||!this.spinConfig.isTripleTriggerItem(c)){var l=this.spinConfig.getItemProbability(c,this.currentSpinCount);l>0&&n.push({item:c,weight:l})}}return 0===n.length?(console.warn("⚠️ 没有可用的普通物品"),r.MOUTH):this.weightedRandomSelect(n)},o.performCategorySpin=function(t){if(!this.isReady())switch(console.error("❌ 配置未初始化, 返回默认物品"),t){case"ACTION":return r.MOUTH;case"BODY":return r.EAR;case"SPECIAL":return r.THREE_TIMES;default:return r.MOUTH}for(var n,i=this.spinConfig.getCategoryItems(t),o=[],s=e(i);!(n=s()).done;){var u=n.value,a=this.spinConfig.getItemProbability(u,this.currentSpinCount);a>0&&o.push({item:u,weight:a})}if(0===o.length)switch(console.warn("⚠️ "+t+"类没有可用物品"),t){case"ACTION":return r.MOUTH;case"BODY":return r.EAR;case"SPECIAL":return r.THREE_TIMES;default:return r.MOUTH}var g=this.weightedRandomSelect(o),c=this.spinConfig.getItemName(g);return console.log("🎯 "+t+"类抽取结果: "+c+" ("+g+")"),g},o.performFullSpin=function(){var t=this;if(!this.isReady())return console.error("❌ 配置未初始化, 返回默认结果"),[r.MOUTH,r.EAR,r.THREE_TIMES];if(this.testMode&&null!==this.testEasterEggItem){console.log("🧪 [测试模式] 返回彩蛋结果: "+this.spinConfig.getItemName(this.testEasterEggItem));var e=[this.testEasterEggItem,this.testEasterEggItem,this.testEasterEggItem];return this.incrementSpinCount(),this.testMode=!1,this.testEasterEggItem=null,e}console.log("🎰 开始抽奖 (第"+(this.currentSpinCount+1)+"次, "+this.getCurrentStage()+"阶段)");var n=this.performCategorySpin("SPECIAL");if(this.spinConfig.isTripleTriggerItem(n)){var i=this.spinConfig.getItemName(n);return console.log("🌟 C转盘触发三连: "+i+" ("+n+")"),this.incrementSpinCount(),[n,n,n]}console.log("🎯 执行分类抽取");var o=this.performCategorySpin("ACTION"),s=this.performCategorySpin("BODY"),u=[o,s,n];return u.map((function(e){return t.spinConfig.getItemName(e)})),console.log("✅ 分类抽奖结果: A类["+this.spinConfig.getItemName(o)+"], B类["+this.spinConfig.getItemName(s)+"], C类["+this.spinConfig.getItemName(n)+"]"),this.incrementSpinCount(),u},o.weightedRandomSelect=function(t){if(0===t.length)return r.MOUTH;var n=t.reduce((function(t,e){return t+e.weight}),0);if(n<=0)return t[0].item;for(var i,o=Math.random()*n,s=e(t);!(i=s()).done;){var u=i.value;if((o-=u.weight)<=0)return u.item}return t[0].item},o.convertToRewardItem=function(t){return{itemType:t}},o.convertSpinResults=function(t){var e=this;return t.map((function(t){return e.convertToRewardItem(t)}))},o.getDebugInfo=function(){return this.isReady()?this.spinConfig.getDebugInfo(this.currentSpinCount):"❌ 配置未初始化"},o.getConfigVersion=function(){return this.spinConfig.getVersion()},o.resetSpinCount=function(){this.currentSpinCount=0,console.log("🔄 抽奖次数已重置为0")},o.getStats=function(){return{version:this.getConfigVersion(),spinCount:this.currentSpinCount,currentStage:this.isReady()?this.getCurrentStage():"未初始化",isReady:this.isReady(),tripleProbability:this.isReady()?this.spinConfig.getTripleProbability(this.currentSpinCount):0}},o.setTestEasterEgg=function(t){this.testMode=!0,this.testEasterEggItem=t,console.log("🧪 设置测试模式: "+this.spinConfig.getItemName(t))},o.clearTestMode=function(){this.testMode=!1,this.testEasterEggItem=null,console.log("🧪 清除测试模式")},o.isInTestMode=function(){return this.testMode},t}(),default:u}),u);function g(){return(g=n(i().mark((function t(){var e,n,o,r,s,u,g,c,l,p;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("🧪 分类抽取测试"),t.prev=1,e=new a(0),t.next=5,e.initialize();case 5:for(console.log("=== 测试各分类单独抽取 ==="),console.log("\n🎯 ACTION类抽取测试:"),n=0;n<5;n++)o=e.performCategorySpin("ACTION"),r=e.spinConfig.getItemName(o),console.log("  ACTION抽取 "+(n+1)+": "+r+" ("+o+")");for(console.log("\n🎯 BODY类抽取测试:"),s=0;s<5;s++)u=e.performCategorySpin("BODY"),g=e.spinConfig.getItemName(u),console.log("  BODY抽取 "+(s+1)+": "+g+" ("+u+")");for(console.log("\n🎯 SPECIAL类抽取测试:"),c=0;c<5;c++)l=e.performCategorySpin("SPECIAL"),p=e.spinConfig.getItemName(l),console.log("  SPECIAL抽取 "+(c+1)+": "+p+" ("+l+")");t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.error("❌ 分类测试失败:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))).apply(this,arguments)}function c(){return(c=n(i().mark((function t(){var e,n,o,r,s,u,g,c,l,p,f,h,C,m,S,I;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("🎰 简化转盘计算器测试"),t.prev=1,e=new a(0),t.next=5,e.initialize();case 5:for(console.log("=== 配置信息 ==="),console.log("配置版本: "+e.getConfigVersion()),console.log("统计信息:",e.getStats()),console.log("📋 抽奖规则: A转盘抽ACTION类，B转盘抽BODY类，C转盘抽SPECIAL类"),console.log("🌟 三连规则: C转盘抽中[蒙眼/不发声/Cosplay/酒杯]时触发三连"),console.log("\n=== 前10次抽奖模拟（早期阶段）==="),n=0;n<10;n++)o=e.performFullSpin(),r=o.map((function(t){return e.spinConfig.getItemName(t)})),s=o[0]===o[1]&&o[1]===o[2],u=s?"🌟 三连！":"",console.log("第"+(n+1)+"次: A["+r[0]+"] B["+r[1]+"] C["+r[2]+"] "+u);for(console.log("\n=== 第11-20次抽奖模拟（中期阶段）==="),g=0;g<10;g++)c=e.performFullSpin(),l=c.map((function(t){return e.spinConfig.getItemName(t)})),p=c[0]===c[1]&&c[1]===c[2],f=p?"🌟 三连！":"",console.log("第"+e.getSpinCount()+"次: A["+l[0]+"] B["+l[1]+"] C["+l[2]+"] "+f);for(console.log("\n=== 第21-30次抽奖模拟（后期阶段）==="),h=0;h<10;h++)C=e.performFullSpin(),m=C.map((function(t){return e.spinConfig.getItemName(t)})),S=C[0]===C[1]&&C[1]===C[2],I=S?"🌟 三连！":"",console.log("第"+e.getSpinCount()+"次: A["+m[0]+"] B["+m[1]+"] C["+m[2]+"] "+I);console.log("\n=== 最终调试信息 ==="),console.log(e.getDebugInfo()),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),console.error("❌ 测试失败:",t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})))).apply(this,arguments)}o._RF.pop()}}}));

System.register("chunks:///_virtual/StartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./CommonExport.ts","./fairygui.mjs","./Game_Main.ts"],(function(e){var t,r,o,i,n,a,s,l,c,u,g,p,h,d,b,f,v,y,m,w,B,x,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.ProgressBar,g=e.Node,p=e.color,h=e.view,d=e.AudioSourceComponent,b=e.tween,f=e.Component},function(e){v=e.GUIManager,y=e.AllBinder},null,function(e){m=e.UIConfig,w=e.registerFont,B=e.GRoot,x=e.UIPackage},function(e){I=e.default}],execute:function(){var S,F,G,j,z,O,k,C;s._RF.push({},"b717ey19TVBBpBqTI0xPCo1","StartView",void 0);var M=l.ccclass,P=l.property;e("default",(S=P(c),F=P(u),G=P(g),M((O=t((z=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"label",O,i(t)),o(t,"progressBar",k,i(t)),o(t,"bg",C,i(t)),t.progressObj={value:0},t}r(t,e);var s=t.prototype;return s.onLoad=function(){m.buttonSoundVolumeScale=1,m.bringWindowToFrontOnClick=!1,w("Inter-BoldItalic"),m.defaultFont="Inter-BoldItalic",m.modalLayerColor=p(0,0,0,100),this.progressBar.progress=0,this.label.string="0%",this.progressObj.value=0},s.adaptBackgroundSize=function(){if(this.bg)try{var e=B.inst,t=e.width,r=e.height,o=h.getDesignResolutionSize(),i=h.getVisibleSize();console.log("FairyGUI适配信息:\n                FGUI根节点尺寸: "+t+" x "+r+"\n                设计分辨率: "+o.width+" x "+o.height+"\n                屏幕尺寸: "+i.width+" x "+i.height);var n=t/o.width,a=r/o.height;this.bg.setScale(n,a),console.log("背景适配完成:\n                宽度缩放: "+n.toFixed(3)+"\n                高度缩放: "+a.toFixed(3)+"\n                最终背景尺寸: "+(o.width*n).toFixed(1)+" x "+(o.height*a).toFixed(1))}catch(e){console.error("背景适配失败，回退到基础适配:",e);var s=h.getVisibleSize(),l=h.getDesignResolutionSize(),c=s.width/l.width,u=s.height/l.height;this.bg.setScale(c,u)}else console.warn("bg节点未设置，跳过背景适配")},s.playBGM=function(e,t,r){var o=x.getByName(t).getItemAssetByName(r),i=e.addComponent(d);return i.isValid&&(i.clip=o,i.volume=1,i.loop=!0,i.play()),i},s.start=function(){var e=n(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.bindAll(),e.prev=1,this.adaptBackgroundSize(),console.log("开始加载UI包..."),e.next=6,v.loadPackage("Game",(function(e,r){var o=e/r;t.updateProgress(o,"加载UI资源")}));case 6:console.log("所有资源加载完成！");try{this.playBGM(this.node,"Game","bgm"),console.log("BGM播放成功")}catch(e){console.warn("BGM播放失败:",e)}v.open(I),this.label.node.parent.active=!1,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("资源加载失败:",e.t0),v.open(I),this.label.node.parent.active=!1;case 17:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),s.updateProgress=function(e,t){var r=this;e<=this.progressObj.value?console.log("进度回退保护: 当前进度 "+(100*this.progressObj.value).toFixed(1)+"%, 目标进度 "+(100*e).toFixed(1)+"%"):(b(this.progressObj).stop(),b(this.progressObj).to(.3,{value:e},{onUpdate:function(){r.progressBar.progress=r.progressObj.value;var e=Math.floor(100*r.progressObj.value);r.label.string=e+"%"}}).start())},t}(f)).prototype,"label",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(z.prototype,"progressBar",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(z.prototype,"bg",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=z))||j));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});