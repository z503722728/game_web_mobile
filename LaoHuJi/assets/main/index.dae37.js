System.register("chunks:///_virtual/CommonExport.ts",["cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(o){var n;return{setters:[function(c){n=c.cclegacy,o("cc",c)},function(n){o("drongoCC",n)},function(n){o("fgui",n)},function(n){o("drongoGui",n)}],execute:function(){n._RF.push({},"2a54bPglDFEaKMITwv2aDNG","CommonExport",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigBase.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6aa16Nf6rJP87ezxWaLdhoO","ConfigBase",void 0);t("default",function(){function t(){}return t.prototype.init=function(t){var e=this;t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.hasOwnProperty(n)&&(e[n]=t[n])}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(n){var e,t,r,s,i,o,a,u,c;return{setters:[function(n){e=n.inheritsLoose,t=n.createForOfIteratorHelperLoose,r=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){i=n.cclegacy,o=n.JsonAsset},function(n){a=n.autoBindToWindow,u=n.instance_base,c=n.asset}],execute:function(){var f;i._RF.push({},"ab49fwHf11ArqXDrPGKAbkd","ConfigMgr",void 0);var g=a(f=function(n){function i(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))||this).configs=new Map,e.configAssets=new Map,e}e(i,n);var a=i.prototype;return a.loadConfig=function(){var n=r(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.name,!this.configs.has(t)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,c.get("Config/"+t,o,null);case 5:r=n.sent,this.initConfig(e,r);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.initConfig=function(n,e){var t=n.name,r=new Map;for(var s in e.json){var i=e.json[s],o=new n;o.init(i),r.set(parseInt(s),o)}e.decRef(),this.configs.set(t,r)},a.initConfigs=function(){var n=r(s().mark((function n(e){var r,i,a,u,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.get_dir(e,o,null);case 2:for(r=n.sent,i=t(r);!(a=i()).done;)u=a.value,f=u.name.replace(".json",""),this.configAssets.set(f,u);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.getConfig=function(n,e){var t=n.name,r=this.configAssets.get(t);r&&(this.initConfig(n,r),this.configAssets.delete(t));var s=this.configs.get(t);return s?s.get(e):null},a.getAllConfigs=function(n){var e=n.name,t=this.configAssets.get(e);t&&(this.initConfig(n,t),this.configAssets.delete(e));var r=this.configs.get(e);return r||null},a.queryOne=function(n,e){for(var r,s=this.getAllConfigs(n),i=t(s.values());!(r=i()).done;){var o=r.value;if(e(o))return o}return null},a.queryAll=function(n,e){for(var r,s=this.getAllConfigs(n),i=[],o=t(s.values());!(r=o()).done;){var a=r.value;e(a)&&i.push(a)}return i},i}(u))||f;n("configMgr",g.instance());i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Btn2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,o,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.UIPackage,c=t.GButton},function(t){r=t.vm}],execute:function(){var i,u;n._RF.push({},"27625dPQRNPrrt+70wio4Tp","Game_Btn2",void 0);t("default",r(((u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).m_close=void 0,e}return e(n,t),n.createInstance=function(){return o.createObject("Game","Btn2")},n.prototype.onConstruct=function(){this.m_close=this.getChild("close")},n}(c)).URL="ui://6gpz43l1jx0ll",u.Dependencies=["Game"],i=u))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Dialog_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Dialog.ts","./Game_DialogWindow.ts"],(function(o){var e,n,t,i,s,c,l,a;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy},function(o){t=o.UILayer,i=o.addLogic,s=o.GUIManager,c=o.GUILogicBase},function(o){l=o.default},function(o){a=o.GameDialogWindow}],execute:function(){var r,u;n._RF.push({},"97dbbTuuGFNUL5Q3Pzck7rb","Game_Dialog_Logic",void 0);o("default",i(l)(((u=function(o){function n(){return o.apply(this,arguments)||this}e(n,o);var t=n.prototype;return t.onLoad=function(){console.log("🎭 彩蛋对话框初始化"),this.UI.m_close.onClick(this.onCloseButtonClick,this)},t.start=function(){this.processDialogData()},t.processDialogData=function(){var o=this.Data;if(o)try{console.log("📋 处理对话框数据:",o),this.UI.m_item&&"number"==typeof o.itemIndex?(this.UI.m_item.m_c1.selectedIndex=o.itemIndex,console.log("🎯 设置物品图标索引为: "+o.itemIndex)):console.warn("⚠️ 无法设置物品图标索引"),this.UI.m_content&&o.message?(this.UI.m_content.text=o.message,console.log("📝 设置对话框消息内容")):console.warn("⚠️ 无法设置对话框消息内容")}catch(o){console.error("❌ 处理对话框数据失败:",o)}else console.warn("⚠️ 对话框数据为空")},t.onCloseButtonClick=function(){console.log("❌ 关闭彩蛋对话框");try{s.close(l)}catch(o){console.error("❌ 关闭对话框失败:",o)}},t.onDestroy=function(){console.log("🗑️ 彩蛋对话框已销毁")},n}(c)).uiOptions={layer:t.WINDOW,modal:!0,windowCls:a,hideLoadModal:!0},r=u))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Dialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;n._RF.push({},"96fc4mIBYJI5KprJiQIOcxN","Game_Dialog",void 0);t("default",c(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_close=void 0,e.m_item=void 0,e.m_content=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","Dialog")},n.prototype.onConstruct=function(){this.m_close=this.getChild("close"),this.m_item=this.getChild("item"),this.m_content=this.getChild("content")},n}(o)).URL="ui://6gpz43l1d7oa27",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_DialogWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs"],(function(n){var t,e,o,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n.tween},function(n){i=n.GUIWindow}],execute:function(){e._RF.push({},"2aa6cjgqFhBDKQ0DaCIe0vX","Game_DialogWindow",void 0);n("GameDialogWindow",function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var i=e.prototype;return i.onInit=function(){this.makeFullScreen(),this.contentPane.setPivot(.5,.5),this.contentPane.y-=100},i.doShowAnimation=function(){var t=this;this.contentPane.setScale(.8,.8),this.contentPane.alpha=0,o(this.contentPane).to(.3,{scaleX:1,scaleY:1,alpha:1},{easing:"backOut"}).call((function(){return n.prototype.doShowAnimation.call(t)})).start()},i.doHideAnimation=function(){var t=this;o(this.contentPane).to(.2,{scaleX:.8,scaleY:.8,alpha:0},{easing:"backIn"}).call((function(){return n.prototype.doHideAnimation.call(t)})).start()},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_LaoHuJi_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./fairygui.mjs","./Game_LaoHuJi.ts","./Game_List_Logic.ts","./Game_Tips.ts","./Game_Dialog.ts"],(function(t){var i,n,e,o,s,r,c,a,l,h,u,g,m,f;return{setters:[function(t){i=t.inheritsLoose,n=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t.tween},function(t){r=t.addLogic,c=t.GUILogicBase,a=t.GUIManager},function(t){l=t.UIPackage,h=t.GRoot},function(t){u=t.default},function(t){g=t.default},function(t){m=t.default},function(t){f=t.default}],execute:function(){var d;o._RF.push({},"53068LX+SxPEoNoPdC8rY1V","Game_LaoHuJi_Logic",void 0);t("default",r(u)(d=function(t){function o(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).isSpinning=!1,i.list1Logic=null,i.list2Logic=null,i.list3Logic=null,i.lightAnimationId=0,i.currentLightState=0,i.lightTimeoutIds=[],i}i(o,t);var r=o.prototype;return r.onLoad=function(){this.list1Logic=this.UI.m_list1.Get(g),this.list2Logic=this.UI.m_list2.Get(g),this.list3Logic=this.UI.m_list3.Get(g),this.UI.m_btnChouJiang.onClick(this.onSpinButtonClick,this),this.UI.m_tipBtn.onClick(this.onTipButtonClick,this),this.startIdleLightAnimation(),console.log("🎰 老虎机初始化完成")},r.onSpinButtonClick=function(){var t=n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isSpinning){t.next=2;break}return t.abrupt("return");case 2:return console.log("🎰 开始抽奖！"),this.isSpinning=!0,this.UI.m_btnChouJiang.enabled=!1,this.playSlotsSound(),this.resetUIState(),this.startSpinLightAnimation(),t.prev=8,t.next=11,this.performSpinAnimation();case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(8),console.error("❌ 抽奖出错:",t.t0);case 16:return t.prev=16,this.isSpinning=!1,this.UI.m_btnChouJiang.enabled=!0,t.finish(16);case 20:case"end":return t.stop()}}),t,this,[[8,13,16,20]])})));return function(){return t.apply(this,arguments)}}(),r.onTipButtonClick=function(){var t=n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("💡 打开游戏提示弹窗"),t.prev=1,t.next=4,a.open(m);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error("❌ 打开提示弹窗失败:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),r.performSpinAnimation=function(){var t=n(e().mark((function t(){var i,n,o,s=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(t){return new Promise((function(i){return setTimeout(i,t)}))},n=[this.list1Logic.spin(),i(200).then((function(){return s.list2Logic.spin()})),i(400).then((function(){return s.list3Logic.spin()}))],t.next=4,Promise.all(n);case 4:return o=[this.list1Logic.getCurrentCenterItem(),this.list2Logic.getCurrentCenterItem(),this.list3Logic.getCurrentCenterItem()],console.log("🎊 所有列表滚动完成！"),console.log("🎯 实际抽奖结果:",o),t.next=9,this.checkWinningCombination(o);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.checkWinningCombination=function(){var t=n(e().mark((function t(i){var n,o,s,r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(3===(n=i.filter((function(t){return null!==t}))).length){t.next=4;break}return console.log("❌ 抽奖结果不完整"),t.abrupt("return");case 4:if(o=n[0],s=n[1],r=n[2],o.id!==s.id||s.id!==r.id){t.next=10;break}return t.next=8,this.onWinThreeOfAKind(o,n);case 8:t.next=11;break;case 10:o.id===s.id||s.id===r.id||o.id===r.id?this.onWinTwoOfAKind(n):this.isSpecialCombination(n)?this.onSpecialCombination(n):this.onBasicWin(n);case 11:case"end":return t.stop()}}),t,this)})));return function(i){return t.apply(this,arguments)}}(),r.onWinThreeOfAKind=function(){var t=n(e().mark((function t(i,n){var o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.getRarityMultiplier(i.rarity),console.log("🎉 恭喜！三个"+i.name+"！获得 "+o+"倍 奖励！"),this.startBigWinLightAnimation(),this.playWinEffect("three_of_a_kind",o,n),t.next=6,this.showEasterEggDialog(i);case 6:case"end":return t.stop()}}),t,this)})));return function(i,n){return t.apply(this,arguments)}}(),r.onWinTwoOfAKind=function(t){for(var i=null,n=0;n<t.length-1;n++){for(var e=n+1;e<t.length;e++)if(t[n].id===t[e].id){i=t[n];break}if(i)break}if(i){var o=Math.floor(this.getRarityMultiplier(i.rarity)/2);console.log("🎊 不错！两个"+i.name+"！获得 "+o+"倍 奖励！"),this.startMediumWinLightAnimation(),this.playWinEffect("two_of_a_kind",o,t)}},r.getRarityMultiplier=function(t){switch(t){case"Common":return 10;case"Rare":return 20;case"Epic":return 30;case"Legendary":return 50;default:return 10}},r.isSpecialCombination=function(t){return t.map((function(t){return t.rarity})).every((function(t){return"Epic"===t||"Legendary"===t}))},r.onSpecialCombination=function(t){console.log("✨ 特殊组合！获得额外奖励！"),this.startSpecialComboLightAnimation(),this.playWinEffect("special_combo",15,t)},r.onBasicWin=function(t){var i=this.calculateAverageMultiplier(t);console.log("🎊 恭喜中奖！获得基础奖励 "+i+"倍！"),this.startBasicWinLightAnimation(),this.playWinEffect("basic_win",i,t)},r.calculateAverageMultiplier=function(t){var i=this,n=t.reduce((function(t,n){return t+i.getRarityMultiplier(n.rarity)}),0);return Math.max(1,Math.floor(n/3/t.length))},r.playWinEffect=function(t,i,n){console.log("🎭 播放效果: "+t+", 倍数: "+i),this.showResultsOnUI(n,t,i)},r.showResultsOnUI=function(t,i,n){try{if(console.log("🎨 在UI上显示抽奖结果:",t),this.UI.m_c2.selectedIndex=1,console.log("✅ 切换m_c2到index 1"),t.length>=3){var e=parseInt(t[0].id);this.UI.m_lastItem1.m_c1.selectedIndex=e,console.log("🎯 lastItem1设置为图标"+e);var o=parseInt(t[1].id);this.UI.m_lastItem2.m_c1.selectedIndex=o,console.log("🎯 lastItem2设置为图标"+o);var s=parseInt(t[2].id);this.UI.m_lastItem3.m_c1.selectedIndex=s,console.log("🎯 lastItem3设置为图标"+s),console.log("✅ 结果显示完成: ["+e+", "+o+", "+s+"]"),this.highlightWinningItemsInLists(t)}else console.warn("⚠️ 结果数据不足3个，无法完整显示")}catch(t){console.error("❌ 显示UI结果失败:",t)}},r.highlightWinningItemsInLists=function(t){try{console.log("🌟 高亮转动列表中的中奖物品"),t.length>=3?(this.list1Logic.highlightWinningItem(t[0]),this.list2Logic.highlightWinningItem(t[1]),this.list3Logic.highlightWinningItem(t[2]),console.log("✨ 转动列表高亮完成: ["+t[0].name+", "+t[1].name+", "+t[2].name+"]")):console.warn("⚠️ 中奖结果数据不足，无法高亮转动列表item")}catch(t){console.error("❌ 高亮转动列表中奖物品失败:",t)}},r.resetUIState=function(){try{this.stopLightAnimation(),this.UI.m_c2.selectedIndex=0,console.log("🔄 重置m_c2到index 0，准备新的抽奖"),this.resetItemHighlights()}catch(t){console.error("❌ 重置UI状态失败:",t)}},r.resetItemHighlights=function(){try{console.log("🔄 重置转动列表ITEM高亮状态"),this.list1Logic.resetAllItemHighlights(),this.list2Logic.resetAllItemHighlights(),this.list3Logic.resetAllItemHighlights(),console.log("✅ 所有转动列表item高亮状态已重置")}catch(t){console.error("❌ 重置转动列表ITEM高亮状态失败:",t)}},r.getItemDisplayName=function(t){return{0:"奖品A",1:"奖品B",2:"奖品C",3:"奖品D",4:"奖品E",5:"奖品F",6:"奖品G",7:"奖品H"}[t]||"奖品"+t},r.showWinFeedback=function(t){t>0&&s(this.UI.m_btnChouJiang).to(.1,{scaleX:1.1,scaleY:1.1}).to(.1,{scaleX:1,scaleY:1}).start()},r.forceStopSpin=function(){this.list1Logic.stopSpin(),this.list2Logic.stopSpin(),this.list3Logic.stopSpin(),this.isSpinning=!1,this.UI.m_btnChouJiang.enabled=!0},r.showEasterEggDialog=function(){var t=n(e().mark((function t(i){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("🥚 彩蛋时刻！显示特殊对话框"),n={itemIndex:parseInt(i.id),itemName:i.name,rarity:i.rarity,message:"🎉 彩蛋时刻！🎉\n\n恭喜你抽中三个相同的 "+i.name+"！\n\n这是一个特殊的彩蛋时刻，你获得了额外的惊喜奖励！"},t.next=5,a.open(f,n);case 5:console.log("✅ 彩蛋对话框已关闭"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("❌ 显示彩蛋对话框失败:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(i){return t.apply(this,arguments)}}(),r.playSlotsSound=function(){try{console.log("🔊 播放抽奖音效: slots");var t=l.getByName("Game");if(!t)return void console.warn("⚠️ 未找到Game包，无法播放音效");var i=t.getItemAssetByName("slots");if(!i)return void console.warn("⚠️ 未找到slots音效资源");h.inst.playOneShotSound(i),console.log("✅ slots音效播放成功")}catch(t){console.error("❌ 播放slots音效失败:",t)}},r.onDestroy=function(){this.forceStopSpin(),this.stopLightAnimation()},r.startIdleLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("💡 启动待机灯光动画"),this.currentLightState=0,this.UI.m_c1.selectedIndex=this.currentLightState,this.lightAnimationId=window.setInterval((function(){t.currentLightState=0===t.currentLightState?1:0,t.UI.m_c1.selectedIndex=t.currentLightState}),500)},r.startSpinLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("⚡ 启动抽奖灯光动画"),this.currentLightState=0,this.lightAnimationId=window.setInterval((function(){t.currentLightState=0===t.currentLightState?1:0,t.UI.m_c1.selectedIndex=t.currentLightState}),200)},r.startBigWinLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("🎆 启动大奖灯光动画"),this.UI.m_c1.selectedIndex=3,this.setLightTimeout((function(){var i=2;t.UI.m_c1.selectedIndex=i,t.lightAnimationId=window.setInterval((function(){i=2===i?3:2,t.UI.m_c1.selectedIndex=i}),150),t.setLightTimeout((function(){t.startIdleLightAnimation()}),1500)}),1e3)},r.startMediumWinLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("🎉 启动中等奖励灯光动画"),this.UI.m_c1.selectedIndex=2,this.setLightTimeout((function(){t.currentLightState=0,t.lightAnimationId=window.setInterval((function(){t.currentLightState=0===t.currentLightState?1:0,t.UI.m_c1.selectedIndex=t.currentLightState}),200),t.setLightTimeout((function(){t.startIdleLightAnimation()}),1e3)}),800)},r.startBasicWinLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("🎈 启动基础奖励灯光动画"),this.UI.m_c1.selectedIndex=2,this.setLightTimeout((function(){t.currentLightState=0,t.lightAnimationId=window.setInterval((function(){t.currentLightState=0===t.currentLightState?1:0,t.UI.m_c1.selectedIndex=t.currentLightState}),250),t.setLightTimeout((function(){t.startIdleLightAnimation()}),800)}),600)},r.startSpecialComboLightAnimation=function(){var t=this;this.stopLightAnimation(),console.log("🌟 启动特殊组合灯光动画"),this.UI.m_c1.selectedIndex=3,this.setLightTimeout((function(){var i=[2,3,0,1],n=0;t.lightAnimationId=window.setInterval((function(){t.UI.m_c1.selectedIndex=i[n],n=(n+1)%i.length}),200),t.setLightTimeout((function(){t.startIdleLightAnimation()}),1200)}),800)},r.setLightTimeout=function(t,i){var n=window.setTimeout(t,i);this.lightTimeoutIds.push(n)},r.stopLightAnimation=function(){this.lightAnimationId>0&&(window.clearInterval(this.lightAnimationId),this.lightAnimationId=0),this.lightTimeoutIds.forEach((function(t){window.clearTimeout(t)})),this.lightTimeoutIds=[],console.log("🛑 所有灯光动画已停止")},o}(c))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/Game_LaoHuJi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var i,e,s,n,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy},function(t){s=t.UIPackage,n=t.GComponent},function(t){o=t.vm}],execute:function(){var l,h;e._RF.push({},"9c466Ear5tOKah6GPn595XD","Game_LaoHuJi",void 0);t("default",o(((h=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(i=t.call.apply(t,[this].concat(s))||this).m_c1=void 0,i.m_c2=void 0,i.m_btnChouJiang=void 0,i.m_list1=void 0,i.m_list2=void 0,i.m_list3=void 0,i.m_tipBtn=void 0,i.m_lastItem1=void 0,i.m_lastItem2=void 0,i.m_lastItem3=void 0,i}return i(e,t),e.createInstance=function(){return s.createObject("Game","LaoHuJi")},e.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_btnChouJiang=this.getChild("btnChouJiang"),this.m_list1=this.getChild("list1"),this.m_list2=this.getChild("list2"),this.m_list3=this.getChild("list3"),this.m_tipBtn=this.getChild("tipBtn"),this.m_lastItem1=this.getChild("lastItem1"),this.m_lastItem2=this.getChild("lastItem2"),this.m_lastItem3=this.getChild("lastItem3")},e}(n)).URL="ui://6gpz43l1jx0lh",h.Dependencies=["Game"],l=h))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_List_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_List.ts","./Game_ListItem.ts","./Game_ListItem_Logic.ts"],(function(t){var e,i,n,s,r,o,a,h,l,c,g;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,n=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t.tween},function(t){a=t.addLogic,h=t.GUILogicBase},function(t){l=t.default},function(t){c=t.default},function(t){g=t.default}],execute:function(){var u;r._RF.push({},"a224edGKPpCPpJiMS6CQtlR","Game_List_Logic",void 0);t("default",a(l)(u=function(t){function r(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).rewardItems=[],e.controllerPageCount=0,e.itemInstances=[],e.itemLogics=[],e.isSpinning=!1,e.spinTween=null,e.currentOffset=0,e.VISIBLE_ITEMS=7,e.DISPLAY_ITEMS=3,e.itemHeight=0,e.lineGap=0,e.rowHeight=0,e.containerHeight=0,e.POSITION_OFFSET_ADJUSTMENT=-100,e.CENTER_INDEX_ADJUSTMENT=0,e.FINAL_OFFSET_ADJUSTMENT=0,e}e(r,t);var a=r.prototype;return a.onLoad=function(){console.log("🔧 Game_List_Logic onLoad 开始");try{this.initializeLayoutSettings(),this.initializeItems(),this.setupInitialPosition(),this.applyCurveEffect(),console.log("✅ Game_List_Logic 初始化完成")}catch(t){console.error("❌ Game_List_Logic 初始化失败:",t)}},a.initializeLayoutSettings=function(){console.log("🔧 初始化布局设置"),this.lineGap=this.UI.m_list.lineGap,console.log("📏 从m_list获取行距: "+this.lineGap);var t=c.createInstance();this.itemHeight=t.height,this.controllerPageCount=t.m_c1.pageCount,t.dispose(),this.initializeRewardItems(),this.rowHeight=this.itemHeight+this.lineGap,this.containerHeight=this.DISPLAY_ITEMS*this.rowHeight,console.log("📐 布局参数: item高度="+this.itemHeight+", 行距="+this.lineGap+", 总行高="+this.rowHeight+", 容器高度="+this.containerHeight),console.log("🎰 Controller页面数量: "+this.controllerPageCount+", 奖品数量: "+this.rewardItems.length)},a.initializeRewardItems=function(){console.log("🔧 根据Controller页面数量初始化奖品数据"),this.rewardItems=[];for(var t=0;t<this.controllerPageCount;t++)this.rewardItems.push({id:t.toString(),name:"奖品"+t,rarity:"Common",weight:this.getWeightByIndex(t)});console.log("✅ 创建了"+this.rewardItems.length+"个奖品数据")},a.getWeightByIndex=function(t){var e=this.controllerPageCount;return Math.max(1,e-t)},a.initializeItems=function(){console.log("🔧 开始创建item实例");for(var t=0;t<this.VISIBLE_ITEMS;t++)try{var e=c.createInstance(),i=e.Get(g);this.UI.addChild(e),this.itemInstances.push(e),this.itemLogics.push(i)}catch(e){console.error("❌ 创建第 "+(t+1)+" 个item失败:",e)}},a.setupInitialPosition=function(){this.currentOffset=0,this.updateItemsDisplay(),console.log("🔧 初始位置设置完成，偏移="+this.currentOffset)},a.updateItemsDisplay=function(){for(var t=Math.floor(this.currentOffset/this.rowHeight),e=0;e<this.VISIBLE_ITEMS;e++){var i=this.itemInstances[e],n=this.itemLogics[e],s=Math.floor(this.VISIBLE_ITEMS/2)+this.CENTER_INDEX_ADJUSTMENT,r=(t-s+e+1e3*this.rewardItems.length)%this.rewardItems.length,o=this.rewardItems[r];n.setItemData(o);var a=(e-s)*this.rowHeight-this.currentOffset%this.rowHeight+this.POSITION_OFFSET_ADJUSTMENT;i.y=a;var h=a>=-this.rowHeight&&a<=this.containerHeight;i.visible=h}},a.applyCurveEffect=function(){},a.spin=function(){var t=n(s().mark((function t(){var e,i,n=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isSpinning){t.next=3;break}return console.log("⚠️ 正在旋转中，忽略新的旋转请求"),t.abrupt("return",null);case 3:return this.isSpinning=!0,console.log("🎰 开始旋转"),this.spinTween&&this.spinTween.stop(),e=this.getRandomReward(),i=this.rewardItems.findIndex((function(t){return t.id===e.id})),t.abrupt("return",new Promise((function(t){n.performSpin(2,e,i,t)})));case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.performSpin=function(t,e,i,n){var s=this;console.log("🎯 开始滚动到目标: 索引="+i+", 物品="+e.name);var r=this.currentOffset,a=this.rewardItems.length,h=this.rowHeight*a*3,l=Math.round(r/this.rowHeight)%a,c=-this.rowHeight,g=i-l;g<0&&(g+=a);var u=Math.round(r/this.rowHeight)*this.rowHeight+h+g*this.rowHeight+c+this.FINAL_OFFSET_ADJUSTMENT,f={offset:r};this.spinTween=o(f).to(t,{offset:u},{easing:"cubicOut",onUpdate:function(){s.currentOffset=f.offset,s.updateItemsDisplay(),s.applyCurveEffect()}}).call((function(){s.currentOffset=u,s.updateItemsDisplay(),s.applyCurveEffect(),s.isSpinning=!1;var t=s.getCurrentCenterItem();console.log("✅ 旋转完成，目标: "+e.name+", 实际中心: "+(null==t?void 0:t.name)),console.log("📋 当前所有可见item状态:");for(var i=0;i<s.VISIBLE_ITEMS;i++)if(s.itemInstances[i].visible)s.itemLogics[i].getItemData(),Math.floor(s.VISIBLE_ITEMS/2),s.CENTER_INDEX_ADJUSTMENT;n(e)})),this.spinTween.start()},a.getCurrentCenterItem=function(){var t=(this.currentOffset+this.rowHeight)/this.rowHeight,e=(Math.round(t)%this.rewardItems.length+this.rewardItems.length)%this.rewardItems.length;return this.rewardItems[e]},a.getRandomReward=function(){for(var t,e=this.rewardItems.reduce((function(t,e){return t+e.weight}),0),n=Math.random()*e,s=i(this.rewardItems);!(t=s()).done;){var r=t.value;if((n-=r.weight)<=0)return r}return this.rewardItems[0]},a.stopSpin=function(){this.spinTween&&(this.spinTween.stop(),this.spinTween=null),this.isSpinning=!1},a.resetAllItemHighlights=function(){console.log("🔄 重置转动列表所有item高亮状态");for(var t,e=i(this.itemLogics);!(t=e()).done;){t.value.resetHighlight()}},a.highlightWinningItem=function(t){console.log("🌟 高亮转动列表中的中奖item: "+t.name);for(var e,n=i(this.itemLogics);!(e=n()).done;){var s=e.value,r=s.getItemData();r&&r.id===t.id?s.setHighlight(!0):s.setHighlight(!1)}},a.onDestroy=function(){this.stopSpin();for(var t,e=i(this.itemInstances);!(t=e()).done;){var n=t.value;n&&n.parent&&n.parent.removeChild(n)}this.itemInstances=[],this.itemLogics=[]},r}(h))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/Game_List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;n._RF.push({},"a6828/5bmRDmKzjmiFjMCTg","Game_List",void 0);t("default",c(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_list=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","List")},n.prototype.onConstruct=function(){this.m_list=this.getChild("list")},n}(o)).URL="ui://6gpz43l1jx0li",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ListItem_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_ListItem.ts"],(function(t){var e,i,n,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.addLogic,s=t.GUILogicBase},function(t){a=t.default}],execute:function(){var c;i._RF.push({},"af797pqiI9OP5NKkIXq041v","Game_ListItem_Logic",void 0);t("default",n(a)(c=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).itemData=null,e}e(i,t);var n=i.prototype;return n.onLoad=function(){},n.setItemData=function(t){try{this.itemData=t,this.updateDisplay()}catch(e){console.error("❌ 设置item数据失败:",e,t)}},n.updateDisplay=function(){if(this.itemData){var t=parseInt(this.itemData.id);!isNaN(t)&&t>=0&&t<this.UI.m_c1.pageCount?this.UI.m_c1.selectedIndex=t:this.UI.m_c1.selectedIndex=0,this.UI.m_c2&&(this.UI.m_c2.selectedIndex=0)}},n.getItemData=function(){return this.itemData},n.setHighlight=function(t){this.UI.m_c2&&(this.UI.m_c2.selectedIndex=t?1:0)},n.resetHighlight=function(){this.setHighlight(!1)},i}(s))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,n,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UIPackage,o=t.GComponent},function(t){c=t.vm}],execute:function(){var r,s;n._RF.push({},"5a1aftqf4FFtrg38oAdIngc","Game_ListItem",void 0);t("default",c(((s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).m_c1=void 0,e.m_c2=void 0,e.m_title=void 0,e}return e(n,t),n.createInstance=function(){return i.createObject("Game","ListItem")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_c2=this.getController("c2"),this.m_title=this.getChild("title")},n}(o)).URL="ui://6gpz43l1jx0lj",s.Dependencies=["Game"],r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Main_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Main.ts","./Game_LaoHuJi_Logic.ts"],(function(o){var i,n,t,c,e,u;return{setters:[function(o){i=o.inheritsLoose},function(o){n=o.cclegacy},function(o){t=o.addLogic,c=o.GUILogicBase},function(o){e=o.default},function(o){u=o.default}],execute:function(){var a;n._RF.push({},"b1be6hjkcJNEbWAMaTzJw7t","Game_Main_Logic",void 0);o("default",t(e)(a=function(o){function n(){for(var i,n=arguments.length,t=new Array(n),c=0;c<n;c++)t[c]=arguments[c];return(i=o.call.apply(o,[this].concat(t))||this).laoHuJiLogic=null,i}i(n,o);var t=n.prototype;return t.onLoad=function(){console.log("🎮 主界面加载中..."),this.laoHuJiLogic=this.UI.m_LaoHuJi.Get(u),console.log("✅ 主界面加载完成！"),console.log("🎰 老虎机已准备就绪，可以开始抽奖！")},t.getLaoHuJiLogic=function(){return this.laoHuJiLogic},t.testSpin=function(){this.laoHuJiLogic&&console.log("🧪 脚本触发测试抽奖...")},n}(c))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(n){var e,t,i,o,r;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){i=n.UIPackage,o=n.GComponent},function(n){r=n.vm}],execute:function(){var c,u;t._RF.push({},"21c70EJVrJPmpX+Ven0ryCl","Game_Main",void 0);n("default",r(((u=function(n){function t(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))||this).m_LaoHuJi=void 0,e}return e(t,n),t.createInstance=function(){return i.createObject("Game","Main")},t.prototype.onConstruct=function(){this.m_LaoHuJi=this.getChild("LaoHuJi")},t}(o)).URL="ui://6gpz43l1jx0l6",u.Dependencies=["Game"],c=u))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Tips_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Tips.ts"],(function(o){var n,t,e,i,s,c,u;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy},function(o){e=o.UILayer,i=o.addLogic,s=o.GUIManager,c=o.GUILogicBase},function(o){u=o.default}],execute:function(){var l,r;t._RF.push({},"e455651zgtOyqYdT6rrbhyg","Game_Tips_Logic",void 0);o("default",i(u)(((r=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var e=t.prototype;return e.onLoad=function(){this.UI.m_close.onClick(this.onCloseButtonClick,this),console.log("💡 游戏提示弹窗初始化完成")},e.onCloseButtonClick=function(){console.log("❌ 关闭游戏提示弹窗"),s.close(u)},t}(c)).uiOptions={layer:e.WINDOW,modal:!0,hideLoadModal:!0},l=r))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var n,t,c,o,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){c=e.UIPackage,o=e.GComponent},function(e){i=e.vm}],execute:function(){var r,u;t._RF.push({},"5fc73p3AMBJTJUuVDeIHVe+","Game_Tips",void 0);e("default",i(((u=function(e){function t(){for(var n,t=arguments.length,c=new Array(t),o=0;o<t;o++)c[o]=arguments[o];return(n=e.call.apply(e,[this].concat(c))||this).m_close=void 0,n}return n(t,e),t.createInstance=function(){return c.createObject("Game","Tips")},t.prototype.onConstruct=function(){this.m_close=this.getChild("close")},t}(o)).URL="ui://6gpz43l1u9ma20",u.Dependencies=["Game"],r=u))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameBinder.ts",["cc","./drongo-gui.mjs","./fairygui.mjs","./Game_Dialog.ts","./Game_Main.ts","./Game_LaoHuJi.ts","./Game_List.ts","./Game_ListItem.ts","./Game_Tips.ts"],(function(t){var n,e,i,s,o,u,a,c,f;return{setters:[function(t){n=t.cclegacy},function(t){e=t.registerBinder},function(t){i=t.UIObjectFactory},function(t){s=t.default},function(t){o=t.default},function(t){u=t.default},function(t){a=t.default},function(t){c=t.default},function(t){f=t.default}],execute:function(){var r;n._RF.push({},"08650ol6cNIYZrNjDtTl1mL","GameBinder",void 0);t("default",e(r=function(){function t(){}return t.prototype.bindAll=function(){i.setExtension(s.URL,s),i.setExtension(o.URL,o),i.setExtension(u.URL,u),i.setExtension(a.URL,a),i.setExtension(c.URL,c),i.setExtension(f.URL,f)},t}())||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonExport.ts","./ConfigBase.ts","./ConfigMgr.ts","./PoolMgr.ts","./StartView.ts","./GameBinder.ts","./Game_Btn2.ts","./Game_Dialog.ts","./Game_DialogWindow.ts","./Game_Dialog_Logic.ts","./Game_LaoHuJi.ts","./Game_LaoHuJi_Logic.ts","./Game_List.ts","./Game_ListItem.ts","./Game_ListItem_Logic.ts","./Game_List_Logic.ts","./Game_Main.ts","./Game_Main_Logic.ts","./Game_Tips.ts","./Game_Tips_Logic.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,r,o,a,i,s,c,u,l,f,p,h,b;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.instantiate,i=e.Prefab},function(e){s=e.PoolBuilder,c=e.instance_base,u=e.asset,l=e.error},function(e){f=e.GTextField,p=e.AutoSizeType,h=e.UIPackage},function(e){b=e.GUIManager}],execute:function(){o._RF.push({},"04672eWqVFIKJiVK6TVkrA3","PoolMgr",void 0);e("objPoolMgr",function(e){function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._prefabpools=new Map,t._gobjpools=new Map,t._txtPool=null,t}t(o,e);var c=o.prototype;return c.getPrefabPool=function(){var e=n(r().mark((function e(t,o){var c,l,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=""+o+t,this._prefabpools.has(c)){e.next=7;break}return l=null,e.next=5,s().create(n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.next=3,u.get(t,i,null,{bundle_s:o});case 3:l=e.sent;case 4:return e.abrupt("return",a(l));case 5:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent=null,e.active=!0,e})).clear((function(e){var t;e.forEach((function(e){e.destroy()})),null==(t=l)||t.decRef(),l=null})).initialSize(5).maxSize(50).buildAsync();case 5:f=e.sent,this._prefabpools.set(c,f);case 7:return e.abrupt("return",this._prefabpools.get(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getGobjPool=function(){var e=n(r().mark((function e(t,o){var a,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=""+t+o,this._gobjpools.has(a)){e.next=7;break}return i=null,e.next=5,s().create(n(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=7;break}if(i=h.getByName(t)){e.next=6;break}return e.next=5,b.loadPackage(t);case 5:i=e.sent;case 6:b.setPackageRefCount(t);case 7:return(n=i.createObject(o))||l("create gobj "+t+"/"+o+" failed,请检查资源是否存在"),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()})),b.setPackageRefCount(t,-1),i=null})).initialSize(5).maxSize(50).buildAsync();case 5:c=e.sent,this._gobjpools.set(a,c);case 7:return e.abrupt("return",this._gobjpools.get(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getTxtPool=function(){return this._txtPool||(this._txtPool=s().create((function(){return new f})).reset((function(e){return e.fontSize=20,e.text="",e.setPivot(.5,1,!0),e.autoSize=p.Both,e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()}))})).initialSize(5).maxSize(100).buildSync()),this._txtPool},c.clear=function(){this._prefabpools.forEach((function(e){e.clear(),e.destroy()})),this._prefabpools.clear(),this._gobjpools.forEach((function(e){e.clear(),e.destroy()})),this._gobjpools.clear(),this._txtPool&&(this._txtPool.clear(),this._txtPool.destroy(),this._txtPool=null)},o}(c).instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/StartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./CommonExport.ts","./fairygui.mjs","./Game_Main.ts"],(function(e){var t,r,o,i,n,a,s,l,c,u,g,p,h,d,b,f,v,y,m,w,B,x,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.ProgressBar,g=e.Node,p=e.color,h=e.view,d=e.AudioSourceComponent,b=e.tween,f=e.Component},function(e){v=e.GUIManager,y=e.AllBinder},null,function(e){m=e.UIConfig,w=e.registerFont,B=e.GRoot,x=e.UIPackage},function(e){I=e.default}],execute:function(){var S,F,G,j,z,O,k,C;s._RF.push({},"b717ey19TVBBpBqTI0xPCo1","StartView",void 0);var M=l.ccclass,P=l.property;e("default",(S=P(c),F=P(u),G=P(g),M((O=t((z=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"label",O,i(t)),o(t,"progressBar",k,i(t)),o(t,"bg",C,i(t)),t.progressObj={value:0},t}r(t,e);var s=t.prototype;return s.onLoad=function(){m.buttonSoundVolumeScale=1,m.bringWindowToFrontOnClick=!1,w("Inter-BoldItalic"),m.defaultFont="Inter-BoldItalic",m.modalLayerColor=p(0,0,0,100),this.progressBar.progress=0,this.label.string="0%",this.progressObj.value=0},s.adaptBackgroundSize=function(){if(this.bg)try{var e=B.inst,t=e.width,r=e.height,o=h.getDesignResolutionSize(),i=h.getVisibleSize();console.log("FairyGUI适配信息:\n                FGUI根节点尺寸: "+t+" x "+r+"\n                设计分辨率: "+o.width+" x "+o.height+"\n                屏幕尺寸: "+i.width+" x "+i.height);var n=t/o.width,a=r/o.height;this.bg.setScale(n,a),console.log("背景适配完成:\n                宽度缩放: "+n.toFixed(3)+"\n                高度缩放: "+a.toFixed(3)+"\n                最终背景尺寸: "+(o.width*n).toFixed(1)+" x "+(o.height*a).toFixed(1))}catch(e){console.error("背景适配失败，回退到基础适配:",e);var s=h.getVisibleSize(),l=h.getDesignResolutionSize(),c=s.width/l.width,u=s.height/l.height;this.bg.setScale(c,u)}else console.warn("bg节点未设置，跳过背景适配")},s.playBGM=function(e,t,r){var o=x.getByName(t).getItemAssetByName(r),i=e.addComponent(d);return i.isValid&&(i.clip=o,i.volume=1,i.loop=!0,i.play()),i},s.start=function(){var e=n(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.bindAll(),e.prev=1,this.adaptBackgroundSize(),console.log("开始加载UI包..."),e.next=6,v.loadPackage("Game",(function(e,r){var o=e/r;t.updateProgress(o,"加载UI资源")}));case 6:console.log("所有资源加载完成！");try{this.playBGM(this.node,"Game","bgm"),console.log("BGM播放成功")}catch(e){console.warn("BGM播放失败:",e)}v.open(I),this.label.node.parent.active=!1,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("资源加载失败:",e.t0),v.open(I),this.label.node.parent.active=!1;case 17:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),s.updateProgress=function(e,t){var r=this;e<=this.progressObj.value?console.log("进度回退保护: 当前进度 "+(100*this.progressObj.value).toFixed(1)+"%, 目标进度 "+(100*e).toFixed(1)+"%"):(b(this.progressObj).stop(),b(this.progressObj).to(.3,{value:e},{onUpdate:function(){r.progressBar.progress=r.progressObj.value;var e=Math.floor(100*r.progressObj.value);r.label.string=e+"%"}}).start())},t}(f)).prototype,"label",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(z.prototype,"progressBar",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(z.prototype,"bg",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=z))||j));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});