System.register("chunks:///_virtual/CenteredWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs"],(function(n){var e,t,i;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){i=n.Window}],execute:function(){t._RF.push({},"13ae76TWlpFt4TEKK+Pna+2","CenteredWindow",void 0);n("CenteredWindow",function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.onInit=function(){this.center()},t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonExport.ts",["cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs","./VibrationManager.ts","./ToyControlInterface.ts"],(function(n){var o;return{setters:[function(t){o=t.cclegacy,n("cc",t)},function(o){n("drongoCC",o)},function(o){n("fgui",o)},function(o){n("drongoGui",o)},function(o){n("VibrationManager",o.VibrationManager)},function(o){n("ToyControlInterface",o.ToyControlInterface)}],execute:function(){o._RF.push({},"2a54bPglDFEaKMITwv2aDNG","CommonExport",void 0),o._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigBase.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6aa16Nf6rJP87ezxWaLdhoO","ConfigBase",void 0);t("default",function(){function t(){}return t.prototype.init=function(t){var e=this;t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.hasOwnProperty(n)&&(e[n]=t[n])}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(n){var e,t,r,s,i,o,a,u,c;return{setters:[function(n){e=n.inheritsLoose,t=n.createForOfIteratorHelperLoose,r=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){i=n.cclegacy,o=n.JsonAsset},function(n){a=n.autoBindToWindow,u=n.instance_base,c=n.asset}],execute:function(){var f;i._RF.push({},"ab49fwHf11ArqXDrPGKAbkd","ConfigMgr",void 0);var g=a(f=function(n){function i(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))||this).configs=new Map,e.configAssets=new Map,e}e(i,n);var a=i.prototype;return a.loadConfig=function(){var n=r(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.name,!this.configs.has(t)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,c.get("Config/"+t,o,null);case 5:r=n.sent,this.initConfig(e,r);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.initConfig=function(n,e){var t=n.name,r=new Map;for(var s in e.json){var i=e.json[s],o=new n;o.init(i),r.set(parseInt(s),o)}e.decRef(),this.configs.set(t,r)},a.initConfigs=function(){var n=r(s().mark((function n(e){var r,i,a,u,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.get_dir(e,o,null);case 2:for(r=n.sent,i=t(r);!(a=i()).done;)u=a.value,f=u.name.replace(".json",""),this.configAssets.set(f,u);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.getConfig=function(n,e){var t=n.name,r=this.configAssets.get(t);r&&(this.initConfig(n,r),this.configAssets.delete(t));var s=this.configs.get(t);return s?s.get(e):null},a.getAllConfigs=function(n){var e=n.name,t=this.configAssets.get(e);t&&(this.initConfig(n,t),this.configAssets.delete(e));var r=this.configs.get(e);return r||null},a.queryOne=function(n,e){for(var r,s=this.getAllConfigs(n),i=t(s.values());!(r=i()).done;){var o=r.value;if(e(o))return o}return null},a.queryAll=function(n,e){for(var r,s=this.getAllConfigs(n),i=[],o=t(s.values());!(r=o()).done;){var a=r.value;e(a)&&i.push(a)}return i},i}(u))||f;n("configMgr",g.instance());i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Area_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Area.ts"],(function(e){var t,n,o,i,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.addLogic,i=e.GUILogicBase},function(e){r=e.default}],execute:function(){var u;n._RF.push({},"2719erLKBNHOIOaqt72NNEV","Game_Area_Logic",void 0);e("default",o(r)(u=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.onLoad=function(){},n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Area.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var n,t,r,o,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){r=e.UIPackage,o=e.GComponent},function(e){c=e.vm}],execute:function(){var i,u;t._RF.push({},"14282Nu/MlOFKSnZ1ZP2DnK","Game_Area",void 0);e("default",c(((u=function(e){function t(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e.call.apply(e,[this].concat(r))||this).m_bg=void 0,n}return n(t,e),t.createInstance=function(){return r.createObject("Game","Area")},t.prototype.onConstruct=function(){this.m_bg=this.getChild("bg")},t}(o)).URL="ui://6gpz43l1e0zeq",u.Dependencies=["Game"],i=u))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Bubbble_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Bubbble.ts"],(function(e){var t,n,i,a,s,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e.tween,a=e.Vec3},function(e){s=e.GUILogicBase,o=e.addLogic},function(e){c=e.default}],execute:function(){var l;n._RF.push({},"308c3grMC5EQZ9pIORNHPY8","Game_Bubbble_Logic",void 0);e("default",o(c)(l=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).lastState=0,t.isPopping=!1,t}t(n,e);var s=n.prototype;return s.onLoad=function(){this.UI.m_baoZha.visible=!1,this.lastState=this.UI.m_c1.selectedIndex,this.UI.m_c1.onChanged(this.onStateChanged,this)},s.onDestroy=function(){e.prototype.onDestroy.call(this),this.UI.m_c1.offChanged(this.onStateChanged,this)},s.onStateChanged=function(){var e=this,t=this.UI.m_c1.selectedIndex;if(0===this.lastState&&t>0&&!this.isPopping){this.isPopping=!0;var n=t;return this.UI.m_c1.selectedIndex=0,void this.playPrepareAnimation((function(){e.UI.m_c1.selectedIndex=n,e.lastState=n,e.playPopAnimation(),e.isPopping=!1}))}this.lastState=t},s.playPrepareAnimation=function(e){var t=this.UI.node,n=t.scale.clone();i(t).stop(),i(t).to(.05,{scale:new a(1.1,1.1,1)},{easing:"backOut"}).to(.025,{scale:new a(1.15,1.05,1),eulerAngles:new a(0,0,8)},{easing:"sineInOut"}).to(.025,{scale:new a(1.05,1.15,1),eulerAngles:new a(0,0,-8)},{easing:"sineInOut"}).to(.05,{scale:new a(1.2,1.2,1),eulerAngles:new a(0,0,0)},{easing:"sineOut"}).call((function(){t.setScale(n.x,n.y,n.z),t.setRotationFromEuler(0,0,0),e()})).start()},s.playPopAnimation=function(){var e=this;this.UI.m_baoZha.visible=!0,this.UI.m_baoZha.alpha=1;var t=this.UI.m_baoZha.node;t.setScale(.5,.5,1),i(t).to(.15,{scale:new a(1.2,1.2,1)},{easing:"sineOut"}).to(.1,{scale:new a(0,0,1)},{easing:"sineIn"}).call((function(){e.UI.m_baoZha.visible=!1})).start()},n}(s))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Bubbble.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,o,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.UIPackage,c=e.GComponent},function(e){i=e.vm}],execute:function(){var r,a;n._RF.push({},"a37d3oxQ5NFRLxjx9QM0o88","Game_Bubbble",void 0);e("default",i(((a=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).m_c1=void 0,t.m_baoZha=void 0,t}return t(n,e),n.createInstance=function(){return o.createObject("Game","Bubbble")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_baoZha=this.getChild("baoZha")},n}(c)).URL="ui://6gpz43l1e0zeo",a.Dependencies=["Game"],r=a))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GamePage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_GamePage.ts","./Game_Bubbble.ts","./VibrationManager.ts","./ToyControlInterface.ts","./VibrationConfig.ts","./env","./fairygui.mjs","./drongo-cc.mjs","./Game_TestPage.ts"],(function(t){var i,e,s,o,n,h,a,l,u,r,b,c,d,m,g,I,p,v,f,_,S,C;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,o=t.tween,n=t.Vec3,h=t.view,a=t.Node,l=t.AudioSource},function(t){u=t.addLogic,r=t.GUILogicBase},function(t){b=t.default},function(t){c=t.default},function(t){d=t.VibrationManager},function(t){m=t.ToyControlInterface},function(t){g=t.vibrationConfig},function(t){I=t.DEBUG},function(t){p=t.GRoot,v=t.Event,f=t.UIPackage},function(t){_=t.TickerManager,S=t.log,C=t.Timer},null],execute:function(){var U;s._RF.push({},"02252IqFLxL2LbHXhLw4tqp","Game_GamePage_Logic",void 0);t("default",u(b)(U=function(t){function s(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this).COLS=9,i.ROWS=10,i.PADDING=20,i.SPACING=5,i.COMBO_TIMEOUT=1,i.bubbleWidth=0,i.bubbleHeight=0,i.bubbles=[],i.poppedCount=0,i.comboCount=0,i.lastClickTime=0,i.comboActive=!1,i.lastComboSpeed=0,i.clickTimestamps=[],i.goInitialY=0,i.progressObj={value:0},i.touchedBubbles=new Set,i.bubblePopSound=null,i.audioSourcePool=[],i.audioSourceIndex=0,i.MAX_AUDIO_INSTANCES=10,i}i(s,t);var u=s.prototype;return u.onLoad=function(){var t=this;d.init(),m.init(),this.adaptBackgroundSize(),this.UI.m_tiShi.selectedIndex=0,this.UI.m_progress.value=0,this.UI.m_num.visible=!1,this.UI.m_Go.visible=!0,this.UI.m_Go.alpha=1,this.UI.m_tishiImg.visible=!1,this.UI.m_tishiImg.alpha=0,_.callNextFrame((function(){t.startGoIdleAnimation()}),this),this.initBubbleGrid(),this.setupTouchEvents(),this.initAudioSystem(),this._log.log("游戏初始化完成")},u.start=function(){this.UI.m_setting.visible=I,this.UI.m_testNum.visible=I},u.startGoIdleAnimation=function(){var t=this.UI.m_Go.node;o(t).stop(),0===this.goInitialY&&(this.goInitialY=t.position.y),t.setScale(1,1,1);var i=t.position.x;o(t).to(1.2,{scale:new n(1.05,1.05,1),position:new n(i,this.goInitialY+5,0)},{easing:"sineInOut"}).to(1.2,{scale:new n(1,1,1),position:new n(i,this.goInitialY,0)},{easing:"sineInOut"}).union().repeatForever().start()},u.stopGoIdleAnimation=function(){var t=this.UI.m_Go.node;o(t).stop(),t.setScale(1,1,1)},u.adaptBackgroundSize=function(){if(this.UI.m_bg)try{var t=p.inst,i=t.width,e=t.height,s=h.getDesignResolutionSize(),o=h.getVisibleSize();S("[背景适配] FairyGUI信息:\n\t\t\t\tFGUI根节点尺寸: "+i+" x "+e+"\n\t\t\t\t设计分辨率: "+s.width+" x "+s.height+"\n\t\t\t\t屏幕尺寸: "+o.width+" x "+o.height);var n=i/s.width,a=e/s.height;this.UI.m_bg.setScale(n,a),S("[背景适配] 完成:\n\t\t\t\t宽度缩放: "+n.toFixed(3)+"\n\t\t\t\t高度缩放: "+a.toFixed(3)+"\n\t\t\t\t最终背景尺寸: "+(s.width*n).toFixed(1)+" x "+(s.height*a).toFixed(1))}catch(t){this._log.log("背景适配失败，回退到基础适配:",t);var l=h.getVisibleSize(),u=h.getDesignResolutionSize(),r=l.width/u.width,b=l.height/u.height;this.UI.m_bg.setScale(r,b)}else this._log.log("m_bg未设置，跳过背景适配")},u.initBubbleGrid=function(){var t=this,i=this.UI.m_BubbleArea.getChildAt(0);this.UI.m_BubbleArea.removeChildren(),i&&this.UI.m_BubbleArea.addChild(i),this.bubbles=[],this.calculateBubbleSize();for(var e=0;e<this.ROWS;e++)for(var s=0;s<this.COLS;s++){var o=c.createInstance();o.setSize(this.bubbleWidth,this.bubbleHeight),o.setPivot(.5,.5,!0);var n=this.PADDING+s*(this.bubbleWidth+this.SPACING)+this.bubbleWidth/2,h=this.PADDING+e*(this.bubbleHeight+this.SPACING)+this.bubbleHeight/2;o.setPosition(n,h),this.UI.m_BubbleArea.addChild(o),this.bubbles.push(o)}_.callNextFrame((function(){t.centerBubbleArea()}),this),this._log.log("泡泡网格初始化完成: "+this.COLS+"x"+this.ROWS+" = "+this.bubbles.length+"个, 气泡尺寸: "+this.bubbleWidth.toFixed(1)+"x"+this.bubbleHeight.toFixed(1))},u.calculateBubbleSize=function(){var t=this.UI.m_BubbleArea,i=t.width-2*this.PADDING,e=t.height-2*this.PADDING;this.bubbleWidth=(i-(this.COLS-1)*this.SPACING)/this.COLS,this.bubbleHeight=(e-(this.ROWS-1)*this.SPACING)/this.ROWS,S("[气泡布局] 自适应计算:\n\t\t\t容器尺寸: "+t.width+"x"+t.height+"\n\t\t\t可用空间: "+i+"x"+e+"\n\t\t\t内间距(padding): "+this.PADDING+"\n\t\t\t气泡间距(spacing): "+this.SPACING+"\n\t\t\t气泡尺寸: "+this.bubbleWidth.toFixed(1)+"x"+this.bubbleHeight.toFixed(1))},u.centerBubbleArea=function(){var t=this.UI.m_BubbleArea,i=t.parent;if(i){var e=(i.width-t.width)/2;t.x=e,S("[气泡区域] 左右居中: x="+e.toFixed(1)+", 父容器宽度="+i.width+", 区域宽度="+t.width)}},u.setupTouchEvents=function(){var t=this,i=this.UI.m_BubbleArea;i.on(v.TOUCH_BEGIN,(function(i){t.touchedBubbles.clear(),t.handleTouchMove(i),i.captureTouch()}),this),i.on(v.TOUCH_MOVE,(function(i){t.handleTouchMove(i)}),this),i.on(v.TOUCH_END,(function(){t.touchedBubbles.clear()}),this),this._log.log("触摸滑动事件已设置")},u.handleTouchMove=function(t){for(var i,s=p.inst.inputProcessor.getTouchPosition(),o=this.UI.m_BubbleArea.globalToLocal(s.x,s.y),n=e(this.bubbles);!(i=n()).done;){var h=i.value;if(!this.touchedBubbles.has(h)&&(0===h.m_c1.selectedIndex&&this.isTouchInBubble(o.x,o.y,h))){this.touchedBubbles.add(h),this.onBubbleClick(h);break}}},u.isTouchInBubble=function(t,i,e){var s=e.x,o=e.y,n=e.width,h=e.height;return t>=s-n/2&&t<=s+n/2&&i>=o-h/2&&i<=o+h/2},u.onBubbleClick=function(t){var i=this;if(0===t.m_c1.selectedIndex){var e=Math.floor(3*Math.random())+1;t.m_c1.selectedIndex=e,this.playBubblePopSound(),d.vibrate(50),this.poppedCount++,this.updateProgress(),this.handleCombo(),this.poppedCount>=this.bubbles.length&&this.scheduleOnce((function(){i.refreshPage()}),.5),this.updateToyVibration()}},u.updateToyVibration=function(){var t=this.getComboSpeed();this.shouldUpdateVibration(t)&&(this.lastComboSpeed=t,m.onComboChange(this.comboCount,t))},u.shouldUpdateVibration=function(t){var i=this,e=g;if(0===this.lastComboSpeed&&t>0)return!0;var s=[e.perfectSpeed,e.greatSpeed,e.goodSpeed,e.coolSpeed].sort((function(t,i){return i-t}));return s.findIndex((function(t){return i.lastComboSpeed>=t}))!==s.findIndex((function(i){return t>=i}))},u.initAudioSystem=function(){try{var t=f.getByName("Game");if(this.bubblePopSound=t.getItemAssetByName("bubble-pop"),!this.bubblePopSound)return void this._log.log("音效资源未找到");var i=new a("AudioSourcePool");i.setParent(this.UI.node);for(var e=0;e<this.MAX_AUDIO_INSTANCES;e++){var s=i.addComponent(l);s.clip=this.bubblePopSound,s.loop=!1,s.playOnAwake=!1,s.volume=1,this.audioSourcePool.push(s)}this._log.log("音效系统初始化成功，创建了 "+this.MAX_AUDIO_INSTANCES+" 个音效实例（防炸音）")}catch(t){this._log.log("音效系统初始化失败:",t)}},u.playBubblePopSound=function(){if(0!==this.audioSourcePool.length)try{var t=this.audioSourcePool[this.audioSourceIndex];t.playing&&t.stop(),t.play(),this.audioSourceIndex=(this.audioSourceIndex+1)%this.audioSourcePool.length}catch(t){this._log.log("播放音效失败:",t)}},u.updateProgress=function(){var t=this,i=this.poppedCount/this.bubbles.length*100;o(this.progressObj).stop(),o(this.progressObj).to(.3,{value:i},{easing:"sineOut",onUpdate:function(){t.UI.m_progress.value=t.progressObj.value}}).start()},u.update=function(t){this.comboActive&&(C.currentTime-this.lastClickTime>this.COMBO_TIMEOUT&&(this.resetCombo(),this.comboActive=!1,m.onComboStop()))},u.handleCombo=function(){var t=C.currentTime;t-this.lastClickTime<this.COMBO_TIMEOUT&&this.lastClickTime>0?this.comboCount++:(this.comboCount=1,this.showComboUI()),this.lastClickTime=t,this.comboActive=!0,this.clickTimestamps.push(t),this.updateComboDisplay()},u.updateComboDisplay=function(){this.UI.m_num.text="x"+this.comboCount,this.UI.m_num.visible=!0;var t=this.UI.m_num.node;t.setScale(1.5,1.5,1),o(t).to(.2,{scale:new n(1,1,1)},{easing:"backOut"}).start(),this.playTishiAnimation();this.getComboSpeed()},u.playTishiAnimation=function(){var t=this.UI.m_tishiImg.node;o(t).stop();var i=this.getComboSpeed(),e=1.2,s=.15;i>=10?(e=1.4,s=.12):i>=5&&(e=1.3,s=.13),t.setScale(1,1,1),o(t).to(s,{scale:new n(e,e,1),eulerAngles:new n(0,0,5)},{easing:"sineOut"}).to(s,{scale:new n(1,1,1),eulerAngles:new n(0,0,-5)},{easing:"sineIn"}).to(.5*s,{eulerAngles:new n(0,0,0)},{easing:"sineOut"}).start()},u.getComboSpeed=function(){for(var t=C.currentTime-1;this.clickTimestamps.length>0&&this.clickTimestamps[0]<t;)this.clickTimestamps.shift();return this.clickTimestamps.length},u.showComboUI=function(){var t=this;this.UI.m_tiShi.selectedIndex=1,this.UI.m_num.visible=!0,this.stopGoIdleAnimation();var i=this.UI.m_Go.node;o(i).stop(),o(i).to(.2,{scale:new n(.8,.8,1)},{easing:"sineIn"}).call((function(){t.UI.m_Go.visible=!1})).start(),o(this.UI.m_Go).to(.2,{alpha:0},{easing:"sineIn"}).start(),this.UI.m_tishiImg.visible=!0,this.UI.m_tishiImg.alpha=0;var e=this.UI.m_tishiImg.node;e.setScale(.8,.8,1),o(this.UI.m_tishiImg).to(.3,{alpha:1},{easing:"sineOut"}).start(),o(e).to(.3,{scale:new n(1,1,1)},{easing:"backOut"}).start()},u.resetCombo=function(){this.comboCount=0,this.lastComboSpeed=0,this.clickTimestamps.length=0,this.hideComboUI()},u.hideComboUI=function(){var t=this;this.UI.m_tiShi.selectedIndex=0,this.UI.m_num.visible=!1;var i=this.UI.m_tishiImg.node;o(i).stop(),o(this.UI.m_tishiImg).to(.2,{alpha:0},{easing:"sineIn"}).call((function(){t.UI.m_tishiImg.visible=!1})).start(),o(i).to(.2,{scale:new n(.8,.8,1)},{easing:"sineIn"}).start(),this.UI.m_Go.visible=!0,this.UI.m_Go.alpha=0;var e=this.UI.m_Go.node;e.setScale(.8,.8,1),o(this.UI.m_Go).to(.3,{alpha:1},{easing:"sineOut"}).start(),o(e).to(.3,{scale:new n(1,1,1)},{easing:"backOut"}).call((function(){t.startGoIdleAnimation()})).start()},u.refreshPage=function(){var t=this,i=this.UI.m_BubbleArea,e=i.node;i.x;o(e).to(.3,{position:new n(-i.width,e.position.y,0)},{easing:"sineIn"}).call((function(){t.resetAllBubbles(),t.poppedCount=0,t.progressObj.value=0,t.UI.m_progress.value=0,t.centerBubbleArea();var s=i.x;e.setPosition(i.width,e.position.y,0),o(e).to(.3,{position:new n(s,e.position.y,0)},{easing:"sineOut"}).start()})).start(),this._log.log("页面刷新 - 连击继承")},u.resetAllBubbles=function(){this.bubbles.forEach((function(t){t.m_c1.selectedIndex=0}))},s}(r))||U);s._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GamePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var i,e,s,n,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy},function(t){s=t.UIPackage,n=t.GComponent},function(t){o=t.vm}],execute:function(){var m,h;e._RF.push({},"8b539gX39lFDYSug9u4/3P9","Game_GamePage",void 0);t("default",o(((h=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(i=t.call.apply(t,[this].concat(s))||this).m_tiShi=void 0,i.m_bg=void 0,i.m_BubbleArea=void 0,i.m_progress=void 0,i.m_num=void 0,i.m_Go=void 0,i.m_tishiImg=void 0,i.m_setting=void 0,i.m_testNum=void 0,i}return i(e,t),e.createInstance=function(){return s.createObject("Game","GamePage")},e.prototype.onConstruct=function(){this.m_tiShi=this.getController("tiShi"),this.m_bg=this.getChild("bg"),this.m_BubbleArea=this.getChild("BubbleArea"),this.m_progress=this.getChild("progress"),this.m_num=this.getChild("num"),this.m_Go=this.getChild("Go"),this.m_tishiImg=this.getChild("tishiImg"),this.m_setting=this.getChild("setting"),this.m_testNum=this.getChild("testNum")},e}(n)).URL="ui://6gpz43l1e0zek",h.Dependencies=["Game"],m=h))||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_TestPage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_TestPage.ts","./VibrationConfig.ts","./CenteredWindow.ts"],(function(t){var n,e,i,o,s,u,r,c,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.addLogic,o=t.GBind,s=t.GUIManager,u=t.GUILogicBase},function(t){r=t.default},function(t){c=t.vibrationConfig},function(t){a=t.CenteredWindow}],execute:function(){var d,g;e._RF.push({},"51470Ydj9BPZ5IqSDNvNuv+","Game_TestPage_Logic",void 0);t("default",i(r)(((g=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){o(this.UI.m_jisu,c,(function(t){return t.perfectSpeed})).bindTarget(this),o(this.UI.m_gaosu,c,(function(t){return t.greatSpeed})).bindTarget(this),o(this.UI.m_zhongsu,c,(function(t){return t.goodSpeed})).bindTarget(this),o(this.UI.m_disu,c,(function(t){return t.coolSpeed})).bindTarget(this),this.UI.m_close.onClick((function(){s.close(r)}),this)},e}(u)).uiOptions={modal:!0,windowCls:a},d=g))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_TestPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,i,s,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){s=t.UIPackage,n=t.GComponent},function(t){o=t.vm}],execute:function(){var u,c;i._RF.push({},"1d497QZkiNFl5z7kQ7p1ma/","Game_TestPage",void 0);t("default",o(((c=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).m_jisu=void 0,e.m_gaosu=void 0,e.m_zhongsu=void 0,e.m_disu=void 0,e.m_close=void 0,e}return e(i,t),i.createInstance=function(){return s.createObject("Game","TestPage")},i.prototype.onConstruct=function(){this.m_jisu=this.getChild("jisu"),this.m_gaosu=this.getChild("gaosu"),this.m_zhongsu=this.getChild("zhongsu"),this.m_disu=this.getChild("disu"),this.m_close=this.getChild("close")},i}(n)).URL="ui://6gpz43l1tcqzw",c.Dependencies=["Game"],u=c))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameBinder.ts",["cc","./drongo-gui.mjs","./fairygui.mjs","./Game_GamePage.ts","./Game_Bubbble.ts","./Game_Area.ts","./Game_TestPage.ts"],(function(e){var t,n,i,u,s,o,a;return{setters:[function(e){t=e.cclegacy},function(e){n=e.registerBinder},function(e){i=e.UIObjectFactory},function(e){u=e.default},function(e){s=e.default},function(e){o=e.default},function(e){a=e.default}],execute:function(){var c;t._RF.push({},"602edeDLsJKn6uC1dZlW7SH","GameBinder",void 0);e("default",n(c=function(){function e(){}return e.prototype.bindAll=function(){i.setExtension(u.URL,u),i.setExtension(s.URL,s),i.setExtension(o.URL,o),i.setExtension(a.URL,a)},e}())||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonExport.ts","./ConfigBase.ts","./ConfigMgr.ts","./PoolMgr.ts","./ToyControlInterface.ts","./VibrationConfig.ts","./VibrationManager.ts","./StartView.ts","./GameBinder.ts","./Game_GamePage.ts","./Game_GamePage_Logic.ts","./Game_Area.ts","./Game_Area_Logic.ts","./Game_Bubbble.ts","./Game_Bubbble_Logic.ts","./CenteredWindow.ts","./Game_TestPage.ts","./Game_TestPage_Logic.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,r,o,a,i,s,c,u,l,f,p,h,b;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.instantiate,i=e.Prefab},function(e){s=e.PoolBuilder,c=e.instance_base,u=e.error,l=e.asset},function(e){f=e.GTextField,p=e.AutoSizeType,h=e.UIPackage},function(e){b=e.GUIManager}],execute:function(){o._RF.push({},"04672eWqVFIKJiVK6TVkrA3","PoolMgr",void 0);e("objPoolMgr",function(e){function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._prefabpools=new Map,t._gobjpools=new Map,t._txtPool=null,t}t(o,e);var c=o.prototype;return c.getPrefabPool=function(){var e=n(r().mark((function e(t,o){var c,u,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=""+o+t,this._prefabpools.has(c)){e.next=7;break}return u=null,e.next=5,s().create(n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=4;break}return e.next=3,l.get(t,i,null,{bundle_s:o});case 3:u=e.sent;case 4:return e.abrupt("return",a(u));case 5:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent=null,e.active=!0,e})).clear((function(e){var t;e.forEach((function(e){e.destroy()})),null==(t=u)||t.decRef(),u=null})).initialSize(5).maxSize(50).buildAsync();case 5:f=e.sent,this._prefabpools.set(c,f);case 7:return e.abrupt("return",this._prefabpools.get(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getGobjPool=function(){var e=n(r().mark((function e(t,o){var a,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=""+t+o,this._gobjpools.has(a)){e.next=7;break}return i=null,e.next=5,s().create(n(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=7;break}if(i=h.getByName(t)){e.next=6;break}return e.next=5,b.loadPackage(t);case 5:i=e.sent;case 6:b.setPackageRefCount(t);case 7:return(n=i.createObject(o))||u("create gobj "+t+"/"+o+" failed,请检查资源是否存在"),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()})),b.setPackageRefCount(t,-1),i=null})).initialSize(5).maxSize(50).buildAsync();case 5:c=e.sent,this._gobjpools.set(a,c);case 7:return e.abrupt("return",this._gobjpools.get(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getTxtPool=function(){return this._txtPool||(this._txtPool=s().create((function(){return new f})).reset((function(e){return e.fontSize=20,e.text="",e.setPivot(.5,1,!0),e.autoSize=p.Both,e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()}))})).initialSize(5).maxSize(100).buildSync()),this._txtPool},c.clear=function(){this._prefabpools.forEach((function(e){e.clear(),e.destroy()})),this._prefabpools.clear(),this._gobjpools.forEach((function(e){e.clear(),e.destroy()})),this._gobjpools.clear(),this._txtPool&&(this._txtPool.clear(),this._txtPool.destroy(),this._txtPool=null)},o}(c).instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/StartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./CommonExport.ts","./fairygui.mjs","./drongo-cc.mjs","./Game_GamePage.ts"],(function(e){var t,r,o,n,i,a,s,l,c,u,g,p,h,d,b,f,v,m,y,B,w,x,G,I,S,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.ProgressBar,g=e.Node,p=e.color,h=e.view,d=e.AudioSourceComponent,b=e.tween,f=e.Component},function(e){v=e.GUIManager,m=e.AllBinder},null,function(e){y=e.UIConfig,B=e.registerFont,w=e.GRoot,x=e.UIPackage},function(e){G=e.logConfig,I=e.LogLevel,S=e.log},function(e){z=e.default}],execute:function(){var F,j,C,P,k,M,U,L;s._RF.push({},"b717ey19TVBBpBqTI0xPCo1","StartView",void 0);var O=l.ccclass,V=l.property;e("default",(F=V(c),j=V(u),C=V(g),O((M=t((k=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"label",M,n(t)),o(t,"progressBar",U,n(t)),o(t,"bg",L,n(t)),t.progressObj={value:0},t}r(t,e);var s=t.prototype;return s.onLoad=function(){y.buttonSoundVolumeScale=1,y.bringWindowToFrontOnClick=!1,B("Inter-BoldItalic"),y.defaultFont="Inter-BoldItalic",y.modalLayerColor=p(0,0,0,100),this.progressBar.progress=0,this.label.string="0%",this.progressObj.value=0,G.level_n=I.none},s.adaptBackgroundSize=function(){if(this.bg)try{var e=w.inst,t=e.width,r=e.height,o=h.getDesignResolutionSize(),n=h.getVisibleSize();S("FairyGUI适配信息:\n                FGUI根节点尺寸: "+t+" x "+r+"\n                设计分辨率: "+o.width+" x "+o.height+"\n                屏幕尺寸: "+n.width+" x "+n.height);var i=t/o.width,a=r/o.height;this.bg.setScale(i,a),S("背景适配完成:\n                宽度缩放: "+i.toFixed(3)+"\n                高度缩放: "+a.toFixed(3)+"\n                最终背景尺寸: "+(o.width*i).toFixed(1)+" x "+(o.height*a).toFixed(1))}catch(e){console.error("背景适配失败，回退到基础适配:",e);var s=h.getVisibleSize(),l=h.getDesignResolutionSize(),c=s.width/l.width,u=s.height/l.height;this.bg.setScale(c,u)}else console.warn("bg节点未设置，跳过背景适配")},s.playBGM=function(e,t,r){var o=x.getByName(t).getItemAssetByName(r),n=e.addComponent(d);return n.isValid&&(n.clip=o,n.volume=.7,n.loop=!0,n.play()),n},s.start=function(){var e=i(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.bindAll(),e.prev=1,this.adaptBackgroundSize(),S("开始加载UI包..."),e.next=6,v.loadPackage("Game",(function(e,r){var o=e/r;t.updateProgress(o,"加载UI资源")}));case 6:S("所有资源加载完成！");try{this.playBGM(this.node,"Game","pop_BGM"),S("BGM播放成功")}catch(e){console.warn("BGM播放失败:",e)}v.open(z),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("资源加载失败:",e.t0),v.open(z);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),s.updateProgress=function(e,t){var r=this;b(this.progressObj).stop(),b(this.progressObj).to(.3,{value:e},{onUpdate:function(){r.progressBar.progress=r.progressObj.value;var e=Math.floor(100*r.progressObj.value);r.label.string=e+"%"}}).start()},t}(f)).prototype,"label",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(k.prototype,"progressBar",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(k.prototype,"bg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=k))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/ToyControlInterface.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./VibrationConfig.ts"],(function(n){var t,e,o,i,l;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy},function(n){o=n.Timer,i=n.log},function(n){l=n.vibrationConfig}],execute:function(){e._RF.push({},"f2b3cTV5vdIqZq83vEjRWeJ","ToyControlInterface",void 0);var r=function(n){return n.GAME_END="1",n.GAME_PLAYING="2",n.GAME_PAUSE="3",n.PHONE_VIBRATE="4",n}(r||{}),c=function(n){return n.PERFECT="Perfect",n.GREAT="Great",n.GOOD="Good",n.COOL="Cool",n.MISS="Miss",n}(c||{}),s=n("ToyControlInterface",function(){function n(){}return n.init=function(){"undefined"!=typeof window&&window.unityCallJsFunc?(this.isEnabled=!0,console.log("[ToyControlInterface] 玩具控制接口已就绪")):console.log("[ToyControlInterface] 玩具控制接口不可用（非Unity环境或接口未注入）")},n.callUnityInterface=function(n,t){if(this.isEnabled&&window.unityCallJsFunc){var e={type:n,point_score:t},o=JSON.stringify(e);try{window.unityCallJsFunc(o),console.log("[ToyControlInterface] 调用Unity接口: "+o)}catch(n){console.error("[ToyControlInterface] 调用Unity接口失败:",n)}}},n.mapSpeedToIntensity=function(n){var t=l;return n>=t.perfectSpeed?c.PERFECT:n>=t.greatSpeed?c.GREAT:n>=t.goodSpeed?c.GOOD:n>=t.coolSpeed?c.COOL:c.MISS},n.onComboChange=function(n,t){if(this.isEnabled){var e=this.mapSpeedToIntensity(t);this.currentIntensity=e,console.log("[ToyControlInterface] 连击"+n+"次，速度"+t.toFixed(1)+"/秒，强度="+e),e===c.MISS?this.callUnityInterface(r.GAME_PAUSE,e):this.callUnityInterface(r.GAME_PLAYING,e)}},n.onComboStop=function(){this.isEnabled&&(this.currentIntensity=null,console.log("[ToyControlInterface] 连击中断，停止振动"),this.callUnityInterface(r.GAME_PLAYING,c.MISS))},n.onGameStart=function(){this.isEnabled&&(console.log("[ToyControlInterface] 游戏开始"),this.currentIntensity=null,this.callUnityInterface(r.GAME_PLAYING,c.MISS))},n.onGamePause=function(){this.isEnabled&&(console.log("[ToyControlInterface] 游戏暂停"),this.currentIntensity=null,this.callUnityInterface(r.GAME_PAUSE,c.MISS))},n.onGameEnd=function(){this.isEnabled&&(console.log("[ToyControlInterface] 游戏结束"),this.currentIntensity=null,this.callUnityInterface(r.GAME_END,c.MISS))},n.setEnabled=function(n){this.isEnabled=n&&"undefined"!=typeof window&&!!window.unityCallJsFunc},n.vibratePhone=function(){if(this.isEnabled){var n=o.currentTime;n-this.lastPhoneVibrateTime<this.PHONE_VIBRATE_DURATION||(this.lastPhoneVibrateTime=n,this.callUnityInterface(r.PHONE_VIBRATE,c.MISS),i("[ToyControlInterface] 触发手机震动 500ms"))}},t(n,null,[{key:"enabled",get:function(){return this.isEnabled}}]),n}());s.isEnabled=!1,s.currentIntensity=null,s.PHONE_VIBRATE_DURATION=.2,s.lastPhoneVibrateTime=0,e._RF.pop()}}}));

System.register("chunks:///_virtual/VibrationConfig.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"90facC6rG9IaYedpqHwKl45","VibrationConfig",void 0);var t=e("VibrationConfig",(function(){this.perfectSpeed=10,this.greatSpeed=6,this.goodSpeed=3,this.coolSpeed=1}));e("vibrationConfig",new t);i._RF.pop()}}}));

System.register("chunks:///_virtual/VibrationManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ToyControlInterface.ts"],(function(n){var i,t,e;return{setters:[function(n){i=n.createClass},function(n){t=n.cclegacy},function(n){e=n.ToyControlInterface}],execute:function(){t._RF.push({},"e1a2bPE1eZH+Imrze8BI0Vn","VibrationManager",void 0),n("VibrationManager",function(){function n(){}return n.init=function(){this.initialized||(this.initialized=!0,console.log("[VibrationManager] 震动管理器已初始化（使用 Unity 接口）"))},n.vibrate=function(n){this.initialized||this.init(),e.vibratePhone()},n.stop=function(){},i(n,null,[{key:"supported",get:function(){return e.enabled}}]),n}()).initialized=!1,t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});