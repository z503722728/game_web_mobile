System.register("chunks:///_virtual/CommonExport.ts",["cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs","./VibrationManager.ts","./ToyControlInterface.ts"],(function(n){var o;return{setters:[function(t){o=t.cclegacy,n("cc",t)},function(o){n("drongoCC",o)},function(o){n("fgui",o)},function(o){n("drongoGui",o)},function(o){n("VibrationManager",o.VibrationManager)},function(o){n("ToyControlInterface",o.ToyControlInterface)}],execute:function(){o._RF.push({},"2a54bPglDFEaKMITwv2aDNG","CommonExport",void 0),o._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigBase.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6aa16Nf6rJP87ezxWaLdhoO","ConfigBase",void 0);t("default",function(){function t(){}return t.prototype.init=function(t){var e=this;t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.hasOwnProperty(n)&&(e[n]=t[n])}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs"],(function(n){var e,t,r,s,i,o,a,u,c;return{setters:[function(n){e=n.inheritsLoose,t=n.createForOfIteratorHelperLoose,r=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){i=n.cclegacy,o=n.JsonAsset},function(n){a=n.autoBindToWindow,u=n.instance_base,c=n.asset}],execute:function(){var f;i._RF.push({},"ab49fwHf11ArqXDrPGKAbkd","ConfigMgr",void 0);var g=a(f=function(n){function i(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))||this).configs=new Map,e.configAssets=new Map,e}e(i,n);var a=i.prototype;return a.loadConfig=function(){var n=r(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.name,!this.configs.has(t)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,c.get("Config/"+t,o,null);case 5:r=n.sent,this.initConfig(e,r);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.initConfig=function(n,e){var t=n.name,r=new Map;for(var s in e.json){var i=e.json[s],o=new n;o.init(i),r.set(parseInt(s),o)}e.decRef(),this.configs.set(t,r)},a.initConfigs=function(){var n=r(s().mark((function n(e){var r,i,a,u,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.get_dir(e,o,null);case 2:for(r=n.sent,i=t(r);!(a=i()).done;)u=a.value,f=u.name.replace(".json",""),this.configAssets.set(f,u);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),a.getConfig=function(n,e){var t=n.name,r=this.configAssets.get(t);r&&(this.initConfig(n,r),this.configAssets.delete(t));var s=this.configs.get(t);return s?s.get(e):null},a.getAllConfigs=function(n){var e=n.name,t=this.configAssets.get(e);t&&(this.initConfig(n,t),this.configAssets.delete(e));var r=this.configs.get(e);return r||null},a.queryOne=function(n,e){for(var r,s=this.getAllConfigs(n),i=t(s.values());!(r=i()).done;){var o=r.value;if(e(o))return o}return null},a.queryAll=function(n,e){for(var r,s=this.getAllConfigs(n),i=[],o=t(s.values());!(r=o()).done;){var a=r.value;e(a)&&i.push(a)}return i},i}(u))||f;n("configMgr",g.instance());i._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Area_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Area.ts"],(function(e){var t,n,o,i,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.addLogic,i=e.GUILogicBase},function(e){r=e.default}],execute:function(){var u;n._RF.push({},"2719erLKBNHOIOaqt72NNEV","Game_Area_Logic",void 0);e("default",o(r)(u=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.onLoad=function(){},n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Area.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var n,t,r,o,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){r=e.UIPackage,o=e.GComponent},function(e){c=e.vm}],execute:function(){var i,u;t._RF.push({},"14282Nu/MlOFKSnZ1ZP2DnK","Game_Area",void 0);e("default",c(((u=function(e){function t(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e.call.apply(e,[this].concat(r))||this).m_bg=void 0,n}return n(t,e),t.createInstance=function(){return r.createObject("Game","Area")},t.prototype.onConstruct=function(){this.m_bg=this.getChild("bg")},t}(o)).URL="ui://6gpz43l1e0zeq",u.Dependencies=["Game"],i=u))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Bubbble_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_Bubbble.ts"],(function(t){var e,n,a,i,o,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t.tween,i=t.Vec3},function(t){o=t.GUILogicBase,s=t.addLogic},function(t){c=t.default}],execute:function(){var h;n._RF.push({},"308c3grMC5EQZ9pIORNHPY8","Game_Bubbble_Logic",void 0);t("default",s(c)(h=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).lastState=0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.UI.m_baoZha.visible=!1,this.lastState=this.UI.m_c1.selectedIndex,this.UI.m_c1.onChanged(this.onStateChanged,this)},o.onDestroy=function(){t.prototype.onDestroy.call(this),this.UI.m_c1.offChanged(this.onStateChanged,this)},o.onStateChanged=function(){var t=this.UI.m_c1.selectedIndex;0===this.lastState&&t>0&&this.playPopAnimation(),this.lastState=t},o.playPopAnimation=function(){var t=this;this.UI.m_baoZha.visible=!0,this.UI.m_baoZha.alpha=1;var e=this.UI.m_baoZha.node;e.setScale(.5,.5,1),a(e).to(.15,{scale:new i(1.2,1.2,1)},{easing:"sineOut"}).to(.1,{scale:new i(0,0,1)},{easing:"sineIn"}).call((function(){t.UI.m_baoZha.visible=!1})).start()},n}(o))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_Bubbble.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,o,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.UIPackage,c=e.GComponent},function(e){i=e.vm}],execute:function(){var r,a;n._RF.push({},"a37d3oxQ5NFRLxjx9QM0o88","Game_Bubbble",void 0);e("default",i(((a=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).m_c1=void 0,t.m_baoZha=void 0,t}return t(n,e),n.createInstance=function(){return o.createObject("Game","Bubbble")},n.prototype.onConstruct=function(){this.m_c1=this.getController("c1"),this.m_baoZha=this.getChild("baoZha")},n}(c)).URL="ui://6gpz43l1e0zeo",a.Dependencies=["Game"],r=a))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GamePage_Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./Game_GamePage.ts","./Game_Bubbble.ts","./VibrationManager.ts","./ToyControlInterface.ts","./fairygui.mjs","./drongo-cc.mjs"],(function(t){var i,e,s,o,n,a,h,l,u,b,r,c,m,g,I,d;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t.tween,o=t.Vec3,n=t.view},function(t){a=t.addLogic,h=t.GUILogicBase},function(t){l=t.default},function(t){u=t.default},function(t){b=t.VibrationManager},function(t){r=t.ToyControlInterface},function(t){c=t.GRoot,m=t.UIPackage},function(t){g=t.TickerManager,I=t.log,d=t.Timer}],execute:function(){var p;e._RF.push({},"02252IqFLxL2LbHXhLw4tqp","Game_GamePage_Logic",void 0);t("default",a(l)(p=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this).COLS=9,i.ROWS=10,i.PADDING=20,i.SPACING=5,i.COMBO_TIMEOUT=1,i.bubbleWidth=0,i.bubbleHeight=0,i.bubbles=[],i.poppedCount=0,i.comboCount=0,i.lastClickTime=0,i.comboActive=!1,i.goInitialY=0,i.progressObj={value:0},i}i(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;b.init(),this.adaptBackgroundSize(),this.UI.m_tiShi.selectedIndex=0,this.UI.m_progress.value=0,this.UI.m_num.visible=!1,this.UI.m_Go.visible=!0,this.UI.m_Go.alpha=1,this.UI.m_tishiImg.visible=!1,this.UI.m_tishiImg.alpha=0,g.callNextFrame((function(){t.startGoIdleAnimation()}),this),this.initBubbleGrid(),this._log.log("游戏初始化完成")},a.startGoIdleAnimation=function(){var t=this.UI.m_Go.node;s(t).stop(),0===this.goInitialY&&(this.goInitialY=t.position.y),t.setScale(1,1,1);var i=t.position.x;s(t).to(1.2,{scale:new o(1.05,1.05,1),position:new o(i,this.goInitialY+5,0)},{easing:"sineInOut"}).to(1.2,{scale:new o(1,1,1),position:new o(i,this.goInitialY,0)},{easing:"sineInOut"}).union().repeatForever().start()},a.stopGoIdleAnimation=function(){var t=this.UI.m_Go.node;s(t).stop(),t.setScale(1,1,1)},a.adaptBackgroundSize=function(){if(this.UI.m_bg)try{var t=c.inst,i=t.width,e=t.height,s=n.getDesignResolutionSize(),o=n.getVisibleSize();I("[背景适配] FairyGUI信息:\n\t\t\t\tFGUI根节点尺寸: "+i+" x "+e+"\n\t\t\t\t设计分辨率: "+s.width+" x "+s.height+"\n\t\t\t\t屏幕尺寸: "+o.width+" x "+o.height);var a=i/s.width,h=e/s.height;this.UI.m_bg.setScale(a,h),I("[背景适配] 完成:\n\t\t\t\t宽度缩放: "+a.toFixed(3)+"\n\t\t\t\t高度缩放: "+h.toFixed(3)+"\n\t\t\t\t最终背景尺寸: "+(s.width*a).toFixed(1)+" x "+(s.height*h).toFixed(1))}catch(t){this._log.log("背景适配失败，回退到基础适配:",t);var l=n.getVisibleSize(),u=n.getDesignResolutionSize(),b=l.width/u.width,r=l.height/u.height;this.UI.m_bg.setScale(b,r)}else this._log.log("m_bg未设置，跳过背景适配")},a.initBubbleGrid=function(){var t=this;this.UI.m_BubbleArea.removeChildren(),this.bubbles=[],this.calculateBubbleSize();for(var i=0;i<this.ROWS;i++)for(var e=function(){var e=u.createInstance(),o=t.PADDING+s*(t.bubbleWidth+t.SPACING),n=t.PADDING+i*(t.bubbleHeight+t.SPACING);e.setPosition(o,n),e.setSize(t.bubbleWidth,t.bubbleHeight),t.UI.m_BubbleArea.addChild(e),t.bubbles.push(e),e.onClick((function(){return t.onBubbleClick(e)}),t)},s=0;s<this.COLS;s++)e();g.callNextFrame((function(){t.centerBubbleArea()}),this),this._log.log("泡泡网格初始化完成: "+this.COLS+"x"+this.ROWS+" = "+this.bubbles.length+"个, 气泡尺寸: "+this.bubbleWidth.toFixed(1)+"x"+this.bubbleHeight.toFixed(1))},a.calculateBubbleSize=function(){var t=this.UI.m_BubbleArea,i=t.width-2*this.PADDING,e=t.height-2*this.PADDING;this.bubbleWidth=(i-(this.COLS-1)*this.SPACING)/this.COLS,this.bubbleHeight=(e-(this.ROWS-1)*this.SPACING)/this.ROWS,I("[气泡布局] 自适应计算:\n\t\t\t容器尺寸: "+t.width+"x"+t.height+"\n\t\t\t可用空间: "+i+"x"+e+"\n\t\t\t内间距(padding): "+this.PADDING+"\n\t\t\t气泡间距(spacing): "+this.SPACING+"\n\t\t\t气泡尺寸: "+this.bubbleWidth.toFixed(1)+"x"+this.bubbleHeight.toFixed(1))},a.centerBubbleArea=function(){var t=this.UI.m_BubbleArea,i=t.parent;if(i){var e=(i.width-t.width)/2;t.x=e,I("[气泡区域] 左右居中: x="+e.toFixed(1)+", 父容器宽度="+i.width+", 区域宽度="+t.width)}},a.onBubbleClick=function(t){var i=this;if(0===t.m_c1.selectedIndex){var e=Math.floor(3*Math.random())+1;t.m_c1.selectedIndex=e,this.playBubblePopSound(),b.vibrate(50),this.poppedCount++,this.updateProgress(),this.handleCombo(),this.poppedCount>=this.bubbles.length&&this.scheduleOnce((function(){i.refreshPage()}),.5),r.onComboChange(this.comboCount,this.getComboSpeed())}},a.playBubblePopSound=function(){try{var t=m.getByName("Game").getItemAssetByName("bubble-pop");t&&c.inst.playOneShotSound(t)}catch(t){this._log.log("播放音效失败:",t)}},a.updateProgress=function(){var t=this,i=this.poppedCount/this.bubbles.length*100;s(this.progressObj).stop(),s(this.progressObj).to(.3,{value:i},{easing:"sineOut",onUpdate:function(){t.UI.m_progress.value=t.progressObj.value}}).start()},a.update=function(t){this.comboActive&&(d.currentTime-this.lastClickTime>this.COMBO_TIMEOUT&&(this.hideComboUI(),this.comboActive=!1,r.onComboStop()))},a.handleCombo=function(){var t=d.currentTime;t-this.lastClickTime<this.COMBO_TIMEOUT&&this.lastClickTime>0?this.comboCount++:(this.comboCount=1,this.showComboUI()),this.lastClickTime=t,this.comboActive=!0,this.updateComboDisplay()},a.updateComboDisplay=function(){this.UI.m_num.text="x "+this.comboCount,this.UI.m_num.visible=!0;var t=this.UI.m_num.node;t.setScale(1.5,1.5,1),s(t).to(.2,{scale:new o(1,1,1)},{easing:"backOut"}).start(),this.playTishiAnimation();this.getComboSpeed()},a.playTishiAnimation=function(){var t=this.UI.m_tishiImg.node;s(t).stop();var i=this.getComboSpeed(),e=1.2,n=.15;i>=10?(e=1.4,n=.12):i>=5&&(e=1.3,n=.13),t.setScale(1,1,1),s(t).to(n,{scale:new o(e,e,1),eulerAngles:new o(0,0,5)},{easing:"sineOut"}).to(n,{scale:new o(1,1,1),eulerAngles:new o(0,0,-5)},{easing:"sineIn"}).to(.5*n,{eulerAngles:new o(0,0,0)},{easing:"sineOut"}).start()},a.getComboSpeed=function(){return this.comboCount},a.showComboUI=function(){var t=this;this.UI.m_tiShi.selectedIndex=1,this.UI.m_num.visible=!0,this.stopGoIdleAnimation();var i=this.UI.m_Go.node;s(i).stop(),s(i).to(.2,{scale:new o(.8,.8,1)},{easing:"sineIn"}).call((function(){t.UI.m_Go.visible=!1})).start(),s(this.UI.m_Go).to(.2,{alpha:0},{easing:"sineIn"}).start(),this.UI.m_tishiImg.visible=!0,this.UI.m_tishiImg.alpha=0;var e=this.UI.m_tishiImg.node;e.setScale(.8,.8,1),s(this.UI.m_tishiImg).to(.3,{alpha:1},{easing:"sineOut"}).start(),s(e).to(.3,{scale:new o(1,1,1)},{easing:"backOut"}).start()},a.hideComboUI=function(){var t=this;this.UI.m_tiShi.selectedIndex=0,this.UI.m_num.visible=!1,this.comboCount=0;var i=this.UI.m_tishiImg.node;s(i).stop(),s(this.UI.m_tishiImg).to(.2,{alpha:0},{easing:"sineIn"}).call((function(){t.UI.m_tishiImg.visible=!1})).start(),s(i).to(.2,{scale:new o(.8,.8,1)},{easing:"sineIn"}).start(),this.UI.m_Go.visible=!0,this.UI.m_Go.alpha=0;var e=this.UI.m_Go.node;e.setScale(.8,.8,1),s(this.UI.m_Go).to(.3,{alpha:1},{easing:"sineOut"}).start(),s(e).to(.3,{scale:new o(1,1,1)},{easing:"backOut"}).call((function(){t.startGoIdleAnimation()})).start()},a.refreshPage=function(){var t=this,i=this.UI.m_BubbleArea,e=i.node;i.x;s(e).to(.3,{position:new o(-i.width,e.position.y,0)},{easing:"sineIn"}).call((function(){t.resetAllBubbles(),t.poppedCount=0,t.progressObj.value=0,t.UI.m_progress.value=0,t.centerBubbleArea();var n=i.x;e.setPosition(i.width,e.position.y,0),s(e).to(.3,{position:new o(n,e.position.y,0)},{easing:"sineOut"}).start()})).start(),this._log.log("页面刷新")},a.resetAllBubbles=function(){this.bubbles.forEach((function(t){t.m_c1.selectedIndex=0}))},e}(h))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game_GamePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fairygui.mjs","./drongo-gui.mjs"],(function(t){var e,i,n,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.UIPackage,o=t.GComponent},function(t){s=t.vm}],execute:function(){var r,u;i._RF.push({},"8b539gX39lFDYSug9u4/3P9","Game_GamePage",void 0);t("default",s(((u=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).m_tiShi=void 0,e.m_bg=void 0,e.m_BubbleArea=void 0,e.m_progress=void 0,e.m_num=void 0,e.m_Go=void 0,e.m_tishiImg=void 0,e}return e(i,t),i.createInstance=function(){return n.createObject("Game","GamePage")},i.prototype.onConstruct=function(){this.m_tiShi=this.getController("tiShi"),this.m_bg=this.getChild("bg"),this.m_BubbleArea=this.getChild("BubbleArea"),this.m_progress=this.getChild("progress"),this.m_num=this.getChild("num"),this.m_Go=this.getChild("Go"),this.m_tishiImg=this.getChild("tishiImg")},i}(o)).URL="ui://6gpz43l1e0zek",u.Dependencies=["Game"],r=u))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameBinder.ts",["cc","./drongo-gui.mjs","./fairygui.mjs","./Game_GamePage.ts","./Game_Bubbble.ts","./Game_Area.ts"],(function(e){var t,n,i,u,o,c;return{setters:[function(e){t=e.cclegacy},function(e){n=e.registerBinder},function(e){i=e.UIObjectFactory},function(e){u=e.default},function(e){o=e.default},function(e){c=e.default}],execute:function(){var r;t._RF.push({},"602edeDLsJKn6uC1dZlW7SH","GameBinder",void 0);e("default",n(r=function(){function e(){}return e.prototype.bindAll=function(){i.setExtension(u.URL,u),i.setExtension(o.URL,o),i.setExtension(c.URL,c)},e}())||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonExport.ts","./ConfigBase.ts","./ConfigMgr.ts","./PoolMgr.ts","./ToyControlInterface.ts","./VibrationManager.ts","./StartView.ts","./GameBinder.ts","./Game_GamePage.ts","./Game_GamePage_Logic.ts","./Game_Area.ts","./Game_Area_Logic.ts","./Game_Bubbble.ts","./Game_Bubbble_Logic.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-cc.mjs","./fairygui.mjs","./drongo-gui.mjs"],(function(e){var t,n,r,o,a,i,s,c,u,l,f,p,h,b;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.instantiate,i=e.Prefab},function(e){s=e.PoolBuilder,c=e.instance_base,u=e.error,l=e.asset},function(e){f=e.GTextField,p=e.AutoSizeType,h=e.UIPackage},function(e){b=e.GUIManager}],execute:function(){o._RF.push({},"04672eWqVFIKJiVK6TVkrA3","PoolMgr",void 0);e("objPoolMgr",function(e){function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._prefabpools=new Map,t._gobjpools=new Map,t._txtPool=null,t}t(o,e);var c=o.prototype;return c.getPrefabPool=function(){var e=n(r().mark((function e(t,o){var c,u,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=""+o+t,this._prefabpools.has(c)){e.next=7;break}return u=null,e.next=5,s().create(n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=4;break}return e.next=3,l.get(t,i,null,{bundle_s:o});case 3:u=e.sent;case 4:return e.abrupt("return",a(u));case 5:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent=null,e.active=!0,e})).clear((function(e){var t;e.forEach((function(e){e.destroy()})),null==(t=u)||t.decRef(),u=null})).initialSize(5).maxSize(50).buildAsync();case 5:f=e.sent,this._prefabpools.set(c,f);case 7:return e.abrupt("return",this._prefabpools.get(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getGobjPool=function(){var e=n(r().mark((function e(t,o){var a,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=""+t+o,this._gobjpools.has(a)){e.next=7;break}return i=null,e.next=5,s().create(n(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=7;break}if(i=h.getByName(t)){e.next=6;break}return e.next=5,b.loadPackage(t);case 5:i=e.sent;case 6:b.setPackageRefCount(t);case 7:return(n=i.createObject(o))||u("create gobj "+t+"/"+o+" failed,请检查资源是否存在"),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).reset((function(e){return e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()})),b.setPackageRefCount(t,-1),i=null})).initialSize(5).maxSize(50).buildAsync();case 5:c=e.sent,this._gobjpools.set(a,c);case 7:return e.abrupt("return",this._gobjpools.get(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),c.getTxtPool=function(){return this._txtPool||(this._txtPool=s().create((function(){return new f})).reset((function(e){return e.fontSize=20,e.text="",e.setPivot(.5,1,!0),e.autoSize=p.Both,e.parent?e.removeFromParent():e.node.parent=null,e.visible=!0,e})).clear((function(e){e.forEach((function(e){e.dispose()}))})).initialSize(5).maxSize(100).buildSync()),this._txtPool},c.clear=function(){this._prefabpools.forEach((function(e){e.clear(),e.destroy()})),this._prefabpools.clear(),this._gobjpools.forEach((function(e){e.clear(),e.destroy()})),this._gobjpools.clear(),this._txtPool&&(this._txtPool.clear(),this._txtPool.destroy(),this._txtPool=null)},o}(c).instance());o._RF.pop()}}}));

System.register("chunks:///_virtual/StartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./drongo-gui.mjs","./CommonExport.ts","./fairygui.mjs","./drongo-cc.mjs","./Game_GamePage.ts"],(function(e){var t,r,o,n,i,a,s,l,c,u,g,p,h,d,b,f,v,m,y,w,B,x,I,S,G,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.ProgressBar,g=e.Node,p=e.color,h=e.view,d=e.AudioSourceComponent,b=e.tween,f=e.Component},function(e){v=e.GUIManager,m=e.AllBinder},null,function(e){y=e.UIConfig,w=e.registerFont,B=e.GRoot,x=e.UIPackage},function(e){I=e.logConfig,S=e.LogLevel,G=e.log},function(e){z=e.default}],execute:function(){var F,j,C,P,k,U,L,M;s._RF.push({},"b717ey19TVBBpBqTI0xPCo1","StartView",void 0);var O=l.ccclass,V=l.property;e("default",(F=V(c),j=V(u),C=V(g),O((U=t((k=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"label",U,n(t)),o(t,"progressBar",L,n(t)),o(t,"bg",M,n(t)),t.progressObj={value:0},t}r(t,e);var s=t.prototype;return s.onLoad=function(){y.buttonSoundVolumeScale=1,y.bringWindowToFrontOnClick=!1,w("Inter-BoldItalic"),y.defaultFont="Inter-BoldItalic",y.modalLayerColor=p(0,0,0,100),this.progressBar.progress=0,this.label.string="0%",this.progressObj.value=0,I.level_n=S.none},s.adaptBackgroundSize=function(){if(this.bg)try{var e=B.inst,t=e.width,r=e.height,o=h.getDesignResolutionSize(),n=h.getVisibleSize();G("FairyGUI适配信息:\n                FGUI根节点尺寸: "+t+" x "+r+"\n                设计分辨率: "+o.width+" x "+o.height+"\n                屏幕尺寸: "+n.width+" x "+n.height);var i=t/o.width,a=r/o.height;this.bg.setScale(i,a),G("背景适配完成:\n                宽度缩放: "+i.toFixed(3)+"\n                高度缩放: "+a.toFixed(3)+"\n                最终背景尺寸: "+(o.width*i).toFixed(1)+" x "+(o.height*a).toFixed(1))}catch(e){console.error("背景适配失败，回退到基础适配:",e);var s=h.getVisibleSize(),l=h.getDesignResolutionSize(),c=s.width/l.width,u=s.height/l.height;this.bg.setScale(c,u)}else console.warn("bg节点未设置，跳过背景适配")},s.playBGM=function(e,t,r){var o=x.getByName(t).getItemAssetByName(r),n=e.addComponent(d);return n.isValid&&(n.clip=o,n.volume=.7,n.loop=!0,n.play()),n},s.start=function(){var e=i(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.bindAll(),e.prev=1,this.adaptBackgroundSize(),G("开始加载UI包..."),e.next=6,v.loadPackage("Game",(function(e,r){var o=e/r;t.updateProgress(o,"加载UI资源")}));case 6:G("所有资源加载完成！");try{this.playBGM(this.node,"Game","bgm"),G("BGM播放成功")}catch(e){console.warn("BGM播放失败:",e)}v.open(z),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("资源加载失败:",e.t0),v.open(z);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),s.updateProgress=function(e,t){var r=this;b(this.progressObj).stop(),b(this.progressObj).to(.3,{value:e},{onUpdate:function(){r.progressBar.progress=r.progressObj.value;var e=Math.floor(100*r.progressObj.value);r.label.string=e+"%"}}).start()},t}(f)).prototype,"label",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(k.prototype,"progressBar",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(k.prototype,"bg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=k))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/ToyControlInterface.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,t;return{setters:[function(n){o=n.createClass},function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"f2b3cTV5vdIqZq83vEjRWeJ","ToyControlInterface",void 0);var e=n("ToyControlInterface",function(){function n(){}return n.init=function(n){this.sdk=n,this.isEnabled=!!n,this.isEnabled&&console.log("[ToyControlInterface] 玩具控制SDK已初始化")},n.onComboChange=function(n,o){if(this.isEnabled&&this.sdk){var t=0;o>=6?t=100:o>=3?t=80:o>0&&(t=60),console.log("[ToyControlInterface] 连击"+n+"次，速度"+o+"/秒，强度"+t+"%")}},n.onComboStop=function(){this.isEnabled&&this.sdk&&console.log("[ToyControlInterface] 连击中断，停止振动")},n.setEnabled=function(n){this.isEnabled=n&&!!this.sdk},o(n,null,[{key:"enabled",get:function(){return this.isEnabled}}]),n}());e.sdk=null,e.isEnabled=!1,t._RF.pop()}}}));

System.register("chunks:///_virtual/VibrationManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,n;return{setters:[function(i){t=i.createClass},function(i){n=i.cclegacy}],execute:function(){n._RF.push({},"e1a2bPE1eZH+Imrze8BI0Vn","VibrationManager",void 0);var r=i("VibrationManager",function(){function i(){}return i.init=function(){if(!this.initialized){var i=navigator;i.vibrate=i.vibrate||i.webkitVibrate||i.mozVibrate||i.msVibrate,this.isSupported=!!i.vibrate,this.initialized=!0,this.isSupported?console.log("[VibrationManager] 浏览器支持震动API"):console.warn("[VibrationManager] 浏览器不支持震动API，震动功能将被禁用")}},i.vibrate=function(i){if(this.initialized||this.init(),this.isSupported)try{navigator.vibrate(i)}catch(i){console.error("[VibrationManager] 震动失败:",i)}},i.stop=function(){if(this.initialized||this.init(),this.isSupported)try{navigator.vibrate(0)}catch(i){console.error("[VibrationManager] 停止震动失败:",i)}},t(i,null,[{key:"supported",get:function(){return this.initialized||this.init(),this.isSupported}}]),i}());r.isSupported=!1,r.initialized=!1,n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});